/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/chat/[room]";
exports.ids = ["pages/chat/[room]"];
exports.modules = {

/***/ "(pages-dir-node)/./components/ChatHeader.js":
/*!**********************************!*\
  !*** ./components/ChatHeader.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"(pages-dir-node)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(pages-dir-node)/./contexts/AuthContext.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst ChatHeader = ()=>{\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const { logout } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const handleLogout = async ()=>{\n        await logout();\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.HStack, {\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        paddingX: \"$400\",\n        paddingY: \"$300\",\n        className: \"bg-surface-200 backdrop-blur-sm sticky top-0 z-10\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>router.push('/chat'),\n                className: \"bg-transparent border-none cursor-pointer p-0\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                    src: \"/images/logo.png\",\n                    alt: \"Chat App Logo\",\n                    height: 15,\n                    className: \"logo\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                    lineNumber: 27,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                lineNumber: 23,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Root, {\n                \"aria-label\": \"Chat Actions\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.List, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Item, {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Link, {\n                                href: \"/chat\",\n                                \"data-testid\": \"chat-list-link\",\n                                children: \"채팅방 목록\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                                lineNumber: 39,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                            lineNumber: 38,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Item, {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Link, {\n                                href: \"/chat/new\",\n                                \"data-testid\": \"chat-new-link\",\n                                children: \"새 채팅방\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                                lineNumber: 42,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                            lineNumber: 41,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Item, {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Link, {\n                                href: \"/profile\",\n                                \"data-testid\": \"profile-link\",\n                                children: \"프로필\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                                lineNumber: 45,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                            lineNumber: 44,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Item, {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.NavigationMenu.Link, {\n                                onClick: handleLogout,\n                                \"data-testid\": \"logout-link\",\n                                children: \"로그아웃\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                                lineNumber: 48,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                            lineNumber: 47,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                    lineNumber: 37,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n                lineNumber: 36,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatHeader.js\",\n        lineNumber: 15,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatHeader);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQ2hhdEhlYWRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQTBCO0FBQ2M7QUFDZ0I7QUFDUDtBQUVqRCxNQUFNSyxhQUFhO0lBQ2pCLE1BQU1DLFNBQVNMLHNEQUFTQTtJQUN4QixNQUFNLEVBQUVNLE1BQU0sRUFBRSxHQUFHSCw4REFBT0E7SUFFMUIsTUFBTUksZUFBZTtRQUNuQixNQUFNRDtJQUNSO0lBRUEscUJBQ0UsOERBQUNMLGtEQUFNQTtRQUNMTyxnQkFBZTtRQUNmQyxZQUFXO1FBQ1hDLFVBQVM7UUFDVEMsVUFBUztRQUNUQyxXQUFVOzswQkFHViw4REFBQ0M7Z0JBQ0NDLFNBQVMsSUFBTVQsT0FBT1UsSUFBSSxDQUFDO2dCQUMzQkgsV0FBVTswQkFFViw0RUFBQ0k7b0JBQ0NDLEtBQUk7b0JBQ0pDLEtBQUk7b0JBQ0pDLFFBQVE7b0JBQ1JQLFdBQVU7Ozs7Ozs7Ozs7OzBCQUtkLDhEQUFDViwwREFBY0EsQ0FBQ2tCLElBQUk7Z0JBQUNDLGNBQVc7MEJBQzlCLDRFQUFDbkIsMERBQWNBLENBQUNvQixJQUFJOztzQ0FDbEIsOERBQUNwQiwwREFBY0EsQ0FBQ3FCLElBQUk7c0NBQ2xCLDRFQUFDckIsMERBQWNBLENBQUNzQixJQUFJO2dDQUFDQyxNQUFLO2dDQUFRQyxlQUFZOzBDQUFpQjs7Ozs7Ozs7Ozs7c0NBRWpFLDhEQUFDeEIsMERBQWNBLENBQUNxQixJQUFJO3NDQUNsQiw0RUFBQ3JCLDBEQUFjQSxDQUFDc0IsSUFBSTtnQ0FBQ0MsTUFBSztnQ0FBWUMsZUFBWTswQ0FBZ0I7Ozs7Ozs7Ozs7O3NDQUVwRSw4REFBQ3hCLDBEQUFjQSxDQUFDcUIsSUFBSTtzQ0FDbEIsNEVBQUNyQiwwREFBY0EsQ0FBQ3NCLElBQUk7Z0NBQUNDLE1BQUs7Z0NBQVdDLGVBQVk7MENBQWU7Ozs7Ozs7Ozs7O3NDQUVsRSw4REFBQ3hCLDBEQUFjQSxDQUFDcUIsSUFBSTtzQ0FDbEIsNEVBQUNyQiwwREFBY0EsQ0FBQ3NCLElBQUk7Z0NBQUNWLFNBQVNQO2dDQUFjbUIsZUFBWTswQ0FBYzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1sRjtBQUVBLGlFQUFldEIsVUFBVUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvY29tcG9uZW50cy9DaGF0SGVhZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcic7XG5pbXBvcnQgeyBIU3RhY2ssIE5hdmlnYXRpb25NZW51IH0gZnJvbSAnQHZhcG9yLXVpL2NvcmUnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuXG5jb25zdCBDaGF0SGVhZGVyID0gKCkgPT4ge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgeyBsb2dvdXQgfSA9IHVzZUF1dGgoKTtcblxuICBjb25zdCBoYW5kbGVMb2dvdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbG9nb3V0KCk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8SFN0YWNrXG4gICAgICBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWJldHdlZW5cIlxuICAgICAgYWxpZ25JdGVtcz1cImNlbnRlclwiXG4gICAgICBwYWRkaW5nWD1cIiQ0MDBcIlxuICAgICAgcGFkZGluZ1k9XCIkMzAwXCJcbiAgICAgIGNsYXNzTmFtZT1cImJnLXN1cmZhY2UtMjAwIGJhY2tkcm9wLWJsdXItc20gc3RpY2t5IHRvcC0wIHotMTBcIlxuICAgID5cbiAgICAgIHsvKiDsmbzsqr06IOuhnOqzoCAqL31cbiAgICAgIDxidXR0b25cbiAgICAgICAgb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2goJy9jaGF0Jyl9XG4gICAgICAgIGNsYXNzTmFtZT1cImJnLXRyYW5zcGFyZW50IGJvcmRlci1ub25lIGN1cnNvci1wb2ludGVyIHAtMFwiXG4gICAgICA+XG4gICAgICAgIDxpbWdcbiAgICAgICAgICBzcmM9XCIvaW1hZ2VzL2xvZ28ucG5nXCJcbiAgICAgICAgICBhbHQ9XCJDaGF0IEFwcCBMb2dvXCJcbiAgICAgICAgICBoZWlnaHQ9ezE1fVxuICAgICAgICAgIGNsYXNzTmFtZT1cImxvZ29cIlxuICAgICAgICAvPlxuICAgICAgPC9idXR0b24+XG5cbiAgICAgIHsvKiDsmKTrpbjsqr06IOuEpOu5hOqyjOydtOyFmCDrqZTribQgKi99XG4gICAgICA8TmF2aWdhdGlvbk1lbnUuUm9vdCBhcmlhLWxhYmVsPVwiQ2hhdCBBY3Rpb25zXCI+XG4gICAgICAgIDxOYXZpZ2F0aW9uTWVudS5MaXN0PlxuICAgICAgICAgIDxOYXZpZ2F0aW9uTWVudS5JdGVtPlxuICAgICAgICAgICAgPE5hdmlnYXRpb25NZW51LkxpbmsgaHJlZj1cIi9jaGF0XCIgZGF0YS10ZXN0aWQ9XCJjaGF0LWxpc3QtbGlua1wiPuyxhO2MheuwqSDrqqnroZ08L05hdmlnYXRpb25NZW51Lkxpbms+XG4gICAgICAgICAgPC9OYXZpZ2F0aW9uTWVudS5JdGVtPlxuICAgICAgICAgIDxOYXZpZ2F0aW9uTWVudS5JdGVtPlxuICAgICAgICAgICAgPE5hdmlnYXRpb25NZW51LkxpbmsgaHJlZj1cIi9jaGF0L25ld1wiIGRhdGEtdGVzdGlkPVwiY2hhdC1uZXctbGlua1wiPuyDiCDssYTtjIXrsKk8L05hdmlnYXRpb25NZW51Lkxpbms+XG4gICAgICAgICAgPC9OYXZpZ2F0aW9uTWVudS5JdGVtPlxuICAgICAgICAgIDxOYXZpZ2F0aW9uTWVudS5JdGVtPlxuICAgICAgICAgICAgPE5hdmlnYXRpb25NZW51LkxpbmsgaHJlZj1cIi9wcm9maWxlXCIgZGF0YS10ZXN0aWQ9XCJwcm9maWxlLWxpbmtcIj7tlITroZztlYQ8L05hdmlnYXRpb25NZW51Lkxpbms+XG4gICAgICAgICAgPC9OYXZpZ2F0aW9uTWVudS5JdGVtPlxuICAgICAgICAgIDxOYXZpZ2F0aW9uTWVudS5JdGVtPlxuICAgICAgICAgICAgPE5hdmlnYXRpb25NZW51Lkxpbmsgb25DbGljaz17aGFuZGxlTG9nb3V0fSBkYXRhLXRlc3RpZD1cImxvZ291dC1saW5rXCI+66Gc6re47JWE7JuDPC9OYXZpZ2F0aW9uTWVudS5MaW5rPlxuICAgICAgICAgIDwvTmF2aWdhdGlvbk1lbnUuSXRlbT5cbiAgICAgICAgPC9OYXZpZ2F0aW9uTWVudS5MaXN0PlxuICAgICAgPC9OYXZpZ2F0aW9uTWVudS5Sb290PlxuICAgIDwvSFN0YWNrPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdEhlYWRlcjtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVJvdXRlciIsIkhTdGFjayIsIk5hdmlnYXRpb25NZW51IiwidXNlQXV0aCIsIkNoYXRIZWFkZXIiLCJyb3V0ZXIiLCJsb2dvdXQiLCJoYW5kbGVMb2dvdXQiLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJwYWRkaW5nWCIsInBhZGRpbmdZIiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayIsInB1c2giLCJpbWciLCJzcmMiLCJhbHQiLCJoZWlnaHQiLCJSb290IiwiYXJpYS1sYWJlbCIsIkxpc3QiLCJJdGVtIiwiTGluayIsImhyZWYiLCJkYXRhLXRlc3RpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ChatHeader.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/ChatInput.js":
/*!*********************************!*\
  !*** ./components/ChatInput.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _EmojiPicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EmojiPicker */ \"(pages-dir-node)/./components/EmojiPicker.js\");\n/* harmony import */ var _MentionDropdown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MentionDropdown */ \"(pages-dir-node)/./components/MentionDropdown.js\");\n/* harmony import */ var _FilePreview__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FilePreview */ \"(pages-dir-node)/./components/FilePreview.js\");\n/* harmony import */ var _services_fileService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/services/fileService */ \"(pages-dir-node)/./services/fileService.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_MentionDropdown__WEBPACK_IMPORTED_MODULE_4__, _FilePreview__WEBPACK_IMPORTED_MODULE_5__, _services_fileService__WEBPACK_IMPORTED_MODULE_6__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__]);\n([_MentionDropdown__WEBPACK_IMPORTED_MODULE_4__, _FilePreview__WEBPACK_IMPORTED_MODULE_5__, _services_fileService__WEBPACK_IMPORTED_MODULE_6__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst ChatInput = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(({ message = '', onMessageChange = ()=>{}, onSubmit = ()=>{}, onEmojiToggle = ()=>{}, onFileSelect = ()=>{}, fileInputRef, disabled = false, uploading: externalUploading = false, showEmojiPicker = false, showMentionList = false, mentionFilter = '', mentionIndex = 0, getFilteredParticipants = ()=>[], setMessage = ()=>{}, setShowEmojiPicker = ()=>{}, setShowMentionList = ()=>{}, setMentionFilter = ()=>{}, setMentionIndex = ()=>{}, room = null // room prop 추가\n }, ref)=>{\n    const emojiPickerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const emojiButtonRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const dropZoneRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const internalInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messageInputRef = ref || internalInputRef;\n    const [files, setFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [uploadProgress, setUploadProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [uploadError, setUploadError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isDragging, setIsDragging] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mentionPosition, setMentionPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        top: 0,\n        left: 0\n    });\n    const submittingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const handleFileValidationAndPreview = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleFileValidationAndPreview]\": async (file)=>{\n            if (!file) return;\n            try {\n                await _services_fileService__WEBPACK_IMPORTED_MODULE_6__[\"default\"].validateFile(file);\n                const filePreview = {\n                    file,\n                    url: URL.createObjectURL(file),\n                    name: file.name,\n                    type: file.type,\n                    size: file.size\n                };\n                setFiles({\n                    \"ChatInput.useCallback[handleFileValidationAndPreview]\": (prev)=>[\n                            ...prev,\n                            filePreview\n                        ]\n                }[\"ChatInput.useCallback[handleFileValidationAndPreview]\"]);\n                setUploadError(null);\n                onFileSelect?.(file);\n            } catch (error) {\n                console.error('File validation error:', error);\n                setUploadError(error.message);\n            } finally{\n                if (fileInputRef?.current) {\n                    fileInputRef.current.value = '';\n                }\n            }\n        }\n    }[\"ChatInput.useCallback[handleFileValidationAndPreview]\"], [\n        onFileSelect\n    ]);\n    const handleFileRemove = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleFileRemove]\": (fileToRemove)=>{\n            setFiles({\n                \"ChatInput.useCallback[handleFileRemove]\": (prev)=>prev.filter({\n                        \"ChatInput.useCallback[handleFileRemove]\": (file)=>file.name !== fileToRemove.name\n                    }[\"ChatInput.useCallback[handleFileRemove]\"])\n            }[\"ChatInput.useCallback[handleFileRemove]\"]);\n            URL.revokeObjectURL(fileToRemove.url);\n            setUploadError(null);\n            setUploadProgress(0);\n        }\n    }[\"ChatInput.useCallback[handleFileRemove]\"], []);\n    const handleFileDrop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleFileDrop]\": async (e)=>{\n            e.preventDefault();\n            e.stopPropagation();\n            setIsDragging(false);\n            const droppedFiles = Array.from(e.dataTransfer.files);\n            if (droppedFiles.length === 0) return;\n            try {\n                await handleFileValidationAndPreview(droppedFiles[0]);\n            } catch (error) {\n                console.error('File drop error:', error);\n            }\n        }\n    }[\"ChatInput.useCallback[handleFileDrop]\"], [\n        handleFileValidationAndPreview\n    ]);\n    const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleSubmit]\": async (e)=>{\n            if (submittingRef.current) return;\n            submittingRef.current = true;\n            e?.preventDefault();\n            try {\n                if (files.length > 0) {\n                    const file = files[0];\n                    if (!file || !file.file) {\n                        throw new Error('파일이 선택되지 않았습니다.');\n                    }\n                    onSubmit({\n                        type: 'file',\n                        content: message.trim(),\n                        fileData: file\n                    });\n                    setMessage('');\n                    setFiles([]);\n                } else if (message.trim()) {\n                    onSubmit({\n                        type: 'text',\n                        content: message.trim()\n                    });\n                    setMessage('');\n                }\n            } catch (error) {\n                console.error('File submit error:', error);\n                setUploadError(error.message);\n            } finally{\n                // 동일 tick 안에서 중복 호출 방지\n                setTimeout({\n                    \"ChatInput.useCallback[handleSubmit]\": ()=>{\n                        submittingRef.current = false;\n                    }\n                }[\"ChatInput.useCallback[handleSubmit]\"], 0);\n            }\n        }\n    }[\"ChatInput.useCallback[handleSubmit]\"], [\n        files,\n        message,\n        onSubmit,\n        setMessage\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ChatInput.useEffect\": ()=>{\n            const handleClickOutside = {\n                \"ChatInput.useEffect.handleClickOutside\": (event)=>{\n                    if (showEmojiPicker && !emojiPickerRef.current?.contains(event.target) && !emojiButtonRef.current?.contains(event.target)) {\n                        setShowEmojiPicker(false);\n                    }\n                }\n            }[\"ChatInput.useEffect.handleClickOutside\"];\n            const handlePaste = {\n                \"ChatInput.useEffect.handlePaste\": async (event)=>{\n                    if (!messageInputRef?.current?.contains(event.target)) return;\n                    const items = event.clipboardData?.items;\n                    if (!items) return;\n                    const fileItem = Array.from(items).find({\n                        \"ChatInput.useEffect.handlePaste.fileItem\": (item)=>item.kind === 'file' && (item.type.startsWith('image/') || item.type.startsWith('video/') || item.type.startsWith('audio/') || item.type === 'application/pdf')\n                    }[\"ChatInput.useEffect.handlePaste.fileItem\"]);\n                    if (!fileItem) return;\n                    const file = fileItem.getAsFile();\n                    if (!file) return;\n                    try {\n                        await handleFileValidationAndPreview(file);\n                        event.preventDefault();\n                    } catch (error) {\n                        console.error('File paste error:', error);\n                    }\n                }\n            }[\"ChatInput.useEffect.handlePaste\"];\n            document.addEventListener('mousedown', handleClickOutside);\n            document.addEventListener('paste', handlePaste);\n            return ({\n                \"ChatInput.useEffect\": ()=>{\n                    document.removeEventListener('mousedown', handleClickOutside);\n                    document.removeEventListener('paste', handlePaste);\n                    files.forEach({\n                        \"ChatInput.useEffect\": (file)=>URL.revokeObjectURL(file.url)\n                    }[\"ChatInput.useEffect\"]);\n                }\n            })[\"ChatInput.useEffect\"];\n        }\n    }[\"ChatInput.useEffect\"], [\n        showEmojiPicker,\n        setShowEmojiPicker,\n        files,\n        messageInputRef,\n        handleFileValidationAndPreview\n    ]);\n    const calculateMentionPosition = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[calculateMentionPosition]\": (textarea, atIndex)=>{\n            // Get all text before @ symbol\n            const textBeforeAt = textarea.value.slice(0, atIndex);\n            const lines = textBeforeAt.split('\\n');\n            const currentLineIndex = lines.length - 1;\n            const currentLineText = lines[currentLineIndex];\n            // Create a hidden div to measure exact text width\n            const measureDiv = document.createElement('div');\n            measureDiv.style.position = 'absolute';\n            measureDiv.style.visibility = 'hidden';\n            measureDiv.style.whiteSpace = 'pre';\n            measureDiv.style.font = window.getComputedStyle(textarea).font;\n            measureDiv.style.fontSize = window.getComputedStyle(textarea).fontSize;\n            measureDiv.style.fontFamily = window.getComputedStyle(textarea).fontFamily;\n            measureDiv.style.fontWeight = window.getComputedStyle(textarea).fontWeight;\n            measureDiv.style.letterSpacing = window.getComputedStyle(textarea).letterSpacing;\n            measureDiv.style.textTransform = window.getComputedStyle(textarea).textTransform;\n            measureDiv.textContent = currentLineText;\n            document.body.appendChild(measureDiv);\n            const textWidth = measureDiv.offsetWidth;\n            document.body.removeChild(measureDiv);\n            // Get textarea position and compute styles\n            const textareaRect = textarea.getBoundingClientRect();\n            const computedStyle = window.getComputedStyle(textarea);\n            const paddingLeft = parseInt(computedStyle.paddingLeft);\n            const paddingTop = parseInt(computedStyle.paddingTop);\n            const lineHeight = parseInt(computedStyle.lineHeight) || parseFloat(computedStyle.fontSize) * 1.5;\n            const scrollTop = textarea.scrollTop;\n            // Calculate exact position of @ symbol\n            let left = textareaRect.left + paddingLeft + textWidth;\n            // Position directly above the @ character (with small gap)\n            let top = textareaRect.top + paddingTop + currentLineIndex * lineHeight - scrollTop;\n            // Ensure dropdown stays within viewport\n            const dropdownWidth = 320; // Approximate width\n            const dropdownHeight = 250; // Approximate height\n            const viewportWidth = window.innerWidth;\n            const viewportHeight = window.innerHeight;\n            // Adjust horizontal position if needed\n            if (left + dropdownWidth > viewportWidth) {\n                left = viewportWidth - dropdownWidth - 10;\n            }\n            if (left < 10) {\n                left = 10;\n            }\n            // Position dropdown 40px lower to be closer to the @ cursor\n            top = top + 40; // Move 40px down from the cursor line\n            // If not enough space above, show below\n            if (top - dropdownHeight < 10) {\n                top = textareaRect.top + paddingTop + (currentLineIndex + 1) * lineHeight - scrollTop + 2;\n            } else {\n                // Show above - adjust top to account for dropdown height\n                top = top - dropdownHeight;\n            }\n            return {\n                top,\n                left\n            };\n        }\n    }[\"ChatInput.useCallback[calculateMentionPosition]\"], []);\n    const handleInputChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleInputChange]\": (e)=>{\n            const value = e.target.value;\n            const cursorPosition = e.target.selectionStart;\n            const textBeforeCursor = value.slice(0, cursorPosition);\n            const lastAtSymbol = textBeforeCursor.lastIndexOf('@');\n            onMessageChange(e);\n            if (lastAtSymbol !== -1) {\n                const textAfterAt = textBeforeCursor.slice(lastAtSymbol + 1);\n                const hasSpaceAfterAt = textAfterAt.includes(' ');\n                if (!hasSpaceAfterAt) {\n                    setMentionFilter(textAfterAt.toLowerCase());\n                    setShowMentionList(true);\n                    setMentionIndex(0);\n                    // Calculate and set mention dropdown position\n                    const position = calculateMentionPosition(e.target, lastAtSymbol);\n                    setMentionPosition(position);\n                    return;\n                }\n            }\n            setShowMentionList(false);\n        }\n    }[\"ChatInput.useCallback[handleInputChange]\"], [\n        onMessageChange,\n        setMentionFilter,\n        setShowMentionList,\n        setMentionIndex,\n        calculateMentionPosition\n    ]);\n    const handleMentionSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleMentionSelect]\": (user)=>{\n            if (!messageInputRef?.current) return;\n            const cursorPosition = messageInputRef.current.selectionStart;\n            const textBeforeCursor = message.slice(0, cursorPosition);\n            const textAfterCursor = message.slice(cursorPosition);\n            const lastAtSymbol = textBeforeCursor.lastIndexOf('@');\n            if (lastAtSymbol !== -1) {\n                const newMessage = message.slice(0, lastAtSymbol) + `@${user.name} ` + textAfterCursor;\n                setMessage(newMessage);\n                setShowMentionList(false);\n                setTimeout({\n                    \"ChatInput.useCallback[handleMentionSelect]\": ()=>{\n                        if (messageInputRef.current) {\n                            const newPosition = lastAtSymbol + user.name.length + 2;\n                            messageInputRef.current.focus();\n                            messageInputRef.current.setSelectionRange(newPosition, newPosition);\n                        }\n                    }\n                }[\"ChatInput.useCallback[handleMentionSelect]\"], 0);\n            }\n        }\n    }[\"ChatInput.useCallback[handleMentionSelect]\"], [\n        message,\n        setMessage,\n        setShowMentionList,\n        messageInputRef\n    ]);\n    const handleKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleKeyDown]\": (e)=>{\n            if (showMentionList) {\n                const participants = getFilteredParticipants(room); // room 객체 전달\n                const participantsCount = participants.length;\n                switch(e.key){\n                    case 'ArrowDown':\n                        e.preventDefault();\n                        setMentionIndex({\n                            \"ChatInput.useCallback[handleKeyDown]\": (prev)=>prev < participantsCount - 1 ? prev + 1 : 0\n                        }[\"ChatInput.useCallback[handleKeyDown]\"]);\n                        break;\n                    case 'ArrowUp':\n                        e.preventDefault();\n                        setMentionIndex({\n                            \"ChatInput.useCallback[handleKeyDown]\": (prev)=>prev > 0 ? prev - 1 : participantsCount - 1\n                        }[\"ChatInput.useCallback[handleKeyDown]\"]);\n                        break;\n                    case 'Tab':\n                    case 'Enter':\n                        e.preventDefault();\n                        if (participantsCount > 0) {\n                            handleMentionSelect(participants[mentionIndex]);\n                        }\n                        break;\n                    case 'Escape':\n                        e.preventDefault();\n                        setShowMentionList(false);\n                        break;\n                    default:\n                        return;\n                }\n            } else if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                if (message.trim() || files.length > 0) {\n                    handleSubmit(e);\n                }\n            } else if (e.key === 'Escape' && showEmojiPicker) {\n                setShowEmojiPicker(false);\n            }\n        }\n    }[\"ChatInput.useCallback[handleKeyDown]\"], [\n        message,\n        files,\n        showMentionList,\n        showEmojiPicker,\n        mentionIndex,\n        getFilteredParticipants,\n        handleMentionSelect,\n        handleSubmit,\n        setMentionIndex,\n        setShowMentionList,\n        setShowEmojiPicker,\n        room // room 의존성 추가\n    ]);\n    const handleEmojiSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[handleEmojiSelect]\": (emoji)=>{\n            if (!messageInputRef?.current) return;\n            const cursorPosition = messageInputRef.current.selectionStart || message.length;\n            const newMessage = message.slice(0, cursorPosition) + emoji.native + message.slice(cursorPosition);\n            setMessage(newMessage);\n            setShowEmojiPicker(false);\n            setTimeout({\n                \"ChatInput.useCallback[handleEmojiSelect]\": ()=>{\n                    if (messageInputRef.current) {\n                        const newCursorPosition = cursorPosition + emoji.native.length;\n                        messageInputRef.current.focus();\n                        messageInputRef.current.setSelectionRange(newCursorPosition, newCursorPosition);\n                    }\n                }\n            }[\"ChatInput.useCallback[handleEmojiSelect]\"], 0);\n        }\n    }[\"ChatInput.useCallback[handleEmojiSelect]\"], [\n        message,\n        setMessage,\n        setShowEmojiPicker,\n        messageInputRef\n    ]);\n    const toggleEmojiPicker = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatInput.useCallback[toggleEmojiPicker]\": ()=>{\n            setShowEmojiPicker({\n                \"ChatInput.useCallback[toggleEmojiPicker]\": (prev)=>!prev\n            }[\"ChatInput.useCallback[toggleEmojiPicker]\"]);\n        }\n    }[\"ChatInput.useCallback[toggleEmojiPicker]\"], [\n        setShowEmojiPicker\n    ]);\n    const isDisabled = disabled || uploading || externalUploading;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Box, {\n                ref: dropZoneRef,\n                className: \"relative\",\n                padding: \"$200 $400\",\n                onDragEnter: (e)=>{\n                    e.preventDefault();\n                    e.stopPropagation();\n                    setIsDragging(true);\n                },\n                onDragLeave: (e)=>{\n                    e.preventDefault();\n                    e.stopPropagation();\n                    setIsDragging(false);\n                },\n                onDragOver: (e)=>{\n                    e.preventDefault();\n                    e.stopPropagation();\n                    setIsDragging(true);\n                },\n                onDrop: handleFileDrop,\n                children: [\n                    files.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Box, {\n                        className: \"absolute bottom-full left-0 right-0 mb-2 z-1000\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FilePreview__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                            files: files,\n                            uploading: uploading,\n                            uploadProgress: uploadProgress,\n                            uploadError: uploadError,\n                            onRemove: handleFileRemove,\n                            onRetry: ()=>setUploadError(null),\n                            showFileName: true,\n                            showFileSize: true,\n                            variant: \"default\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                            lineNumber: 421,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                        lineNumber: 418,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.VStack, {\n                        gap: \"$100\",\n                        width: \"100%\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.VStack, {\n                            gap: \"$025\",\n                            className: \"relative\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n                                    gap: \"$200\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Textarea, {\n                                            ref: messageInputRef,\n                                            value: message,\n                                            onChange: handleInputChange,\n                                            onKeyDown: handleKeyDown,\n                                            placeholder: isDragging ? \"파일을 여기에 놓아주세요.\" : \"메시지를 입력하세요... (@를 입력하여 멘션, Shift + Enter로 줄바꿈)\",\n                                            disabled: isDisabled,\n                                            rows: 1,\n                                            autoComplete: \"off\",\n                                            spellCheck: \"true\",\n                                            size: \"xl\",\n                                            autoResize: true,\n                                            \"data-testid\": \"chat-message-input\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                            lineNumber: 438,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.IconButton, {\n                                            size: \"xl\",\n                                            onClick: handleSubmit,\n                                            disabled: isDisabled || !message.trim() && files.length === 0,\n                                            \"aria-label\": \"메시지 보내기\",\n                                            \"data-testid\": \"chat-send-button\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.SendIcon, {}, void 0, false, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                                lineNumber: 460,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                            lineNumber: 453,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                    lineNumber: 437,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n                                    gap: \"$100\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.IconButton, {\n                                            ref: emojiButtonRef,\n                                            colorPalette: \"contrast\",\n                                            variant: \"ghost\",\n                                            size: \"md\",\n                                            onClick: toggleEmojiPicker,\n                                            disabled: isDisabled,\n                                            \"aria-label\": \"이모티콘\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.LikeIcon, {}, void 0, false, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                                lineNumber: 474,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                            lineNumber: 465,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.IconButton, {\n                                            colorPalette: \"contrast\",\n                                            variant: \"ghost\",\n                                            size: \"md\",\n                                            onClick: ()=>fileInputRef?.current?.click(),\n                                            disabled: isDisabled,\n                                            \"aria-label\": \"파일 첨부\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.AttachFileOutlineIcon, {}, void 0, false, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                                lineNumber: 484,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                            lineNumber: 476,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                    lineNumber: 464,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"file\",\n                                    ref: fileInputRef,\n                                    onChange: (e)=>handleFileValidationAndPreview(e.target.files?.[0]),\n                                    style: {\n                                        display: 'none'\n                                    },\n                                    accept: \"image/*,application/pdf\",\n                                    \"data-testid\": \"file-upload-input\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                    lineNumber: 488,\n                                    columnNumber: 13\n                                }, undefined),\n                                showEmojiPicker && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Box, {\n                                    ref: emojiPickerRef,\n                                    onClick: (e)=>e.stopPropagation(),\n                                    className: \"absolute bottom-full left-0 z-1000\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_EmojiPicker__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                        onSelect: handleEmojiSelect,\n                                        emojiSize: 20,\n                                        emojiButtonSize: 36,\n                                        perLine: 8,\n                                        maxFrequentRows: 4\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                        lineNumber: 503,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                                    lineNumber: 498,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                            lineNumber: 436,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                        lineNumber: 435,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                lineNumber: 396,\n                columnNumber: 7\n            }, undefined),\n            showMentionList && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Box, {\n                className: \"fixed z-9999\",\n                style: {\n                    top: `${mentionPosition.top}px`,\n                    left: `${mentionPosition.left}px`\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MentionDropdown__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    participants: getFilteredParticipants(room),\n                    activeIndex: mentionIndex,\n                    onSelect: handleMentionSelect,\n                    onMouseEnter: (index)=>setMentionIndex(index)\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                    lineNumber: 524,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatInput.js\",\n                lineNumber: 517,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true);\n});\nChatInput.displayName = 'ChatInput';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatInput);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQ2hhdElucHV0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvRjtBQUszRDtBQUNpRTtBQUNsRDtBQUNRO0FBQ1I7QUFDUztBQUVqRCxNQUFNb0IsMEJBQVlmLGlEQUFVQSxDQUFDLENBQUMsRUFDNUJnQixVQUFVLEVBQUUsRUFDWkMsa0JBQWtCLEtBQU8sQ0FBQyxFQUMxQkMsV0FBVyxLQUFPLENBQUMsRUFDbkJDLGdCQUFnQixLQUFPLENBQUMsRUFDeEJDLGVBQWUsS0FBTyxDQUFDLEVBQ3ZCQyxZQUFZLEVBQ1pDLFdBQVcsS0FBSyxFQUNoQkMsV0FBV0Msb0JBQW9CLEtBQUssRUFDcENDLGtCQUFrQixLQUFLLEVBQ3ZCQyxrQkFBa0IsS0FBSyxFQUN2QkMsZ0JBQWdCLEVBQUUsRUFDbEJDLGVBQWUsQ0FBQyxFQUNoQkMsMEJBQTBCLElBQU0sRUFBRSxFQUNsQ0MsYUFBYSxLQUFPLENBQUMsRUFDckJDLHFCQUFxQixLQUFPLENBQUMsRUFDN0JDLHFCQUFxQixLQUFPLENBQUMsRUFDN0JDLG1CQUFtQixLQUFPLENBQUMsRUFDM0JDLGtCQUFrQixLQUFPLENBQUMsRUFDMUJDLE9BQU8sS0FBSyxlQUFlO0FBQWhCLEVBQ1osRUFBRUM7SUFDRCxNQUFNQyxpQkFBaUJ2Qyw2Q0FBTUEsQ0FBQztJQUM5QixNQUFNd0MsaUJBQWlCeEMsNkNBQU1BLENBQUM7SUFDOUIsTUFBTXlDLGNBQWN6Qyw2Q0FBTUEsQ0FBQztJQUMzQixNQUFNMEMsbUJBQW1CMUMsNkNBQU1BLENBQUM7SUFDaEMsTUFBTTJDLGtCQUFrQkwsT0FBT0k7SUFDL0IsTUFBTSxDQUFDRSxPQUFPQyxTQUFTLEdBQUc1QywrQ0FBUUEsQ0FBQyxFQUFFO0lBQ3JDLE1BQU0sQ0FBQ3dCLFdBQVdxQixhQUFhLEdBQUc3QywrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUM4QyxnQkFBZ0JDLGtCQUFrQixHQUFHL0MsK0NBQVFBLENBQUM7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RSxDQUFDLEVBQUU7b0NBQ25FNEUsT0FBTzt3Q0FBRXVGLFNBQVM7b0NBQU87b0NBQ3pCQyxRQUFPO29DQUNQUCxlQUFZOzs7Ozs7Z0NBR2I5SyxpQ0FDQyw4REFBQ2pCLCtDQUFHQTtvQ0FDRjRCLEtBQUtDO29DQUNMbUssU0FBUyxDQUFDNUgsSUFBTUEsRUFBRUUsZUFBZTtvQ0FDakNxRyxXQUFVOzhDQUVWLDRFQUFDeEssb0RBQVdBO3dDQUNWb00sVUFBVWxDO3dDQUNWbUMsV0FBVzt3Q0FDWEMsaUJBQWlCO3dDQUNqQkMsU0FBUzt3Q0FDVEMsaUJBQWlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBUTVCekwsaUNBQ0MsOERBQUNsQiwrQ0FBR0E7Z0JBQ0YySyxXQUFVO2dCQUNWN0QsT0FBTztvQkFDTGpFLEtBQUssR0FBR0YsZ0JBQWdCRSxHQUFHLENBQUMsRUFBRSxDQUFDO29CQUMvQkMsTUFBTSxHQUFHSCxnQkFBZ0JHLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ25DOzBCQUVBLDRFQUFDMUMsd0RBQWVBO29CQUNkNkosY0FBYzVJLHdCQUF3Qk07b0JBQ3RDaUwsYUFBYXhMO29CQUNibUwsVUFBVTlDO29CQUNWb0QsY0FBYyxDQUFDQyxRQUFVcEwsZ0JBQWdCb0w7Ozs7Ozs7Ozs7Ozs7QUFNckQ7QUFFQXZNLFVBQVV3TSxXQUFXLEdBQUc7QUFFeEIsaUVBQWV4TSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb21wb25lbnRzL0NoYXRJbnB1dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgZm9yd2FyZFJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFxuICBMaWtlSWNvbixcbiAgQXR0YWNoRmlsZU91dGxpbmVJY29uLFxuICBTZW5kSWNvblxufSBmcm9tICdAdmFwb3ItdWkvaWNvbnMnO1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uQnV0dG9uLCBWU3RhY2ssIEhTdGFjaywgQm94LCBGaWVsZCwgVGV4dGFyZWEgfSBmcm9tICdAdmFwb3ItdWkvY29yZSc7XG5pbXBvcnQgRW1vamlQaWNrZXIgZnJvbSAnLi9FbW9qaVBpY2tlcic7XG5pbXBvcnQgTWVudGlvbkRyb3Bkb3duIGZyb20gJy4vTWVudGlvbkRyb3Bkb3duJztcbmltcG9ydCBGaWxlUHJldmlldyBmcm9tICcuL0ZpbGVQcmV2aWV3JztcbmltcG9ydCBmaWxlU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2ZpbGVTZXJ2aWNlJztcblxuY29uc3QgQ2hhdElucHV0ID0gZm9yd2FyZFJlZigoe1xuICBtZXNzYWdlID0gJycsXG4gIG9uTWVzc2FnZUNoYW5nZSA9ICgpID0+IHt9LFxuICBvblN1Ym1pdCA9ICgpID0+IHt9LFxuICBvbkVtb2ppVG9nZ2xlID0gKCkgPT4ge30sXG4gIG9uRmlsZVNlbGVjdCA9ICgpID0+IHt9LFxuICBmaWxlSW5wdXRSZWYsXG4gIGRpc2FibGVkID0gZmFsc2UsXG4gIHVwbG9hZGluZzogZXh0ZXJuYWxVcGxvYWRpbmcgPSBmYWxzZSxcbiAgc2hvd0Vtb2ppUGlja2VyID0gZmFsc2UsXG4gIHNob3dNZW50aW9uTGlzdCA9IGZhbHNlLFxuICBtZW50aW9uRmlsdGVyID0gJycsXG4gIG1lbnRpb25JbmRleCA9IDAsXG4gIGdldEZpbHRlcmVkUGFydGljaXBhbnRzID0gKCkgPT4gW10sXG4gIHNldE1lc3NhZ2UgPSAoKSA9PiB7fSxcbiAgc2V0U2hvd0Vtb2ppUGlja2VyID0gKCkgPT4ge30sXG4gIHNldFNob3dNZW50aW9uTGlzdCA9ICgpID0+IHt9LFxuICBzZXRNZW50aW9uRmlsdGVyID0gKCkgPT4ge30sXG4gIHNldE1lbnRpb25JbmRleCA9ICgpID0+IHt9LFxuICByb29tID0gbnVsbCAvLyByb29tIHByb3Ag7LaU6rCAXG59LCByZWYpID0+IHtcbiAgY29uc3QgZW1vamlQaWNrZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGVtb2ppQnV0dG9uUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBkcm9wWm9uZVJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgaW50ZXJuYWxJbnB1dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbWVzc2FnZUlucHV0UmVmID0gcmVmIHx8IGludGVybmFsSW5wdXRSZWY7XG4gIGNvbnN0IFtmaWxlcywgc2V0RmlsZXNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbdXBsb2FkaW5nLCBzZXRVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXBsb2FkUHJvZ3Jlc3MsIHNldFVwbG9hZFByb2dyZXNzXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbdXBsb2FkRXJyb3IsIHNldFVwbG9hZEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNEcmFnZ2luZywgc2V0SXNEcmFnZ2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttZW50aW9uUG9zaXRpb24sIHNldE1lbnRpb25Qb3NpdGlvbl0gPSB1c2VTdGF0ZSh7IHRvcDogMCwgbGVmdDogMCB9KTtcbiAgY29uc3Qgc3VibWl0dGluZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGhhbmRsZUZpbGVWYWxpZGF0aW9uQW5kUHJldmlldyA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgaWYgKCFmaWxlKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgZmlsZVNlcnZpY2UudmFsaWRhdGVGaWxlKGZpbGUpO1xuICAgICAgXG4gICAgICBjb25zdCBmaWxlUHJldmlldyA9IHtcbiAgICAgICAgZmlsZSxcbiAgICAgICAgdXJsOiBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpLFxuICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgc2l6ZTogZmlsZS5zaXplXG4gICAgICB9O1xuICAgICAgXG4gICAgICBzZXRGaWxlcyhwcmV2ID0+IFsuLi5wcmV2LCBmaWxlUHJldmlld10pO1xuICAgICAgc2V0VXBsb2FkRXJyb3IobnVsbCk7XG4gICAgICBvbkZpbGVTZWxlY3Q/LihmaWxlKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGaWxlIHZhbGlkYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgc2V0VXBsb2FkRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChmaWxlSW5wdXRSZWY/LmN1cnJlbnQpIHtcbiAgICAgICAgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvbkZpbGVTZWxlY3RdKTtcblxuICBjb25zdCBoYW5kbGVGaWxlUmVtb3ZlID0gdXNlQ2FsbGJhY2soKGZpbGVUb1JlbW92ZSkgPT4ge1xuICAgIHNldEZpbGVzKHByZXYgPT4gcHJldi5maWx0ZXIoZmlsZSA9PiBmaWxlLm5hbWUgIT09IGZpbGVUb1JlbW92ZS5uYW1lKSk7XG4gICAgVVJMLnJldm9rZU9iamVjdFVSTChmaWxlVG9SZW1vdmUudXJsKTtcbiAgICBzZXRVcGxvYWRFcnJvcihudWxsKTtcbiAgICBzZXRVcGxvYWRQcm9ncmVzcygwKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVEcm9wID0gdXNlQ2FsbGJhY2soYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcblxuICAgIGNvbnN0IGRyb3BwZWRGaWxlcyA9IEFycmF5LmZyb20oZS5kYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgIGlmIChkcm9wcGVkRmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgaGFuZGxlRmlsZVZhbGlkYXRpb25BbmRQcmV2aWV3KGRyb3BwZWRGaWxlc1swXSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbGUgZHJvcCBlcnJvcjonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbaGFuZGxlRmlsZVZhbGlkYXRpb25BbmRQcmV2aWV3XSk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGUpID0+IHtcblxuICAgIGlmIChzdWJtaXR0aW5nUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBzdWJtaXR0aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuXG4gICAgZT8ucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBmaWxlID0gZmlsZXNbMF07XG4gICAgICAgIGlmICghZmlsZSB8fCAhZmlsZS5maWxlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCftjIzsnbzsnbQg7ISg7YOd65CY7KeAIOyViuyVmOyKteuLiOuLpC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uU3VibWl0KHtcbiAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgY29udGVudDogbWVzc2FnZS50cmltKCksXG4gICAgICAgICAgZmlsZURhdGE6IGZpbGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0TWVzc2FnZSgnJyk7XG4gICAgICAgIHNldEZpbGVzKFtdKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG1lc3NhZ2UudHJpbSgpKSB7XG4gICAgICAgIG9uU3VibWl0KHtcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgY29udGVudDogbWVzc2FnZS50cmltKClcbiAgICAgICAgfSk7XG4gICAgICAgIHNldE1lc3NhZ2UoJycpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbGUgc3VibWl0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHNldFVwbG9hZEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgIC8vIOuPmeydvCB0aWNrIOyViOyXkOyEnCDspJHrs7Ug7Zi47LacIOuwqeyngFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHN1Ym1pdHRpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgfSwgMCk7XG4gICAgfVxuXG4gIH0sIFtmaWxlcywgbWVzc2FnZSwgb25TdWJtaXQsIHNldE1lc3NhZ2VdKTtcblxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIHNob3dFbW9qaVBpY2tlciAmJlxuICAgICAgICAhZW1vamlQaWNrZXJSZWYuY3VycmVudD8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJlxuICAgICAgICAhZW1vamlCdXR0b25SZWYuY3VycmVudD8uY29udGFpbnMoZXZlbnQudGFyZ2V0KVxuICAgICAgKSB7XG4gICAgICAgIHNldFNob3dFbW9qaVBpY2tlcihmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVBhc3RlID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIW1lc3NhZ2VJbnB1dFJlZj8uY3VycmVudD8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBpdGVtcyA9IGV2ZW50LmNsaXBib2FyZERhdGE/Lml0ZW1zO1xuICAgICAgaWYgKCFpdGVtcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCBmaWxlSXRlbSA9IEFycmF5LmZyb20oaXRlbXMpLmZpbmQoXG4gICAgICAgIGl0ZW0gPT4gaXRlbS5raW5kID09PSAnZmlsZScgJiYgXG4gICAgICAgIChpdGVtLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykgfHwgXG4gICAgICAgICBpdGVtLnR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJykgfHwgXG4gICAgICAgICBpdGVtLnR5cGUuc3RhcnRzV2l0aCgnYXVkaW8vJykgfHxcbiAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3BkZicpXG4gICAgICApO1xuXG4gICAgICBpZiAoIWZpbGVJdGVtKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGZpbGUgPSBmaWxlSXRlbS5nZXRBc0ZpbGUoKTtcbiAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBoYW5kbGVGaWxlVmFsaWRhdGlvbkFuZFByZXZpZXcoZmlsZSk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGaWxlIHBhc3RlIGVycm9yOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsIGhhbmRsZVBhc3RlKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBoYW5kbGVQYXN0ZSk7XG4gICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4gVVJMLnJldm9rZU9iamVjdFVSTChmaWxlLnVybCkpO1xuICAgIH07XG4gIH0sIFtzaG93RW1vamlQaWNrZXIsIHNldFNob3dFbW9qaVBpY2tlciwgZmlsZXMsIG1lc3NhZ2VJbnB1dFJlZiwgaGFuZGxlRmlsZVZhbGlkYXRpb25BbmRQcmV2aWV3XSk7XG5cbiAgY29uc3QgY2FsY3VsYXRlTWVudGlvblBvc2l0aW9uID0gdXNlQ2FsbGJhY2soKHRleHRhcmVhLCBhdEluZGV4KSA9PiB7XG4gICAgLy8gR2V0IGFsbCB0ZXh0IGJlZm9yZSBAIHN5bWJvbFxuICAgIGNvbnN0IHRleHRCZWZvcmVBdCA9IHRleHRhcmVhLnZhbHVlLnNsaWNlKDAsIGF0SW5kZXgpO1xuICAgIGNvbnN0IGxpbmVzID0gdGV4dEJlZm9yZUF0LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBjdXJyZW50TGluZUluZGV4ID0gbGluZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBjdXJyZW50TGluZVRleHQgPSBsaW5lc1tjdXJyZW50TGluZUluZGV4XTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYSBoaWRkZW4gZGl2IHRvIG1lYXN1cmUgZXhhY3QgdGV4dCB3aWR0aFxuICAgIGNvbnN0IG1lYXN1cmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtZWFzdXJlRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBtZWFzdXJlRGl2LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBtZWFzdXJlRGl2LnN0eWxlLndoaXRlU3BhY2UgPSAncHJlJztcbiAgICBtZWFzdXJlRGl2LnN0eWxlLmZvbnQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0YXJlYSkuZm9udDtcbiAgICBtZWFzdXJlRGl2LnN0eWxlLmZvbnRTaXplID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGV4dGFyZWEpLmZvbnRTaXplO1xuICAgIG1lYXN1cmVEaXYuc3R5bGUuZm9udEZhbWlseSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRleHRhcmVhKS5mb250RmFtaWx5O1xuICAgIG1lYXN1cmVEaXYuc3R5bGUuZm9udFdlaWdodCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRleHRhcmVhKS5mb250V2VpZ2h0O1xuICAgIG1lYXN1cmVEaXYuc3R5bGUubGV0dGVyU3BhY2luZyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRleHRhcmVhKS5sZXR0ZXJTcGFjaW5nO1xuICAgIG1lYXN1cmVEaXYuc3R5bGUudGV4dFRyYW5zZm9ybSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRleHRhcmVhKS50ZXh0VHJhbnNmb3JtO1xuICAgIG1lYXN1cmVEaXYudGV4dENvbnRlbnQgPSBjdXJyZW50TGluZVRleHQ7XG4gICAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZWFzdXJlRGl2KTtcbiAgICBjb25zdCB0ZXh0V2lkdGggPSBtZWFzdXJlRGl2Lm9mZnNldFdpZHRoO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWVhc3VyZURpdik7XG4gICAgXG4gICAgLy8gR2V0IHRleHRhcmVhIHBvc2l0aW9uIGFuZCBjb21wdXRlIHN0eWxlc1xuICAgIGNvbnN0IHRleHRhcmVhUmVjdCA9IHRleHRhcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0YXJlYSk7XG4gICAgY29uc3QgcGFkZGluZ0xlZnQgPSBwYXJzZUludChjb21wdXRlZFN0eWxlLnBhZGRpbmdMZWZ0KTtcbiAgICBjb25zdCBwYWRkaW5nVG9wID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5wYWRkaW5nVG9wKTtcbiAgICBjb25zdCBsaW5lSGVpZ2h0ID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5saW5lSGVpZ2h0KSB8fCAocGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLmZvbnRTaXplKSAqIDEuNSk7XG4gICAgY29uc3Qgc2Nyb2xsVG9wID0gdGV4dGFyZWEuc2Nyb2xsVG9wO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBleGFjdCBwb3NpdGlvbiBvZiBAIHN5bWJvbFxuICAgIGxldCBsZWZ0ID0gdGV4dGFyZWFSZWN0LmxlZnQgKyBwYWRkaW5nTGVmdCArIHRleHRXaWR0aDtcbiAgICAvLyBQb3NpdGlvbiBkaXJlY3RseSBhYm92ZSB0aGUgQCBjaGFyYWN0ZXIgKHdpdGggc21hbGwgZ2FwKVxuICAgIGxldCB0b3AgPSB0ZXh0YXJlYVJlY3QudG9wICsgcGFkZGluZ1RvcCArIChjdXJyZW50TGluZUluZGV4ICogbGluZUhlaWdodCkgLSBzY3JvbGxUb3A7XG4gICAgXG4gICAgLy8gRW5zdXJlIGRyb3Bkb3duIHN0YXlzIHdpdGhpbiB2aWV3cG9ydFxuICAgIGNvbnN0IGRyb3Bkb3duV2lkdGggPSAzMjA7IC8vIEFwcHJveGltYXRlIHdpZHRoXG4gICAgY29uc3QgZHJvcGRvd25IZWlnaHQgPSAyNTA7IC8vIEFwcHJveGltYXRlIGhlaWdodFxuICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBcbiAgICAvLyBBZGp1c3QgaG9yaXpvbnRhbCBwb3NpdGlvbiBpZiBuZWVkZWRcbiAgICBpZiAobGVmdCArIGRyb3Bkb3duV2lkdGggPiB2aWV3cG9ydFdpZHRoKSB7XG4gICAgICBsZWZ0ID0gdmlld3BvcnRXaWR0aCAtIGRyb3Bkb3duV2lkdGggLSAxMDtcbiAgICB9XG4gICAgaWYgKGxlZnQgPCAxMCkge1xuICAgICAgbGVmdCA9IDEwO1xuICAgIH1cbiAgICBcbiAgICAvLyBQb3NpdGlvbiBkcm9wZG93biA0MHB4IGxvd2VyIHRvIGJlIGNsb3NlciB0byB0aGUgQCBjdXJzb3JcbiAgICB0b3AgPSB0b3AgKyA0MDsgLy8gTW92ZSA0MHB4IGRvd24gZnJvbSB0aGUgY3Vyc29yIGxpbmVcbiAgICBcbiAgICAvLyBJZiBub3QgZW5vdWdoIHNwYWNlIGFib3ZlLCBzaG93IGJlbG93XG4gICAgaWYgKHRvcCAtIGRyb3Bkb3duSGVpZ2h0IDwgMTApIHtcbiAgICAgIHRvcCA9IHRleHRhcmVhUmVjdC50b3AgKyBwYWRkaW5nVG9wICsgKChjdXJyZW50TGluZUluZGV4ICsgMSkgKiBsaW5lSGVpZ2h0KSAtIHNjcm9sbFRvcCArIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNob3cgYWJvdmUgLSBhZGp1c3QgdG9wIHRvIGFjY291bnQgZm9yIGRyb3Bkb3duIGhlaWdodFxuICAgICAgdG9wID0gdG9wIC0gZHJvcGRvd25IZWlnaHQ7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7IHRvcCwgbGVmdCB9O1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgY29uc3QgY3Vyc29yUG9zaXRpb24gPSBlLnRhcmdldC5zZWxlY3Rpb25TdGFydDtcbiAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gdmFsdWUuc2xpY2UoMCwgY3Vyc29yUG9zaXRpb24pO1xuICAgIGNvbnN0IGxhc3RBdFN5bWJvbCA9IHRleHRCZWZvcmVDdXJzb3IubGFzdEluZGV4T2YoJ0AnKTtcblxuICAgIG9uTWVzc2FnZUNoYW5nZShlKTtcblxuICAgIGlmIChsYXN0QXRTeW1ib2wgIT09IC0xKSB7XG4gICAgICBjb25zdCB0ZXh0QWZ0ZXJBdCA9IHRleHRCZWZvcmVDdXJzb3Iuc2xpY2UobGFzdEF0U3ltYm9sICsgMSk7XG4gICAgICBjb25zdCBoYXNTcGFjZUFmdGVyQXQgPSB0ZXh0QWZ0ZXJBdC5pbmNsdWRlcygnICcpO1xuICAgICAgXG4gICAgICBpZiAoIWhhc1NwYWNlQWZ0ZXJBdCkge1xuICAgICAgICBzZXRNZW50aW9uRmlsdGVyKHRleHRBZnRlckF0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBzZXRTaG93TWVudGlvbkxpc3QodHJ1ZSk7XG4gICAgICAgIHNldE1lbnRpb25JbmRleCgwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGF0ZSBhbmQgc2V0IG1lbnRpb24gZHJvcGRvd24gcG9zaXRpb25cbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBjYWxjdWxhdGVNZW50aW9uUG9zaXRpb24oZS50YXJnZXQsIGxhc3RBdFN5bWJvbCk7XG4gICAgICAgIHNldE1lbnRpb25Qb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgc2V0U2hvd01lbnRpb25MaXN0KGZhbHNlKTtcbiAgfSwgW29uTWVzc2FnZUNoYW5nZSwgc2V0TWVudGlvbkZpbHRlciwgc2V0U2hvd01lbnRpb25MaXN0LCBzZXRNZW50aW9uSW5kZXgsIGNhbGN1bGF0ZU1lbnRpb25Qb3NpdGlvbl0pO1xuXG4gIGNvbnN0IGhhbmRsZU1lbnRpb25TZWxlY3QgPSB1c2VDYWxsYmFjaygodXNlcikgPT4ge1xuICAgIGlmICghbWVzc2FnZUlucHV0UmVmPy5jdXJyZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IG1lc3NhZ2VJbnB1dFJlZi5jdXJyZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IHRleHRCZWZvcmVDdXJzb3IgPSBtZXNzYWdlLnNsaWNlKDAsIGN1cnNvclBvc2l0aW9uKTtcbiAgICBjb25zdCB0ZXh0QWZ0ZXJDdXJzb3IgPSBtZXNzYWdlLnNsaWNlKGN1cnNvclBvc2l0aW9uKTtcbiAgICBjb25zdCBsYXN0QXRTeW1ib2wgPSB0ZXh0QmVmb3JlQ3Vyc29yLmxhc3RJbmRleE9mKCdAJyk7XG5cbiAgICBpZiAobGFzdEF0U3ltYm9sICE9PSAtMSkge1xuICAgICAgY29uc3QgbmV3TWVzc2FnZSA9IFxuICAgICAgICBtZXNzYWdlLnNsaWNlKDAsIGxhc3RBdFN5bWJvbCkgK1xuICAgICAgICBgQCR7dXNlci5uYW1lfSBgICtcbiAgICAgICAgdGV4dEFmdGVyQ3Vyc29yO1xuXG4gICAgICBzZXRNZXNzYWdlKG5ld01lc3NhZ2UpO1xuICAgICAgc2V0U2hvd01lbnRpb25MaXN0KGZhbHNlKTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChtZXNzYWdlSW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gbGFzdEF0U3ltYm9sICsgdXNlci5uYW1lLmxlbmd0aCArIDI7XG4gICAgICAgICAgbWVzc2FnZUlucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgICBtZXNzYWdlSW5wdXRSZWYuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShuZXdQb3NpdGlvbiwgbmV3UG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH0sIFttZXNzYWdlLCBzZXRNZXNzYWdlLCBzZXRTaG93TWVudGlvbkxpc3QsIG1lc3NhZ2VJbnB1dFJlZl0pO1xuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGlmIChzaG93TWVudGlvbkxpc3QpIHtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGdldEZpbHRlcmVkUGFydGljaXBhbnRzKHJvb20pOyAvLyByb29tIOqwneyytCDsoITri6xcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50c0NvdW50ID0gcGFydGljaXBhbnRzLmxlbmd0aDtcblxuICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzZXRNZW50aW9uSW5kZXgocHJldiA9PiBcbiAgICAgICAgICAgIHByZXYgPCBwYXJ0aWNpcGFudHNDb3VudCAtIDEgPyBwcmV2ICsgMSA6IDBcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzZXRNZW50aW9uSW5kZXgocHJldiA9PiBcbiAgICAgICAgICAgIHByZXYgPiAwID8gcHJldiAtIDEgOiBwYXJ0aWNpcGFudHNDb3VudCAtIDFcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ1RhYic6XG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgaWYgKHBhcnRpY2lwYW50c0NvdW50ID4gMCkge1xuICAgICAgICAgICAgaGFuZGxlTWVudGlvblNlbGVjdChwYXJ0aWNpcGFudHNbbWVudGlvbkluZGV4XSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ0VzY2FwZSc6XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHNldFNob3dNZW50aW9uTGlzdChmYWxzZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKG1lc3NhZ2UudHJpbSgpIHx8IGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaGFuZGxlU3VibWl0KGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIHNob3dFbW9qaVBpY2tlcikge1xuICAgICAgc2V0U2hvd0Vtb2ppUGlja2VyKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtcbiAgICBtZXNzYWdlLFxuICAgIGZpbGVzLFxuICAgIHNob3dNZW50aW9uTGlzdCxcbiAgICBzaG93RW1vamlQaWNrZXIsXG4gICAgbWVudGlvbkluZGV4LFxuICAgIGdldEZpbHRlcmVkUGFydGljaXBhbnRzLFxuICAgIGhhbmRsZU1lbnRpb25TZWxlY3QsXG4gICAgaGFuZGxlU3VibWl0LFxuICAgIHNldE1lbnRpb25JbmRleCxcbiAgICBzZXRTaG93TWVudGlvbkxpc3QsXG4gICAgc2V0U2hvd0Vtb2ppUGlja2VyLFxuICAgIHJvb20gLy8gcm9vbSDsnZjsobTshLEg7LaU6rCAXG4gIF0pO1xuXG4gIGNvbnN0IGhhbmRsZUVtb2ppU2VsZWN0ID0gdXNlQ2FsbGJhY2soKGVtb2ppKSA9PiB7XG4gICAgaWYgKCFtZXNzYWdlSW5wdXRSZWY/LmN1cnJlbnQpIHJldHVybjtcblxuICAgIGNvbnN0IGN1cnNvclBvc2l0aW9uID0gbWVzc2FnZUlucHV0UmVmLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQgfHwgbWVzc2FnZS5sZW5ndGg7XG4gICAgY29uc3QgbmV3TWVzc2FnZSA9IFxuICAgICAgbWVzc2FnZS5zbGljZSgwLCBjdXJzb3JQb3NpdGlvbikgKyBcbiAgICAgIGVtb2ppLm5hdGl2ZSArIFxuICAgICAgbWVzc2FnZS5zbGljZShjdXJzb3JQb3NpdGlvbik7XG4gICAgXG4gICAgc2V0TWVzc2FnZShuZXdNZXNzYWdlKTtcbiAgICBzZXRTaG93RW1vamlQaWNrZXIoZmFsc2UpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAobWVzc2FnZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgbmV3Q3Vyc29yUG9zaXRpb24gPSBjdXJzb3JQb3NpdGlvbiArIGVtb2ppLm5hdGl2ZS5sZW5ndGg7XG4gICAgICAgIG1lc3NhZ2VJbnB1dFJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICAgIG1lc3NhZ2VJbnB1dFJlZi5jdXJyZW50LnNldFNlbGVjdGlvblJhbmdlKG5ld0N1cnNvclBvc2l0aW9uLCBuZXdDdXJzb3JQb3NpdGlvbik7XG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH0sIFttZXNzYWdlLCBzZXRNZXNzYWdlLCBzZXRTaG93RW1vamlQaWNrZXIsIG1lc3NhZ2VJbnB1dFJlZl0pO1xuXG4gIGNvbnN0IHRvZ2dsZUVtb2ppUGlja2VyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFNob3dFbW9qaVBpY2tlcihwcmV2ID0+ICFwcmV2KTtcbiAgfSwgW3NldFNob3dFbW9qaVBpY2tlcl0pO1xuXG4gIGNvbnN0IGlzRGlzYWJsZWQgPSBkaXNhYmxlZCB8fCB1cGxvYWRpbmcgfHwgZXh0ZXJuYWxVcGxvYWRpbmc7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEJveFxuICAgICAgICByZWY9e2Ryb3Bab25lUmVmfVxuICAgICAgICBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiXG4gICAgICAgIHBhZGRpbmc9XCIkMjAwICQ0MDBcIlxuICAgICAgICBvbkRyYWdFbnRlcj17KGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBzZXRJc0RyYWdnaW5nKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBvbkRyYWdMZWF2ZT17KGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBzZXRJc0RyYWdnaW5nKHRydWUpO1xuICAgICAgICB9fVxuICAgICAgICBvbkRyb3A9e2hhbmRsZUZpbGVEcm9wfVxuICAgICAgPlxuICAgICAgICB7ZmlsZXMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgPEJveFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLWZ1bGwgbGVmdC0wIHJpZ2h0LTAgbWItMiB6LTEwMDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxGaWxlUHJldmlld1xuICAgICAgICAgICAgICBmaWxlcz17ZmlsZXN9XG4gICAgICAgICAgICAgIHVwbG9hZGluZz17dXBsb2FkaW5nfVxuICAgICAgICAgICAgICB1cGxvYWRQcm9ncmVzcz17dXBsb2FkUHJvZ3Jlc3N9XG4gICAgICAgICAgICAgIHVwbG9hZEVycm9yPXt1cGxvYWRFcnJvcn1cbiAgICAgICAgICAgICAgb25SZW1vdmU9e2hhbmRsZUZpbGVSZW1vdmV9XG4gICAgICAgICAgICAgIG9uUmV0cnk9eygpID0+IHNldFVwbG9hZEVycm9yKG51bGwpfVxuICAgICAgICAgICAgICBzaG93RmlsZU5hbWU9e3RydWV9XG4gICAgICAgICAgICAgIHNob3dGaWxlU2l6ZT17dHJ1ZX1cbiAgICAgICAgICAgICAgdmFyaWFudD1cImRlZmF1bHRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgKX1cblxuICAgICAgICA8VlN0YWNrIGdhcD1cIiQxMDBcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgICAgICA8VlN0YWNrIGdhcD1cIiQwMjVcIiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgPEhTdGFjayBnYXA9XCIkMjAwXCI+XG4gICAgICAgICAgICAgICAgPFRleHRhcmVhXG4gICAgICAgICAgICAgICAgICByZWY9e21lc3NhZ2VJbnB1dFJlZn1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXttZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2lzRHJhZ2dpbmcgPyBcIu2MjOydvOydhCDsl6zquLDsl5Ag64aT7JWE7KO87IS47JqULlwiIDogXCLrqZTsi5zsp4Drpbwg7J6F66Cl7ZWY7IS47JqULi4uIChA66W8IOyeheugpe2VmOyXrCDrqZjshZgsIFNoaWZ0ICsgRW50ZXLroZwg7KSE67CU6r+IKVwifVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzRGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICByb3dzPXsxfVxuICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgICAgICAgIHNwZWxsQ2hlY2s9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJ4bFwiXG4gICAgICAgICAgICAgICAgICBhdXRvUmVzaXplPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJjaGF0LW1lc3NhZ2UtaW5wdXRcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8SWNvbkJ1dHRvblxuICAgICAgICAgICAgICAgIHNpemU9XCJ4bFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0Rpc2FibGVkIHx8ICghbWVzc2FnZS50cmltKCkgJiYgZmlsZXMubGVuZ3RoID09PSAwKX1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwi66mU7Iuc7KeAIOuztOuCtOq4sFwiXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJjaGF0LXNlbmQtYnV0dG9uXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxTZW5kSWNvbiAvPlxuICAgICAgICAgICAgICA8L0ljb25CdXR0b24+XG4gICAgICAgICAgICA8L0hTdGFjaz5cblxuICAgICAgICAgICAgPEhTdGFjayBnYXA9XCIkMTAwXCI+XG4gICAgICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICAgICAgcmVmPXtlbW9qaUJ1dHRvblJlZn1cbiAgICAgICAgICAgICAgICBjb2xvclBhbGV0dGU9XCJjb250cmFzdFwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgICBzaXplPVwibWRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUVtb2ppUGlja2VyfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0Rpc2FibGVkfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCLsnbTrqqjti7DsvZhcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPExpa2VJY29uIC8+XG4gICAgICAgICAgICAgIDwvSWNvbkJ1dHRvbj5cbiAgICAgICAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICAgICAgICBjb2xvclBhbGV0dGU9XCJjb250cmFzdFwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgICBzaXplPVwibWRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZpbGVJbnB1dFJlZj8uY3VycmVudD8uY2xpY2soKX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNEaXNhYmxlZH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwi7YyM7J28IOyyqOu2gFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8QXR0YWNoRmlsZU91dGxpbmVJY29uIC8+XG4gICAgICAgICAgICAgIDwvSWNvbkJ1dHRvbj5cbiAgICAgICAgICAgIDwvSFN0YWNrPlxuXG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVGaWxlVmFsaWRhdGlvbkFuZFByZXZpZXcoZS50YXJnZXQuZmlsZXM/LlswXSl9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdub25lJyB9fVxuICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qLGFwcGxpY2F0aW9uL3BkZlwiXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZmlsZS11cGxvYWQtaW5wdXRcIlxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAge3Nob3dFbW9qaVBpY2tlciAmJiAoXG4gICAgICAgICAgICAgIDxCb3hcbiAgICAgICAgICAgICAgICByZWY9e2Vtb2ppUGlja2VyUmVmfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS1mdWxsIGxlZnQtMCB6LTEwMDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEVtb2ppUGlja2VyIFxuICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9e2hhbmRsZUVtb2ppU2VsZWN0fVxuICAgICAgICAgICAgICAgICAgZW1vamlTaXplPXsyMH1cbiAgICAgICAgICAgICAgICAgIGVtb2ppQnV0dG9uU2l6ZT17MzZ9XG4gICAgICAgICAgICAgICAgICBwZXJMaW5lPXs4fVxuICAgICAgICAgICAgICAgICAgbWF4RnJlcXVlbnRSb3dzPXs0fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L1ZTdGFjaz5cbiAgICAgICAgPC9WU3RhY2s+XG4gICAgICA8L0JveD5cblxuICAgICAge3Nob3dNZW50aW9uTGlzdCAmJiAoXG4gICAgICAgIDxCb3hcbiAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCB6LTk5OTlcIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICB0b3A6IGAke21lbnRpb25Qb3NpdGlvbi50b3B9cHhgLFxuICAgICAgICAgICAgbGVmdDogYCR7bWVudGlvblBvc2l0aW9uLmxlZnR9cHhgXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxNZW50aW9uRHJvcGRvd25cbiAgICAgICAgICAgIHBhcnRpY2lwYW50cz17Z2V0RmlsdGVyZWRQYXJ0aWNpcGFudHMocm9vbSl9XG4gICAgICAgICAgICBhY3RpdmVJbmRleD17bWVudGlvbkluZGV4fVxuICAgICAgICAgICAgb25TZWxlY3Q9e2hhbmRsZU1lbnRpb25TZWxlY3R9XG4gICAgICAgICAgICBvbk1vdXNlRW50ZXI9eyhpbmRleCkgPT4gc2V0TWVudGlvbkluZGV4KGluZGV4KX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0JveD5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59KTtcblxuQ2hhdElucHV0LmRpc3BsYXlOYW1lID0gJ0NoYXRJbnB1dCc7XG5cbmV4cG9ydCBkZWZhdWx0IENoYXRJbnB1dDsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiZm9yd2FyZFJlZiIsIkxpa2VJY29uIiwiQXR0YWNoRmlsZU91dGxpbmVJY29uIiwiU2VuZEljb24iLCJCdXR0b24iLCJJY29uQnV0dG9uIiwiVlN0YWNrIiwiSFN0YWNrIiwiQm94IiwiRmllbGQiLCJUZXh0YXJlYSIsIkVtb2ppUGlja2VyIiwiTWVudGlvbkRyb3Bkb3duIiwiRmlsZVByZXZpZXciLCJmaWxlU2VydmljZSIsIkNoYXRJbnB1dCIsIm1lc3NhZ2UiLCJvbk1lc3NhZ2VDaGFuZ2UiLCJvblN1Ym1pdCIsIm9uRW1vamlUb2dnbGUiLCJvbkZpbGVTZWxlY3QiLCJmaWxlSW5wdXRSZWYiLCJkaXNhYmxlZCIsInVwbG9hZGluZyIsImV4dGVybmFsVXBsb2FkaW5nIiwic2hvd0Vtb2ppUGlja2VyIiwic2hvd01lbnRpb25MaXN0IiwibWVudGlvbkZpbHRlciIsIm1lbnRpb25JbmRleCIsImdldEZpbHRlcmVkUGFydGljaXBhbnRzIiwic2V0TWVzc2FnZSIsInNldFNob3dFbW9qaVBpY2tlciIsInNldFNob3dNZW50aW9uTGlzdCIsInNldE1lbnRpb25GaWx0ZXIiLCJzZXRNZW50aW9uSW5kZXgiLCJyb29tIiwicmVmIiwiZW1vamlQaWNrZXJSZWYiLCJlbW9qaUJ1dHRvblJlZiIsImRyb3Bab25lUmVmIiwiaW50ZXJuYWxJbnB1dFJlZiIsIm1lc3NhZ2VJbnB1dFJlZiIsImZpbGVzIiwic2V0RmlsZXMiLCJzZXRVcGxvYWRpbmciLCJ1cGxvYWRQcm9ncmVzcyIsInNldFVwbG9hZFByb2dyZXNzIiwidXBsb2FkRXJyb3IiLCJzZXRVcGxvYWRFcnJvciIsImlzRHJhZ2dpbmciLCJzZXRJc0RyYWdnaW5nIiwibWVudGlvblBvc2l0aW9uIiwic2V0TWVudGlvblBvc2l0aW9uIiwidG9wIiwibGVmdCIsInN1Ym1pdHRpbmdSZWYiLCJoYW5kbGVGaWxlVmFsaWRhdGlvbkFuZFByZXZpZXciLCJmaWxlIiwidmFsaWRhdGVGaWxlIiwiZmlsZVByZXZpZXciLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJuYW1lIiwidHlwZSIsInNpemUiLCJwcmV2IiwiZXJyb3IiLCJjb25zb2xlIiwiY3VycmVudCIsInZhbHVlIiwiaGFuZGxlRmlsZVJlbW92ZSIsImZpbGVUb1JlbW92ZSIsImZpbHRlciIsInJldm9rZU9iamVjdFVSTCIsImhhbmRsZUZpbGVEcm9wIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiZHJvcHBlZEZpbGVzIiwiQXJyYXkiLCJmcm9tIiwiZGF0YVRyYW5zZmVyIiwibGVuZ3RoIiwiaGFuZGxlU3VibWl0IiwiRXJyb3IiLCJjb250ZW50IiwidHJpbSIsImZpbGVEYXRhIiwic2V0VGltZW91dCIsImhhbmRsZUNsaWNrT3V0c2lkZSIsImV2ZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJoYW5kbGVQYXN0ZSIsIml0ZW1zIiwiY2xpcGJvYXJkRGF0YSIsImZpbGVJdGVtIiwiZmluZCIsIml0ZW0iLCJraW5kIiwic3RhcnRzV2l0aCIsImdldEFzRmlsZSIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmb3JFYWNoIiwiY2FsY3VsYXRlTWVudGlvblBvc2l0aW9uIiwidGV4dGFyZWEiLCJhdEluZGV4IiwidGV4dEJlZm9yZUF0Iiwic2xpY2UiLCJsaW5lcyIsInNwbGl0IiwiY3VycmVudExpbmVJbmRleCIsImN1cnJlbnRMaW5lVGV4dCIsIm1lYXN1cmVEaXYiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsInZpc2liaWxpdHkiLCJ3aGl0ZVNwYWNlIiwiZm9udCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwibGV0dGVyU3BhY2luZyIsInRleHRUcmFuc2Zvcm0iLCJ0ZXh0Q29udGVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInRleHRXaWR0aCIsIm9mZnNldFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJ0ZXh0YXJlYVJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjb21wdXRlZFN0eWxlIiwicGFkZGluZ0xlZnQiLCJwYXJzZUludCIsInBhZGRpbmdUb3AiLCJsaW5lSGVpZ2h0IiwicGFyc2VGbG9hdCIsInNjcm9sbFRvcCIsImRyb3Bkb3duV2lkdGgiLCJkcm9wZG93bkhlaWdodCIsInZpZXdwb3J0V2lkdGgiLCJpbm5lcldpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJpbm5lckhlaWdodCIsImhhbmRsZUlucHV0Q2hhbmdlIiwiY3Vyc29yUG9zaXRpb24iLCJzZWxlY3Rpb25TdGFydCIsInRleHRCZWZvcmVDdXJzb3IiLCJsYXN0QXRTeW1ib2wiLCJsYXN0SW5kZXhPZiIsInRleHRBZnRlckF0IiwiaGFzU3BhY2VBZnRlckF0IiwiaW5jbHVkZXMiLCJ0b0xvd2VyQ2FzZSIsImhhbmRsZU1lbnRpb25TZWxlY3QiLCJ1c2VyIiwidGV4dEFmdGVyQ3Vyc29yIiwibmV3TWVzc2FnZSIsIm5ld1Bvc2l0aW9uIiwiZm9jdXMiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImhhbmRsZUtleURvd24iLCJwYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNDb3VudCIsImtleSIsInNoaWZ0S2V5IiwiaGFuZGxlRW1vamlTZWxlY3QiLCJlbW9qaSIsIm5hdGl2ZSIsIm5ld0N1cnNvclBvc2l0aW9uIiwidG9nZ2xlRW1vamlQaWNrZXIiLCJpc0Rpc2FibGVkIiwiY2xhc3NOYW1lIiwicGFkZGluZyIsIm9uRHJhZ0VudGVyIiwib25EcmFnTGVhdmUiLCJvbkRyYWdPdmVyIiwib25Ecm9wIiwib25SZW1vdmUiLCJvblJldHJ5Iiwic2hvd0ZpbGVOYW1lIiwic2hvd0ZpbGVTaXplIiwidmFyaWFudCIsImdhcCIsIndpZHRoIiwib25DaGFuZ2UiLCJvbktleURvd24iLCJwbGFjZWhvbGRlciIsInJvd3MiLCJhdXRvQ29tcGxldGUiLCJzcGVsbENoZWNrIiwiYXV0b1Jlc2l6ZSIsImRhdGEtdGVzdGlkIiwib25DbGljayIsImFyaWEtbGFiZWwiLCJjb2xvclBhbGV0dGUiLCJjbGljayIsImlucHV0IiwiZGlzcGxheSIsImFjY2VwdCIsIm9uU2VsZWN0IiwiZW1vamlTaXplIiwiZW1vamlCdXR0b25TaXplIiwicGVyTGluZSIsIm1heEZyZXF1ZW50Um93cyIsImFjdGl2ZUluZGV4Iiwib25Nb3VzZUVudGVyIiwiaW5kZXgiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ChatInput.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/ChatMessages.js":
/*!************************************!*\
  !*** ./components/ChatMessages.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _SystemMessage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SystemMessage */ \"(pages-dir-node)/./components/SystemMessage.js\");\n/* harmony import */ var _FileMessage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FileMessage */ \"(pages-dir-node)/./components/FileMessage.js\");\n/* harmony import */ var _UserMessage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./UserMessage */ \"(pages-dir-node)/./components/UserMessage.js\");\n/* harmony import */ var _hooks_useInfiniteScroll__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hooks/useInfiniteScroll */ \"(pages-dir-node)/./hooks/useInfiniteScroll.js\");\n/* harmony import */ var _hooks_useAutoScroll__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hooks/useAutoScroll */ \"(pages-dir-node)/./hooks/useAutoScroll.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_SystemMessage__WEBPACK_IMPORTED_MODULE_2__, _FileMessage__WEBPACK_IMPORTED_MODULE_3__, _UserMessage__WEBPACK_IMPORTED_MODULE_4__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__]);\n([_SystemMessage__WEBPACK_IMPORTED_MODULE_2__, _FileMessage__WEBPACK_IMPORTED_MODULE_3__, _UserMessage__WEBPACK_IMPORTED_MODULE_4__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst LoadingIndicator = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"loading-messages\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"spinner-border spinner-border-sm text-primary\",\n                role: \"status\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"visually-hidden\",\n                    children: \"Loading...\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                    lineNumber: 12,\n                    columnNumber: 7\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 11,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"text-secondary text-sm\",\n                children: \"이전 메시지를 불러오는 중...\"\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 14,\n                columnNumber: 5\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n        lineNumber: 10,\n        columnNumber: 3\n    }, undefined));\nLoadingIndicator.displayName = 'LoadingIndicator';\nconst MessageHistoryEnd = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"text-center p-2 mb-4\",\n        \"data-testid\": \"message-history-end\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Text, {\n            typography: \"body2\",\n            color: \"neutral-weak\",\n            children: \"더 이상 불러올 메시지가 없습니다.\"\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n            lineNumber: 21,\n            columnNumber: 5\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n        lineNumber: 20,\n        columnNumber: 3\n    }, undefined));\nMessageHistoryEnd.displayName = 'MessageHistoryEnd';\nconst EmptyMessages = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"empty-messages\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Text, {\n                typography: \"body1\",\n                children: \"아직 메시지가 없습니다.\"\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 28,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.Text, {\n                typography: \"body2\",\n                color: \"neutral-weak\",\n                children: \"첫 메시지를 보내보세요!\"\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 29,\n                columnNumber: 5\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n        lineNumber: 27,\n        columnNumber: 3\n    }, undefined));\nEmptyMessages.displayName = 'EmptyMessages';\nconst ChatMessages = ({ messages = [], currentUser = null, room = null, loadingMessages = false, hasMoreMessages = true, onReactionAdd = ()=>{}, onReactionRemove = ()=>{}, onLoadMore = ()=>{}, socketRef })=>{\n    // 무한 스크롤 훅\n    const { sentinelRef } = (0,_hooks_useInfiniteScroll__WEBPACK_IMPORTED_MODULE_5__.useInfiniteScroll)(onLoadMore, hasMoreMessages, loadingMessages);\n    // 자동 스크롤 훅 (스크롤 복원 기능 포함)\n    const { containerRef, scrollToBottom, isNearBottom } = (0,_hooks_useAutoScroll__WEBPACK_IMPORTED_MODULE_6__.useAutoScroll)(messages, currentUser?.id, loadingMessages, 100 // 하단 100px 이내면 자동 스크롤\n    );\n    const isMine = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatMessages.useCallback[isMine]\": (msg)=>{\n            if (!msg?.sender || !currentUser?.id) return false;\n            return msg.sender._id === currentUser.id || msg.sender.id === currentUser.id || msg.sender === currentUser.id;\n        }\n    }[\"ChatMessages.useCallback[isMine]\"], [\n        currentUser?.id\n    ]);\n    const allMessages = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ChatMessages.useMemo[allMessages]\": ()=>{\n            if (!Array.isArray(messages)) return [];\n            return messages.sort({\n                \"ChatMessages.useMemo[allMessages]\": (a, b)=>{\n                    if (!a?.timestamp || !b?.timestamp) return 0;\n                    return new Date(a.timestamp) - new Date(b.timestamp);\n                }\n            }[\"ChatMessages.useMemo[allMessages]\"]);\n        }\n    }[\"ChatMessages.useMemo[allMessages]\"], [\n        messages\n    ]);\n    const renderMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatMessages.useCallback[renderMessage]\": (msg, idx)=>{\n            if (!msg) return null;\n            const commonProps = {\n                currentUser,\n                room,\n                onReactionAdd,\n                onReactionRemove\n            };\n            const MessageComponent = {\n                system: _SystemMessage__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n                file: _FileMessage__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n            }[msg.type] || _UserMessage__WEBPACK_IMPORTED_MODULE_4__[\"default\"];\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MessageComponent, {\n                ...commonProps,\n                msg: msg,\n                content: msg.content,\n                isMine: msg.type !== 'system' ? isMine(msg) : undefined,\n                isStreaming: msg.type === 'ai' ? msg.isStreaming || false : undefined,\n                socketRef: socketRef\n            }, msg._id || `msg-${idx}`, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 94,\n                columnNumber: 7\n            }, undefined);\n        }\n    }[\"ChatMessages.useCallback[renderMessage]\"], [\n        currentUser,\n        room,\n        isMine,\n        onReactionAdd,\n        onReactionRemove,\n        socketRef\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_7__.VStack, {\n        ref: containerRef,\n        gap: \"$200\",\n        className: \"h-full overflow-y-auto overflow-x-hidden scroll-smooth [overflow-scrolling:touch]\",\n        padding: \"$300\",\n        role: \"log\",\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"false\",\n        \"data-testid\": \"chat-messages-container\",\n        children: [\n            hasMoreMessages && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: sentinelRef,\n                style: {\n                    height: '20px',\n                    margin: '10px 0',\n                    display: 'flex',\n                    justifyContent: 'center',\n                    alignItems: 'center'\n                },\n                children: loadingMessages && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(LoadingIndicator, {}, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                    lineNumber: 129,\n                    columnNumber: 31\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 119,\n                columnNumber: 9\n            }, undefined),\n            !hasMoreMessages && messages.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MessageHistoryEnd, {}, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 134,\n                columnNumber: 9\n            }, undefined),\n            allMessages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(EmptyMessages, {}, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n                lineNumber: 138,\n                columnNumber: 9\n            }, undefined) : allMessages.map((msg, idx)=>renderMessage(msg, idx))\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatMessages.js\",\n        lineNumber: 107,\n        columnNumber: 5\n    }, undefined);\n};\nChatMessages.displayName = 'ChatMessages';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(ChatMessages));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQ2hhdE1lc3NhZ2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvRDtBQUNOO0FBQ0Y7QUFDSjtBQUNBO0FBQ3VCO0FBQ1I7QUFFdkQsTUFBTVUsaUNBQW1CVixpREFBVSxDQUFDLGtCQUNsQyw4REFBQ1k7UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNEO2dCQUFJQyxXQUFVO2dCQUFnREMsTUFBSzswQkFDbEUsNEVBQUNDO29CQUFLRixXQUFVOzhCQUFrQjs7Ozs7Ozs7Ozs7MEJBRXBDLDhEQUFDRTtnQkFBS0YsV0FBVTswQkFBeUI7Ozs7Ozs7Ozs7OztBQUc3Q0gsaUJBQWlCTSxXQUFXLEdBQUc7QUFFL0IsTUFBTUMsa0NBQW9CakIsaURBQVUsQ0FBQyxrQkFDbkMsOERBQUNZO1FBQUlDLFdBQVU7UUFBdUJLLGVBQVk7a0JBQ2hELDRFQUFDZixnREFBSUE7WUFBQ2dCLFlBQVc7WUFBUUMsT0FBTTtzQkFBZTs7Ozs7Ozs7Ozs7QUFHbERILGtCQUFrQkQsV0FBVyxHQUFHO0FBRWhDLE1BQU1LLDhCQUFnQnJCLGlEQUFVLENBQUMsa0JBQy9CLDhEQUFDWTtRQUFJQyxXQUFVOzswQkFDYiw4REFBQ1YsZ0RBQUlBO2dCQUFDZ0IsWUFBVzswQkFBUTs7Ozs7OzBCQUN6Qiw4REFBQ2hCLGdEQUFJQTtnQkFBQ2dCLFlBQVc7Z0JBQVFDLE9BQU07MEJBQWU7Ozs7Ozs7Ozs7OztBQUdsREMsY0FBY0wsV0FBVyxHQUFHO0FBRTVCLE1BQU1NLGVBQWUsQ0FBQyxFQUNwQkMsV0FBVyxFQUFFLEVBQ2JDLGNBQWMsSUFBSSxFQUNsQkMsT0FBTyxJQUFJLEVBQ1hDLGtCQUFrQixLQUFLLEVBQ3ZCQyxrQkFBa0IsSUFBSSxFQUN0QkMsZ0JBQWdCLEtBQU8sQ0FBQyxFQUN4QkMsbUJBQW1CLEtBQU8sQ0FBQyxFQUMzQkMsYUFBYSxLQUFPLENBQUMsRUFDckJDLFNBQVMsRUFDVjtJQUNDLFdBQVc7SUFDWCxNQUFN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cy9mcm9udGVuZC9jb21wb25lbnRzL0NoYXRNZXNzYWdlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUZXh0LCBWU3RhY2sgfSBmcm9tICdAdmFwb3ItdWkvY29yZSc7XG5pbXBvcnQgU3lzdGVtTWVzc2FnZSBmcm9tICcuL1N5c3RlbU1lc3NhZ2UnO1xuaW1wb3J0IEZpbGVNZXNzYWdlIGZyb20gJy4vRmlsZU1lc3NhZ2UnO1xuaW1wb3J0IFVzZXJNZXNzYWdlIGZyb20gJy4vVXNlck1lc3NhZ2UnO1xuaW1wb3J0IHsgdXNlSW5maW5pdGVTY3JvbGwgfSBmcm9tICcuLi9ob29rcy91c2VJbmZpbml0ZVNjcm9sbCc7XG5pbXBvcnQgeyB1c2VBdXRvU2Nyb2xsIH0gZnJvbSAnLi4vaG9va3MvdXNlQXV0b1Njcm9sbCc7XG5cbmNvbnN0IExvYWRpbmdJbmRpY2F0b3IgPSBSZWFjdC5tZW1vKCgpID0+IChcbiAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLW1lc3NhZ2VzXCI+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbSB0ZXh0LXByaW1hcnlcIiByb2xlPVwic3RhdHVzXCI+XG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJ2aXN1YWxseS1oaWRkZW5cIj5Mb2FkaW5nLi4uPC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc2Vjb25kYXJ5IHRleHQtc21cIj7snbTsoIQg66mU7Iuc7KeA66W8IOu2iOufrOyYpOuKlCDspJEuLi48L3NwYW4+XG4gIDwvZGl2PlxuKSk7XG5Mb2FkaW5nSW5kaWNhdG9yLmRpc3BsYXlOYW1lID0gJ0xvYWRpbmdJbmRpY2F0b3InO1xuXG5jb25zdCBNZXNzYWdlSGlzdG9yeUVuZCA9IFJlYWN0Lm1lbW8oKCkgPT4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHAtMiBtYi00XCIgZGF0YS10ZXN0aWQ9XCJtZXNzYWdlLWhpc3RvcnktZW5kXCI+XG4gICAgPFRleHQgdHlwb2dyYXBoeT1cImJvZHkyXCIgY29sb3I9XCJuZXV0cmFsLXdlYWtcIj7rjZQg7J207IOBIOu2iOufrOyYrCDrqZTsi5zsp4DqsIAg7JeG7Iq164uI64ukLjwvVGV4dD5cbiAgPC9kaXY+XG4pKTtcbk1lc3NhZ2VIaXN0b3J5RW5kLmRpc3BsYXlOYW1lID0gJ01lc3NhZ2VIaXN0b3J5RW5kJztcblxuY29uc3QgRW1wdHlNZXNzYWdlcyA9IFJlYWN0Lm1lbW8oKCkgPT4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cImVtcHR5LW1lc3NhZ2VzXCI+XG4gICAgPFRleHQgdHlwb2dyYXBoeT1cImJvZHkxXCI+7JWE7KeBIOuplOyLnOyngOqwgCDsl4bsirXri4jri6QuPC9UZXh0PlxuICAgIDxUZXh0IHR5cG9ncmFwaHk9XCJib2R5MlwiIGNvbG9yPVwibmV1dHJhbC13ZWFrXCI+7LKrIOuplOyLnOyngOulvCDrs7TrgrTrs7TshLjsmpQhPC9UZXh0PlxuICA8L2Rpdj5cbikpO1xuRW1wdHlNZXNzYWdlcy5kaXNwbGF5TmFtZSA9ICdFbXB0eU1lc3NhZ2VzJztcblxuY29uc3QgQ2hhdE1lc3NhZ2VzID0gKHtcbiAgbWVzc2FnZXMgPSBbXSxcbiAgY3VycmVudFVzZXIgPSBudWxsLFxuICByb29tID0gbnVsbCxcbiAgbG9hZGluZ01lc3NhZ2VzID0gZmFsc2UsXG4gIGhhc01vcmVNZXNzYWdlcyA9IHRydWUsXG4gIG9uUmVhY3Rpb25BZGQgPSAoKSA9PiB7fSxcbiAgb25SZWFjdGlvblJlbW92ZSA9ICgpID0+IHt9LFxuICBvbkxvYWRNb3JlID0gKCkgPT4ge30sXG4gIHNvY2tldFJlZlxufSkgPT4ge1xuICAvLyDrrLTtlZwg7Iqk7YGs66GkIO2bhVxuICBjb25zdCB7IHNlbnRpbmVsUmVmIH0gPSB1c2VJbmZpbml0ZVNjcm9sbChcbiAgICBvbkxvYWRNb3JlLFxuICAgIGhhc01vcmVNZXNzYWdlcyxcbiAgICBsb2FkaW5nTWVzc2FnZXNcbiAgKTtcblxuICAvLyDsnpDrj5kg7Iqk7YGs66GkIO2bhSAo7Iqk7YGs66GkIOuzteybkCDquLDriqUg7Y+s7ZWoKVxuICBjb25zdCB7IGNvbnRhaW5lclJlZiwgc2Nyb2xsVG9Cb3R0b20sIGlzTmVhckJvdHRvbSB9ID0gdXNlQXV0b1Njcm9sbChcbiAgICBtZXNzYWdlcyxcbiAgICBjdXJyZW50VXNlcj8uaWQsXG4gICAgbG9hZGluZ01lc3NhZ2VzLFxuICAgIDEwMCAvLyDtlZjri6ggMTAwcHgg7J2064K066m0IOyekOuPmSDsiqTtgazroaRcbiAgKTtcbiAgY29uc3QgaXNNaW5lID0gdXNlQ2FsbGJhY2soKG1zZykgPT4ge1xuICAgIGlmICghbXNnPy5zZW5kZXIgfHwgIWN1cnJlbnRVc2VyPy5pZCkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICBtc2cuc2VuZGVyLl9pZCA9PT0gY3VycmVudFVzZXIuaWQgfHwgXG4gICAgICBtc2cuc2VuZGVyLmlkID09PSBjdXJyZW50VXNlci5pZCB8fFxuICAgICAgbXNnLnNlbmRlciA9PT0gY3VycmVudFVzZXIuaWRcbiAgICApO1xuICB9LCBbY3VycmVudFVzZXI/LmlkXSk7XG5cbiAgY29uc3QgYWxsTWVzc2FnZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZXMpKSByZXR1cm4gW107XG5cbiAgICByZXR1cm4gbWVzc2FnZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKCFhPy50aW1lc3RhbXAgfHwgIWI/LnRpbWVzdGFtcCkgcmV0dXJuIDA7XG4gICAgICByZXR1cm4gbmV3IERhdGUoYS50aW1lc3RhbXApIC0gbmV3IERhdGUoYi50aW1lc3RhbXApO1xuICAgIH0pO1xuICB9LCBbbWVzc2FnZXNdKTtcblxuICBjb25zdCByZW5kZXJNZXNzYWdlID0gdXNlQ2FsbGJhY2soKG1zZywgaWR4KSA9PiB7XG4gICAgaWYgKCFtc2cpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgY29tbW9uUHJvcHMgPSB7XG4gICAgICBjdXJyZW50VXNlcixcbiAgICAgIHJvb20sXG4gICAgICBvblJlYWN0aW9uQWRkLFxuICAgICAgb25SZWFjdGlvblJlbW92ZVxuICAgIH07XG5cbiAgICBjb25zdCBNZXNzYWdlQ29tcG9uZW50ID0ge1xuICAgICAgc3lzdGVtOiBTeXN0ZW1NZXNzYWdlLFxuICAgICAgZmlsZTogRmlsZU1lc3NhZ2VcbiAgICB9W21zZy50eXBlXSB8fCBVc2VyTWVzc2FnZTtcblxuICAgIHJldHVybiAoXG4gICAgICA8TWVzc2FnZUNvbXBvbmVudFxuICAgICAgICBrZXk9e21zZy5faWQgfHwgYG1zZy0ke2lkeH1gfVxuICAgICAgICB7Li4uY29tbW9uUHJvcHN9XG4gICAgICAgIG1zZz17bXNnfVxuICAgICAgICBjb250ZW50PXttc2cuY29udGVudH1cbiAgICAgICAgaXNNaW5lPXttc2cudHlwZSAhPT0gJ3N5c3RlbScgPyBpc01pbmUobXNnKSA6IHVuZGVmaW5lZH1cbiAgICAgICAgaXNTdHJlYW1pbmc9e21zZy50eXBlID09PSAnYWknID8gKG1zZy5pc1N0cmVhbWluZyB8fCBmYWxzZSkgOiB1bmRlZmluZWR9XG4gICAgICAgIHNvY2tldFJlZj17c29ja2V0UmVmfVxuICAgICAgLz5cbiAgICApO1xuICB9LCBbY3VycmVudFVzZXIsIHJvb20sIGlzTWluZSwgb25SZWFjdGlvbkFkZCwgb25SZWFjdGlvblJlbW92ZSwgc29ja2V0UmVmXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8VlN0YWNrXG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cbiAgICAgIGdhcD1cIiQyMDBcIlxuICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIG92ZXJmbG93LXktYXV0byBvdmVyZmxvdy14LWhpZGRlbiBzY3JvbGwtc21vb3RoIFtvdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2hdXCJcbiAgICAgIHBhZGRpbmc9XCIkMzAwXCJcbiAgICAgIHJvbGU9XCJsb2dcIlxuICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgIGFyaWEtYXRvbWljPVwiZmFsc2VcIlxuICAgICAgZGF0YS10ZXN0aWQ9XCJjaGF0LW1lc3NhZ2VzLWNvbnRhaW5lclwiXG4gICAgPlxuICAgICAgey8qIFNlbnRpbmVsIOyalOyGjCAtIOyKpO2BrOuhpCDrp6gg7JyE7JeQIOuwsOy5mO2VmOyXrCDsnITroZwg7Iqk7YGs66GkIOyLnCDsnbTsoIQg66mU7Iuc7KeAIOuhnOuTnCAqL31cbiAgICAgIHtoYXNNb3JlTWVzc2FnZXMgJiYgKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgcmVmPXtzZW50aW5lbFJlZn1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgaGVpZ2h0OiAnMjBweCcsXG4gICAgICAgICAgICBtYXJnaW46ICcxMHB4IDAnLFxuICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcidcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAge2xvYWRpbmdNZXNzYWdlcyAmJiA8TG9hZGluZ0luZGljYXRvciAvPn1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7IWhhc01vcmVNZXNzYWdlcyAmJiBtZXNzYWdlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPE1lc3NhZ2VIaXN0b3J5RW5kIC8+XG4gICAgICApfVxuXG4gICAgICB7YWxsTWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8RW1wdHlNZXNzYWdlcyAvPlxuICAgICAgKSA6IChcbiAgICAgICAgYWxsTWVzc2FnZXMubWFwKChtc2csIGlkeCkgPT4gcmVuZGVyTWVzc2FnZShtc2csIGlkeCkpXG4gICAgICApfVxuICAgIDwvVlN0YWNrPlxuICApO1xufTtcblxuQ2hhdE1lc3NhZ2VzLmRpc3BsYXlOYW1lID0gJ0NoYXRNZXNzYWdlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oQ2hhdE1lc3NhZ2VzKTsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJUZXh0IiwiVlN0YWNrIiwiU3lzdGVtTWVzc2FnZSIsIkZpbGVNZXNzYWdlIiwiVXNlck1lc3NhZ2UiLCJ1c2VJbmZpbml0ZVNjcm9sbCIsInVzZUF1dG9TY3JvbGwiLCJMb2FkaW5nSW5kaWNhdG9yIiwibWVtbyIsImRpdiIsImNsYXNzTmFtZSIsInJvbGUiLCJzcGFuIiwiZGlzcGxheU5hbWUiLCJNZXNzYWdlSGlzdG9yeUVuZCIsImRhdGEtdGVzdGlkIiwidHlwb2dyYXBoeSIsImNvbG9yIiwiRW1wdHlNZXNzYWdlcyIsIkNoYXRNZXNzYWdlcyIsIm1lc3NhZ2VzIiwiY3VycmVudFVzZXIiLCJyb29tIiwibG9hZGluZ01lc3NhZ2VzIiwiaGFzTW9yZU1lc3NhZ2VzIiwib25SZWFjdGlvbkFkZCIsIm9uUmVhY3Rpb25SZW1vdmUiLCJvbkxvYWRNb3JlIiwic29ja2V0UmVmIiwic2VudGluZWxSZWYiLCJjb250YWluZXJSZWYiLCJzY3JvbGxUb0JvdHRvbSIsImlzTmVhckJvdHRvbSIsImlkIiwiaXNNaW5lIiwibXNnIiwic2VuZGVyIiwiX2lkIiwiYWxsTWVzc2FnZXMiLCJBcnJheSIsImlzQXJyYXkiLCJzb3J0IiwiYSIsImIiLCJ0aW1lc3RhbXAiLCJEYXRlIiwicmVuZGVyTWVzc2FnZSIsImlkeCIsImNvbW1vblByb3BzIiwiTWVzc2FnZUNvbXBvbmVudCIsInN5c3RlbSIsImZpbGUiLCJ0eXBlIiwiY29udGVudCIsInVuZGVmaW5lZCIsImlzU3RyZWFtaW5nIiwicmVmIiwiZ2FwIiwicGFkZGluZyIsImFyaWEtbGl2ZSIsImFyaWEtYXRvbWljIiwic3R5bGUiLCJoZWlnaHQiLCJtYXJnaW4iLCJkaXNwbGF5IiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwibGVuZ3RoIiwibWFwIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ChatMessages.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/ChatRoomInfo.js":
/*!************************************!*\
  !*** ./components/ChatRoomInfo.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _CustomAvatar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CustomAvatar */ \"(pages-dir-node)/./components/CustomAvatar.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CustomAvatar__WEBPACK_IMPORTED_MODULE_3__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__]);\n([_CustomAvatar__WEBPACK_IMPORTED_MODULE_3__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst ChatRoomInfo = ({ room, connectionStatus })=>{\n    const getConnectionStatus = ()=>{\n        if (connectionStatus === 'connecting') {\n            return {\n                label: \"연결 중...\",\n                color: \"warning\"\n            };\n        } else if (connectionStatus === 'connected') {\n            return {\n                label: \"연결됨\",\n                color: \"success\"\n            };\n        } else {\n            return {\n                label: \"연결 끊김\",\n                color: \"danger\"\n            };\n        }\n    };\n    const status = getConnectionStatus();\n    const participants = room?.participants || [];\n    const maxVisibleAvatars = 3;\n    const remainingCount = Math.max(0, participants.length - maxVisibleAvatars);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Collapsible.Root, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.HStack, {\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                width: \"100%\",\n                paddingX: \"$400\",\n                paddingY: \"$100\",\n                className: \"bg-surface-200 relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Collapsible.Trigger, {\n                        render: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: \"bg-transparent border-none cursor-pointer flex items-center gap-2 hover:bg-background-contrast-100 rounded-lg px-2 py-1 -ml-2 transition-colors group\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.HStack, {\n                                gap: \"$100\",\n                                alignItems: \"center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex -space-x-2\",\n                                        children: [\n                                            participants.slice(0, maxVisibleAvatars).map((participant, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"ring-1 rounded-full\",\n                                                    style: {\n                                                        zIndex: maxVisibleAvatars - index\n                                                    },\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_CustomAvatar__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                                        user: participant,\n                                                        size: \"sm\",\n                                                        showInitials: true\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                        lineNumber: 54,\n                                                        columnNumber: 23\n                                                    }, void 0)\n                                                }, participant._id, false, {\n                                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                    lineNumber: 49,\n                                                    columnNumber: 21\n                                                }, void 0)),\n                                            remainingCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"ring-1 rounded-full z-0\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-8 h-8 rounded-full bg-background-contrast-200 flex items-center justify-center\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs font-medium text-foreground-hint-100\",\n                                                        children: [\n                                                            \"+\",\n                                                            remainingCount\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                        lineNumber: 66,\n                                                        columnNumber: 25\n                                                    }, void 0)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                    lineNumber: 65,\n                                                    columnNumber: 23\n                                                }, void 0)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                lineNumber: 62,\n                                                columnNumber: 21\n                                            }, void 0)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                        lineNumber: 47,\n                                        columnNumber: 17\n                                    }, void 0),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.HStack, {\n                                        gap: \"$050\",\n                                        alignItems: \"center\",\n                                        className: \"ml-1\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.GroupOutlineIcon, {\n                                                className: \"text-foreground-hint-100 group-hover:text-foreground-normal-100\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                lineNumber: 74,\n                                                columnNumber: 19\n                                            }, void 0),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Text, {\n                                                typography: \"body2\",\n                                                className: \"text-foreground-hint-100 group-hover:text-foreground-normal-100 font-medium\",\n                                                children: [\n                                                    participants.length,\n                                                    \"명\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                lineNumber: 75,\n                                                columnNumber: 19\n                                            }, void 0)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                        lineNumber: 73,\n                                        columnNumber: 17\n                                    }, void 0)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                lineNumber: 45,\n                                columnNumber: 15\n                            }, void 0)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                            lineNumber: 44,\n                            columnNumber: 13\n                        }, void 0)\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                        lineNumber: 42,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Text, {\n                        typography: \"heading4\",\n                        className: \"font-semibold text-foreground-normal-200 absolute left-1/2 transform -translate-x-1/2\",\n                        children: room?.name || '채팅방'\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                        lineNumber: 88,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Badge, {\n                        colorPalette: status.color,\n                        size: \"sm\",\n                        children: status.label\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                        lineNumber: 96,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                lineNumber: 33,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Collapsible.Panel, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-surface-200 border-b border-border-secondary\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.VStack, {\n                        gap: \"$100\",\n                        padding: \"$300\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Text, {\n                                typography: \"subtitle2\",\n                                className: \"text-foreground-normal-100 px-2\",\n                                children: \"참여자 목록\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                lineNumber: 108,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"max-h-64 overflow-y-auto\",\n                                children: participants.map((participant)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.HStack, {\n                                        gap: \"$200\",\n                                        alignItems: \"center\",\n                                        className: \"px-2 py-2 hover:bg-background-contrast-100 rounded-lg transition-colors\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_CustomAvatar__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                                user: participant,\n                                                size: \"md\",\n                                                showInitials: true\n                                            }, void 0, false, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                lineNumber: 119,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.VStack, {\n                                                gap: \"$050\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.HStack, {\n                                                        gap: \"$100\",\n                                                        alignItems: \"center\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Text, {\n                                                            typography: \"body2\",\n                                                            className: \"font-medium text-foreground-normal-200\",\n                                                            children: participant.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                            lineNumber: 126,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                        lineNumber: 125,\n                                                        columnNumber: 21\n                                                    }, undefined),\n                                                    participant.email && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Text, {\n                                                        typography: \"body3\",\n                                                        foreground: \"hint\",\n                                                        children: participant.email\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                        lineNumber: 131,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                                lineNumber: 124,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        ]\n                                    }, participant._id, true, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                        lineNumber: 113,\n                                        columnNumber: 17\n                                    }, undefined))\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                                lineNumber: 111,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                        lineNumber: 107,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                    lineNumber: 106,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n                lineNumber: 105,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ChatRoomInfo.js\",\n        lineNumber: 32,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatRoomInfo);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQ2hhdFJvb21JbmZvLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUEwQjtBQUN5QjtBQUN1QjtBQUNoQztBQUUxQyxNQUFNUSxlQUFlLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxnQkFBZ0IsRUFBRTtJQUM5QyxNQUFNQyxzQkFBc0I7UUFDMUIsSUFBSUQscUJBQXFCLGNBQWM7WUFDckMsT0FBTztnQkFDTEUsT0FBTztnQkFDUEMsT0FBTztZQUNUO1FBQ0YsT0FBTyxJQUFJSCxxQkFBcUIsYUFBYTtZQUMzQyxPQUFPO2dCQUNMRSxPQUFPO2dCQUNQQyxPQUFPO1lBQ1Q7UUFDRixPQUFPO1lBQ0wsT0FBTztnQkFDTEQsT0FBTztnQkFDUEMsT0FBTztZQUNUO1FBQ0Y7SUFDRjtJQUVBLE1BQU1DLFNBQVNIO0lBQ2YsTUFBTUksZUFBZU4sTUFBTU0sZ0JBQWdCLEVBQUU7SUFDN0MsTUFBTUMsb0JBQW9CO0lBQzFCLE1BQU1DLGlCQUFpQkMsS0FBS0MsR0FBRyxDQUFDLEdBQUdKLGFBQWFLLE1BQU0sR0FBR0o7SUFFekQscUJBQ0UsOERBQUNWLHVEQUFXQSxDQUFDZSxJQUFJOzswQkFDZiw4REFBQ25CLGtEQUFNQTtnQkFDTG9CLGdCQUFlO2dCQUNmQyxZQUFXO2dCQUNYQyxPQUFNO2dCQUNOQyxVQUFTO2dCQUNUQyxVQUFTO2dCQUNUQyxXQUFVOztrQ0FHViw4REFBQ3JCLHVEQUFXQSxDQUFDc0IsT0FBTzt3QkFDbEJDLHNCQUNFLDhEQUFDQzs0QkFBT0gsV0FBVTtzQ0FDaEIsNEVBQUN6QixrREFBTUE7Z0NBQUM2QixLQUFJO2dDQUFPUixZQUFXOztrREFFNUIsOERBQUNTO3dDQUFJTCxXQUFVOzs0Q0FDWlosYUFBYWtCLEtBQUssQ0FBQyxHQUFHakIsbUJBQW1Ca0IsR0FBRyxDQUFDLENBQUNDLGFBQWFDLHNCQUMxRCw4REFBQ0o7b0RBRUNMLFdBQVU7b0RBQ1ZVLE9BQU87d0RBQUVDLFFBQVF0QixvQkFBb0JvQjtvREFBTTs4REFFM0MsNEVBQUM3QixxREFBWUE7d0RBQ1hnQyxNQUFNSjt3REFDTkssTUFBSzt3REFDTEMsWUFBWTs7Ozs7O21EQVBUTixZQUFZTyxHQUFHOzs7Ozs0Q0FXdkJ6QixpQkFBaUIsbUJBQ2hCLDhEQUFDZTtnREFDQ0wsV0FBVTswREFFViw0RUFBQ0s7b0RBQUlMLFdBQVU7OERBQ2IsNEVBQUNnQjt3REFBS2hCLFdBQVU7OzREQUErQzs0REFDM0RWOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrREFNWiw4REFBQ2Ysa0RBQU1BO3dDQUFDNkIsS0FBSTt3Q0FBT1IsWUFBVzt3Q0FBU0ksV0FBVTs7MERBQy9DLDhEQUFDMUIsNkRBQWdCQTtnREFBRTBCLFdBQVU7Ozs7OzswREFDN0IsOERBQUN2QixnREFBSUE7Z0RBQ0h3QyxZQUFXO2dEQUNYakIsV0FBVTs7b0RBRVRaLGFBQWFLLE1BQU07b0RBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQVNqQyw4REFBQ2hCLGdEQUFJQTt3QkFDSHdDLFlBQVc7d0JBQ1hqQixXQUFVO2tDQUVUbEIsTUFBTW9DLFFBQVE7Ozs7OztrQ0FJakIsOERBQUN4QyxpREFBS0E7d0JBQ0p5QyxjQUFjaEMsT0FBT0QsS0FBSzt3QkFDMUIyQixNQUFLO2tDQUVKMUIsT0FBT0YsS0FBSzs7Ozs7Ozs7Ozs7OzBCQUtqQiw4REFBQ04sdURBQVdBLENBQUN5QyxLQUFLOzBCQUNoQiw0RUFBQ2Y7b0JBQUlMLFdBQVU7OEJBQ2IsNEVBQUN4QixrREFBTUE7d0JBQUM0QixLQUFJO3dCQUFPaUIsU0FBUTs7MENBQ3pCLDhEQUFDNUMsZ0RBQUlBO2dDQUFDd0MsWUFBVztnQ0FBWWpCLFdBQVU7MENBQWtDOzs7Ozs7MENBR3pFLDhEQUFDSztnQ0FBSUwsV0FBVTswQ0FDWlosYUFBYW1CLEdBQUcsQ0FBQyxDQUFDQyw0QkFDakIsOERBQUNqQyxrREFBTUE7d0NBRUw2QixLQUFJO3dDQUNKUixZQUFXO3dDQUNYSSxXQUFVOzswREFFViw4REFBQ3BCLHFEQUFZQTtnREFDWGdDLE1BQU1KO2dEQUNOSyxNQUFLO2dEQUNMQyxZQUFZOzs7Ozs7MERBRWQsOERBQUN0QyxrREFBTUE7Z0RBQUM0QixLQUFJOztrRUFDViw4REFBQzdCLGtEQUFNQTt3REFBQzZCLEtBQUk7d0RBQU9SLFlBQVc7a0VBQzVCLDRFQUFDbkIsZ0RBQUlBOzREQUFDd0MsWUFBVzs0REFBUWpCLFdBQVU7c0VBQ2hDUSxZQUFZVSxJQUFJOzs7Ozs7Ozs7OztvREFHcEJWLFlBQVljLEtBQUssa0JBQ2hCLDhEQUFDN0MsZ0RBQUlBO3dEQUFDd0MsWUFBVzt3REFBUU0sWUFBVztrRUFDakNmLFlBQVljLEtBQUs7Ozs7Ozs7Ozs7Ozs7dUNBbEJuQmQsWUFBWU8sR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE4QnRDO0FBRUEsaUVBQWVsQyxZQUFZQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb21wb25lbnRzL0NoYXRSb29tSW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgR3JvdXBPdXRsaW5lSWNvbiB9IGZyb20gJ0B2YXBvci11aS9pY29ucyc7XG5pbXBvcnQgeyBIU3RhY2ssIFZTdGFjaywgVGV4dCwgQmFkZ2UsIENvbGxhcHNpYmxlIH0gZnJvbSAnQHZhcG9yLXVpL2NvcmUnO1xuaW1wb3J0IEN1c3RvbUF2YXRhciBmcm9tICcuL0N1c3RvbUF2YXRhcic7XG5cbmNvbnN0IENoYXRSb29tSW5mbyA9ICh7IHJvb20sIGNvbm5lY3Rpb25TdGF0dXMgfSkgPT4ge1xuICBjb25zdCBnZXRDb25uZWN0aW9uU3RhdHVzID0gKCkgPT4ge1xuICAgIGlmIChjb25uZWN0aW9uU3RhdHVzID09PSAnY29ubmVjdGluZycpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBcIuyXsOqysCDspJEuLi5cIixcbiAgICAgICAgY29sb3I6IFwid2FybmluZ1wiXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoY29ubmVjdGlvblN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBcIuyXsOqysOuQqFwiLFxuICAgICAgICBjb2xvcjogXCJzdWNjZXNzXCJcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBcIuyXsOqysCDrgYrquYBcIixcbiAgICAgICAgY29sb3I6IFwiZGFuZ2VyXCJcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN0YXR1cyA9IGdldENvbm5lY3Rpb25TdGF0dXMoKTtcbiAgY29uc3QgcGFydGljaXBhbnRzID0gcm9vbT8ucGFydGljaXBhbnRzIHx8IFtdO1xuICBjb25zdCBtYXhWaXNpYmxlQXZhdGFycyA9IDM7XG4gIGNvbnN0IHJlbWFpbmluZ0NvdW50ID0gTWF0aC5tYXgoMCwgcGFydGljaXBhbnRzLmxlbmd0aCAtIG1heFZpc2libGVBdmF0YXJzKTtcblxuICByZXR1cm4gKFxuICAgIDxDb2xsYXBzaWJsZS5Sb290PlxuICAgICAgPEhTdGFja1xuICAgICAgICBqdXN0aWZ5Q29udGVudD1cInNwYWNlLWJldHdlZW5cIlxuICAgICAgICBhbGlnbkl0ZW1zPVwiY2VudGVyXCJcbiAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgcGFkZGluZ1g9XCIkNDAwXCJcbiAgICAgICAgcGFkZGluZ1k9XCIkMTAwXCJcbiAgICAgICAgY2xhc3NOYW1lPVwiYmctc3VyZmFjZS0yMDAgcmVsYXRpdmVcIlxuICAgICAgPlxuICAgICAgICB7Lyog7Jm87Kq9OiDssLjsl6zsnpAg7JWE67CU7YOAICsg7J247JuQ7IiYICovfVxuICAgICAgICA8Q29sbGFwc2libGUuVHJpZ2dlclxuICAgICAgICAgIHJlbmRlcj17XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJnLXRyYW5zcGFyZW50IGJvcmRlci1ub25lIGN1cnNvci1wb2ludGVyIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGhvdmVyOmJnLWJhY2tncm91bmQtY29udHJhc3QtMTAwIHJvdW5kZWQtbGcgcHgtMiBweS0xIC1tbC0yIHRyYW5zaXRpb24tY29sb3JzIGdyb3VwXCI+XG4gICAgICAgICAgICAgIDxIU3RhY2sgZ2FwPVwiJDEwMFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICB7Lyog7JWE67CU7YOAIOqyuey5mOq4sCDsiqTtg4DsnbwgKi99XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IC1zcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIHtwYXJ0aWNpcGFudHMuc2xpY2UoMCwgbWF4VmlzaWJsZUF2YXRhcnMpLm1hcCgocGFydGljaXBhbnQsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e3BhcnRpY2lwYW50Ll9pZH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyaW5nLTEgcm91bmRlZC1mdWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB6SW5kZXg6IG1heFZpc2libGVBdmF0YXJzIC0gaW5kZXggfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxDdXN0b21BdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI9e3BhcnRpY2lwYW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dJbml0aWFsc1xuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICB7cmVtYWluaW5nQ291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJpbmctMSByb3VuZGVkLWZ1bGwgei0wXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCByb3VuZGVkLWZ1bGwgYmctYmFja2dyb3VuZC1jb250cmFzdC0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1mb3JlZ3JvdW5kLWhpbnQtMTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICt7cmVtYWluaW5nQ291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8SFN0YWNrIGdhcD1cIiQwNTBcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgY2xhc3NOYW1lPVwibWwtMVwiPlxuICAgICAgICAgICAgICAgICAgPEdyb3VwT3V0bGluZUljb24gIGNsYXNzTmFtZT1cInRleHQtZm9yZWdyb3VuZC1oaW50LTEwMCBncm91cC1ob3Zlcjp0ZXh0LWZvcmVncm91bmQtbm9ybWFsLTEwMFwiIC8+XG4gICAgICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgICAgICB0eXBvZ3JhcGh5PVwiYm9keTJcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LWZvcmVncm91bmQtaGludC0xMDAgZ3JvdXAtaG92ZXI6dGV4dC1mb3JlZ3JvdW5kLW5vcm1hbC0xMDAgZm9udC1tZWRpdW1cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7cGFydGljaXBhbnRzLmxlbmd0aH3rqoVcbiAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICA8L0hTdGFjaz5cbiAgICAgICAgICAgICAgPC9IU3RhY2s+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG5cbiAgICAgICAgey8qIOykkeyVmTog7LGE7YyF67CpIOygnOuqqSAqL31cbiAgICAgICAgPFRleHRcbiAgICAgICAgICB0eXBvZ3JhcGh5PVwiaGVhZGluZzRcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1mb3JlZ3JvdW5kLW5vcm1hbC0yMDAgYWJzb2x1dGUgbGVmdC0xLzIgdHJhbnNmb3JtIC10cmFuc2xhdGUteC0xLzJcIlxuICAgICAgICA+XG4gICAgICAgICAge3Jvb20/Lm5hbWUgfHwgJ+yxhO2MheuwqSd9XG4gICAgICAgIDwvVGV4dD5cblxuICAgICAgICB7Lyog7Jik66W47Kq9OiDsl7DqsrAg7IOB7YOcICovfVxuICAgICAgICA8QmFkZ2VcbiAgICAgICAgICBjb2xvclBhbGV0dGU9e3N0YXR1cy5jb2xvcn1cbiAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICA+XG4gICAgICAgICAge3N0YXR1cy5sYWJlbH1cbiAgICAgICAgPC9CYWRnZT5cbiAgICAgIDwvSFN0YWNrPlxuXG4gICAgICB7Lyog7LC47Jes7J6QIOuqqeuhnSDtjKjrhJAgKi99XG4gICAgICA8Q29sbGFwc2libGUuUGFuZWw+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctc3VyZmFjZS0yMDAgYm9yZGVyLWIgYm9yZGVyLWJvcmRlci1zZWNvbmRhcnlcIj5cbiAgICAgICAgICA8VlN0YWNrIGdhcD1cIiQxMDBcIiBwYWRkaW5nPVwiJDMwMFwiPlxuICAgICAgICAgICAgPFRleHQgdHlwb2dyYXBoeT1cInN1YnRpdGxlMlwiIGNsYXNzTmFtZT1cInRleHQtZm9yZWdyb3VuZC1ub3JtYWwtMTAwIHB4LTJcIj5cbiAgICAgICAgICAgICAg7LC47Jes7J6QIOuqqeuhnVxuICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtaC02NCBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgICAge3BhcnRpY2lwYW50cy5tYXAoKHBhcnRpY2lwYW50KSA9PiAoXG4gICAgICAgICAgICAgICAgPEhTdGFja1xuICAgICAgICAgICAgICAgICAga2V5PXtwYXJ0aWNpcGFudC5faWR9XG4gICAgICAgICAgICAgICAgICBnYXA9XCIkMjAwXCJcbiAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0yIGhvdmVyOmJnLWJhY2tncm91bmQtY29udHJhc3QtMTAwIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxDdXN0b21BdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgdXNlcj17cGFydGljaXBhbnR9XG4gICAgICAgICAgICAgICAgICAgIHNpemU9XCJtZFwiXG4gICAgICAgICAgICAgICAgICAgIHNob3dJbml0aWFsc1xuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxWU3RhY2sgZ2FwPVwiJDA1MFwiPlxuICAgICAgICAgICAgICAgICAgICA8SFN0YWNrIGdhcD1cIiQxMDBcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFRleHQgdHlwb2dyYXBoeT1cImJvZHkyXCIgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1mb3JlZ3JvdW5kLW5vcm1hbC0yMDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwYXJ0aWNpcGFudC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgPC9IU3RhY2s+XG4gICAgICAgICAgICAgICAgICAgIHtwYXJ0aWNpcGFudC5lbWFpbCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFRleHQgdHlwb2dyYXBoeT1cImJvZHkzXCIgZm9yZWdyb3VuZD1cImhpbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwYXJ0aWNpcGFudC5lbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L1ZTdGFjaz5cbiAgICAgICAgICAgICAgICA8L0hTdGFjaz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1ZTdGFjaz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NvbGxhcHNpYmxlLlBhbmVsPlxuICAgIDwvQ29sbGFwc2libGUuUm9vdD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYXRSb29tSW5mbztcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkdyb3VwT3V0bGluZUljb24iLCJIU3RhY2siLCJWU3RhY2siLCJUZXh0IiwiQmFkZ2UiLCJDb2xsYXBzaWJsZSIsIkN1c3RvbUF2YXRhciIsIkNoYXRSb29tSW5mbyIsInJvb20iLCJjb25uZWN0aW9uU3RhdHVzIiwiZ2V0Q29ubmVjdGlvblN0YXR1cyIsImxhYmVsIiwiY29sb3IiLCJzdGF0dXMiLCJwYXJ0aWNpcGFudHMiLCJtYXhWaXNpYmxlQXZhdGFycyIsInJlbWFpbmluZ0NvdW50IiwiTWF0aCIsIm1heCIsImxlbmd0aCIsIlJvb3QiLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJ3aWR0aCIsInBhZGRpbmdYIiwicGFkZGluZ1kiLCJjbGFzc05hbWUiLCJUcmlnZ2VyIiwicmVuZGVyIiwiYnV0dG9uIiwiZ2FwIiwiZGl2Iiwic2xpY2UiLCJtYXAiLCJwYXJ0aWNpcGFudCIsImluZGV4Iiwic3R5bGUiLCJ6SW5kZXgiLCJ1c2VyIiwic2l6ZSIsInNob3dJbml0aWFscyIsIl9pZCIsInNwYW4iLCJ0eXBvZ3JhcGh5IiwibmFtZSIsImNvbG9yUGFsZXR0ZSIsIlBhbmVsIiwicGFkZGluZyIsImVtYWlsIiwiZm9yZWdyb3VuZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ChatRoomInfo.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/CustomAvatar.js":
/*!************************************!*\
  !*** ./components/CustomAvatar.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _utils_colorUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/colorUtils */ \"(pages-dir-node)/./utils/colorUtils.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__]);\n_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * CustomAvatar 컴포넌트\n * \n * @param {Object} props\n * @param {Object} props.user - 사용자 객체 (name, email, profileImage 필드)\n * @param {string} props.size - 아바타 크기 ('sm' | 'md' | 'lg' | 'xl')\n * @param {Function} props.onClick - 클릭 핸들러 (있으면 button으로 렌더링)\n * @param {string} props.src - 프로필 이미지 URL (user.profileImage 대신 직접 지정 가능)\n * @param {boolean} props.showImage - 이미지 표시 여부 (기본값: true)\n * @param {boolean} props.persistent - 실시간 프로필 업데이트 감지 여부 (기본값: false)\n * @param {boolean} props.showInitials - 이니셜 표시 여부 (기본값: true)\n * @param {string} props.className - 추가 CSS 클래스\n * @param {Object} props.style - 추가 인라인 스타일\n */ const CustomAvatar = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(({ user, size = 'md', onClick, src, showImage = true, persistent = false, showInitials = true, className = '', style = {}, ...props }, ref)=>{\n    // persistent 모드일 때만 상태 관리\n    const [currentImage, setCurrentImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [imageError, setImageError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // 이메일 기반 배경색/텍스트 색상 생성\n    const backgroundColor = (0,_utils_colorUtils__WEBPACK_IMPORTED_MODULE_2__.generateColorFromEmail)(user?.email);\n    const color = (0,_utils_colorUtils__WEBPACK_IMPORTED_MODULE_2__.getContrastTextColor)(backgroundColor);\n    // 프로필 이미지 URL 생성 (memoized)\n    const getImageUrl = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CustomAvatar.useCallback[getImageUrl]\": (imagePath)=>{\n            // src prop이 직접 제공된 경우\n            if (src) return src;\n            if (!imagePath) return null;\n            // 이미 전체 URL인 경우\n            if (imagePath.startsWith('http')) {\n                return imagePath;\n            }\n            // API URL과 결합 필요한 경우\n            return `${\"http://localhost:5001\"}${imagePath}`;\n        }\n    }[\"CustomAvatar.useCallback[getImageUrl]\"], [\n        src\n    ]);\n    // persistent 모드: 프로필 이미지 URL 처리\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CustomAvatar.useEffect\": ()=>{\n            if (!persistent) return;\n            const imageUrl = getImageUrl(user?.profileImage);\n            if (imageUrl && imageUrl !== currentImage) {\n                setImageError(false);\n                setCurrentImage(imageUrl);\n            } else if (!imageUrl) {\n                setCurrentImage('');\n            }\n        }\n    }[\"CustomAvatar.useEffect\"], [\n        persistent,\n        user?.profileImage,\n        getImageUrl,\n        currentImage\n    ]);\n    // persistent 모드: 전역 프로필 업데이트 리스너\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CustomAvatar.useEffect\": ()=>{\n            if (!persistent) return;\n            const handleProfileUpdate = {\n                \"CustomAvatar.useEffect.handleProfileUpdate\": ()=>{\n                    try {\n                        const updatedUser = JSON.parse(localStorage.getItem('user') || '{}');\n                        // 현재 사용자의 프로필이 업데이트된 경우에만 이미지 업데이트\n                        if (user?.id === updatedUser.id && updatedUser.profileImage !== user.profileImage) {\n                            const newImageUrl = getImageUrl(updatedUser.profileImage);\n                            setImageError(false);\n                            setCurrentImage(newImageUrl);\n                        }\n                    } catch (error) {\n                        console.error('Profile update handling error:', error);\n                    }\n                }\n            }[\"CustomAvatar.useEffect.handleProfileUpdate\"];\n            window.addEventListener('userProfileUpdate', handleProfileUpdate);\n            return ({\n                \"CustomAvatar.useEffect\": ()=>{\n                    window.removeEventListener('userProfileUpdate', handleProfileUpdate);\n                }\n            })[\"CustomAvatar.useEffect\"];\n        }\n    }[\"CustomAvatar.useEffect\"], [\n        persistent,\n        getImageUrl,\n        user?.id,\n        user?.profileImage\n    ]);\n    // 이미지 에러 핸들러\n    const handleImageError = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CustomAvatar.useCallback[handleImageError]\": (e)=>{\n            if (!persistent) return;\n            e.preventDefault();\n            setImageError(true);\n            console.debug('Avatar image load failed:', {\n                user: user?.name,\n                email: user?.email,\n                imageUrl: persistent ? currentImage : getImageUrl(user?.profileImage)\n            });\n        }\n    }[\"CustomAvatar.useCallback[handleImageError]\"], [\n        persistent,\n        currentImage,\n        user?.name,\n        user?.email,\n        user?.profileImage,\n        getImageUrl\n    ]);\n    // 최종 이미지 URL 결정\n    const finalImageUrl = (()=>{\n        if (!showImage) return undefined;\n        if (persistent) {\n            return currentImage && !imageError ? currentImage : undefined;\n        }\n        return getImageUrl(user?.profileImage);\n    })();\n    // 사용자 이름 첫 글자\n    const initial = showInitials ? user?.name?.charAt(0)?.toUpperCase() || '?' : '';\n    // 클릭 가능한 경우 button으로 렌더링\n    const renderProp = onClick ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        onClick: onClick\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/CustomAvatar.js\",\n        lineNumber: 120,\n        columnNumber: 32\n    }, undefined) : undefined;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.Avatar.Root, {\n        ref: ref,\n        shape: \"circle\",\n        size: size,\n        render: renderProp,\n        src: finalImageUrl,\n        className: className,\n        style: {\n            backgroundColor,\n            color,\n            cursor: onClick ? 'pointer' : 'default',\n            ...style\n        },\n        ...props,\n        children: [\n            finalImageUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.Avatar.ImagePrimitive, {\n                onError: persistent ? handleImageError : undefined,\n                alt: `${user?.name}'s profile`\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/CustomAvatar.js\",\n                lineNumber: 140,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.Avatar.FallbackPrimitive, {\n                style: {\n                    backgroundColor,\n                    color,\n                    fontWeight: '500'\n                },\n                children: initial\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/CustomAvatar.js\",\n                lineNumber: 145,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, user?._id || user?.id, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/CustomAvatar.js\",\n        lineNumber: 123,\n        columnNumber: 5\n    }, undefined);\n});\nCustomAvatar.displayName = 'CustomAvatar';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CustomAvatar);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvQ3VzdG9tQXZhdGFyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTRFO0FBQ3BDO0FBQzBDO0FBRWxGOzs7Ozs7Ozs7Ozs7O0NBYUMsR0FDRCxNQUFNUSw2QkFBZUosaURBQVVBLENBQUMsQ0FBQyxFQUMvQkssSUFBSSxFQUNKQyxPQUFPLElBQUksRUFDWEMsT0FBTyxFQUNQQyxHQUFHLEVBQ0hDLFlBQVksSUFBSSxFQUNoQkMsYUFBYSxLQUFLLEVBQ2xCQyxlQUFlLElBQUksRUFDbkJDLFlBQVksRUFBRSxFQUNkQyxRQUFRLENBQUMsQ0FBQyxFQUNWLEdBQUdDLE9BQ0osRUFBRUM7SUFDRCwwQkFBMEI7SUFDMUIsTUFBTSxDQUFDQyxjQUFjQyxnQkFBZ0IsR0FBR3BCLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3FCLFlBQVlDLGNBQWMsR0FBR3RCLCtDQUFRQSxDQUFDO0lBRTdDLHVCQUF1QjtJQUN2QixNQUFNdUIsa0JBQWtCbEIseUVBQXNCQSxDQUFDRyxNQUFNZ0I7SUFDckQsTUFBTUMsUUFBUW5CLHVFQUFvQkEsQ0FBQ2lCO0lBRW5DLDRCQUE0QjtJQUM1QixNQUFNRyxjQUFjeEIsa0RBQVdBO2lEQUFDLENBQUN5QjtZQUMvQixzQkFBc0I7WUFDdEIsSUFBSWhCLEtBQUssT0FBT0E7WUFFaEIsSUFBSSxDQUFDZ0IsV0FBVyxPQUFPO1lBRXZCLGdCQUFnQjtZQUNoQixJQUFJQSxVQUFVQyxVQUFVLENBQUMsU0FBUztnQkFDaEMsT0FBT0Q7WUFDVDtZQUNBLHFCQUFxQjtZQUNyQixPQUFPLEdBQUdFLHVCQUErQixHQUFHRixXQUFXO1FBQ3pEO2dEQUFHO1FBQUNoQjtLQUFJO0lBRVIsZ0NBQWdDO0lBQ2hDVixnREFBU0E7a0NBQUM7WUFDUixJQUFJLENBQUNZLFlBQVk7WUFFakIsTUFBTW1CLFdBQVdOLFlBQVlsQixNQUFNeUI7WUFDbkMsSUFBSUQsWUFBWUEsYUFBYWIsY0FBYztnQkFD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aGF0L2FwcHMvZnJvbnRlbmQvY29tcG9uZW50cy9DdXN0b21BdmF0YXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQXZhdGFyIH0gZnJvbSAnQHZhcG9yLXVpL2NvcmUnO1xuaW1wb3J0IHsgZ2VuZXJhdGVDb2xvckZyb21FbWFpbCwgZ2V0Q29udHJhc3RUZXh0Q29sb3IgfSBmcm9tICdAL3V0aWxzL2NvbG9yVXRpbHMnO1xuXG4vKipcbiAqIEN1c3RvbUF2YXRhciDsu7Ttj6zrhIztirhcbiAqIFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMudXNlciAtIOyCrOyaqeyekCDqsJ3ssrQgKG5hbWUsIGVtYWlsLCBwcm9maWxlSW1hZ2Ug7ZWE65OcKVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLnNpemUgLSDslYTrsJTtg4Ag7YGs6riwICgnc20nIHwgJ21kJyB8ICdsZycgfCAneGwnKVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvcHMub25DbGljayAtIO2BtOumrSDtlbjrk6Trn6wgKOyeiOycvOuptCBidXR0b27snLzroZwg66CM642U66eBKVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLnNyYyAtIO2UhOuhnO2VhCDsnbTrr7jsp4AgVVJMICh1c2VyLnByb2ZpbGVJbWFnZSDrjIDsi6Ag7KeB7KCRIOyngOyglSDqsIDriqUpXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHByb3BzLnNob3dJbWFnZSAtIOydtOuvuOyngCDtkZzsi5wg7Jes67aAICjquLDrs7jqsJI6IHRydWUpXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHByb3BzLnBlcnNpc3RlbnQgLSDsi6Tsi5zqsIQg7ZSE66Gc7ZWEIOyXheuNsOydtO2KuCDqsJDsp4Ag7Jes67aAICjquLDrs7jqsJI6IGZhbHNlKVxuICogQHBhcmFtIHtib29sZWFufSBwcm9wcy5zaG93SW5pdGlhbHMgLSDsnbTri4jshZwg7ZGc7IucIOyXrOu2gCAo6riw67O46rCSOiB0cnVlKVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BzLmNsYXNzTmFtZSAtIOy2lOqwgCBDU1Mg7YG0656Y7IqkXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMuc3R5bGUgLSDstpTqsIAg7J2465287J24IOyKpO2DgOydvFxuICovXG5jb25zdCBDdXN0b21BdmF0YXIgPSBmb3J3YXJkUmVmKCh7XG4gIHVzZXIsXG4gIHNpemUgPSAnbWQnLFxuICBvbkNsaWNrLFxuICBzcmMsXG4gIHNob3dJbWFnZSA9IHRydWUsXG4gIHBlcnNpc3RlbnQgPSBmYWxzZSxcbiAgc2hvd0luaXRpYWxzID0gdHJ1ZSxcbiAgY2xhc3NOYW1lID0gJycsXG4gIHN0eWxlID0ge30sXG4gIC4uLnByb3BzXG59LCByZWYpID0+IHtcbiAgLy8gcGVyc2lzdGVudCDrqqjrk5zsnbwg65WM66eMIOyDge2DnCDqtIDrpqxcbiAgY29uc3QgW2N1cnJlbnRJbWFnZSwgc2V0Q3VycmVudEltYWdlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2ltYWdlRXJyb3IsIHNldEltYWdlRXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIOydtOuplOydvCDquLDrsJgg67Cw6rK97IOJL+2FjeyKpO2KuCDsg4nsg4Eg7IOd7ISxXG4gIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IGdlbmVyYXRlQ29sb3JGcm9tRW1haWwodXNlcj8uZW1haWwpO1xuICBjb25zdCBjb2xvciA9IGdldENvbnRyYXN0VGV4dENvbG9yKGJhY2tncm91bmRDb2xvcik7XG5cbiAgLy8g7ZSE66Gc7ZWEIOydtOuvuOyngCBVUkwg7IOd7ISxIChtZW1vaXplZClcbiAgY29uc3QgZ2V0SW1hZ2VVcmwgPSB1c2VDYWxsYmFjaygoaW1hZ2VQYXRoKSA9PiB7XG4gICAgLy8gc3JjIHByb3DsnbQg7KeB7KCRIOygnOqzteuQnCDqsr3smrBcbiAgICBpZiAoc3JjKSByZXR1cm4gc3JjO1xuICAgIFxuICAgIGlmICghaW1hZ2VQYXRoKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAvLyDsnbTrr7gg7KCE7LK0IFVSTOyduCDqsr3smrBcbiAgICBpZiAoaW1hZ2VQYXRoLnN0YXJ0c1dpdGgoJ2h0dHAnKSkge1xuICAgICAgcmV0dXJuIGltYWdlUGF0aDtcbiAgICB9XG4gICAgLy8gQVBJIFVSTOqzvCDqsrDtlakg7ZWE7JqU7ZWcIOqyveyasFxuICAgIHJldHVybiBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMfSR7aW1hZ2VQYXRofWA7XG4gIH0sIFtzcmNdKTtcblxuICAvLyBwZXJzaXN0ZW50IOuqqOuTnDog7ZSE66Gc7ZWEIOydtOuvuOyngCBVUkwg7LKY66asXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwZXJzaXN0ZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBpbWFnZVVybCA9IGdldEltYWdlVXJsKHVzZXI/LnByb2ZpbGVJbWFnZSk7XG4gICAgaWYgKGltYWdlVXJsICYmIGltYWdlVXJsICE9PSBjdXJyZW50SW1hZ2UpIHtcbiAgICAgIHNldEltYWdlRXJyb3IoZmFsc2UpO1xuICAgICAgc2V0Q3VycmVudEltYWdlKGltYWdlVXJsKTtcbiAgICB9IGVsc2UgaWYgKCFpbWFnZVVybCkge1xuICAgICAgc2V0Q3VycmVudEltYWdlKCcnKTtcbiAgICB9XG4gIH0sIFtwZXJzaXN0ZW50LCB1c2VyPy5wcm9maWxlSW1hZ2UsIGdldEltYWdlVXJsLCBjdXJyZW50SW1hZ2VdKTtcblxuICAvLyBwZXJzaXN0ZW50IOuqqOuTnDog7KCE7JetIO2UhOuhnO2VhCDsl4XrjbDsnbTtirgg66as7Iqk64SIXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwZXJzaXN0ZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBoYW5kbGVQcm9maWxlVXBkYXRlID0gKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykgfHwgJ3t9Jyk7XG4gICAgICAgIC8vIO2YhOyerCDsgqzsmqnsnpDsnZgg7ZSE66Gc7ZWE7J20IOyXheuNsOydtO2KuOuQnCDqsr3smrDsl5Drp4wg7J2066+47KeAIOyXheuNsOydtO2KuFxuICAgICAgICBpZiAodXNlcj8uaWQgPT09IHVwZGF0ZWRVc2VyLmlkICYmIHVwZGF0ZWRVc2VyLnByb2ZpbGVJbWFnZSAhPT0gdXNlci5wcm9maWxlSW1hZ2UpIHtcbiAgICAgICAgICBjb25zdCBuZXdJbWFnZVVybCA9IGdldEltYWdlVXJsKHVwZGF0ZWRVc2VyLnByb2ZpbGVJbWFnZSk7XG4gICAgICAgICAgc2V0SW1hZ2VFcnJvcihmYWxzZSk7XG4gICAgICAgICAgc2V0Q3VycmVudEltYWdlKG5ld0ltYWdlVXJsKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUHJvZmlsZSB1cGRhdGUgaGFuZGxpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VzZXJQcm9maWxlVXBkYXRlJywgaGFuZGxlUHJvZmlsZVVwZGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1c2VyUHJvZmlsZVVwZGF0ZScsIGhhbmRsZVByb2ZpbGVVcGRhdGUpO1xuICAgIH07XG4gIH0sIFtwZXJzaXN0ZW50LCBnZXRJbWFnZVVybCwgdXNlcj8uaWQsIHVzZXI/LnByb2ZpbGVJbWFnZV0pO1xuXG4gIC8vIOydtOuvuOyngCDsl5Drn6wg7ZW465Ok65+sXG4gIGNvbnN0IGhhbmRsZUltYWdlRXJyb3IgPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGlmICghcGVyc2lzdGVudCkgcmV0dXJuO1xuICAgIFxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRJbWFnZUVycm9yKHRydWUpO1xuXG4gICAgY29uc29sZS5kZWJ1ZygnQXZhdGFyIGltYWdlIGxvYWQgZmFpbGVkOicsIHtcbiAgICAgIHVzZXI6IHVzZXI/Lm5hbWUsXG4gICAgICBlbWFpbDogdXNlcj8uZW1haWwsXG4gICAgICBpbWFnZVVybDogcGVyc2lzdGVudCA/IGN1cnJlbnRJbWFnZSA6IGdldEltYWdlVXJsKHVzZXI/LnByb2ZpbGVJbWFnZSlcbiAgICB9KTtcbiAgfSwgW3BlcnNpc3RlbnQsIGN1cnJlbnRJbWFnZSwgdXNlcj8ubmFtZSwgdXNlcj8uZW1haWwsIHVzZXI/LnByb2ZpbGVJbWFnZSwgZ2V0SW1hZ2VVcmxdKTtcblxuICAvLyDstZzsooUg7J2066+47KeAIFVSTCDqsrDsoJVcbiAgY29uc3QgZmluYWxJbWFnZVVybCA9ICgoKSA9PiB7XG4gICAgaWYgKCFzaG93SW1hZ2UpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgXG4gICAgaWYgKHBlcnNpc3RlbnQpIHtcbiAgICAgIHJldHVybiBjdXJyZW50SW1hZ2UgJiYgIWltYWdlRXJyb3IgPyBjdXJyZW50SW1hZ2UgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBnZXRJbWFnZVVybCh1c2VyPy5wcm9maWxlSW1hZ2UpO1xuICB9KSgpO1xuXG4gIC8vIOyCrOyaqeyekCDsnbTrpoQg7LKrIOq4gOyekFxuICBjb25zdCBpbml0aWFsID0gc2hvd0luaXRpYWxzID8gKHVzZXI/Lm5hbWU/LmNoYXJBdCgwKT8udG9VcHBlckNhc2UoKSB8fCAnPycpIDogJyc7XG5cbiAgLy8g7YG066atIOqwgOuKpe2VnCDqsr3smrAgYnV0dG9u7Jy866GcIOugjOuNlOungVxuICBjb25zdCByZW5kZXJQcm9wID0gb25DbGljayA/IDxidXR0b24gb25DbGljaz17b25DbGlja30gLz4gOiB1bmRlZmluZWQ7XG5cbiAgcmV0dXJuIChcbiAgICA8QXZhdGFyLlJvb3RcbiAgICAgIHJlZj17cmVmfVxuICAgICAga2V5PXt1c2VyPy5faWQgfHwgdXNlcj8uaWR9XG4gICAgICBzaGFwZT1cImNpcmNsZVwiXG4gICAgICBzaXplPXtzaXplfVxuICAgICAgcmVuZGVyPXtyZW5kZXJQcm9wfVxuICAgICAgc3JjPXtmaW5hbEltYWdlVXJsfVxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICBzdHlsZT17e1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgIGNvbG9yLFxuICAgICAgICBjdXJzb3I6IG9uQ2xpY2sgPyAncG9pbnRlcicgOiAnZGVmYXVsdCcsXG4gICAgICAgIC4uLnN0eWxlXG4gICAgICB9fVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIHtmaW5hbEltYWdlVXJsICYmIChcbiAgICAgICAgPEF2YXRhci5JbWFnZVByaW1pdGl2ZSBcbiAgICAgICAgICBvbkVycm9yPXtwZXJzaXN0ZW50ID8gaGFuZGxlSW1hZ2VFcnJvciA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBhbHQ9e2Ake3VzZXI/Lm5hbWV9J3MgcHJvZmlsZWB9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAgPEF2YXRhci5GYWxsYmFja1ByaW1pdGl2ZSBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3IsIGNvbG9yLCBmb250V2VpZ2h0OiAnNTAwJyB9fT5cbiAgICAgICAge2luaXRpYWx9XG4gICAgICA8L0F2YXRhci5GYWxsYmFja1ByaW1pdGl2ZT5cbiAgICA8L0F2YXRhci5Sb290PlxuICApO1xufSk7XG5cbkN1c3RvbUF2YXRhci5kaXNwbGF5TmFtZSA9ICdDdXN0b21BdmF0YXInO1xuXG5leHBvcnQgZGVmYXVsdCBDdXN0b21BdmF0YXI7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwiZm9yd2FyZFJlZiIsIkF2YXRhciIsImdlbmVyYXRlQ29sb3JGcm9tRW1haWwiLCJnZXRDb250cmFzdFRleHRDb2xvciIsIkN1c3RvbUF2YXRhciIsInVzZXIiLCJzaXplIiwib25DbGljayIsInNyYyIsInNob3dJbWFnZSIsInBlcnNpc3RlbnQiLCJzaG93SW5pdGlhbHMiLCJjbGFzc05hbWUiLCJzdHlsZSIsInByb3BzIiwicmVmIiwiY3VycmVudEltYWdlIiwic2V0Q3VycmVudEltYWdlIiwiaW1hZ2VFcnJvciIsInNldEltYWdlRXJyb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJlbWFpbCIsImNvbG9yIiwiZ2V0SW1hZ2VVcmwiLCJpbWFnZVBhdGgiLCJzdGFydHNXaXRoIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJpbWFnZVVybCIsInByb2ZpbGVJbWFnZSIsImhhbmRsZVByb2ZpbGVVcGRhdGUiLCJ1cGRhdGVkVXNlciIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJpZCIsIm5ld0ltYWdlVXJsIiwiZXJyb3IiLCJjb25zb2xlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVJbWFnZUVycm9yIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZGVidWciLCJuYW1lIiwiZmluYWxJbWFnZVVybCIsInVuZGVmaW5lZCIsImluaXRpYWwiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInJlbmRlclByb3AiLCJidXR0b24iLCJSb290Iiwic2hhcGUiLCJyZW5kZXIiLCJjdXJzb3IiLCJJbWFnZVByaW1pdGl2ZSIsIm9uRXJyb3IiLCJhbHQiLCJGYWxsYmFja1ByaW1pdGl2ZSIsImZvbnRXZWlnaHQiLCJfaWQiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/CustomAvatar.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/EmojiPicker.js":
/*!***********************************!*\
  !*** ./components/EmojiPicker.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _emoji_mart_data_sets_14_native__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @emoji-mart/data/sets/14/native */ \"(pages-dir-node)/./node_modules/@emoji-mart/data/sets/14/native.json\");\n/* harmony import */ var _emoji_mart_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @emoji-mart/react */ \"@emoji-mart/react\");\n/* harmony import */ var _emoji_mart_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_emoji_mart_react__WEBPACK_IMPORTED_MODULE_2__);\n// components/EmojiPicker.js\n\n\n\n\nfunction EmojiPicker({ onSelect }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((_emoji_mart_react__WEBPACK_IMPORTED_MODULE_2___default()), {\n        data: _emoji_mart_data_sets_14_native__WEBPACK_IMPORTED_MODULE_3__,\n        onEmojiSelect: onSelect,\n        theme: \"light\",\n        set: \"native\",\n        locale: \"ko\",\n        previewPosition: \"none\",\n        skinTonePosition: \"none\",\n        emojiButtonSize: 30,\n        emojiSize: 20,\n        maxFrequentRows: 4,\n        perLine: 9\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/EmojiPicker.js\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EmojiPicker);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvRW1vamlQaWNrZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSw0QkFBNEI7O0FBRUY7QUFDeUI7QUFDWjtBQUV2QyxTQUFTRyxZQUFZLEVBQUVDLFFBQVEsRUFBRTtJQUMvQixxQkFDRSw4REFBQ0YsMERBQU1BO1FBQ0xELE1BQU1BLDREQUFJQTtRQUNWSSxlQUFlRDtRQUNmRSxPQUFNO1FBQ05DLEtBQUk7UUFDSkMsUUFBTztRQUNQQyxpQkFBZ0I7UUFDaEJDLGtCQUFpQjtRQUNqQkMsaUJBQWlCO1FBQ2pCQyxXQUFXO1FBQ1hDLGlCQUFpQjtRQUNqQkMsU0FBUzs7Ozs7O0FBR2Y7QUFFQSxpRUFBZVgsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvY29tcG9uZW50cy9FbW9qaVBpY2tlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL0Vtb2ppUGlja2VyLmpzXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZGF0YSBmcm9tICdAZW1vamktbWFydC9kYXRhL3NldHMvMTQvbmF0aXZlJztcbmltcG9ydCBQaWNrZXIgZnJvbSAnQGVtb2ppLW1hcnQvcmVhY3QnO1xuXG5mdW5jdGlvbiBFbW9qaVBpY2tlcih7IG9uU2VsZWN0IH0pIHtcbiAgcmV0dXJuIChcbiAgICA8UGlja2VyXG4gICAgICBkYXRhPXtkYXRhfVxuICAgICAgb25FbW9qaVNlbGVjdD17b25TZWxlY3R9XG4gICAgICB0aGVtZT1cImxpZ2h0XCJcbiAgICAgIHNldD1cIm5hdGl2ZVwiXG4gICAgICBsb2NhbGU9XCJrb1wiXG4gICAgICBwcmV2aWV3UG9zaXRpb249XCJub25lXCJcbiAgICAgIHNraW5Ub25lUG9zaXRpb249XCJub25lXCJcbiAgICAgIGVtb2ppQnV0dG9uU2l6ZT17MzB9XG4gICAgICBlbW9qaVNpemU9ezIwfVxuICAgICAgbWF4RnJlcXVlbnRSb3dzPXs0fVxuICAgICAgcGVyTGluZT17OX1cbiAgICAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBFbW9qaVBpY2tlcjsiXSwibmFtZXMiOlsiUmVhY3QiLCJkYXRhIiwiUGlja2VyIiwiRW1vamlQaWNrZXIiLCJvblNlbGVjdCIsIm9uRW1vamlTZWxlY3QiLCJ0aGVtZSIsInNldCIsImxvY2FsZSIsInByZXZpZXdQb3NpdGlvbiIsInNraW5Ub25lUG9zaXRpb24iLCJlbW9qaUJ1dHRvblNpemUiLCJlbW9qaVNpemUiLCJtYXhGcmVxdWVudFJvd3MiLCJwZXJMaW5lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/EmojiPicker.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/FileActions.js":
/*!***********************************!*\
  !*** ./components/FileActions.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__]);\n_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst FileActions = ({ onViewInNewTab, onDownload })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.HStack, {\n        gap: \"$100\",\n        className: \"mt-2 pt-2 border-t border-gray-700\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"flex items-center gap-1.5 px-2 py-1 text-xs rounded-md border border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 transition-colors\",\n                onClick: onViewInNewTab,\n                title: \"새 탭에서 보기\",\n                \"data-testid\": \"file-view-button\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ShareIcon, {\n                        size: 14\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileActions.js\",\n                        lineNumber: 14,\n                        columnNumber: 9\n                    }, undefined),\n                    \"새 탭에서 보기\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileActions.js\",\n                lineNumber: 8,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"flex items-center gap-1.5 px-2 py-1 text-xs rounded-md border border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500 transition-colors\",\n                onClick: onDownload,\n                title: \"다운로드\",\n                \"data-testid\": \"file-download-button\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.DownloadIcon, {\n                        size: 14\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileActions.js\",\n                        lineNumber: 23,\n                        columnNumber: 9\n                    }, undefined),\n                    \"다운로드\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileActions.js\",\n                lineNumber: 17,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileActions.js\",\n        lineNumber: 7,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FileActions);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvRmlsZUFjdGlvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDZ0M7QUFDbEI7QUFFeEMsTUFBTUksY0FBYyxDQUFDLEVBQUVDLGNBQWMsRUFBRUMsVUFBVSxFQUFFO0lBQ2pELHFCQUNFLDhEQUFDSCxrREFBTUE7UUFBQ0ksS0FBSTtRQUFPQyxXQUFVOzswQkFDM0IsOERBQUNDO2dCQUNDRCxXQUFVO2dCQUNWRSxTQUFTTDtnQkFDVE0sT0FBTTtnQkFDTkMsZUFBWTs7a0NBRVosOERBQUNYLHNEQUFTQTt3QkFBQ1ksTUFBTTs7Ozs7O29CQUFNOzs7Ozs7OzBCQUd6Qiw4REFBQ0o7Z0JBQ0NELFdBQVU7Z0JBQ1ZFLFNBQVNKO2dCQUNUSyxPQUFNO2dCQUNOQyxlQUFZOztrQ0FFWiw4REFBQ1YseURBQVlBO3dCQUFDVyxNQUFNOzs7Ozs7b0JBQU07Ozs7Ozs7Ozs7Ozs7QUFLbEM7QUFFQSxpRUFBZVQsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvY29tcG9uZW50cy9GaWxlQWN0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU2hhcmVJY29uLCBEb3dubG9hZEljb24gfSBmcm9tICdAdmFwb3ItdWkvaWNvbnMnO1xuaW1wb3J0IHsgSFN0YWNrIH0gZnJvbSAnQHZhcG9yLXVpL2NvcmUnO1xuXG5jb25zdCBGaWxlQWN0aW9ucyA9ICh7IG9uVmlld0luTmV3VGFiLCBvbkRvd25sb2FkIH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8SFN0YWNrIGdhcD1cIiQxMDBcIiBjbGFzc05hbWU9XCJtdC0yIHB0LTIgYm9yZGVyLXQgYm9yZGVyLWdyYXktNzAwXCI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgcHgtMiBweS0xIHRleHQteHMgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHRleHQtZ3JheS0zMDAgaG92ZXI6YmctZ3JheS03MDAgaG92ZXI6Ym9yZGVyLWdyYXktNTAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgb25DbGljaz17b25WaWV3SW5OZXdUYWJ9XG4gICAgICAgIHRpdGxlPVwi7IOIIO2DreyXkOyEnCDrs7TquLBcIlxuICAgICAgICBkYXRhLXRlc3RpZD1cImZpbGUtdmlldy1idXR0b25cIlxuICAgICAgPlxuICAgICAgICA8U2hhcmVJY29uIHNpemU9ezE0fSAvPlxuICAgICAgICDsg4gg7YOt7JeQ7IScIOuztOq4sFxuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgcHgtMiBweS0xIHRleHQteHMgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHRleHQtZ3JheS0zMDAgaG92ZXI6YmctZ3JheS03MDAgaG92ZXI6Ym9yZGVyLWdyYXktNTAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgb25DbGljaz17b25Eb3dubG9hZH1cbiAgICAgICAgdGl0bGU9XCLri6TsmrTroZzrk5xcIlxuICAgICAgICBkYXRhLXRlc3RpZD1cImZpbGUtZG93bmxvYWQtYnV0dG9uXCJcbiAgICAgID5cbiAgICAgICAgPERvd25sb2FkSWNvbiBzaXplPXsxNH0gLz5cbiAgICAgICAg64uk7Jq066Gc65OcXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L0hTdGFjaz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZpbGVBY3Rpb25zO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiU2hhcmVJY29uIiwiRG93bmxvYWRJY29uIiwiSFN0YWNrIiwiRmlsZUFjdGlvbnMiLCJvblZpZXdJbk5ld1RhYiIsIm9uRG93bmxvYWQiLCJnYXAiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwidGl0bGUiLCJkYXRhLXRlc3RpZCIsInNpemUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/FileActions.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/FileMessage.js":
/*!***********************************!*\
  !*** ./components/FileMessage.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _CustomAvatar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CustomAvatar */ \"(pages-dir-node)/./components/CustomAvatar.js\");\n/* harmony import */ var _MessageContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MessageContent */ \"(pages-dir-node)/./components/MessageContent.js\");\n/* harmony import */ var _MessageActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MessageActions */ \"(pages-dir-node)/./components/MessageActions.js\");\n/* harmony import */ var _FileActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./FileActions */ \"(pages-dir-node)/./components/FileActions.js\");\n/* harmony import */ var _ReadStatus__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ReadStatus */ \"(pages-dir-node)/./components/ReadStatus.js\");\n/* harmony import */ var _services_fileService__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/services/fileService */ \"(pages-dir-node)/./services/fileService.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(pages-dir-node)/./contexts/AuthContext.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CustomAvatar__WEBPACK_IMPORTED_MODULE_3__, _MessageContent__WEBPACK_IMPORTED_MODULE_4__, _MessageActions__WEBPACK_IMPORTED_MODULE_5__, _FileActions__WEBPACK_IMPORTED_MODULE_6__, _ReadStatus__WEBPACK_IMPORTED_MODULE_7__, _services_fileService__WEBPACK_IMPORTED_MODULE_8__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_9__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_10__]);\n([_CustomAvatar__WEBPACK_IMPORTED_MODULE_3__, _MessageContent__WEBPACK_IMPORTED_MODULE_4__, _MessageActions__WEBPACK_IMPORTED_MODULE_5__, _FileActions__WEBPACK_IMPORTED_MODULE_6__, _ReadStatus__WEBPACK_IMPORTED_MODULE_7__, _services_fileService__WEBPACK_IMPORTED_MODULE_8__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_9__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\nconst FileMessage = ({ msg = {}, isMine = false, currentUser = null, onReactionAdd, onReactionRemove, room = null, socketRef })=>{\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_9__.useAuth)();\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [previewUrl, setPreviewUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const messageDomRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FileMessage.useEffect\": ()=>{\n            if (msg?.file) {\n                const url = _services_fileService__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getPreviewUrl(msg.file, user?.token, user?.sessionId, true);\n                setPreviewUrl(url);\n                console.debug('Preview URL generated:', {\n                    filename: msg.file.filename,\n                    url\n                });\n            }\n        }\n    }[\"FileMessage.useEffect\"], [\n        msg?.file,\n        user?.token,\n        user?.sessionId\n    ]);\n    if (!msg?.file) {\n        console.error('File data is missing:', msg);\n        return null;\n    }\n    const formattedTime = new Date(msg.timestamp).toLocaleString('ko-KR', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n    }).replace(/\\./g, '년').replace(/\\s/g, ' ').replace('일 ', '일 ');\n    const getFileIcon = ()=>{\n        const mimetype = msg.file?.mimetype || '';\n        const iconProps = {\n            className: \"w-5 h-5 flex-shrink-0\"\n        };\n        if (mimetype.startsWith('image/')) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ImageIcon, {\n            ...iconProps,\n            color: \"#00C853\"\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n            lineNumber: 61,\n            columnNumber: 47\n        }, undefined);\n        if (mimetype.startsWith('video/')) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.MovieIcon, {\n            ...iconProps,\n            color: \"#2196F3\"\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n            lineNumber: 62,\n            columnNumber: 47\n        }, undefined);\n        if (mimetype.startsWith('audio/')) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.MusicIcon, {\n            ...iconProps,\n            color: \"#9C27B0\"\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n            lineNumber: 63,\n            columnNumber: 47\n        }, undefined);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.PdfIcon, {\n            ...iconProps,\n            color: \"#ffffff\"\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n            lineNumber: 64,\n            columnNumber: 12\n        }, undefined);\n    };\n    const getDecodedFilename = (encodedFilename)=>{\n        try {\n            if (!encodedFilename) return 'Unknown File';\n            const base64 = encodedFilename.replace(/-/g, '+').replace(/_/g, '/');\n            const pad = base64.length % 4;\n            const paddedBase64 = pad ? base64 + '='.repeat(4 - pad) : base64;\n            if (paddedBase64.match(/^[A-Za-z0-9+/=]+$/)) {\n                return Buffer.from(paddedBase64, 'base64').toString('utf8');\n            }\n            return decodeURIComponent(encodedFilename);\n        } catch (error) {\n            console.error('Filename decoding error:', error);\n            return encodedFilename;\n        }\n    };\n    const renderAvatar = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_CustomAvatar__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            user: isMine ? currentUser : msg.sender,\n            size: \"md\",\n            persistent: true,\n            className: \"shrink-0\",\n            showInitials: true\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n            lineNumber: 90,\n            columnNumber: 5\n        }, undefined);\n    const handleFileDownload = async (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        setError(null);\n        try {\n            if (!msg.file?.filename) {\n                throw new Error('파일 정보가 없습니다.');\n            }\n            if (!user?.token || !user?.sessionId) {\n                throw new Error('인증 정보가 없습니다.');\n            }\n            const baseUrl = _services_fileService__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getFileUrl(msg.file.filename, false);\n            const authenticatedUrl = `${baseUrl}?token=${encodeURIComponent(user?.token)}&sessionId=${encodeURIComponent(user?.sessionId)}&download=true`;\n            const iframe = document.createElement('iframe');\n            iframe.style.display = 'none';\n            iframe.src = authenticatedUrl;\n            document.body.appendChild(iframe);\n            setTimeout(()=>{\n                document.body.removeChild(iframe);\n            }, 5000);\n        } catch (error) {\n            console.error('File download error:', error);\n            setError(error.message || '파일 다운로드 중 오류가 발생했습니다.');\n        }\n    };\n    const handleViewInNewTab = (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        setError(null);\n        try {\n            if (!msg.file?.filename) {\n                throw new Error('파일 정보가 없습니다.');\n            }\n            if (!user?.token || !user?.sessionId) {\n                throw new Error('인증 정보가 없습니다.');\n            }\n            const baseUrl = _services_fileService__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getFileUrl(msg.file.filename, true);\n            const authenticatedUrl = `${baseUrl}?token=${encodeURIComponent(user?.token)}&sessionId=${encodeURIComponent(user?.sessionId)}`;\n            const newWindow = window.open(authenticatedUrl, '_blank');\n            if (!newWindow) {\n                throw new Error('팝업이 차단되었습니다. 팝업 차단을 해제해주세요.');\n            }\n            newWindow.opener = null;\n        } catch (error) {\n            console.error('File view error:', error);\n            setError(error.message || '파일 보기 중 오류가 발생했습니다.');\n        }\n    };\n    const renderImagePreview = (originalname)=>{\n        try {\n            if (!msg?.file?.filename) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-center h-full bg-gray-100\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ImageIcon, {\n                        className: \"w-8 h-8 text-gray-400\"\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 164,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 163,\n                    columnNumber: 11\n                }, undefined);\n            }\n            if (!user?.token || !user?.sessionId) {\n                throw new Error('인증 정보가 없습니다.');\n            }\n            const previewUrl = _services_fileService__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getPreviewUrl(msg.file, user?.token, user?.sessionId, true);\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-transparent-pattern\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                    src: previewUrl,\n                    alt: originalname,\n                    className: \"max-w-[400px] max-h-[400px] object-cover object-center rounded-md\",\n                    onLoad: ()=>{\n                        console.debug('Image loaded successfully:', originalname);\n                    },\n                    onError: (e)=>{\n                        console.error('Image load error:', {\n                            error: e.error,\n                            originalname\n                        });\n                        e.target.onerror = null;\n                        e.target.src = '/images/placeholder-image.png';\n                        setError('이미지를 불러올 수 없습니다.');\n                    },\n                    loading: \"lazy\",\n                    \"data-testid\": \"file-image-preview\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 177,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                lineNumber: 176,\n                columnNumber: 9\n            }, undefined);\n        } catch (error) {\n            console.error('Image preview error:', error);\n            setError(error.message || '이미지 미리보기를 불러올 수 없습니다.');\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-center h-full bg-gray-100\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ImageIcon, {\n                    className: \"w-8 h-8 text-gray-400\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 203,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                lineNumber: 202,\n                columnNumber: 9\n            }, undefined);\n        }\n    };\n    const renderFilePreview = ()=>{\n        const mimetype = msg.file?.mimetype || '';\n        const originalname = getDecodedFilename(msg.file?.originalname || 'Unknown File');\n        const size = _services_fileService__WEBPACK_IMPORTED_MODULE_8__[\"default\"].formatFileSize(msg.file?.size || 0);\n        const previewWrapperClass = \"overflow-hidden\";\n        if (mimetype.startsWith('image/')) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: previewWrapperClass,\n                children: [\n                    renderImagePreview(originalname),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2 mt-2\",\n                        children: [\n                            getFileIcon(),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 min-w-0\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm font-medium truncate text-gray-200\",\n                                        children: originalname\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                        lineNumber: 223,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-gray-400\",\n                                        children: size\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                        lineNumber: 224,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                lineNumber: 222,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 220,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FileActions__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        onViewInNewTab: handleViewInNewTab,\n                        onDownload: handleFileDownload\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 227,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                lineNumber: 218,\n                columnNumber: 9\n            }, undefined);\n        }\n        if (mimetype.startsWith('video/')) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: previewWrapperClass,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: previewUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                            className: \"max-w-[400px] max-h-[400px] object-cover rounded-md\",\n                            controls: true,\n                            preload: \"metadata\",\n                            \"aria-label\": `${originalname} 비디오`,\n                            crossOrigin: \"use-credentials\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"source\", {\n                                    src: previewUrl,\n                                    type: mimetype\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 244,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"track\", {\n                                    kind: \"captions\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 245,\n                                    columnNumber: 17\n                                }, undefined),\n                                \"비디오를 재생할 수 없습니다.\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                            lineNumber: 237,\n                            columnNumber: 15\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-center h-full\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.MovieIcon, {\n                                className: \"w-8 h-8 text-gray-400\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                lineNumber: 250,\n                                columnNumber: 17\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                            lineNumber: 249,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 235,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2 mt-2\",\n                        children: [\n                            getFileIcon(),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 min-w-0\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm font-medium truncate text-gray-200\",\n                                        children: originalname\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                        lineNumber: 257,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-gray-400\",\n                                        children: size\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                        lineNumber: 258,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                lineNumber: 256,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 254,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FileActions__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        onViewInNewTab: handleViewInNewTab,\n                        onDownload: handleFileDownload\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 261,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                lineNumber: 234,\n                columnNumber: 9\n            }, undefined);\n        }\n        if (mimetype.startsWith('audio/')) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: previewWrapperClass,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2 mt-2\",\n                        children: [\n                            getFileIcon(),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 min-w-0\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm font-medium truncate text-gray-200\",\n                                        children: originalname\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                        lineNumber: 272,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-gray-400\",\n                                        children: size\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                        lineNumber: 273,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                lineNumber: 271,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 269,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-3\",\n                        children: previewUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                            className: \"w-full\",\n                            controls: true,\n                            preload: \"metadata\",\n                            \"aria-label\": `${originalname} 오디오`,\n                            crossOrigin: \"use-credentials\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"source\", {\n                                    src: previewUrl,\n                                    type: mimetype\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 285,\n                                    columnNumber: 17\n                                }, undefined),\n                                \"오디오를 재생할 수 없습니다.\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                            lineNumber: 278,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 276,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FileActions__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        onViewInNewTab: handleViewInNewTab,\n                        onDownload: handleFileDownload\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                        lineNumber: 290,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                lineNumber: 268,\n                columnNumber: 9\n            }, undefined);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: previewWrapperClass,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center gap-2 mt-2\",\n                    children: [\n                        getFileIcon(),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1 min-w-0\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm font-medium truncate text-gray-200\",\n                                    children: originalname\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 300,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-gray-400\",\n                                    children: size\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 301,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                            lineNumber: 299,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 297,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FileActions__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                    onViewInNewTab: handleViewInNewTab,\n                    onDownload: handleFileDownload\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 304,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n            lineNumber: 296,\n            columnNumber: 7\n        }, undefined);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"my-4\",\n        ref: messageDomRef,\n        \"data-testid\": \"file-message-container\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_10__.VStack, {\n            className: `max-w-[65%] ${isMine ? 'ml-auto items-end' : 'mr-auto items-start'}`,\n            gap: \"$100\",\n            align: isMine ? 'flex-end' : 'flex-start',\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_10__.HStack, {\n                    gap: \"$100\",\n                    alignItems: \"center\",\n                    className: \"px-1\",\n                    children: [\n                        renderAvatar(),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"text-sm font-medium text-gray-300\",\n                            children: isMine ? '나' : msg.sender?.name\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                            lineNumber: 319,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 317,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: `\n          relative group\n          rounded-2xl px-4 py-3\n          border transition-all duration-200\n          ${isMine ? 'bg-gray-800 border-blue-500 hover:border-blue-400 hover:shadow-md' : 'bg-transparent border-gray-400 hover:border-gray-300 hover:shadow-md'}\n        `,\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: `\n            ${isMine ? 'text-blue-100' : 'text-white'}\n          `,\n                            children: [\n                                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: error\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 339,\n                                    columnNumber: 15\n                                }, undefined),\n                                !error && renderFilePreview(),\n                                !error && msg.content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mt-3 text-base leading-relaxed\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MessageContent__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                        content: msg.content\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                        lineNumber: 344,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 343,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                            lineNumber: 335,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_10__.HStack, {\n                            gap: \"$150\",\n                            justifyContent: \"flex-end\",\n                            alignItems: \"center\",\n                            className: `mt-2 pt-2 border-t ${isMine ? 'border-gray-700' : 'border-gray-600'}`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `text-xs ${isMine ? 'text-blue-400' : 'text-gray-300'}`,\n                                    title: new Date(msg.timestamp).toLocaleString('ko-KR'),\n                                    children: formattedTime\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 356,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ReadStatus__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                    messageType: msg.type,\n                                    participants: room?.participants || [],\n                                    readers: msg.readers || [],\n                                    messageId: msg._id,\n                                    messageRef: messageDomRef,\n                                    currentUserId: currentUser?._id || currentUser?.id,\n                                    socketRef: socketRef\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                                    lineNumber: 362,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                            lineNumber: 350,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 325,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MessageActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                    messageId: msg._id,\n                    messageContent: msg.content,\n                    reactions: msg.reactions,\n                    currentUserId: currentUser?._id || currentUser?.id,\n                    onReactionAdd: onReactionAdd,\n                    onReactionRemove: onReactionRemove,\n                    isMine: isMine,\n                    room: room\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n                    lineNumber: 375,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n            lineNumber: 311,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FileMessage.js\",\n        lineNumber: 310,\n        columnNumber: 5\n    }, undefined);\n};\nFileMessage.defaultProps = {\n    msg: {\n        file: {\n            mimetype: '',\n            filename: '',\n            originalname: '',\n            size: 0\n        }\n    },\n    isMine: false,\n    currentUser: null\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(FileMessage));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvRmlsZU1lc3NhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBT2xDO0FBQ3dDO0FBQ3ZCO0FBQ0k7QUFDQTtBQUNOO0FBQ0Y7QUFDVztBQUNBO0FBRWpELE1BQU15QixjQUFjLENBQUMsRUFDbkJDLE1BQU0sQ0FBQyxDQUFDLEVBQ1JDLFNBQVMsS0FBSyxFQUNkQyxjQUFjLElBQUksRUFDbEJDLGFBQWEsRUFDYkMsZ0JBQWdCLEVBQ2hCQyxPQUFPLElBQUksRUFDWEMsU0FBUyxFQUNWO0lBQ0MsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBR1QsOERBQU9BO0lBQ3hCLE1BQU0sQ0FBQ1UsT0FBT0MsU0FBUyxHQUFHbEMsK0NBQVFBLENBQUM7SUFDbkMsTUFBTSxDQUFDbUMsWUFBWUMsY0FBYyxHQUFHcEMsK0NBQVFBLENBQUM7SUFDN0MsTUFBTXFDLGdCQUFnQm5DLDZDQUFNQSxDQUFDO0lBQzdCRCxnREFBU0E7aUNBQUM7WUFDUixJQUFJd0IsS0FBS2EsTUFBTTtnQkFDYixNQUFNQyxNQUFNakIsMkVBQXlCLENBQUNHLElBQUlhLElBQUksRUFBRU4sTUFBTVMsT0FBT1QsTUFBTVUsV0FBVztnQkFDOUVOLGNBQWNHO2dCQUNkSSxRQUFRQyxLQUFLLENBQUMsMEJBQTBCO29CQUN0Q0MsVUFBVXBCLElBQUlhLElBQUksQ0FBQ08sUUFBUTtvQkFDM0JOO2dCQUNGO1lBQ0Y7UUFDRjtnQ0FBRztRQUFDZCxLQUFLYTtRQUFNTixNQUFNUztRQUFPVCxNQUFNVTtLQUFVO0lBRTVDLElBQUksQ0FBQ2pCLEtBQUthLE1BQU07UUFDZEssUUFBUVYsS0FBSyxDQUFDLHlCQUF5QlI7UUFDdkMsT0FBTztJQUNUO0lBRUEsTUFBTXFCLGdCQUFnQixJQUFJQyxLQUFLdEIsSUFBSXVCLFNBQVMsRUFBRUMsY0FBYyxDQUFDLFNBQVM7UUFDcEVDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxLQUFLO1FB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QUFNQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLaEI7QUFFQU4sWUFBWStILFlBQVksR0FBRztJQUN6QjlILEtBQUs7UUFDSGEsTUFBTTtZQUNKcUIsVUFBVTtZQUNWZCxVQUFVO1lBQ1Y4RCxjQUFjO1lBQ2Q3QixNQUFNO1FBQ1I7SUFDRjtJQUNBcEQsUUFBUTtJQUNSQyxhQUFhO0FBQ2Y7QUFFQSw4RUFBZTVCLGlEQUFVLENBQUN5QixZQUFZQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb21wb25lbnRzL0ZpbGVNZXNzYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBQZGZJY29uIGFzIEZpbGVUZXh0LFxuICBJbWFnZUljb24gYXMgSW1hZ2UsXG4gIE1vdmllSWNvbiBhcyBGaWxtLFxuICBNdXNpY0ljb24gYXMgTXVzaWMsXG4gIEVycm9yQ2lyY2xlSWNvbiBhcyBBbGVydENpcmNsZVxufSBmcm9tICdAdmFwb3ItdWkvaWNvbnMnO1xuaW1wb3J0IHsgQnV0dG9uLCBDYWxsb3V0LCBWU3RhY2ssIEhTdGFjayB9IGZyb20gJ0B2YXBvci11aS9jb3JlJztcbmltcG9ydCBDdXN0b21BdmF0YXIgZnJvbSAnLi9DdXN0b21BdmF0YXInO1xuaW1wb3J0IE1lc3NhZ2VDb250ZW50IGZyb20gJy4vTWVzc2FnZUNvbnRlbnQnO1xuaW1wb3J0IE1lc3NhZ2VBY3Rpb25zIGZyb20gJy4vTWVzc2FnZUFjdGlvbnMnO1xuaW1wb3J0IEZpbGVBY3Rpb25zIGZyb20gJy4vRmlsZUFjdGlvbnMnO1xuaW1wb3J0IFJlYWRTdGF0dXMgZnJvbSAnLi9SZWFkU3RhdHVzJztcbmltcG9ydCBmaWxlU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2ZpbGVTZXJ2aWNlJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcblxuY29uc3QgRmlsZU1lc3NhZ2UgPSAoe1xuICBtc2cgPSB7fSxcbiAgaXNNaW5lID0gZmFsc2UsXG4gIGN1cnJlbnRVc2VyID0gbnVsbCxcbiAgb25SZWFjdGlvbkFkZCxcbiAgb25SZWFjdGlvblJlbW92ZSxcbiAgcm9vbSA9IG51bGwsXG4gIHNvY2tldFJlZlxufSkgPT4ge1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW3ByZXZpZXdVcmwsIHNldFByZXZpZXdVcmxdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBtZXNzYWdlRG9tUmVmID0gdXNlUmVmKG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtc2c/LmZpbGUpIHtcbiAgICAgIGNvbnN0IHVybCA9IGZpbGVTZXJ2aWNlLmdldFByZXZpZXdVcmwobXNnLmZpbGUsIHVzZXI/LnRva2VuLCB1c2VyPy5zZXNzaW9uSWQsIHRydWUpO1xuICAgICAgc2V0UHJldmlld1VybCh1cmwpO1xuICAgICAgY29uc29sZS5kZWJ1ZygnUHJldmlldyBVUkwgZ2VuZXJhdGVkOicsIHtcbiAgICAgICAgZmlsZW5hbWU6IG1zZy5maWxlLmZpbGVuYW1lLFxuICAgICAgICB1cmxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW21zZz8uZmlsZSwgdXNlcj8udG9rZW4sIHVzZXI/LnNlc3Npb25JZF0pO1xuXG4gIGlmICghbXNnPy5maWxlKSB7XG4gICAgY29uc29sZS5lcnJvcignRmlsZSBkYXRhIGlzIG1pc3Npbmc6JywgbXNnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBuZXcgRGF0ZShtc2cudGltZXN0YW1wKS50b0xvY2FsZVN0cmluZygna28tS1InLCB7XG4gICAgeWVhcjogJ251bWVyaWMnLFxuICAgIG1vbnRoOiAnbG9uZycsXG4gICAgZGF5OiAnbnVtZXJpYycsXG4gICAgaG91cjogJzItZGlnaXQnLFxuICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgIHNlY29uZDogJzItZGlnaXQnLFxuICAgIGhvdXIxMjogZmFsc2VcbiAgfSkucmVwbGFjZSgvXFwuL2csICfrhYQnKS5yZXBsYWNlKC9cXHMvZywgJyAnKS5yZXBsYWNlKCfsnbwgJywgJ+ydvCAnKTtcblxuICBjb25zdCBnZXRGaWxlSWNvbiA9ICgpID0+IHtcbiAgICBjb25zdCBtaW1ldHlwZSA9IG1zZy5maWxlPy5taW1ldHlwZSB8fCAnJztcbiAgICBjb25zdCBpY29uUHJvcHMgPSB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IGZsZXgtc2hyaW5rLTBcIiB9O1xuXG4gICAgaWYgKG1pbWV0eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSByZXR1cm4gPEltYWdlIHsuLi5pY29uUHJvcHN9IGNvbG9yPVwiIzAwQzg1M1wiIC8+O1xuICAgIGlmIChtaW1ldHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkgcmV0dXJuIDxGaWxtIHsuLi5pY29uUHJvcHN9IGNvbG9yPVwiIzIxOTZGM1wiIC8+O1xuICAgIGlmIChtaW1ldHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkgcmV0dXJuIDxNdXNpYyB7Li4uaWNvblByb3BzfSBjb2xvcj1cIiM5QzI3QjBcIiAvPjtcbiAgICByZXR1cm4gPEZpbGVUZXh0IHsuLi5pY29uUHJvcHN9IGNvbG9yPVwiI2ZmZmZmZlwiIC8+O1xuICB9O1xuXG4gIGNvbnN0IGdldERlY29kZWRGaWxlbmFtZSA9IChlbmNvZGVkRmlsZW5hbWUpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFlbmNvZGVkRmlsZW5hbWUpIHJldHVybiAnVW5rbm93biBGaWxlJztcbiAgICAgIFxuICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlZEZpbGVuYW1lXG4gICAgICAgIC5yZXBsYWNlKC8tL2csICcrJylcbiAgICAgICAgLnJlcGxhY2UoL18vZywgJy8nKTtcbiAgICAgIFxuICAgICAgY29uc3QgcGFkID0gYmFzZTY0Lmxlbmd0aCAlIDQ7XG4gICAgICBjb25zdCBwYWRkZWRCYXNlNjQgPSBwYWQgPyBiYXNlNjQgKyAnPScucmVwZWF0KDQgLSBwYWQpIDogYmFzZTY0O1xuICAgICAgXG4gICAgICBpZiAocGFkZGVkQmFzZTY0Lm1hdGNoKC9eW0EtWmEtejAtOSsvPV0rJC8pKSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShwYWRkZWRCYXNlNjQsICdiYXNlNjQnKS50b1N0cmluZygndXRmOCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRGaWxlbmFtZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbGVuYW1lIGRlY29kaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBlbmNvZGVkRmlsZW5hbWU7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbmRlckF2YXRhciA9ICgpID0+IChcbiAgICA8Q3VzdG9tQXZhdGFyXG4gICAgICB1c2VyPXtpc01pbmUgPyBjdXJyZW50VXNlciA6IG1zZy5zZW5kZXJ9XG4gICAgICBzaXplPVwibWRcIlxuICAgICAgcGVyc2lzdGVudD17dHJ1ZX1cbiAgICAgIGNsYXNzTmFtZT1cInNocmluay0wXCJcbiAgICAgIHNob3dJbml0aWFscz17dHJ1ZX1cbiAgICAvPlxuICApO1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVEb3dubG9hZCA9IGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFtc2cuZmlsZT8uZmlsZW5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCftjIzsnbwg7KCV67O06rCAIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF1c2VyPy50b2tlbiB8fCAhdXNlcj8uc2Vzc2lvbklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7J247KadIOygleuztOqwgCDsl4bsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhc2VVcmwgPSBmaWxlU2VydmljZS5nZXRGaWxlVXJsKG1zZy5maWxlLmZpbGVuYW1lLCBmYWxzZSk7XG4gICAgICBjb25zdCBhdXRoZW50aWNhdGVkVXJsID0gYCR7YmFzZVVybH0/dG9rZW49JHtlbmNvZGVVUklDb21wb25lbnQodXNlcj8udG9rZW4pfSZzZXNzaW9uSWQ9JHtlbmNvZGVVUklDb21wb25lbnQodXNlcj8uc2Vzc2lvbklkKX0mZG93bmxvYWQ9dHJ1ZWA7XG4gICAgICBcbiAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICBpZnJhbWUuc3JjID0gYXV0aGVudGljYXRlZFVybDtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgIH0sIDUwMDApO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbGUgZG93bmxvYWQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgc2V0RXJyb3IoZXJyb3IubWVzc2FnZSB8fCAn7YyM7J28IOuLpOyatOuhnOuTnCDspJEg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVmlld0luTmV3VGFiID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXRFcnJvcihudWxsKTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIW1zZy5maWxlPy5maWxlbmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+2MjOydvCDsoJXrs7TqsIAg7JeG7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXVzZXI/LnRva2VuIHx8ICF1c2VyPy5zZXNzaW9uSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfsnbjspp0g7KCV67O06rCAIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYmFzZVVybCA9IGZpbGVTZXJ2aWNlLmdldEZpbGVVcmwobXNnLmZpbGUuZmlsZW5hbWUsIHRydWUpO1xuICAgICAgY29uc3QgYXV0aGVudGljYXRlZFVybCA9IGAke2Jhc2VVcmx9P3Rva2VuPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVzZXI/LnRva2VuKX0mc2Vzc2lvbklkPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVzZXI/LnNlc3Npb25JZCl9YDtcblxuICAgICAgY29uc3QgbmV3V2luZG93ID0gd2luZG93Lm9wZW4oYXV0aGVudGljYXRlZFVybCwgJ19ibGFuaycpO1xuICAgICAgaWYgKCFuZXdXaW5kb3cpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCftjJ3sl4XsnbQg7LCo64uo65CY7JeI7Iq164uI64ukLiDtjJ3sl4Ug7LCo64uo7J2EIO2VtOygnO2VtOyjvOyEuOyalC4nKTtcbiAgICAgIH1cbiAgICAgIG5ld1dpbmRvdy5vcGVuZXIgPSBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGaWxlIHZpZXcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgc2V0RXJyb3IoZXJyb3IubWVzc2FnZSB8fCAn7YyM7J28IOuztOq4sCDspJEg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVuZGVySW1hZ2VQcmV2aWV3ID0gKG9yaWdpbmFsbmFtZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIW1zZz8uZmlsZT8uZmlsZW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGgtZnVsbCBiZy1ncmF5LTEwMFwiPlxuICAgICAgICAgICAgPEltYWdlIGNsYXNzTmFtZT1cInctOCBoLTggdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdXNlcj8udG9rZW4gfHwgIXVzZXI/LnNlc3Npb25JZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yduOymnSDsoJXrs7TqsIAg7JeG7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcmV2aWV3VXJsID0gZmlsZVNlcnZpY2UuZ2V0UHJldmlld1VybChtc2cuZmlsZSwgdXNlcj8udG9rZW4sIHVzZXI/LnNlc3Npb25JZCwgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctdHJhbnNwYXJlbnQtcGF0dGVyblwiPlxuICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgIHNyYz17cHJldmlld1VybH1cbiAgICAgICAgICAgIGFsdD17b3JpZ2luYWxuYW1lfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwibWF4LXctWzQwMHB4XSBtYXgtaC1bNDAwcHhdIG9iamVjdC1jb3ZlciBvYmplY3QtY2VudGVyIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0ltYWdlIGxvYWRlZCBzdWNjZXNzZnVsbHk6Jywgb3JpZ2luYWxuYW1lKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbWFnZSBsb2FkIGVycm9yOicsIHtcbiAgICAgICAgICAgICAgICBlcnJvcjogZS5lcnJvcixcbiAgICAgICAgICAgICAgICBvcmlnaW5hbG5hbWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGUudGFyZ2V0Lm9uZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICBlLnRhcmdldC5zcmMgPSAnL2ltYWdlcy9wbGFjZWhvbGRlci1pbWFnZS5wbmcnO1xuICAgICAgICAgICAgICBzZXRFcnJvcign7J2066+47KeA66W8IOu2iOufrOyYrCDsiJgg7JeG7Iq164uI64ukLicpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGxvYWRpbmc9XCJsYXp5XCJcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZmlsZS1pbWFnZS1wcmV2aWV3XCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ltYWdlIHByZXZpZXcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgc2V0RXJyb3IoZXJyb3IubWVzc2FnZSB8fCAn7J2066+47KeAIOuvuOumrOuztOq4sOulvCDrtojrn6zsmKwg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaC1mdWxsIGJnLWdyYXktMTAwXCI+XG4gICAgICAgICAgPEltYWdlIGNsYXNzTmFtZT1cInctOCBoLTggdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyRmlsZVByZXZpZXcgPSAoKSA9PiB7XG4gICAgY29uc3QgbWltZXR5cGUgPSBtc2cuZmlsZT8ubWltZXR5cGUgfHwgJyc7XG4gICAgY29uc3Qgb3JpZ2luYWxuYW1lID0gZ2V0RGVjb2RlZEZpbGVuYW1lKG1zZy5maWxlPy5vcmlnaW5hbG5hbWUgfHwgJ1Vua25vd24gRmlsZScpO1xuICAgIGNvbnN0IHNpemUgPSBmaWxlU2VydmljZS5mb3JtYXRGaWxlU2l6ZShtc2cuZmlsZT8uc2l6ZSB8fCAwKTtcblxuICAgIGNvbnN0IHByZXZpZXdXcmFwcGVyQ2xhc3MgPSBcIm92ZXJmbG93LWhpZGRlblwiO1xuXG4gICAgaWYgKG1pbWV0eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cHJldmlld1dyYXBwZXJDbGFzc30+XG4gICAgICAgICAge3JlbmRlckltYWdlUHJldmlldyhvcmlnaW5hbG5hbWUpfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMlwiPlxuICAgICAgICAgICAge2dldEZpbGVJY29uKCl9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0cnVuY2F0ZSB0ZXh0LWdyYXktMjAwXCI+e29yaWdpbmFsbmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDBcIj57c2l6ZX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxGaWxlQWN0aW9ucyBvblZpZXdJbk5ld1RhYj17aGFuZGxlVmlld0luTmV3VGFifSBvbkRvd25sb2FkPXtoYW5kbGVGaWxlRG93bmxvYWR9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAobWltZXR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJykpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtwcmV2aWV3V3JhcHBlckNsYXNzfT5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAge3ByZXZpZXdVcmwgPyAoXG4gICAgICAgICAgICAgIDx2aWRlb1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1heC13LVs0MDBweF0gbWF4LWgtWzQwMHB4XSBvYmplY3QtY292ZXIgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgICAgY29udHJvbHNcbiAgICAgICAgICAgICAgICBwcmVsb2FkPVwibWV0YWRhdGFcIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake29yaWdpbmFsbmFtZX0g67mE65SU7JikYH1cbiAgICAgICAgICAgICAgICBjcm9zc09yaWdpbj1cInVzZS1jcmVkZW50aWFsc1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c291cmNlIHNyYz17cHJldmlld1VybH0gdHlwZT17bWltZXR5cGV9IC8+XG4gICAgICAgICAgICAgICAgPHRyYWNrIGtpbmQ9XCJjYXB0aW9uc1wiIC8+XG4gICAgICAgICAgICAgICAg67mE65SU7Jik66W8IOyerOyDne2VoCDsiJgg7JeG7Iq164uI64ukLlxuICAgICAgICAgICAgICA8L3ZpZGVvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGxcIj5cbiAgICAgICAgICAgICAgICA8RmlsbSBjbGFzc05hbWU9XCJ3LTggaC04IHRleHQtZ3JheS00MDBcIiAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC0yXCI+XG4gICAgICAgICAgICB7Z2V0RmlsZUljb24oKX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRydW5jYXRlIHRleHQtZ3JheS0yMDBcIj57b3JpZ2luYWxuYW1lfTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTQwMFwiPntzaXplfTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPEZpbGVBY3Rpb25zIG9uVmlld0luTmV3VGFiPXtoYW5kbGVWaWV3SW5OZXdUYWJ9IG9uRG93bmxvYWQ9e2hhbmRsZUZpbGVEb3dubG9hZH0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChtaW1ldHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3ByZXZpZXdXcmFwcGVyQ2xhc3N9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMlwiPlxuICAgICAgICAgICAge2dldEZpbGVJY29uKCl9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0cnVuY2F0ZSB0ZXh0LWdyYXktMjAwXCI+e29yaWdpbmFsbmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDBcIj57c2l6ZX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtM1wiPlxuICAgICAgICAgICAge3ByZXZpZXdVcmwgJiYgKFxuICAgICAgICAgICAgICA8YXVkaW9cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGxcIlxuICAgICAgICAgICAgICAgIGNvbnRyb2xzXG4gICAgICAgICAgICAgICAgcHJlbG9hZD1cIm1ldGFkYXRhXCJcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgJHtvcmlnaW5hbG5hbWV9IOyYpOuUlOyYpGB9XG4gICAgICAgICAgICAgICAgY3Jvc3NPcmlnaW49XCJ1c2UtY3JlZGVudGlhbHNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNvdXJjZSBzcmM9e3ByZXZpZXdVcmx9IHR5cGU9e21pbWV0eXBlfSAvPlxuICAgICAgICAgICAgICAgIOyYpOuUlOyYpOulvCDsnqzsg53tlaAg7IiYIOyXhuyKteuLiOuLpC5cbiAgICAgICAgICAgICAgPC9hdWRpbz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPEZpbGVBY3Rpb25zIG9uVmlld0luTmV3VGFiPXtoYW5kbGVWaWV3SW5OZXdUYWJ9IG9uRG93bmxvYWQ9e2hhbmRsZUZpbGVEb3dubG9hZH0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17cHJldmlld1dyYXBwZXJDbGFzc30+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMlwiPlxuICAgICAgICAgIHtnZXRGaWxlSWNvbigpfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0cnVuY2F0ZSB0ZXh0LWdyYXktMjAwXCI+e29yaWdpbmFsbmFtZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwXCI+e3NpemV9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8RmlsZUFjdGlvbnMgb25WaWV3SW5OZXdUYWI9e2hhbmRsZVZpZXdJbk5ld1RhYn0gb25Eb3dubG9hZD17aGFuZGxlRmlsZURvd25sb2FkfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibXktNFwiIHJlZj17bWVzc2FnZURvbVJlZn0gZGF0YS10ZXN0aWQ9XCJmaWxlLW1lc3NhZ2UtY29udGFpbmVyXCI+XG4gICAgICA8VlN0YWNrXG4gICAgICAgIGNsYXNzTmFtZT17YG1heC13LVs2NSVdICR7aXNNaW5lID8gJ21sLWF1dG8gaXRlbXMtZW5kJyA6ICdtci1hdXRvIGl0ZW1zLXN0YXJ0J31gfVxuICAgICAgICBnYXA9XCIkMTAwXCJcbiAgICAgICAgYWxpZ249e2lzTWluZSA/ICdmbGV4LWVuZCcgOiAnZmxleC1zdGFydCd9XG4gICAgICA+XG4gICAgICAgIHsvKiBTZW5kZXIgSW5mbyAqL31cbiAgICAgICAgPEhTdGFjayBnYXA9XCIkMTAwXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIGNsYXNzTmFtZT1cInB4LTFcIj5cbiAgICAgICAgICB7cmVuZGVyQXZhdGFyKCl9XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktMzAwXCI+XG4gICAgICAgICAgICB7aXNNaW5lID8gJ+uCmCcgOiBtc2cuc2VuZGVyPy5uYW1lfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9IU3RhY2s+XG5cbiAgICAgICAgey8qIE1lc3NhZ2UgQnViYmxlIC0gT3V0bGluZSBCYXNlZCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BcbiAgICAgICAgICByZWxhdGl2ZSBncm91cFxuICAgICAgICAgIHJvdW5kZWQtMnhsIHB4LTQgcHktM1xuICAgICAgICAgIGJvcmRlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDBcbiAgICAgICAgICAke2lzTWluZVxuICAgICAgICAgICAgPyAnYmctZ3JheS04MDAgYm9yZGVyLWJsdWUtNTAwIGhvdmVyOmJvcmRlci1ibHVlLTQwMCBob3ZlcjpzaGFkb3ctbWQnXG4gICAgICAgICAgICA6ICdiZy10cmFuc3BhcmVudCBib3JkZXItZ3JheS00MDAgaG92ZXI6Ym9yZGVyLWdyYXktMzAwIGhvdmVyOnNoYWRvdy1tZCdcbiAgICAgICAgICB9XG4gICAgICAgIGB9PlxuICAgICAgICAgIHsvKiBNZXNzYWdlIENvbnRlbnQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgICR7aXNNaW5lID8gJ3RleHQtYmx1ZS0xMDAnIDogJ3RleHQtd2hpdGUnfVxuICAgICAgICAgIGB9PlxuICAgICAgICAgICAge2Vycm9yICYmIChcbiAgICAgICAgICAgICAgPGRpdj57ZXJyb3J9PC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgeyFlcnJvciAmJiByZW5kZXJGaWxlUHJldmlldygpfVxuICAgICAgICAgICAgeyFlcnJvciAmJiBtc2cuY29udGVudCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyB0ZXh0LWJhc2UgbGVhZGluZy1yZWxheGVkXCI+XG4gICAgICAgICAgICAgICAgPE1lc3NhZ2VDb250ZW50IGNvbnRlbnQ9e21zZy5jb250ZW50fSAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogTWVzc2FnZSBGb290ZXIgKi99XG4gICAgICAgICAgPEhTdGFja1xuICAgICAgICAgICAgZ2FwPVwiJDE1MFwiXG4gICAgICAgICAgICBqdXN0aWZ5Q29udGVudD1cImZsZXgtZW5kXCJcbiAgICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgbXQtMiBwdC0yIGJvcmRlci10ICR7aXNNaW5lID8gJ2JvcmRlci1ncmF5LTcwMCcgOiAnYm9yZGVyLWdyYXktNjAwJ31gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdGV4dC14cyAke2lzTWluZSA/ICd0ZXh0LWJsdWUtNDAwJyA6ICd0ZXh0LWdyYXktMzAwJ31gfVxuICAgICAgICAgICAgICB0aXRsZT17bmV3IERhdGUobXNnLnRpbWVzdGFtcCkudG9Mb2NhbGVTdHJpbmcoJ2tvLUtSJyl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtmb3JtYXR0ZWRUaW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8UmVhZFN0YXR1c1xuICAgICAgICAgICAgICBtZXNzYWdlVHlwZT17bXNnLnR5cGV9XG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50cz17cm9vbT8ucGFydGljaXBhbnRzIHx8IFtdfVxuICAgICAgICAgICAgICByZWFkZXJzPXttc2cucmVhZGVycyB8fCBbXX1cbiAgICAgICAgICAgICAgbWVzc2FnZUlkPXttc2cuX2lkfVxuICAgICAgICAgICAgICBtZXNzYWdlUmVmPXttZXNzYWdlRG9tUmVmfVxuICAgICAgICAgICAgICBjdXJyZW50VXNlcklkPXtjdXJyZW50VXNlcj8uX2lkIHx8IGN1cnJlbnRVc2VyPy5pZH1cbiAgICAgICAgICAgICAgc29ja2V0UmVmPXtzb2NrZXRSZWZ9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvSFN0YWNrPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogTWVzc2FnZSBBY3Rpb25zICovfVxuICAgICAgICA8TWVzc2FnZUFjdGlvbnNcbiAgICAgICAgICBtZXNzYWdlSWQ9e21zZy5faWR9XG4gICAgICAgICAgbWVzc2FnZUNvbnRlbnQ9e21zZy5jb250ZW50fVxuICAgICAgICAgIHJlYWN0aW9ucz17bXNnLnJlYWN0aW9uc31cbiAgICAgICAgICBjdXJyZW50VXNlcklkPXtjdXJyZW50VXNlcj8uX2lkIHx8IGN1cnJlbnRVc2VyPy5pZH1cbiAgICAgICAgICBvblJlYWN0aW9uQWRkPXtvblJlYWN0aW9uQWRkfVxuICAgICAgICAgIG9uUmVhY3Rpb25SZW1vdmU9e29uUmVhY3Rpb25SZW1vdmV9XG4gICAgICAgICAgaXNNaW5lPXtpc01pbmV9XG4gICAgICAgICAgcm9vbT17cm9vbX1cbiAgICAgICAgLz5cbiAgICAgIDwvVlN0YWNrPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuRmlsZU1lc3NhZ2UuZGVmYXVsdFByb3BzID0ge1xuICBtc2c6IHtcbiAgICBmaWxlOiB7XG4gICAgICBtaW1ldHlwZTogJycsXG4gICAgICBmaWxlbmFtZTogJycsXG4gICAgICBvcmlnaW5hbG5hbWU6ICcnLFxuICAgICAgc2l6ZTogMFxuICAgIH1cbiAgfSxcbiAgaXNNaW5lOiBmYWxzZSxcbiAgY3VycmVudFVzZXI6IG51bGxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oRmlsZU1lc3NhZ2UpO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJQZGZJY29uIiwiRmlsZVRleHQiLCJJbWFnZUljb24iLCJJbWFnZSIsIk1vdmllSWNvbiIsIkZpbG0iLCJNdXNpY0ljb24iLCJNdXNpYyIsIkVycm9yQ2lyY2xlSWNvbiIsIkFsZXJ0Q2lyY2xlIiwiQnV0dG9uIiwiQ2FsbG91dCIsIlZTdGFjayIsIkhTdGFjayIsIkN1c3RvbUF2YXRhciIsIk1lc3NhZ2VDb250ZW50IiwiTWVzc2FnZUFjdGlvbnMiLCJGaWxlQWN0aW9ucyIsIlJlYWRTdGF0dXMiLCJmaWxlU2VydmljZSIsInVzZUF1dGgiLCJGaWxlTWVzc2FnZSIsIm1zZyIsImlzTWluZSIsImN1cnJlbnRVc2VyIiwib25SZWFjdGlvbkFkZCIsIm9uUmVhY3Rpb25SZW1vdmUiLCJyb29tIiwic29ja2V0UmVmIiwidXNlciIsImVycm9yIiwic2V0RXJyb3IiLCJwcmV2aWV3VXJsIiwic2V0UHJldmlld1VybCIsIm1lc3NhZ2VEb21SZWYiLCJmaWxlIiwidXJsIiwiZ2V0UHJldmlld1VybCIsInRva2VuIiwic2Vzc2lvbklkIiwiY29uc29sZSIsImRlYnVnIiwiZmlsZW5hbWUiLCJmb3JtYXR0ZWRUaW1lIiwiRGF0ZSIsInRpbWVzdGFtcCIsInRvTG9jYWxlU3RyaW5nIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsImhvdXIxMiIsInJlcGxhY2UiLCJnZXRGaWxlSWNvbiIsIm1pbWV0eXBlIiwiaWNvblByb3BzIiwiY2xhc3NOYW1lIiwic3RhcnRzV2l0aCIsImNvbG9yIiwiZ2V0RGVjb2RlZEZpbGVuYW1lIiwiZW5jb2RlZEZpbGVuYW1lIiwiYmFzZTY0IiwicGFkIiwibGVuZ3RoIiwicGFkZGVkQmFzZTY0IiwicmVwZWF0IiwibWF0Y2giLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJkZWNvZGVVUklDb21wb25lbnQiLCJyZW5kZXJBdmF0YXIiLCJzZW5kZXIiLCJzaXplIiwicGVyc2lzdGVudCIsInNob3dJbml0aWFscyIsImhhbmRsZUZpbGVEb3dubG9hZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIkVycm9yIiwiYmFzZVVybCIsImdldEZpbGVVcmwiLCJhdXRoZW50aWNhdGVkVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiaWZyYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJkaXNwbGF5Iiwic3JjIiwiYm9keSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInJlbW92ZUNoaWxkIiwibWVzc2FnZSIsImhhbmRsZVZpZXdJbk5ld1RhYiIsIm5ld1dpbmRvdyIsIndpbmRvdyIsIm9wZW4iLCJvcGVuZXIiLCJyZW5kZXJJbWFnZVByZXZpZXciLCJvcmlnaW5hbG5hbWUiLCJkaXYiLCJpbWciLCJhbHQiLCJvbkxvYWQiLCJvbkVycm9yIiwidGFyZ2V0Iiwib25lcnJvciIsImxvYWRpbmciLCJkYXRhLXRlc3RpZCIsInJlbmRlckZpbGVQcmV2aWV3IiwiZm9ybWF0RmlsZVNpemUiLCJwcmV2aWV3V3JhcHBlckNsYXNzIiwib25WaWV3SW5OZXdUYWIiLCJvbkRvd25sb2FkIiwidmlkZW8iLCJjb250cm9scyIsInByZWxvYWQiLCJhcmlhLWxhYmVsIiwiY3Jvc3NPcmlnaW4iLCJzb3VyY2UiLCJ0eXBlIiwidHJhY2siLCJraW5kIiwiYXVkaW8iLCJyZWYiLCJnYXAiLCJhbGlnbiIsImFsaWduSXRlbXMiLCJzcGFuIiwibmFtZSIsImNvbnRlbnQiLCJqdXN0aWZ5Q29udGVudCIsInRpdGxlIiwibWVzc2FnZVR5cGUiLCJwYXJ0aWNpcGFudHMiLCJyZWFkZXJzIiwibWVzc2FnZUlkIiwiX2lkIiwibWVzc2FnZVJlZiIsImN1cnJlbnRVc2VySWQiLCJpZCIsIm1lc3NhZ2VDb250ZW50IiwicmVhY3Rpb25zIiwiZGVmYXVsdFByb3BzIiwibWVtbyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/FileMessage.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/FilePreview.js":
/*!***********************************!*\
  !*** ./components/FilePreview.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _services_fileService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/fileService */ \"(pages-dir-node)/./services/fileService.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_fileService__WEBPACK_IMPORTED_MODULE_3__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__]);\n([_services_fileService__WEBPACK_IMPORTED_MODULE_3__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst FilePreview = ({ files = [], uploading = false, uploadProgress = 0, uploadError = null, onRemove, onRetry, onDrop, className = '', showFileName = true, showFileSize = true, variant = 'default', previewSize = 'md', allowPaste = true, maxFiles = 10 })=>{\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const previewUrlsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    const dragCounter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // 파일 객체 URL 정리를 위한 클린업\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FilePreview.useEffect\": ()=>{\n            return ({\n                \"FilePreview.useEffect\": ()=>{\n                    previewUrlsRef.current.forEach({\n                        \"FilePreview.useEffect\": (url)=>{\n                            URL.revokeObjectURL(url);\n                        }\n                    }[\"FilePreview.useEffect\"]);\n                    previewUrlsRef.current.clear();\n                }\n            })[\"FilePreview.useEffect\"];\n        }\n    }[\"FilePreview.useEffect\"], []);\n    // 파일 유효성 검사 및 처리를 위한 공통 함수\n    const processFile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FilePreview.useCallback[processFile]\": async (file)=>{\n            try {\n                await _services_fileService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].validateFile(file);\n                const fileObject = {\n                    file,\n                    name: file.name || `file-${Date.now()}.${file.type.split('/')[1]}`,\n                    type: file.type,\n                    size: file.size\n                };\n                const previewUrl = URL.createObjectURL(file);\n                previewUrlsRef.current.set(fileObject.name, previewUrl);\n                return fileObject;\n            } catch (error) {\n                console.error('File processing error:', error);\n                throw error;\n            }\n        }\n    }[\"FilePreview.useCallback[processFile]\"], []);\n    // 붙여넣기 이벤트 핸들러\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FilePreview.useEffect\": ()=>{\n            if (!allowPaste) return;\n            const handlePaste = {\n                \"FilePreview.useEffect.handlePaste\": async (e)=>{\n                    if (!containerRef.current?.contains(e.target)) return;\n                    if (files.length >= maxFiles) return;\n                    const items = e.clipboardData?.items;\n                    if (!items) return;\n                    const fileItems = Array.from(items).filter({\n                        \"FilePreview.useEffect.handlePaste.fileItems\": (item)=>item.kind === 'file' && (item.type.startsWith('image/') || item.type.startsWith('video/') || item.type.startsWith('audio/') || item.type === 'application/pdf')\n                    }[\"FilePreview.useEffect.handlePaste.fileItems\"]);\n                    if (fileItems.length === 0) return;\n                    e.preventDefault();\n                    const availableSlots = maxFiles - files.length;\n                    const itemsToProcess = fileItems.slice(0, availableSlots);\n                    for (const item of itemsToProcess){\n                        const file = item.getAsFile();\n                        if (!file) continue;\n                        try {\n                            const processedFile = await processFile(file);\n                            onDrop?.(processedFile);\n                        } catch (error) {\n                            console.error('Paste handling error:', error);\n                        }\n                    }\n                }\n            }[\"FilePreview.useEffect.handlePaste\"];\n            document.addEventListener('paste', handlePaste);\n            return ({\n                \"FilePreview.useEffect\": ()=>document.removeEventListener('paste', handlePaste)\n            })[\"FilePreview.useEffect\"];\n        }\n    }[\"FilePreview.useEffect\"], [\n        allowPaste,\n        files.length,\n        maxFiles,\n        onDrop,\n        processFile\n    ]);\n    // 드래그 앤 드롭 이벤트 핸들러\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FilePreview.useEffect\": ()=>{\n            if (!containerRef.current || !onDrop) return;\n            const handleDrop = {\n                \"FilePreview.useEffect.handleDrop\": async (e)=>{\n                    e.preventDefault();\n                    e.stopPropagation();\n                    dragCounter.current = 0;\n                    containerRef.current.classList.remove('drag-over');\n                    if (files.length >= maxFiles) return;\n                    const droppedFiles = Array.from(e.dataTransfer.files).filter({\n                        \"FilePreview.useEffect.handleDrop.droppedFiles\": (file)=>file.type.startsWith('image/') || file.type.startsWith('video/') || file.type.startsWith('audio/') || file.type === 'application/pdf'\n                    }[\"FilePreview.useEffect.handleDrop.droppedFiles\"]);\n                    if (droppedFiles.length === 0) return;\n                    const availableSlots = maxFiles - files.length;\n                    const filesToProcess = droppedFiles.slice(0, availableSlots);\n                    for (const file of filesToProcess){\n                        try {\n                            const processedFile = await processFile(file);\n                            onDrop(processedFile);\n                        } catch (error) {\n                            console.error('Drop handling error:', error);\n                        }\n                    }\n                }\n            }[\"FilePreview.useEffect.handleDrop\"];\n            const handleDragOver = {\n                \"FilePreview.useEffect.handleDragOver\": (e)=>{\n                    e.preventDefault();\n                    e.stopPropagation();\n                    if (files.length < maxFiles) {\n                        containerRef.current.classList.add('drag-over');\n                    }\n                }\n            }[\"FilePreview.useEffect.handleDragOver\"];\n            const handleDragEnter = {\n                \"FilePreview.useEffect.handleDragEnter\": (e)=>{\n                    e.preventDefault();\n                    e.stopPropagation();\n                    dragCounter.current++;\n                    if (dragCounter.current === 1 && files.length < maxFiles) {\n                        containerRef.current.classList.add('drag-over');\n                    }\n                }\n            }[\"FilePreview.useEffect.handleDragEnter\"];\n            const handleDragLeave = {\n                \"FilePreview.useEffect.handleDragLeave\": (e)=>{\n                    e.preventDefault();\n                    e.stopPropagation();\n                    dragCounter.current--;\n                    if (dragCounter.current === 0) {\n                        containerRef.current.classList.remove('drag-over');\n                    }\n                }\n            }[\"FilePreview.useEffect.handleDragLeave\"];\n            const elem = containerRef.current;\n            elem.addEventListener('drop', handleDrop);\n            elem.addEventListener('dragover', handleDragOver);\n            elem.addEventListener('dragenter', handleDragEnter);\n            elem.addEventListener('dragleave', handleDragLeave);\n            return ({\n                \"FilePreview.useEffect\": ()=>{\n                    elem.removeEventListener('drop', handleDrop);\n                    elem.removeEventListener('dragover', handleDragOver);\n                    elem.removeEventListener('dragenter', handleDragEnter);\n                    elem.removeEventListener('dragleave', handleDragLeave);\n                }\n            })[\"FilePreview.useEffect\"];\n        }\n    }[\"FilePreview.useEffect\"], [\n        files.length,\n        maxFiles,\n        onDrop,\n        processFile\n    ]);\n    const getFileIcon = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FilePreview.useCallback[getFileIcon]\": (file)=>{\n            const iconProps = {\n                size: variant === 'compact' ? 20 : 24,\n                className: 'file-icon',\n                'aria-hidden': true\n            };\n            if (file.type.startsWith('image/')) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ImageIcon, {\n                    ...iconProps,\n                    color: \"#00C853\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 193,\n                    columnNumber: 14\n                }, undefined);\n            } else if (file.type.startsWith('video/')) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.MovieIcon, {\n                    ...iconProps,\n                    color: \"#2196F3\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 195,\n                    columnNumber: 14\n                }, undefined);\n            } else if (file.type.startsWith('audio/')) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.MusicIcon, {\n                    ...iconProps,\n                    color: \"#9C27B0\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 197,\n                    columnNumber: 14\n                }, undefined);\n            } else if (file.type === 'application/pdf') {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.PdfIcon, {\n                    ...iconProps,\n                    color: \"#F44336\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 199,\n                    columnNumber: 14\n                }, undefined);\n            } else {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.FileIcon, {\n                    ...iconProps,\n                    color: \"#757575\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 201,\n                    columnNumber: 14\n                }, undefined);\n            }\n        }\n    }[\"FilePreview.useCallback[getFileIcon]\"], [\n        variant\n    ]);\n    const renderFilePreview = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FilePreview.useCallback[renderFilePreview]\": (file)=>{\n            const previewUrl = previewUrlsRef.current.get(file.name);\n            const previewContainer = \"rounded-lg overflow-hidden relative\";\n            const previewBackground = \"bg-transparent-pattern\";\n            if (file.type.startsWith('image/')) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: `${previewContainer} ${previewBackground}`,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: previewUrl || file.url,\n                        alt: `${file.name} 미리보기`,\n                        className: \"w-full h-full object-cover\",\n                        onError: {\n                            \"FilePreview.useCallback[renderFilePreview]\": (e)=>{\n                                e.target.onerror = null;\n                                e.target.src = '/placeholder-image.png';\n                                e.target.alt = '이미지 로드 실패';\n                            }\n                        }[\"FilePreview.useCallback[renderFilePreview]\"],\n                        loading: \"lazy\"\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                        lineNumber: 213,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 212,\n                    columnNumber: 9\n                }, undefined);\n            }\n            if (file.type.startsWith('video/')) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: `${previewContainer}`,\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                            src: previewUrl || file.url,\n                            className: \"w-full h-full object-cover\",\n                            controls: variant !== 'compact',\n                            controlsList: \"nodownload\",\n                            preload: \"metadata\",\n                            \"aria-label\": `${file.name} 비디오 미리보기`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"source\", {\n                                    src: previewUrl || file.url,\n                                    type: file.type\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                    lineNumber: 239,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"track\", {\n                                    kind: \"captions\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                    lineNumber: 240,\n                                    columnNumber: 13\n                                }, undefined),\n                                \"비디오 미리보기를 지원하지 않는 브라우저입니다.\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 231,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30\",\n                            children: getFileIcon(file)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 243,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 230,\n                    columnNumber: 9\n                }, undefined);\n            }\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: `${previewContainer} flex flex-col items-center justify-center`,\n                role: \"img\",\n                \"aria-label\": `${file.name} 파일 아이콘`,\n                children: [\n                    getFileIcon(file),\n                    showFileName && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"mt-2 text-xs text-gray-600 truncate max-w-[80px]\",\n                        children: file.type.split('/')[1].toUpperCase()\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                        lineNumber: 256,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                lineNumber: 251,\n                columnNumber: 7\n            }, undefined);\n        }\n    }[\"FilePreview.useCallback[renderFilePreview]\"], [\n        variant,\n        showFileName,\n        getFileIcon\n    ]);\n    const renderProgressBar = ()=>{\n        if (!uploading) return null;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mt-4 h-1 w-full bg-gray-200 rounded-full overflow-hidden\",\n            role: \"progressbar\",\n            \"aria-valuenow\": uploadProgress,\n            \"aria-valuemin\": \"0\",\n            \"aria-valuemax\": \"100\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"h-full bg-primary transition-all duration-300 ease-in-out\",\n                style: {\n                    width: `${uploadProgress}%`\n                }\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                lineNumber: 275,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n            lineNumber: 268,\n            columnNumber: 7\n        }, undefined);\n    };\n    const renderUploadStatus = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FilePreview.useCallback[renderUploadStatus]\": ()=>{\n            if (uploadError) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Callout, {\n                    color: \"danger\",\n                    className: \"mt-2 flex items-center gap-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ErrorCircleIcon, {\n                            className: \"w-4 h-4\",\n                            \"aria-hidden\": \"true\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 287,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"flex-1\",\n                            children: uploadError\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 288,\n                            columnNumber: 11\n                        }, undefined),\n                        onRetry && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                            size: \"sm\",\n                            variant: \"outline\",\n                            onClick: onRetry,\n                            children: \"다시 시도\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 290,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 286,\n                    columnNumber: 9\n                }, undefined);\n            }\n            if (uploading) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-2 flex items-center gap-2 text-sm text-gray-600\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.LoadingOutlineIcon, {\n                            className: \"w-4 h-4 animate-spin\",\n                            \"aria-hidden\": \"true\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 305,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            children: [\n                                uploadProgress,\n                                \"% 업로드 중...\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 306,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 304,\n                    columnNumber: 9\n                }, undefined);\n            }\n            return null;\n        }\n    }[\"FilePreview.useCallback[renderUploadStatus]\"], [\n        uploadError,\n        uploading,\n        uploadProgress,\n        onRetry\n    ]);\n    if (files.length === 0) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        className: `file-preview-scroll-container ${className} ${onDrop ? 'cursor-pointer' : ''}`,\n        role: \"region\",\n        \"aria-label\": \"파일 미리보기\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"file-preview-list\",\n                children: files.map((file, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"file-preview-item\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"file-preview-content\",\n                            children: [\n                                renderFilePreview(file),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 min-w-0\",\n                                    children: [\n                                        showFileName && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-sm font-medium truncate\",\n                                            title: file.name,\n                                            children: file.name\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                            lineNumber: 334,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        showFileSize && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500 mt-1\",\n                                            children: _services_fileService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].formatFileSize(file.size)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                            lineNumber: 342,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                    lineNumber: 332,\n                                    columnNumber: 15\n                                }, undefined),\n                                variant !== 'readonly' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-shrink-0\",\n                                    children: !uploading && onRemove && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.IconButton, {\n                                        size: \"sm\",\n                                        variant: \"outline\",\n                                        onClick: ()=>{\n                                            const url = previewUrlsRef.current.get(file.name);\n                                            if (url) {\n                                                URL.revokeObjectURL(url);\n                                                previewUrlsRef.current.delete(file.name);\n                                            }\n                                            onRemove(file);\n                                        },\n                                        title: `${file.name} 파일 제거`,\n                                        \"aria-label\": `${file.name} 파일 제거`,\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.CloseOutlineIcon, {\n                                            className: \"w-4 h-4\",\n                                            \"aria-hidden\": \"true\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                            lineNumber: 365,\n                                            columnNumber: 23\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                        lineNumber: 351,\n                                        columnNumber: 21\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                                    lineNumber: 349,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                            lineNumber: 329,\n                            columnNumber: 13\n                        }, undefined)\n                    }, `${file.name}-${index}`, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                        lineNumber: 325,\n                        columnNumber: 11\n                    }, undefined))\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                lineNumber: 323,\n                columnNumber: 7\n            }, undefined),\n            renderProgressBar(),\n            renderUploadStatus(),\n            files.length >= maxFiles && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_4__.Callout, {\n                color: \"warning\",\n                className: \"file-limit-warning\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ErrorCircleIcon, {\n                        className: \"w-4 h-4\",\n                        \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                        lineNumber: 380,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: [\n                            \"파일은 최대 \",\n                            maxFiles,\n                            \"개까지만 업로드할 수 있습니다.\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                        lineNumber: 381,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                lineNumber: 379,\n                columnNumber: 9\n            }, undefined),\n            onDrop && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 bg-primary/10 border-2 border-primary border-dashed rounded-lg opacity-0 pointer-events-none transition-opacity drag-over:opacity-100\",\n                \"aria-hidden\": \"true\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"absolute inset-0 flex items-center justify-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-primary font-medium\",\n                        children: \"파일을 여기에 놓으세요\"\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                        lineNumber: 391,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                    lineNumber: 390,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n                lineNumber: 386,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/FilePreview.js\",\n        lineNumber: 317,\n        columnNumber: 5\n    }, undefined);\n};\nFilePreview.defaultProps = {\n    files: [],\n    uploading: false,\n    uploadProgress: 0,\n    uploadError: null,\n    showFileName: true,\n    showFileSize: true,\n    previewSize: 'md',\n    variant: 'default',\n    allowPaste: true,\n    maxFiles: 10\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(FilePreview));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvRmlsZVByZXZpZXcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9FO0FBVTNDO0FBQ29DO0FBQ1o7QUFFakQsTUFBTXdCLGNBQWMsQ0FBQyxFQUNuQkMsUUFBUSxFQUFFLEVBQ1ZDLFlBQVksS0FBSyxFQUNqQkMsaUJBQWlCLENBQUMsRUFDbEJDLGNBQWMsSUFBSSxFQUNsQkMsUUFBUSxFQUNSQyxPQUFPLEVBQ1BDLE1BQU0sRUFDTkMsWUFBWSxFQUFFLEVBQ2RDLGVBQWUsSUFBSSxFQUNuQkMsZUFBZSxJQUFJLEVBQ25CQyxVQUFVLFNBQVMsRUFDbkJDLGNBQWMsSUFBSSxFQUNsQkMsYUFBYSxJQUFJLEVBQ2pCQyxXQUFXLEVBQUUsRUFDZDtJQUNDLE1BQU1DLGVBQWVyQyw2Q0FBTUEsQ0FBQztJQUM1QixNQUFNc0MsaUJBQWlCdEMsNkNBQU1BLENBQUMsSUFBSXVDO0lBQ2xDLE1BQU1DLGNBQWN4Qyw2Q0FBTUEsQ0FBQztJQUUzQix1QkFBdUI7SUFDdkJELGdEQUFTQTtpQ0FBQztZQUNSO3lDQUFPO29CQUNMdUMsZUFBZUcsT0FBTyxDQUFDQyxPQUFPO2lEQUFDQyxDQUFBQTs0QkFDN0JDLElBQUlDLGVBQWUsQ0FBQ0Y7d0JBQ3RCOztvQkFDQUwsZUFBZUcsT0FBTyxDQUFDSyxLQUFLO2dCQUM5Qjs7UUFDRjtnQ0FBRyxFQUFFO0lBRUwsMkJBQTJCO0lBQzNCLE1BQU1DLGNBQWM5QyxrREFBV0E7Z0RBQUMsT0FBTytDO1lBQ3JDLElBQUk7Z0JBQ0YsTUFBTTNCLDBFQUF3QixDQUFDMkI7Z0JBQy9CLE1BQU1FLGFBQWE7b0JBQ2pCRjtvQkFDQUcsTUFBTUgsS0FBS0csSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFTCxLQUFLTSxJQUFJLENBQUNDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFO29CQUNsRUQsTUFBTU4sS0FBS00sSUFBSTtv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S0csSUFBSSxDQUFDLE1BQU0sQ0FBQztrREFFaEMsNEVBQUMvQyw2REFBQ0E7NENBQUMwQixXQUFVOzRDQUFVa0csZUFBWTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt1QkF2Q3hDLEdBQUdoRixLQUFLRyxJQUFJLENBQUMsQ0FBQyxFQUFFaUYsT0FBTzs7Ozs7Ozs7OztZQWlEakNYO1lBQ0FNO1lBRUF4RyxNQUFNMkMsTUFBTSxJQUFJOUIsMEJBQ2YsOERBQUNoQixtREFBT0E7Z0JBQUMrRSxPQUFNO2dCQUFVckUsV0FBVTs7a0NBQ2pDLDhEQUFDeEIsNERBQVdBO3dCQUFDd0IsV0FBVTt3QkFBVWtHLGVBQVk7Ozs7OztrQ0FDN0MsOERBQUNUOzs0QkFBSzs0QkFBUW5GOzRCQUFTOzs7Ozs7Ozs7Ozs7O1lBSTFCUCx3QkFDQyw4REFBQzJFO2dCQUNDMUUsV0FBVTtnQkFDVmtHLGVBQVk7MEJBRVosNEVBQUN4QjtvQkFBSTFFLFdBQVU7OEJBQ2IsNEVBQUN5Rjt3QkFBS3pGLFdBQVU7a0NBQTJCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUXZEO0FBRUFSLFlBQVlrSCxZQUFZLEdBQUc7SUFDekJqSCxPQUFPLEVBQUU7SUFDVEMsV0FBVztJQUNYQyxnQkFBZ0I7SUFDaEJDLGFBQWE7SUFDYkssY0FBYztJQUNkQyxjQUFjO0lBQ2RFLGFBQWE7SUFDYkQsU0FBUztJQUNURSxZQUFZO0lBQ1pDLFVBQVU7QUFDWjtBQUVBLDhFQUFlbEMsMkNBQUlBLENBQUNvQixZQUFZQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb21wb25lbnRzL0ZpbGVQcmV2aWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlQ2FsbGJhY2ssIG1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBcbiAgQ2xvc2VPdXRsaW5lSWNvbiBhcyBYLCBcbiAgRXJyb3JDaXJjbGVJY29uIGFzIEFsZXJ0Q2lyY2xlLCBcbiAgSW1hZ2VJY29uLCBcbiAgUGRmSWNvbiBhcyBGaWxlVGV4dCwgXG4gIE1vdmllSWNvbiBhcyBGaWxtLCBcbiAgTG9hZGluZ091dGxpbmVJY29uIGFzIExvYWRlcixcbiAgTXVzaWNJY29uIGFzIE11c2ljLFxuICBGaWxlSWNvbiBhcyBGaWxlXG59IGZyb20gJ0B2YXBvci11aS9pY29ucyc7XG5pbXBvcnQgeyBCdXR0b24sIEljb25CdXR0b24sIENhbGxvdXQgfSBmcm9tICdAdmFwb3ItdWkvY29yZSc7XG5pbXBvcnQgZmlsZVNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9maWxlU2VydmljZSc7XG5cbmNvbnN0IEZpbGVQcmV2aWV3ID0gKHsgXG4gIGZpbGVzID0gW10sXG4gIHVwbG9hZGluZyA9IGZhbHNlLCBcbiAgdXBsb2FkUHJvZ3Jlc3MgPSAwLCBcbiAgdXBsb2FkRXJyb3IgPSBudWxsLCBcbiAgb25SZW1vdmUsXG4gIG9uUmV0cnksXG4gIG9uRHJvcCxcbiAgY2xhc3NOYW1lID0gJycsXG4gIHNob3dGaWxlTmFtZSA9IHRydWUsXG4gIHNob3dGaWxlU2l6ZSA9IHRydWUsXG4gIHZhcmlhbnQgPSAnZGVmYXVsdCcsXG4gIHByZXZpZXdTaXplID0gJ21kJyxcbiAgYWxsb3dQYXN0ZSA9IHRydWUsXG4gIG1heEZpbGVzID0gMTBcbn0pID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBwcmV2aWV3VXJsc1JlZiA9IHVzZVJlZihuZXcgTWFwKCkpO1xuICBjb25zdCBkcmFnQ291bnRlciA9IHVzZVJlZigwKTtcblxuICAvLyDtjIzsnbwg6rCd7LK0IFVSTCDsoJXrpqzrpbwg7JyE7ZWcIO2BtOumsOyXhVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBwcmV2aWV3VXJsc1JlZi5jdXJyZW50LmZvckVhY2godXJsID0+IHtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgfSk7XG4gICAgICBwcmV2aWV3VXJsc1JlZi5jdXJyZW50LmNsZWFyKCk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIC8vIO2MjOydvCDsnKDtmqjshLEg6rKA7IKsIOuwjyDsspjrpqzrpbwg7JyE7ZWcIOqzte2GtSDtlajsiJhcbiAgY29uc3QgcHJvY2Vzc0ZpbGUgPSB1c2VDYWxsYmFjayhhc3luYyAoZmlsZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBmaWxlU2VydmljZS52YWxpZGF0ZUZpbGUoZmlsZSk7XG4gICAgICBjb25zdCBmaWxlT2JqZWN0ID0ge1xuICAgICAgICBmaWxlLFxuICAgICAgICBuYW1lOiBmaWxlLm5hbWUgfHwgYGZpbGUtJHtEYXRlLm5vdygpfS4ke2ZpbGUudHlwZS5zcGxpdCgnLycpWzFdfWAsXG4gICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgc2l6ZTogZmlsZS5zaXplXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcmV2aWV3VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgIHByZXZpZXdVcmxzUmVmLmN1cnJlbnQuc2V0KGZpbGVPYmplY3QubmFtZSwgcHJldmlld1VybCk7XG4gICAgICBcbiAgICAgIHJldHVybiBmaWxlT2JqZWN0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGaWxlIHByb2Nlc3NpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8g67aZ7Jes64Sj6riwIOydtOuypO2KuCDtlbjrk6Trn6xcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFsbG93UGFzdGUpIHJldHVybjtcblxuICAgIGNvbnN0IGhhbmRsZVBhc3RlID0gYXN5bmMgKGUpID0+IHtcbiAgICAgIGlmICghY29udGFpbmVyUmVmLmN1cnJlbnQ/LmNvbnRhaW5zKGUudGFyZ2V0KSkgcmV0dXJuO1xuICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+PSBtYXhGaWxlcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCBpdGVtcyA9IGUuY2xpcGJvYXJkRGF0YT8uaXRlbXM7XG4gICAgICBpZiAoIWl0ZW1zKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGZpbGVJdGVtcyA9IEFycmF5LmZyb20oaXRlbXMpLmZpbHRlcihcbiAgICAgICAgaXRlbSA9PiBpdGVtLmtpbmQgPT09ICdmaWxlJyAmJiBcbiAgICAgICAgKGl0ZW0udHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSB8fCBcbiAgICAgICAgIGl0ZW0udHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSB8fCBcbiAgICAgICAgIGl0ZW0udHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSB8fCBcbiAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3BkZicpXG4gICAgICApO1xuXG4gICAgICBpZiAoZmlsZUl0ZW1zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IGF2YWlsYWJsZVNsb3RzID0gbWF4RmlsZXMgLSBmaWxlcy5sZW5ndGg7XG4gICAgICBjb25zdCBpdGVtc1RvUHJvY2VzcyA9IGZpbGVJdGVtcy5zbGljZSgwLCBhdmFpbGFibGVTbG90cyk7XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtc1RvUHJvY2Vzcykge1xuICAgICAgICBjb25zdCBmaWxlID0gaXRlbS5nZXRBc0ZpbGUoKTtcbiAgICAgICAgaWYgKCFmaWxlKSBjb250aW51ZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZEZpbGUgPSBhd2FpdCBwcm9jZXNzRmlsZShmaWxlKTtcbiAgICAgICAgICBvbkRyb3A/Lihwcm9jZXNzZWRGaWxlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdQYXN0ZSBoYW5kbGluZyBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBoYW5kbGVQYXN0ZSk7XG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgaGFuZGxlUGFzdGUpO1xuICB9LCBbYWxsb3dQYXN0ZSwgZmlsZXMubGVuZ3RoLCBtYXhGaWxlcywgb25Ecm9wLCBwcm9jZXNzRmlsZV0pO1xuXG4gIC8vIOuTnOuemOq3uCDslaQg65Oc66GtIOydtOuypO2KuCDtlbjrk6Trn6xcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50IHx8ICFvbkRyb3ApIHJldHVybjtcblxuICAgIGNvbnN0IGhhbmRsZURyb3AgPSBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGRyYWdDb3VudGVyLmN1cnJlbnQgPSAwO1xuXG4gICAgICBjb250YWluZXJSZWYuY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKTtcblxuICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+PSBtYXhGaWxlcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCBkcm9wcGVkRmlsZXMgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyLmZpbGVzKVxuICAgICAgICAuZmlsdGVyKGZpbGUgPT4gXG4gICAgICAgICAgZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpIHx8IFxuICAgICAgICAgIGZpbGUudHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSB8fCBcbiAgICAgICAgICBmaWxlLnR5cGUuc3RhcnRzV2l0aCgnYXVkaW8vJykgfHwgXG4gICAgICAgICAgZmlsZS50eXBlID09PSAnYXBwbGljYXRpb24vcGRmJ1xuICAgICAgICApO1xuXG4gICAgICBpZiAoZHJvcHBlZEZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBhdmFpbGFibGVTbG90cyA9IG1heEZpbGVzIC0gZmlsZXMubGVuZ3RoO1xuICAgICAgY29uc3QgZmlsZXNUb1Byb2Nlc3MgPSBkcm9wcGVkRmlsZXMuc2xpY2UoMCwgYXZhaWxhYmxlU2xvdHMpO1xuXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXNUb1Byb2Nlc3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwcm9jZXNzZWRGaWxlID0gYXdhaXQgcHJvY2Vzc0ZpbGUoZmlsZSk7XG4gICAgICAgICAgb25Ecm9wKHByb2Nlc3NlZEZpbGUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Ryb3AgaGFuZGxpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZURyYWdPdmVyID0gKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBpZiAoZmlsZXMubGVuZ3RoIDwgbWF4RmlsZXMpIHtcbiAgICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZURyYWdFbnRlciA9IChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZHJhZ0NvdW50ZXIuY3VycmVudCsrO1xuICAgICAgaWYgKGRyYWdDb3VudGVyLmN1cnJlbnQgPT09IDEgJiYgZmlsZXMubGVuZ3RoIDwgbWF4RmlsZXMpIHtcbiAgICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZURyYWdMZWF2ZSA9IChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZHJhZ0NvdW50ZXIuY3VycmVudC0tO1xuICAgICAgaWYgKGRyYWdDb3VudGVyLmN1cnJlbnQgPT09IDApIHtcbiAgICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGVsZW0gPSBjb250YWluZXJSZWYuY3VycmVudDtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIpO1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgaGFuZGxlRHJhZ0VudGVyKTtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCk7XG4gICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIpO1xuICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBoYW5kbGVEcmFnRW50ZXIpO1xuICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBoYW5kbGVEcmFnTGVhdmUpO1xuICAgIH07XG4gIH0sIFtmaWxlcy5sZW5ndGgsIG1heEZpbGVzLCBvbkRyb3AsIHByb2Nlc3NGaWxlXSk7XG5cbiAgY29uc3QgZ2V0RmlsZUljb24gPSB1c2VDYWxsYmFjaygoZmlsZSkgPT4ge1xuICAgIGNvbnN0IGljb25Qcm9wcyA9IHtcbiAgICAgIHNpemU6IHZhcmlhbnQgPT09ICdjb21wYWN0JyA/IDIwIDogMjQsXG4gICAgICBjbGFzc05hbWU6ICdmaWxlLWljb24nLFxuICAgICAgJ2FyaWEtaGlkZGVuJzogdHJ1ZVxuICAgIH07XG5cbiAgICBpZiAoZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICByZXR1cm4gPEltYWdlSWNvbiB7Li4uaWNvblByb3BzfSBjb2xvcj1cIiMwMEM4NTNcIiAvPjtcbiAgICB9IGVsc2UgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkge1xuICAgICAgcmV0dXJuIDxGaWxtIHsuLi5pY29uUHJvcHN9IGNvbG9yPVwiIzIxOTZGM1wiIC8+O1xuICAgIH0gZWxzZSBpZiAoZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2F1ZGlvLycpKSB7XG4gICAgICByZXR1cm4gPE11c2ljIHsuLi5pY29uUHJvcHN9IGNvbG9yPVwiIzlDMjdCMFwiIC8+O1xuICAgIH0gZWxzZSBpZiAoZmlsZS50eXBlID09PSAnYXBwbGljYXRpb24vcGRmJykge1xuICAgICAgcmV0dXJuIDxGaWxlVGV4dCB7Li4uaWNvblByb3BzfSBjb2xvcj1cIiNGNDQzMzZcIiAvPjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDxGaWxlIHsuLi5pY29uUHJvcHN9IGNvbG9yPVwiIzc1NzU3NVwiIC8+O1xuICAgIH1cbiAgfSwgW3ZhcmlhbnRdKTtcblxuICBjb25zdCByZW5kZXJGaWxlUHJldmlldyA9IHVzZUNhbGxiYWNrKChmaWxlKSA9PiB7XG4gICAgY29uc3QgcHJldmlld1VybCA9IHByZXZpZXdVcmxzUmVmLmN1cnJlbnQuZ2V0KGZpbGUubmFtZSk7XG4gICAgY29uc3QgcHJldmlld0NvbnRhaW5lciA9IFwicm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gcmVsYXRpdmVcIjtcbiAgICBjb25zdCBwcmV2aWV3QmFja2dyb3VuZCA9IFwiYmctdHJhbnNwYXJlbnQtcGF0dGVyblwiO1xuXG4gICAgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZXZpZXdDb250YWluZXJ9ICR7cHJldmlld0JhY2tncm91bmR9YH0+XG4gICAgICAgICAgPGltZ1xuICAgICAgICAgICAgc3JjPXtwcmV2aWV3VXJsIHx8IGZpbGUudXJsfVxuICAgICAgICAgICAgYWx0PXtgJHtmaWxlLm5hbWV9IOuvuOumrOuztOq4sGB9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4ge1xuICAgICAgICAgICAgICBlLnRhcmdldC5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgZS50YXJnZXQuc3JjID0gJy9wbGFjZWhvbGRlci1pbWFnZS5wbmcnO1xuICAgICAgICAgICAgICBlLnRhcmdldC5hbHQgPSAn7J2066+47KeAIOuhnOuTnCDsi6TtjKgnO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGxvYWRpbmc9XCJsYXp5XCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZXZpZXdDb250YWluZXJ9YH0+XG4gICAgICAgICAgPHZpZGVvXG4gICAgICAgICAgICBzcmM9e3ByZXZpZXdVcmwgfHwgZmlsZS51cmx9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICBjb250cm9scz17dmFyaWFudCAhPT0gJ2NvbXBhY3QnfVxuICAgICAgICAgICAgY29udHJvbHNMaXN0PVwibm9kb3dubG9hZFwiXG4gICAgICAgICAgICBwcmVsb2FkPVwibWV0YWRhdGFcIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7ZmlsZS5uYW1lfSDruYTrlJTsmKQg66+466as67O06riwYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c291cmNlIHNyYz17cHJldmlld1VybCB8fCBmaWxlLnVybH0gdHlwZT17ZmlsZS50eXBlfSAvPlxuICAgICAgICAgICAgPHRyYWNrIGtpbmQ9XCJjYXB0aW9uc1wiIC8+XG4gICAgICAgICAgICDruYTrlJTsmKQg66+466as67O06riw66W8IOyngOybkO2VmOyngCDslYrripQg67iM65287Jqw7KCA7J6F64uI64ukLlxuICAgICAgICAgIDwvdmlkZW8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJsYWNrIGJnLW9wYWNpdHktMzBcIj5cbiAgICAgICAgICAgIHtnZXRGaWxlSWNvbihmaWxlKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJldmlld0NvbnRhaW5lcn0gZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJgfVxuICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICAgYXJpYS1sYWJlbD17YCR7ZmlsZS5uYW1lfSDtjIzsnbwg7JWE7J207L2YYH0+XG4gICAgICAgIHtnZXRGaWxlSWNvbihmaWxlKX1cbiAgICAgICAge3Nob3dGaWxlTmFtZSAmJiAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXhzIHRleHQtZ3JheS02MDAgdHJ1bmNhdGUgbWF4LXctWzgwcHhdXCI+XG4gICAgICAgICAgICB7ZmlsZS50eXBlLnNwbGl0KCcvJylbMV0udG9VcHBlckNhc2UoKX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9LCBbdmFyaWFudCwgc2hvd0ZpbGVOYW1lLCBnZXRGaWxlSWNvbl0pO1xuXG4gIGNvbnN0IHJlbmRlclByb2dyZXNzQmFyID0gKCkgPT4ge1xuICAgIGlmICghdXBsb2FkaW5nKSByZXR1cm4gbnVsbDtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IFxuICAgICAgICBjbGFzc05hbWU9XCJtdC00IGgtMSB3LWZ1bGwgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlblwiXG4gICAgICAgIHJvbGU9XCJwcm9ncmVzc2JhclwiXG4gICAgICAgIGFyaWEtdmFsdWVub3c9e3VwbG9hZFByb2dyZXNzfVxuICAgICAgICBhcmlhLXZhbHVlbWluPVwiMFwiXG4gICAgICAgIGFyaWEtdmFsdWVtYXg9XCIxMDBcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IFxuICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCBiZy1wcmltYXJ5IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCBlYXNlLWluLW91dFwiXG4gICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke3VwbG9hZFByb2dyZXNzfSVgIH19XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHJlbmRlclVwbG9hZFN0YXR1cyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAodXBsb2FkRXJyb3IpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxDYWxsb3V0IGNvbG9yPVwiZGFuZ2VyXCIgY2xhc3NOYW1lPVwibXQtMiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxBbGVydENpcmNsZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbGV4LTFcIj57dXBsb2FkRXJyb3J9PC9zcGFuPlxuICAgICAgICAgIHtvblJldHJ5ICYmIChcbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXtvblJldHJ5fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICDri6Tsi5wg7Iuc64+EXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L0NhbGxvdXQ+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh1cGxvYWRpbmcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICA8TG9hZGVyIGNsYXNzTmFtZT1cInctNCBoLTQgYW5pbWF0ZS1zcGluXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8c3Bhbj57dXBsb2FkUHJvZ3Jlc3N9JSDsl4XroZzrk5wg7KSRLi4uPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0sIFt1cGxvYWRFcnJvciwgdXBsb2FkaW5nLCB1cGxvYWRQcm9ncmVzcywgb25SZXRyeV0pO1xuXG4gIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBcbiAgICAgIHJlZj17Y29udGFpbmVyUmVmfVxuICAgICAgY2xhc3NOYW1lPXtgZmlsZS1wcmV2aWV3LXNjcm9sbC1jb250YWluZXIgJHtjbGFzc05hbWV9ICR7b25Ecm9wID8gJ2N1cnNvci1wb2ludGVyJyA6ICcnfWB9XG4gICAgICByb2xlPVwicmVnaW9uXCJcbiAgICAgIGFyaWEtbGFiZWw9XCLtjIzsnbwg66+466as67O06riwXCJcbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbGUtcHJldmlldy1saXN0XCI+XG4gICAgICAgIHtmaWxlcy5tYXAoKGZpbGUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGtleT17YCR7ZmlsZS5uYW1lfS0ke2luZGV4fWB9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmaWxlLXByZXZpZXctaXRlbVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWxlLXByZXZpZXctY29udGVudFwiPlxuICAgICAgICAgICAgICB7cmVuZGVyRmlsZVByZXZpZXcoZmlsZSl9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAge3Nob3dGaWxlTmFtZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRydW5jYXRlXCIgXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtmaWxlLm5hbWV9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtmaWxlLm5hbWV9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHtzaG93RmlsZVNpemUgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICB7ZmlsZVNlcnZpY2UuZm9ybWF0RmlsZVNpemUoZmlsZS5zaXplKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHt2YXJpYW50ICE9PSAncmVhZG9ubHknICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICAgIHshdXBsb2FkaW5nICYmIG9uUmVtb3ZlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBwcmV2aWV3VXJsc1JlZi5jdXJyZW50LmdldChmaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdVcmxzUmVmLmN1cnJlbnQuZGVsZXRlKGZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHtmaWxlLm5hbWV9IO2MjOydvCDsoJzqsbBgfVxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2Ake2ZpbGUubmFtZX0g7YyM7J28IOygnOqxsGB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9JY29uQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7cmVuZGVyUHJvZ3Jlc3NCYXIoKX1cbiAgICAgIHtyZW5kZXJVcGxvYWRTdGF0dXMoKX1cblxuICAgICAge2ZpbGVzLmxlbmd0aCA+PSBtYXhGaWxlcyAmJiAoXG4gICAgICAgIDxDYWxsb3V0IGNvbG9yPVwid2FybmluZ1wiIGNsYXNzTmFtZT1cImZpbGUtbGltaXQtd2FybmluZ1wiPlxuICAgICAgICAgIDxBbGVydENpcmNsZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8c3Bhbj7tjIzsnbzsnYAg7LWc64yAIHttYXhGaWxlc33qsJzquYzsp4Drp4wg7JeF66Gc65Oc7ZWgIOyImCDsnojsirXri4jri6QuPC9zcGFuPlxuICAgICAgICA8L0NhbGxvdXQ+XG4gICAgICApfVxuXG4gICAgICB7b25Ecm9wICYmIChcbiAgICAgICAgPGRpdiBcbiAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLXByaW1hcnkvMTAgYm9yZGVyLTIgYm9yZGVyLXByaW1hcnkgYm9yZGVyLWRhc2hlZCByb3VuZGVkLWxnIG9wYWNpdHktMCBwb2ludGVyLWV2ZW50cy1ub25lIHRyYW5zaXRpb24tb3BhY2l0eSBkcmFnLW92ZXI6b3BhY2l0eS0xMDBcIlxuICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtcHJpbWFyeSBmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAgICDtjIzsnbzsnYQg7Jes6riw7JeQIOuGk+ycvOyEuOyalFxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5GaWxlUHJldmlldy5kZWZhdWx0UHJvcHMgPSB7XG4gIGZpbGVzOiBbXSxcbiAgdXBsb2FkaW5nOiBmYWxzZSxcbiAgdXBsb2FkUHJvZ3Jlc3M6IDAsXG4gIHVwbG9hZEVycm9yOiBudWxsLFxuICBzaG93RmlsZU5hbWU6IHRydWUsXG4gIHNob3dGaWxlU2l6ZTogdHJ1ZSxcbiAgcHJldmlld1NpemU6ICdtZCcsXG4gIHZhcmlhbnQ6ICdkZWZhdWx0JyxcbiAgYWxsb3dQYXN0ZTogdHJ1ZSxcbiAgbWF4RmlsZXM6IDEwXG59O1xuXG5leHBvcnQgZGVmYXVsdCBtZW1vKEZpbGVQcmV2aWV3KTsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VDYWxsYmFjayIsIm1lbW8iLCJDbG9zZU91dGxpbmVJY29uIiwiWCIsIkVycm9yQ2lyY2xlSWNvbiIsIkFsZXJ0Q2lyY2xlIiwiSW1hZ2VJY29uIiwiUGRmSWNvbiIsIkZpbGVUZXh0IiwiTW92aWVJY29uIiwiRmlsbSIsIkxvYWRpbmdPdXRsaW5lSWNvbiIsIkxvYWRlciIsIk11c2ljSWNvbiIsIk11c2ljIiwiRmlsZUljb24iLCJGaWxlIiwiQnV0dG9uIiwiSWNvbkJ1dHRvbiIsIkNhbGxvdXQiLCJmaWxlU2VydmljZSIsIkZpbGVQcmV2aWV3IiwiZmlsZXMiLCJ1cGxvYWRpbmciLCJ1cGxvYWRQcm9ncmVzcyIsInVwbG9hZEVycm9yIiwib25SZW1vdmUiLCJvblJldHJ5Iiwib25Ecm9wIiwiY2xhc3NOYW1lIiwic2hvd0ZpbGVOYW1lIiwic2hvd0ZpbGVTaXplIiwidmFyaWFudCIsInByZXZpZXdTaXplIiwiYWxsb3dQYXN0ZSIsIm1heEZpbGVzIiwiY29udGFpbmVyUmVmIiwicHJldmlld1VybHNSZWYiLCJNYXAiLCJkcmFnQ291bnRlciIsImN1cnJlbnQiLCJmb3JFYWNoIiwidXJsIiwiVVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiY2xlYXIiLCJwcm9jZXNzRmlsZSIsImZpbGUiLCJ2YWxpZGF0ZUZpbGUiLCJmaWxlT2JqZWN0IiwibmFtZSIsIkRhdGUiLCJub3ciLCJ0eXBlIiwic3BsaXQiLCJzaXplIiwicHJldmlld1VybCIsImNyZWF0ZU9iamVjdFVSTCIsInNldCIsImVycm9yIiwiY29uc29sZSIsImhhbmRsZVBhc3RlIiwiZSIsImNvbnRhaW5zIiwidGFyZ2V0IiwibGVuZ3RoIiwiaXRlbXMiLCJjbGlwYm9hcmREYXRhIiwiZmlsZUl0ZW1zIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwiaXRlbSIsImtpbmQiLCJzdGFydHNXaXRoIiwicHJldmVudERlZmF1bHQiLCJhdmFpbGFibGVTbG90cyIsIml0ZW1zVG9Qcm9jZXNzIiwic2xpY2UiLCJnZXRBc0ZpbGUiLCJwcm9jZXNzZWRGaWxlIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZURyb3AiLCJzdG9wUHJvcGFnYXRpb24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkcm9wcGVkRmlsZXMiLCJkYXRhVHJhbnNmZXIiLCJmaWxlc1RvUHJvY2VzcyIsImhhbmRsZURyYWdPdmVyIiwiYWRkIiwiaGFuZGxlRHJhZ0VudGVyIiwiaGFuZGxlRHJhZ0xlYXZlIiwiZWxlbSIsImdldEZpbGVJY29uIiwiaWNvblByb3BzIiwiY29sb3IiLCJyZW5kZXJGaWxlUHJldmlldyIsImdldCIsInByZXZpZXdDb250YWluZXIiLCJwcmV2aWV3QmFja2dyb3VuZCIsImRpdiIsImltZyIsInNyYyIsImFsdCIsIm9uRXJyb3IiLCJvbmVycm9yIiwibG9hZGluZyIsInZpZGVvIiwiY29udHJvbHMiLCJjb250cm9sc0xpc3QiLCJwcmVsb2FkIiwiYXJpYS1sYWJlbCIsInNvdXJjZSIsInRyYWNrIiwicm9sZSIsInNwYW4iLCJ0b1VwcGVyQ2FzZSIsInJlbmRlclByb2dyZXNzQmFyIiwiYXJpYS12YWx1ZW5vdyIsImFyaWEtdmFsdWVtaW4iLCJhcmlhLXZhbHVlbWF4Iiwic3R5bGUiLCJ3aWR0aCIsInJlbmRlclVwbG9hZFN0YXR1cyIsImFyaWEtaGlkZGVuIiwib25DbGljayIsInJlZiIsIm1hcCIsImluZGV4IiwidGl0bGUiLCJmb3JtYXRGaWxlU2l6ZSIsImRlbGV0ZSIsImRlZmF1bHRQcm9wcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/FilePreview.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/MentionDropdown.js":
/*!***************************************!*\
  !*** ./components/MentionDropdown.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _CustomAvatar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CustomAvatar */ \"(pages-dir-node)/./components/CustomAvatar.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_CustomAvatar__WEBPACK_IMPORTED_MODULE_2__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__]);\n([_CustomAvatar__WEBPACK_IMPORTED_MODULE_2__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst MentionDropdown = ({ participants = [], activeIndex = 0, onSelect = ()=>{}, onMouseEnter = ()=>{} })=>{\n    const dropdownRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const itemRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    // 활성 항목이 변경될 때마다 스크롤 조정\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MentionDropdown.useEffect\": ()=>{\n            if (!dropdownRef.current || !itemRefs.current[activeIndex]) return;\n            const container = dropdownRef.current;\n            const activeItem = itemRefs.current[activeIndex];\n            // 활성 항목의 위치 계산\n            const itemTop = activeItem.offsetTop;\n            const itemBottom = itemTop + activeItem.offsetHeight;\n            const containerTop = container.scrollTop;\n            const containerBottom = containerTop + container.offsetHeight;\n            // 활성 항목이 보이는 영역을 벗어났는지 확인\n            if (itemTop < containerTop) {\n                container.scrollTo({\n                    top: itemTop,\n                    behavior: 'smooth'\n                });\n            } else if (itemBottom > containerBottom) {\n                container.scrollTo({\n                    top: itemBottom - container.offsetHeight,\n                    behavior: 'smooth'\n                });\n            }\n        }\n    }[\"MentionDropdown.useEffect\"], [\n        activeIndex\n    ]);\n    const handleKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MentionDropdown.useCallback[handleKeyDown]\": (e, user)=>{\n            if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                onSelect(user);\n            }\n        }\n    }[\"MentionDropdown.useCallback[handleKeyDown]\"], [\n        onSelect\n    ]);\n    if (!participants?.length) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: dropdownRef,\n        role: \"listbox\",\n        \"aria-label\": \"멘션할 사용자 목록\",\n        className: \"rounded-xl overflow-hidden backdrop-blur-md\",\n        style: {\n            width: '320px',\n            maxHeight: '280px',\n            overflowY: 'auto',\n            background: 'rgba(30, 30, 30, 0.95)',\n            border: '1px solid rgba(255, 255, 255, 0.1)',\n            boxShadow: '0 12px 32px rgba(0, 0, 0, 0.5), 0 2px 8px rgba(0, 0, 0, 0.3)'\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            style: {\n                padding: '12px'\n            },\n            children: participants.map((user, index)=>{\n                const isActive = index === activeIndex;\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: (el)=>itemRefs.current[index] = el,\n                    role: \"option\",\n                    \"aria-selected\": isActive,\n                    tabIndex: 0,\n                    onClick: ()=>onSelect(user),\n                    onKeyDown: (e)=>handleKeyDown(e, user),\n                    onMouseEnter: ()=>onMouseEnter(index),\n                    className: \"transition-all duration-200 cursor-pointer\",\n                    style: {\n                        padding: '10px 12px',\n                        marginBottom: '4px',\n                        borderRadius: '8px',\n                        background: isActive ? 'rgba(59, 130, 246, 0.15)' : 'transparent',\n                        border: isActive ? '1px solid rgba(59, 130, 246, 0.4)' : '1px solid transparent',\n                        ...isActive ? {\n                            boxShadow: '0 0 0 1px rgba(59, 130, 246, 0.2), 0 2px 8px rgba(59, 130, 246, 0.15)'\n                        } : {}\n                    },\n                    onMouseEnterCapture: (e)=>{\n                        if (!isActive) {\n                            e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)';\n                        }\n                    },\n                    onMouseLeave: (e)=>{\n                        if (!isActive) {\n                            e.currentTarget.style.background = 'transparent';\n                        }\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.HStack, {\n                        gap: \"$200\",\n                        alignItems: \"center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_CustomAvatar__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                user: user,\n                                size: \"md\",\n                                showInitials: true\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n                                lineNumber: 106,\n                                columnNumber: 19\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.VStack, {\n                                gap: \"$050\",\n                                flex: \"1\",\n                                minWidth: \"0\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                                        typography: \"body2\",\n                                        className: \"font-medium\",\n                                        style: {\n                                            color: isActive ? '#93C5FD' : 'rgba(255, 255, 255, 0.9)',\n                                            fontSize: '14px'\n                                        },\n                                        children: user.name\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n                                        lineNumber: 113,\n                                        columnNumber: 21\n                                    }, undefined),\n                                    user.email && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                                        typography: \"body3\",\n                                        className: \"truncate\",\n                                        style: {\n                                            maxWidth: '200px',\n                                            color: isActive ? 'rgba(147, 197, 253, 0.7)' : 'rgba(255, 255, 255, 0.5)',\n                                            fontSize: '12px'\n                                        },\n                                        title: user.email,\n                                        children: user.email\n                                    }, void 0, false, {\n                                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n                                        lineNumber: 124,\n                                        columnNumber: 23\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n                                lineNumber: 112,\n                                columnNumber: 19\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n                        lineNumber: 105,\n                        columnNumber: 17\n                    }, undefined)\n                }, user._id || user.id, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n                    lineNumber: 70,\n                    columnNumber: 15\n                }, undefined);\n            })\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n            lineNumber: 65,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MentionDropdown.js\",\n        lineNumber: 51,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(MentionDropdown));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvTWVudGlvbkRyb3Bkb3duLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQW9FO0FBQ2Q7QUFDWjtBQUUxQyxNQUFNUyxrQkFBa0IsQ0FBQyxFQUN2QkMsZUFBZSxFQUFFLEVBQ2pCQyxjQUFjLENBQUMsRUFDZkMsV0FBVyxLQUFPLENBQUMsRUFDbkJDLGVBQWUsS0FBTyxDQUFDLEVBQ3hCO0lBQ0MsTUFBTUMsY0FBY1gsNkNBQU1BLENBQUM7SUFDM0IsTUFBTVksV0FBV1osNkNBQU1BLENBQUMsRUFBRTtJQUUxQix3QkFBd0I7SUFDeEJDLGdEQUFTQTtxQ0FBQztZQUNSLElBQUksQ0FBQ1UsWUFBWUUsT0FBTyxJQUFJLENBQUNELFNBQVNDLE9BQU8sQ0FBQ0wsWUFBWSxFQUFFO1lBRTVELE1BQU1NLFlBQVlILFlBQVlFLE9BQU87WUFDckMsTUFBTUUsYUFBYUgsU0FBU0MsT0FBTyxDQUFDTCxZQUFZO1lBRWhELGVBQWU7WUFDZixNQUFNUSxVQUFVRCxXQUFXRSxTQUFTO1lBQ3BDLE1BQU1DLGFBQWFGLFVBQVVELFdBQVdJLFlBQVk7WUFDcEQsTUFBTUMsZUFBZU4sVUFBVU8sU0FBUztZQUN4QyxNQUFNQyxrQkFBa0JGLGVBQWVOLFVBQVVLLFlBQVk7WUFFN0QsMEJBQTBCO1lBQzFCLElBQUlILFVBQVVJLGNBQWM7Z0JBQzFCTixVQUFVUyxRQUFRLENBQUM7b0JBQ2pCQyxLQUFLUjtvQkFDTFMsVUFBVTtnQkFDWjtZQUNGLE9BQU8sSUFBSVAsYUFBYUksaUJBQWlCO2dCQUN2Q1IsVUFBVVMsUUFBUSxDQUFDO29CQUNqQkMsS0FBS04sYUFBYUosVUFBVUssWUFBWTtvQkFDeENNLFVBQVU7Z0JBQ1o7WUFDRjtRQUNGO29DQUFHO1FBQUNqQjtLQUFZO0lBRWhCLE1BQU1rQixnQkFBZ0I1QixrREFBV0E7c0RBQUMsQ0FBQzZCLEdBQUdDO1lBQ3BDLElBQUlELEVBQUVFLEdBQUcsS0FBSyxXQUFXRixFQUFFRSxHQUFHLEtBQUssS0FBSztnQkFDdENGLEVBQUVHLGNBQWM7Z0JBQ2hCckIsU0FBU21CO1lBQ1g7UUFDRjtxREFBRztRQUFDbkI7S0FBUztJQUViLElBQUksQ0FBQ0YsY0FBY3dCLFFBQVEsT0FBTztJQUVsQyxxQkFDRSw4REFBQ0M7UUFDQ0MsS0FBS3RCO1FBQ0x1QixNQUFLO1FBQ0xDLGNBQVc7UUFDWEMsV0FBVTtRQUNWQyxPQUFPO1lBQ0xDLE9BQU87WUFDUEMsV0FBVztZQUNYQyxXQUFXO1lBQ1hDLFlBQVk7WUFDWkMsUUFBUTtZQUNSQyxXQUFXO1FBQ2I7a0JBRUEsNEVBQUNYO1lBQUlLLE9BQU87Z0JBQUVPLFNBQVM7WUFBTztzQkFDM0JyQyxhQUFhc0MsR0FBRyxDQUFDLENBQUNqQixNQUFNa0I7Z0JBQ3JCLE1BQU1DLFdBQVdELFVBQVV0QztnQkFFM0IscUJBQ0UsOERBQUN3QjtvQkFFQ0MsS0FBS2UsQ0FBQUEsS0FBTXBDLFNBQVNDLE9BQU8sQ0FBQ2lDLE1BQU0sR0FBR0U7b0JBQ3JDZCxNQUFLO29CQUNMZSxpQkFBZUY7b0JBQ2ZHLFVBQVU7b0JBQ1ZDLFNBQVMsSUFBTTFDLFNBQVNtQjtvQkFDeEJ3QixXQUFXLENBQUN6QixJQUFNRCxjQUFjQyxHQUFHQztvQkFDbkNsQixjQUFjLElBQU1BLGFBQWFvQztvQkFDakNWLFdBQVU7b0JBQ1ZDLE9BQU87d0JBQ0xPLFNBQVM7d0JBQ1RTLGNBQWM7d0JBQ2RDLGNBQWM7d0JBQ2RiLFlBQVlNLFdBQ1IsNkJBQ0E7d0JBQ0pMLFFBQVFLLFdBQ0osc0NBQ0E7d0JBQ0osR0FBSUEsV0FBVzs0QkFDYkosV0FBVzt3QkFDYixJQUFJLENBQUMsQ0FBQztvQkFDUjtvQkFDQVkscUJBQXFCLENBQUM1Qjt3QkFDcEIsSUFBSSxDQUFDb0IsVUFBVTs0QkFDYnBCLEVBQUU2QixhQUFhLENBQUNuQixLQUFLLENBQUNJLFVBQVUsR0FBRzt3QkFDckM7b0JBQ0Y7b0JBQ0FnQixjQUFjLENBQUM5Qjt3QkFDYixJQUFJLENBQUNvQixVQUFVOzRCQUNicEIsRUFBRTZCLGFBQWEsQ0FBQ25CLEtBQUssQ0FBQ0ksVUFBVSxHQUFHO3dCQUNyQztvQkFDRjs4QkFFQSw0RUFBQ3ZDLGtEQUFNQTt3QkFBQ3dELEtBQUk7d0JBQU9DLFlBQVc7OzBDQUM1Qiw4REFBQ3RELHFEQUFZQTtnQ0FDWHVCLE1BQU1BO2dDQUNOZ0MsTUFBSztnQ0FDTEMsWUFBWTs7Ozs7OzBDQUdkLDhEQUFDMUQsa0RBQU1BO2dDQUFDdUQsS0FBSTtnQ0FBT0ksTUFBSztnQ0FBSUMsVUFBUzs7a0RBQ25DLDhEQUFDM0QsZ0RBQUlBO3dDQUNINEQsWUFBVzt3Q0FDWDVCLFdBQVU7d0NBQ1ZDLE9BQU87NENBQ0w0QixPQUFPbEIsV0FBVyxZQUFZOzRDQUM5Qm1CLFVBQVU7d0NBQ1o7a0RBRUN0QyxLQUFLdUMsSUFBSTs7Ozs7O29DQUVYdkMsS0FBS3dDLEtBQUssa0JBQ1QsOERBQUNoRSxnREFBSUE7d0NBQ0g0RCxZQUFXO3dDQUNYNUIsV0FBVTt3Q0FDVkMsT0FBTzs0Q0FDTGdDLFVBQVU7NENBQ1ZKLE9BQU9sQixXQUFXLDZCQUE2Qjs0Q0FDL0NtQixVQUFVO3dDQUNaO3dDQUNBSSxPQUFPMUMsS0FBS3dDLEtBQUs7a0RBRWhCeEMsS0FBS3dDLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQkEvRGR4QyxLQUFLMkMsR0FBRyxJQUFJM0MsS0FBSzRDLEVBQUU7Ozs7O1lBc0U5Qjs7Ozs7Ozs7Ozs7QUFJVjtBQUVBLDhFQUFlekUsMkNBQUlBLENBQUNPLGdCQUFnQkEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvY29tcG9uZW50cy9NZW50aW9uRHJvcGRvd24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCBtZW1vLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEhTdGFjaywgVlN0YWNrLCBUZXh0IH0gZnJvbSAnQHZhcG9yLXVpL2NvcmUnO1xuaW1wb3J0IEN1c3RvbUF2YXRhciBmcm9tICcuL0N1c3RvbUF2YXRhcic7XG5cbmNvbnN0IE1lbnRpb25Ecm9wZG93biA9ICh7IFxuICBwYXJ0aWNpcGFudHMgPSBbXSwgXG4gIGFjdGl2ZUluZGV4ID0gMCwgXG4gIG9uU2VsZWN0ID0gKCkgPT4ge30sIFxuICBvbk1vdXNlRW50ZXIgPSAoKSA9PiB7fVxufSkgPT4ge1xuICBjb25zdCBkcm9wZG93blJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgaXRlbVJlZnMgPSB1c2VSZWYoW10pO1xuXG4gIC8vIO2ZnOyEsSDtla3rqqnsnbQg67OA6rK965CgIOuVjOuniOuLpCDsiqTtgazroaQg7KGw7KCVXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFkcm9wZG93blJlZi5jdXJyZW50IHx8ICFpdGVtUmVmcy5jdXJyZW50W2FjdGl2ZUluZGV4XSkgcmV0dXJuO1xuXG4gICAgY29uc3QgY29udGFpbmVyID0gZHJvcGRvd25SZWYuY3VycmVudDtcbiAgICBjb25zdCBhY3RpdmVJdGVtID0gaXRlbVJlZnMuY3VycmVudFthY3RpdmVJbmRleF07XG4gICAgXG4gICAgLy8g7Zmc7ISxIO2VreuqqeydmCDsnITsuZgg6rOE7IKwXG4gICAgY29uc3QgaXRlbVRvcCA9IGFjdGl2ZUl0ZW0ub2Zmc2V0VG9wO1xuICAgIGNvbnN0IGl0ZW1Cb3R0b20gPSBpdGVtVG9wICsgYWN0aXZlSXRlbS5vZmZzZXRIZWlnaHQ7XG4gICAgY29uc3QgY29udGFpbmVyVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcbiAgICBjb25zdCBjb250YWluZXJCb3R0b20gPSBjb250YWluZXJUb3AgKyBjb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuXG4gICAgLy8g7Zmc7ISxIO2VreuqqeydtCDrs7TsnbTripQg7JiB7Jet7J2EIOuyl+yWtOuCrOuKlOyngCDtmZXsnbhcbiAgICBpZiAoaXRlbVRvcCA8IGNvbnRhaW5lclRvcCkge1xuICAgICAgY29udGFpbmVyLnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiBpdGVtVG9wLFxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaXRlbUJvdHRvbSA+IGNvbnRhaW5lckJvdHRvbSkge1xuICAgICAgY29udGFpbmVyLnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiBpdGVtQm90dG9tIC0gY29udGFpbmVyLm9mZnNldEhlaWdodCxcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFthY3RpdmVJbmRleF0pO1xuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSB1c2VDYWxsYmFjaygoZSwgdXNlcikgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBvblNlbGVjdCh1c2VyKTtcbiAgICB9XG4gIH0sIFtvblNlbGVjdF0pO1xuXG4gIGlmICghcGFydGljaXBhbnRzPy5sZW5ndGgpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgcmVmPXtkcm9wZG93blJlZn1cbiAgICAgIHJvbGU9XCJsaXN0Ym94XCJcbiAgICAgIGFyaWEtbGFiZWw9XCLrqZjshZjtlaAg7IKs7Jqp7J6QIOuqqeuhnVwiXG4gICAgICBjbGFzc05hbWU9XCJyb3VuZGVkLXhsIG92ZXJmbG93LWhpZGRlbiBiYWNrZHJvcC1ibHVyLW1kXCJcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHdpZHRoOiAnMzIwcHgnLFxuICAgICAgICBtYXhIZWlnaHQ6ICcyODBweCcsXG4gICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgzMCwgMzAsIDMwLCAwLjk1KScsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSknLFxuICAgICAgICBib3hTaGFkb3c6ICcwIDEycHggMzJweCByZ2JhKDAsIDAsIDAsIDAuNSksIDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMyknLFxuICAgICAgfX1cbiAgICA+XG4gICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6ICcxMnB4JyB9fT5cbiAgICAgICAge3BhcnRpY2lwYW50cy5tYXAoKHVzZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGluZGV4ID09PSBhY3RpdmVJbmRleDtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17dXNlci5faWQgfHwgdXNlci5pZH1cbiAgICAgICAgICAgICAgICByZWY9e2VsID0+IGl0ZW1SZWZzLmN1cnJlbnRbaW5kZXhdID0gZWx9XG4gICAgICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgICAgICAgYXJpYS1zZWxlY3RlZD17aXNBY3RpdmV9XG4gICAgICAgICAgICAgICAgdGFiSW5kZXg9ezB9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25TZWxlY3QodXNlcil9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXsoZSkgPT4gaGFuZGxlS2V5RG93bihlLCB1c2VyKX1cbiAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IG9uTW91c2VFbnRlcihpbmRleCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzEwcHggMTJweCcsXG4gICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206ICc0cHgnLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JyxcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGlzQWN0aXZlXG4gICAgICAgICAgICAgICAgICAgID8gJ3JnYmEoNTksIDEzMCwgMjQ2LCAwLjE1KSdcbiAgICAgICAgICAgICAgICAgICAgOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyOiBpc0FjdGl2ZVxuICAgICAgICAgICAgICAgICAgICA/ICcxcHggc29saWQgcmdiYSg1OSwgMTMwLCAyNDYsIDAuNCknXG4gICAgICAgICAgICAgICAgICAgIDogJzFweCBzb2xpZCB0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAuLi4oaXNBY3RpdmUgPyB7XG4gICAgICAgICAgICAgICAgICAgIGJveFNoYWRvdzogJzAgMCAwIDFweCByZ2JhKDU5LCAxMzAsIDI0NiwgMC4yKSwgMCAycHggOHB4IHJnYmEoNTksIDEzMCwgMjQ2LCAwLjE1KSdcbiAgICAgICAgICAgICAgICAgIH0gOiB7fSlcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlckNhcHR1cmU9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIWlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSknO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKCFpc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxIU3RhY2sgZ2FwPVwiJDIwMFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxDdXN0b21BdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgdXNlcj17dXNlcn1cbiAgICAgICAgICAgICAgICAgICAgc2l6ZT1cIm1kXCJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0luaXRpYWxzXG4gICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICA8VlN0YWNrIGdhcD1cIiQwNTBcIiBmbGV4PVwiMVwiIG1pbldpZHRoPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgICAgICAgIHR5cG9ncmFwaHk9XCJib2R5MlwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIlxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogaXNBY3RpdmUgPyAnIzkzQzVGRCcgOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTRweCdcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge3VzZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICB7dXNlci5lbWFpbCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cG9ncmFwaHk9XCJib2R5M1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0cnVuY2F0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzIwMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGlzQWN0aXZlID8gJ3JnYmEoMTQ3LCAxOTcsIDI1MywgMC43KScgOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICcxMnB4J1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt1c2VyLmVtYWlsfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyLmVtYWlsfVxuICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvVlN0YWNrPlxuICAgICAgICAgICAgICAgIDwvSFN0YWNrPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1lbW8oTWVudGlvbkRyb3Bkb3duKTsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VDYWxsYmFjayIsIm1lbW8iLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJIU3RhY2siLCJWU3RhY2siLCJUZXh0IiwiQ3VzdG9tQXZhdGFyIiwiTWVudGlvbkRyb3Bkb3duIiwicGFydGljaXBhbnRzIiwiYWN0aXZlSW5kZXgiLCJvblNlbGVjdCIsIm9uTW91c2VFbnRlciIsImRyb3Bkb3duUmVmIiwiaXRlbVJlZnMiLCJjdXJyZW50IiwiY29udGFpbmVyIiwiYWN0aXZlSXRlbSIsIml0ZW1Ub3AiLCJvZmZzZXRUb3AiLCJpdGVtQm90dG9tIiwib2Zmc2V0SGVpZ2h0IiwiY29udGFpbmVyVG9wIiwic2Nyb2xsVG9wIiwiY29udGFpbmVyQm90dG9tIiwic2Nyb2xsVG8iLCJ0b3AiLCJiZWhhdmlvciIsImhhbmRsZUtleURvd24iLCJlIiwidXNlciIsImtleSIsInByZXZlbnREZWZhdWx0IiwibGVuZ3RoIiwiZGl2IiwicmVmIiwicm9sZSIsImFyaWEtbGFiZWwiLCJjbGFzc05hbWUiLCJzdHlsZSIsIndpZHRoIiwibWF4SGVpZ2h0Iiwib3ZlcmZsb3dZIiwiYmFja2dyb3VuZCIsImJvcmRlciIsImJveFNoYWRvdyIsInBhZGRpbmciLCJtYXAiLCJpbmRleCIsImlzQWN0aXZlIiwiZWwiLCJhcmlhLXNlbGVjdGVkIiwidGFiSW5kZXgiLCJvbkNsaWNrIiwib25LZXlEb3duIiwibWFyZ2luQm90dG9tIiwiYm9yZGVyUmFkaXVzIiwib25Nb3VzZUVudGVyQ2FwdHVyZSIsImN1cnJlbnRUYXJnZXQiLCJvbk1vdXNlTGVhdmUiLCJnYXAiLCJhbGlnbkl0ZW1zIiwic2l6ZSIsInNob3dJbml0aWFscyIsImZsZXgiLCJtaW5XaWR0aCIsInR5cG9ncmFwaHkiLCJjb2xvciIsImZvbnRTaXplIiwibmFtZSIsImVtYWlsIiwibWF4V2lkdGgiLCJ0aXRsZSIsIl9pZCIsImlkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/MentionDropdown.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/MessageActions.js":
/*!**************************************!*\
  !*** ./components/MessageActions.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _EmojiPicker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EmojiPicker */ \"(pages-dir-node)/./components/EmojiPicker.js\");\n/* harmony import */ var _Toast__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Toast */ \"(pages-dir-node)/./components/Toast.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Toast__WEBPACK_IMPORTED_MODULE_5__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__]);\n([_Toast__WEBPACK_IMPORTED_MODULE_5__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst MessageActions = ({ messageId, messageContent, reactions, currentUserId, onReactionAdd, onReactionRemove, isMine = false, room = null })=>{\n    const [showEmojiPicker, setShowEmojiPicker] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [tooltipStates, setTooltipStates] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [leftOffset, setLeftOffset] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const emojiPickerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const emojiButtonRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const reactionRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    const rafId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const handleClickOutside = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[handleClickOutside]\": (event)=>{\n            const isClickInsideEmojiPicker = emojiPickerRef.current?.contains(event.target);\n            const isClickOnEmojiButton = emojiButtonRef.current?.contains(event.target);\n            if (!isClickInsideEmojiPicker && !isClickOnEmojiButton) {\n                setShowEmojiPicker(false);\n            }\n        }\n    }[\"MessageActions.useCallback[handleClickOutside]\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MessageActions.useEffect\": ()=>{\n            if (showEmojiPicker) {\n                document.addEventListener('mousedown', handleClickOutside);\n            }\n            return ({\n                \"MessageActions.useEffect\": ()=>{\n                    document.removeEventListener('mousedown', handleClickOutside);\n                }\n            })[\"MessageActions.useEffect\"];\n        }\n    }[\"MessageActions.useEffect\"], [\n        showEmojiPicker,\n        handleClickOutside\n    ]);\n    const handleCopy = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[handleCopy]\": async ()=>{\n            try {\n                await navigator.clipboard.writeText(messageContent);\n                _Toast__WEBPACK_IMPORTED_MODULE_5__.Toast.success('메시지가 클립보드에 복사되었습니다.');\n            } catch (error) {\n                console.error('Copy failed:', error);\n                _Toast__WEBPACK_IMPORTED_MODULE_5__.Toast.error('메시지 복사에 실패했습니다.');\n            }\n        }\n    }[\"MessageActions.useCallback[handleCopy]\"], [\n        messageContent\n    ]);\n    const handleReactionSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[handleReactionSelect]\": (emoji)=>{\n            try {\n                const emojiChar = emoji.native || emoji;\n                const hasReacted = reactions?.[emojiChar]?.includes(currentUserId);\n                if (hasReacted) {\n                    onReactionRemove?.(messageId, emojiChar);\n                } else {\n                    onReactionAdd?.(messageId, emojiChar);\n                }\n                setShowEmojiPicker(false);\n            } catch (error) {\n                console.error('Reaction handling error:', error);\n            }\n        }\n    }[\"MessageActions.useCallback[handleReactionSelect]\"], [\n        messageId,\n        reactions,\n        currentUserId,\n        onReactionAdd,\n        onReactionRemove\n    ]);\n    const toggleTooltip = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[toggleTooltip]\": (emoji)=>{\n            setTooltipStates({\n                \"MessageActions.useCallback[toggleTooltip]\": (prev)=>({\n                        ...prev,\n                        [emoji]: !prev[emoji]\n                    })\n            }[\"MessageActions.useCallback[toggleTooltip]\"]);\n        }\n    }[\"MessageActions.useCallback[toggleTooltip]\"], []);\n    const getReactionTooltip = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[getReactionTooltip]\": (emoji, userIds)=>{\n            if (!userIds || !room?.participants) {\n                return '';\n            }\n            // room.participants가 배열인지 확인\n            if (!Array.isArray(room.participants)) {\n                console.warn('room.participants is not an array:', room.participants);\n                return '';\n            }\n            // 사용자 ID들을 문자열로 변환하여 비교하기 위한 Map 생성\n            const participantMap = new Map(room.participants.map({\n                \"MessageActions.useCallback[getReactionTooltip]\": (p)=>[\n                        String(p._id || p.id),\n                        p.name\n                    ]\n            }[\"MessageActions.useCallback[getReactionTooltip]\"]));\n            const reactionUsers = userIds.map({\n                \"MessageActions.useCallback[getReactionTooltip].reactionUsers\": (userId)=>{\n                    const userIdStr = String(userId);\n                    // 현재 사용자인 경우\n                    if (userIdStr === String(currentUserId)) {\n                        return '나';\n                    }\n                    // 참여자 목록에서 해당 사용자 찾기\n                    const userName = participantMap.get(userIdStr);\n                    return userName || '알 수 없는 사용자';\n                }\n            }[\"MessageActions.useCallback[getReactionTooltip].reactionUsers\"]);\n            // 중복 제거 및 정렬\n            const uniqueUsers = [\n                ...new Set(reactionUsers)\n            ].sort({\n                \"MessageActions.useCallback[getReactionTooltip].uniqueUsers\": (a, b)=>{\n                    if (a === '나') return -1;\n                    if (b === '나') return 1;\n                    return a.localeCompare(b);\n                }\n            }[\"MessageActions.useCallback[getReactionTooltip].uniqueUsers\"]);\n            return uniqueUsers.join(', ');\n        }\n    }[\"MessageActions.useCallback[getReactionTooltip]\"], [\n        currentUserId,\n        room\n    ]);\n    const renderReactions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[renderReactions]\": ()=>{\n            if (!reactions || Object.keys(reactions).length === 0) {\n                return null;\n            }\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.HStack, {\n                gap: \"$050\",\n                children: Object.entries(reactions).map({\n                    \"MessageActions.useCallback[renderReactions]\": ([emoji, users])=>{\n                        const reactionId = `reaction-${messageId}-${emoji}`;\n                        if (!reactionRefs.current[emoji]) {\n                            reactionRefs.current[emoji] = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().createRef();\n                        }\n                        const tooltipContent = getReactionTooltip(emoji, users);\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.Button, {\n                            ref: reactionRefs.current[emoji],\n                            id: reactionId,\n                            size: \"sm\",\n                            variant: \"ghost\",\n                            color: \"$hint-100\",\n                            className: \"flex items-center gap-1\",\n                            onClick: {\n                                \"MessageActions.useCallback[renderReactions]\": ()=>handleReactionSelect(emoji)\n                            }[\"MessageActions.useCallback[renderReactions]\"],\n                            onMouseEnter: {\n                                \"MessageActions.useCallback[renderReactions]\": ()=>toggleTooltip(emoji)\n                            }[\"MessageActions.useCallback[renderReactions]\"],\n                            onMouseLeave: {\n                                \"MessageActions.useCallback[renderReactions]\": ()=>toggleTooltip(emoji)\n                            }[\"MessageActions.useCallback[renderReactions]\"],\n                            \"data-bs-toggle\": \"tooltip\",\n                            \"data-bs-placement\": \"top\",\n                            title: tooltipContent,\n                            \"data-testid\": `message-reaction-${emoji}`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-base\",\n                                    children: emoji\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                                    lineNumber: 154,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs font-medium\",\n                                    children: users.length\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                                    lineNumber: 155,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, emoji, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                            lineNumber: 138,\n                            columnNumber: 13\n                        }, undefined);\n                    }\n                }[\"MessageActions.useCallback[renderReactions]\"])\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                lineNumber: 127,\n                columnNumber: 7\n            }, undefined);\n        }\n    }[\"MessageActions.useCallback[renderReactions]\"], [\n        reactions,\n        messageId,\n        currentUserId,\n        tooltipStates,\n        handleReactionSelect,\n        toggleTooltip,\n        getReactionTooltip\n    ]);\n    const toggleEmojiPicker = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[toggleEmojiPicker]\": (e)=>{\n            e.stopPropagation();\n            setShowEmojiPicker({\n                \"MessageActions.useCallback[toggleEmojiPicker]\": (prev)=>!prev\n            }[\"MessageActions.useCallback[toggleEmojiPicker]\"]);\n        }\n    }[\"MessageActions.useCallback[toggleEmojiPicker]\"], []);\n    // Calculate emoji picker position\n    const getEmojiPickerPosition = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MessageActions.useCallback[getEmojiPickerPosition]\": ()=>{\n            if (!emojiButtonRef.current) return {\n                top: 0,\n                left: 0\n            };\n            const buttonRect = emojiButtonRef.current.getBoundingClientRect();\n            const pickerHeight = 350; // Approximate height\n            const pickerWidth = 350; // Approximate width\n            const buttonHeight = buttonRect.height;\n            // Position above the left edge of the emoji button with gap\n            let top = buttonRect.top - pickerHeight - 15; // 15px gap above button\n            let left = buttonRect.left; // Align with left edge of button\n            // If not enough space above, show below the button\n            if (top < 10) {\n                top = buttonRect.bottom + 15; // 15px gap below button\n            }\n            // Ensure picker doesn't go off the right edge\n            if (left + pickerWidth > window.innerWidth) {\n                left = window.innerWidth - pickerWidth - 10;\n            }\n            // Ensure picker doesn't go off the left edge\n            if (left < 10) {\n                left = 10;\n            }\n            return {\n                top,\n                left\n            };\n        }\n    }[\"MessageActions.useCallback[getEmojiPickerPosition]\"], []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: `flex flex-col gap-2 ${isMine ? 'items-end' : 'items-start'}`,\n        ref: containerRef,\n        children: [\n            renderReactions(),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.HStack, {\n                gap: \"$050\",\n                alignItems: \"center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconButton, {\n                                ref: emojiButtonRef,\n                                size: \"sm\",\n                                colorPalette: isMine ? 'primary' : 'contrast',\n                                shape: \"square\",\n                                variant: \"outline\",\n                                className: \"bg-transparent! hover:bg-gray-800!\",\n                                onClick: toggleEmojiPicker,\n                                \"aria-label\": \"리액션 추가\",\n                                \"data-testid\": \"message-reaction-button\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_3__.LikeIcon, {\n                                    size: 16\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                                    lineNumber: 216,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                                lineNumber: 205,\n                                columnNumber: 11\n                            }, undefined),\n                            showEmojiPicker && \"undefined\" !== 'undefined' && /*#__PURE__*/ 0\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                        lineNumber: 204,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.IconButton, {\n                        size: \"sm\",\n                        colorPalette: isMine ? 'primary' : 'contrast',\n                        shape: \"square\",\n                        variant: \"outline\",\n                        className: \"bg-transparent! hover:bg-gray-800!\",\n                        onClick: handleCopy,\n                        \"aria-label\": \"메시지 복사\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_3__.CopyIcon, {\n                            size: 16\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                            lineNumber: 251,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                        lineNumber: 242,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n                lineNumber: 203,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageActions.js\",\n        lineNumber: 200,\n        columnNumber: 5\n    }, undefined);\n};\nMessageActions.defaultProps = {\n    messageId: '',\n    messageContent: '',\n    reactions: {},\n    currentUserId: null,\n    onReactionAdd: ()=>{},\n    onReactionRemove: ()=>{},\n    isMine: false,\n    room: null\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(MessageActions));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvTWVzc2FnZUFjdGlvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQ3ZDO0FBQ29CO0FBQ29CO0FBQ2pDO0FBQ1I7QUFFaEMsTUFBTWUsaUJBQWlCLENBQUMsRUFDdEJDLFNBQVMsRUFDVEMsY0FBYyxFQUNkQyxTQUFTLEVBQ1RDLGFBQWEsRUFDYkMsYUFBYSxFQUNiQyxnQkFBZ0IsRUFDaEJDLFNBQVMsS0FBSyxFQUNkQyxPQUFPLElBQUksRUFDWjtJQUNDLE1BQU0sQ0FBQ0MsaUJBQWlCQyxtQkFBbUIsR0FBR3hCLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQ3lCLGVBQWVDLGlCQUFpQixHQUFHMUIsK0NBQVFBLENBQUMsQ0FBQztJQUNwRCxNQUFNLENBQUMyQixZQUFZQyxjQUFjLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNNkIsaUJBQWlCM0IsNkNBQU1BLENBQUM7SUFDOUIsTUFBTTRCLGlCQUFpQjVCLDZDQUFNQSxDQUFDO0lBQzlCLE1BQU02QixlQUFlN0IsNkNBQU1BLENBQUM7SUFDNUIsTUFBTThCLGVBQWU5Qiw2Q0FBTUEsQ0FBQyxDQUFDO0lBQzdCLE1BQU0rQixRQUFRL0IsNkNBQU1BLENBQUM7SUFFckIsTUFBTWdDLHFCQUFxQmpDLGtEQUFXQTswREFBQyxDQUFDa0M7WUFDdEMsTUFBTUMsMkJBQTJCUCxlQUFlUSxPQUFPLEVBQUVDLFNBQVNILE1BQU1JLE1BQU07WUFDOUUsTUFBTUMsdUJBQXVCVixlQUFlTyxPQUFPLEVBQUVDLFNBQVNILE1BQU1JLE1BQU07WUFFMUUsSUFBSSxDQUFDSCw0QkFBNEIsQ0FBQ0ksc0JBQXNCO2dCQUN0RGhCLG1CQUFtQjtZQUNyQjtRQUNGO3lEQUFHLEVBQUU7SUFFTHJCLGdEQUFTQTtvQ0FBQztZQUNSLElBQUlvQixpQkFBaUI7Z0JBQ25Ca0IsU0FBU0MsZ0JBQWdCLENBQUMsYUFBYVI7WUFDekM7WUFFQTs0Q0FB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cURBQVFBO29DQUFDMkYsTUFBTTs7Ozs7Ozs7Ozs7NEJBR2pCekUsbUJBQW1CLGdCQUFrQiw2QkFBZW5CLENBb0J0Qzs7Ozs7OztrQ0FHakIsOERBQUNJLHNEQUFVQTt3QkFDVHdGLE1BQUs7d0JBQ0w2QixjQUFjeEcsU0FBUyxZQUFZO3dCQUNuQ3lHLE9BQU07d0JBQ043QixTQUFRO3dCQUNSRSxXQUFVO3dCQUNWQyxTQUFTeEQ7d0JBQ1RtRixjQUFXO2tDQUVYLDRFQUFDekgscURBQVFBOzRCQUFDMEYsTUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLMUI7QUFFQWxGLGVBQWUySCxZQUFZLEdBQUc7SUFDNUIxSCxXQUFXO0lBQ1hDLGdCQUFnQjtJQUNoQkMsV0FBVyxDQUFDO0lBQ1pDLGVBQWU7SUFDZkMsZUFBZSxLQUFPO0lBQ3RCQyxrQkFBa0IsS0FBTztJQUN6QkMsUUFBUTtJQUNSQyxNQUFNO0FBQ1I7QUFFQSw4RUFBZXZCLGlEQUFVLENBQUNlLGVBQWVBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL2NvbXBvbmVudHMvTWVzc2FnZUFjdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7IExpa2VJY29uLCBDb3B5SWNvbiB9IGZyb20gJ0B2YXBvci11aS9pY29ucyc7XG5pbXBvcnQgeyBCdXR0b24sIEljb25CdXR0b24sIFZTdGFjaywgSFN0YWNrLCBCb3ggfSBmcm9tICdAdmFwb3ItdWkvY29yZSc7XG5pbXBvcnQgRW1vamlQaWNrZXIgZnJvbSAnLi9FbW9qaVBpY2tlcic7XG5pbXBvcnQgeyBUb2FzdCB9IGZyb20gJy4vVG9hc3QnO1xuXG5jb25zdCBNZXNzYWdlQWN0aW9ucyA9ICh7IFxuICBtZXNzYWdlSWQsXG4gIG1lc3NhZ2VDb250ZW50LFxuICByZWFjdGlvbnMsXG4gIGN1cnJlbnRVc2VySWQsXG4gIG9uUmVhY3Rpb25BZGQsXG4gIG9uUmVhY3Rpb25SZW1vdmUsXG4gIGlzTWluZSA9IGZhbHNlLFxuICByb29tID0gbnVsbFxufSkgPT4ge1xuICBjb25zdCBbc2hvd0Vtb2ppUGlja2VyLCBzZXRTaG93RW1vamlQaWNrZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdG9vbHRpcFN0YXRlcywgc2V0VG9vbHRpcFN0YXRlc10gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtsZWZ0T2Zmc2V0LCBzZXRMZWZ0T2Zmc2V0XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBlbW9qaVBpY2tlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZW1vamlCdXR0b25SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgcmVhY3Rpb25SZWZzID0gdXNlUmVmKHt9KTtcbiAgY29uc3QgcmFmSWQgPSB1c2VSZWYobnVsbCk7XG5cbiAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gdXNlQ2FsbGJhY2soKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgaXNDbGlja0luc2lkZUVtb2ppUGlja2VyID0gZW1vamlQaWNrZXJSZWYuY3VycmVudD8uY29udGFpbnMoZXZlbnQudGFyZ2V0KTtcbiAgICBjb25zdCBpc0NsaWNrT25FbW9qaUJ1dHRvbiA9IGVtb2ppQnV0dG9uUmVmLmN1cnJlbnQ/LmNvbnRhaW5zKGV2ZW50LnRhcmdldCk7XG5cbiAgICBpZiAoIWlzQ2xpY2tJbnNpZGVFbW9qaVBpY2tlciAmJiAhaXNDbGlja09uRW1vamlCdXR0b24pIHtcbiAgICAgIHNldFNob3dFbW9qaVBpY2tlcihmYWxzZSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvd0Vtb2ppUGlja2VyKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgIH07XG4gIH0sIFtzaG93RW1vamlQaWNrZXIsIGhhbmRsZUNsaWNrT3V0c2lkZV0pO1xuXG4gIGNvbnN0IGhhbmRsZUNvcHkgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KG1lc3NhZ2VDb250ZW50KTtcbiAgICAgIFRvYXN0LnN1Y2Nlc3MoJ+uplOyLnOyngOqwgCDtgbTrpr3rs7Trk5zsl5Ag67O17IKs65CY7JeI7Iq164uI64ukLicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDb3B5IGZhaWxlZDonLCBlcnJvcik7XG4gICAgICBUb2FzdC5lcnJvcign66mU7Iuc7KeAIOuzteyCrOyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XG4gICAgfVxuICB9LCBbbWVzc2FnZUNvbnRlbnRdKTtcblxuICBjb25zdCBoYW5kbGVSZWFjdGlvblNlbGVjdCA9IHVzZUNhbGxiYWNrKChlbW9qaSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbW9qaUNoYXIgPSBlbW9qaS5uYXRpdmUgfHwgZW1vamk7XG4gICAgICBjb25zdCBoYXNSZWFjdGVkID0gcmVhY3Rpb25zPy5bZW1vamlDaGFyXT8uaW5jbHVkZXMoY3VycmVudFVzZXJJZCk7XG5cbiAgICAgIGlmIChoYXNSZWFjdGVkKSB7XG4gICAgICAgIG9uUmVhY3Rpb25SZW1vdmU/LihtZXNzYWdlSWQsIGVtb2ppQ2hhcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblJlYWN0aW9uQWRkPy4obWVzc2FnZUlkLCBlbW9qaUNoYXIpO1xuICAgICAgfVxuICAgICAgc2V0U2hvd0Vtb2ppUGlja2VyKGZhbHNlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignUmVhY3Rpb24gaGFuZGxpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgIH1cbiAgfSwgW21lc3NhZ2VJZCwgcmVhY3Rpb25zLCBjdXJyZW50VXNlcklkLCBvblJlYWN0aW9uQWRkLCBvblJlYWN0aW9uUmVtb3ZlXSk7XG5cbiAgY29uc3QgdG9nZ2xlVG9vbHRpcCA9IHVzZUNhbGxiYWNrKChlbW9qaSkgPT4ge1xuICAgIHNldFRvb2x0aXBTdGF0ZXMocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIFtlbW9qaV06ICFwcmV2W2Vtb2ppXVxuICAgIH0pKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGdldFJlYWN0aW9uVG9vbHRpcCA9IHVzZUNhbGxiYWNrKChlbW9qaSwgdXNlcklkcykgPT4ge1xuICAgIGlmICghdXNlcklkcyB8fCAhcm9vbT8ucGFydGljaXBhbnRzKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gcm9vbS5wYXJ0aWNpcGFudHPqsIAg67Cw7Je07J247KeAIO2ZleyduFxuICAgIGlmICghQXJyYXkuaXNBcnJheShyb29tLnBhcnRpY2lwYW50cykpIHtcbiAgICAgIGNvbnNvbGUud2Fybigncm9vbS5wYXJ0aWNpcGFudHMgaXMgbm90IGFuIGFycmF5OicsIHJvb20ucGFydGljaXBhbnRzKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvLyDsgqzsmqnsnpAgSUTrk6TsnYQg66y47J6Q7Je066GcIOuzgO2ZmO2VmOyXrCDruYTqtZDtlZjquLAg7JyE7ZWcIE1hcCDsg53shLFcbiAgICBjb25zdCBwYXJ0aWNpcGFudE1hcCA9IG5ldyBNYXAoXG4gICAgICByb29tLnBhcnRpY2lwYW50cy5tYXAocCA9PiBbXG4gICAgICAgIFN0cmluZyhwLl9pZCB8fCBwLmlkKSwgXG4gICAgICAgIHAubmFtZVxuICAgICAgXSlcbiAgICApO1xuXG4gICAgY29uc3QgcmVhY3Rpb25Vc2VycyA9IHVzZXJJZHMubWFwKHVzZXJJZCA9PiB7XG4gICAgICBjb25zdCB1c2VySWRTdHIgPSBTdHJpbmcodXNlcklkKTtcbiAgICAgIFxuICAgICAgLy8g7ZiE7J6sIOyCrOyaqeyekOyduCDqsr3smrBcbiAgICAgIGlmICh1c2VySWRTdHIgPT09IFN0cmluZyhjdXJyZW50VXNlcklkKSkge1xuICAgICAgICByZXR1cm4gJ+uCmCc7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOywuOyXrOyekCDrqqnroZ3sl5DshJwg7ZW064u5IOyCrOyaqeyekCDssL7quLBcbiAgICAgIGNvbnN0IHVzZXJOYW1lID0gcGFydGljaXBhbnRNYXAuZ2V0KHVzZXJJZFN0cik7XG4gICAgICByZXR1cm4gdXNlck5hbWUgfHwgJ+yVjCDsiJgg7JeG64qUIOyCrOyaqeyekCc7XG4gICAgfSk7XG5cbiAgICAvLyDspJHrs7Ug7KCc6rGwIOuwjyDsoJXroKxcbiAgICBjb25zdCB1bmlxdWVVc2VycyA9IFsuLi5uZXcgU2V0KHJlYWN0aW9uVXNlcnMpXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYSA9PT0gJ+uCmCcpIHJldHVybiAtMTtcbiAgICAgIGlmIChiID09PSAn64KYJykgcmV0dXJuIDE7XG4gICAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHVuaXF1ZVVzZXJzLmpvaW4oJywgJyk7XG4gIH0sIFtjdXJyZW50VXNlcklkLCByb29tXSk7XG5cbiAgY29uc3QgcmVuZGVyUmVhY3Rpb25zID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghcmVhY3Rpb25zIHx8IE9iamVjdC5rZXlzKHJlYWN0aW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEhTdGFjayBnYXA9XCIkMDUwXCI+XG4gICAgICAgIHtPYmplY3QuZW50cmllcyhyZWFjdGlvbnMpLm1hcCgoW2Vtb2ppLCB1c2Vyc10pID0+IHtcbiAgICAgICAgICBjb25zdCByZWFjdGlvbklkID0gYHJlYWN0aW9uLSR7bWVzc2FnZUlkfS0ke2Vtb2ppfWA7XG5cbiAgICAgICAgICBpZiAoIXJlYWN0aW9uUmVmcy5jdXJyZW50W2Vtb2ppXSkge1xuICAgICAgICAgICAgcmVhY3Rpb25SZWZzLmN1cnJlbnRbZW1vamldID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdG9vbHRpcENvbnRlbnQgPSBnZXRSZWFjdGlvblRvb2x0aXAoZW1vamksIHVzZXJzKTtcblxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGtleT17ZW1vaml9XG4gICAgICAgICAgICAgIHJlZj17cmVhY3Rpb25SZWZzLmN1cnJlbnRbZW1vamldfVxuICAgICAgICAgICAgICBpZD17cmVhY3Rpb25JZH1cbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgY29sb3I9XCIkaGludC0xMDBcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVJlYWN0aW9uU2VsZWN0KGVtb2ppKX1cbiAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiB0b2dnbGVUb29sdGlwKGVtb2ppKX1cbiAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiB0b2dnbGVUb29sdGlwKGVtb2ppKX1cbiAgICAgICAgICAgICAgZGF0YS1icy10b2dnbGU9XCJ0b29sdGlwXCJcbiAgICAgICAgICAgICAgZGF0YS1icy1wbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICAgICAgICB0aXRsZT17dG9vbHRpcENvbnRlbnR9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbWVzc2FnZS1yZWFjdGlvbi0ke2Vtb2ppfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtYmFzZVwiPntlbW9qaX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW1cIj57dXNlcnMubGVuZ3RofTwvc3Bhbj5cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9IU3RhY2s+XG4gICAgKTtcbiAgfSwgW3JlYWN0aW9ucywgbWVzc2FnZUlkLCBjdXJyZW50VXNlcklkLCB0b29sdGlwU3RhdGVzLCBoYW5kbGVSZWFjdGlvblNlbGVjdCwgdG9nZ2xlVG9vbHRpcCwgZ2V0UmVhY3Rpb25Ub29sdGlwXSk7XG5cbiAgY29uc3QgdG9nZ2xlRW1vamlQaWNrZXIgPSB1c2VDYWxsYmFjaygoZSkgPT4geyAgICBcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHNldFNob3dFbW9qaVBpY2tlcihwcmV2ID0+ICFwcmV2KTtcbiAgfSwgW10pO1xuXG4gIC8vIENhbGN1bGF0ZSBlbW9qaSBwaWNrZXIgcG9zaXRpb25cbiAgY29uc3QgZ2V0RW1vamlQaWNrZXJQb3NpdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWVtb2ppQnV0dG9uUmVmLmN1cnJlbnQpIHJldHVybiB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgIFxuICAgIGNvbnN0IGJ1dHRvblJlY3QgPSBlbW9qaUJ1dHRvblJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHBpY2tlckhlaWdodCA9IDM1MDsgLy8gQXBwcm94aW1hdGUgaGVpZ2h0XG4gICAgY29uc3QgcGlja2VyV2lkdGggPSAzNTA7IC8vIEFwcHJveGltYXRlIHdpZHRoXG4gICAgY29uc3QgYnV0dG9uSGVpZ2h0ID0gYnV0dG9uUmVjdC5oZWlnaHQ7XG4gICAgXG4gICAgLy8gUG9zaXRpb24gYWJvdmUgdGhlIGxlZnQgZWRnZSBvZiB0aGUgZW1vamkgYnV0dG9uIHdpdGggZ2FwXG4gICAgbGV0IHRvcCA9IGJ1dHRvblJlY3QudG9wIC0gcGlja2VySGVpZ2h0IC0gMTU7IC8vIDE1cHggZ2FwIGFib3ZlIGJ1dHRvblxuICAgIGxldCBsZWZ0ID0gYnV0dG9uUmVjdC5sZWZ0OyAvLyBBbGlnbiB3aXRoIGxlZnQgZWRnZSBvZiBidXR0b25cbiAgICBcbiAgICAvLyBJZiBub3QgZW5vdWdoIHNwYWNlIGFib3ZlLCBzaG93IGJlbG93IHRoZSBidXR0b25cbiAgICBpZiAodG9wIDwgMTApIHtcbiAgICAgIHRvcCA9IGJ1dHRvblJlY3QuYm90dG9tICsgMTU7IC8vIDE1cHggZ2FwIGJlbG93IGJ1dHRvblxuICAgIH1cbiAgICBcbiAgICAvLyBFbnN1cmUgcGlja2VyIGRvZXNuJ3QgZ28gb2ZmIHRoZSByaWdodCBlZGdlXG4gICAgaWYgKGxlZnQgKyBwaWNrZXJXaWR0aCA+IHdpbmRvdy5pbm5lcldpZHRoKSB7XG4gICAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSBwaWNrZXJXaWR0aCAtIDEwO1xuICAgIH1cbiAgICBcbiAgICAvLyBFbnN1cmUgcGlja2VyIGRvZXNuJ3QgZ28gb2ZmIHRoZSBsZWZ0IGVkZ2VcbiAgICBpZiAobGVmdCA8IDEwKSB7XG4gICAgICBsZWZ0ID0gMTA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7IHRvcCwgbGVmdCB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgZ2FwLTIgJHtpc01pbmUgPyAnaXRlbXMtZW5kJyA6ICdpdGVtcy1zdGFydCd9YH0gcmVmPXtjb250YWluZXJSZWZ9PlxuICAgICAge3JlbmRlclJlYWN0aW9ucygpfVxuXG4gICAgICA8SFN0YWNrIGdhcD1cIiQwNTBcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICA8SWNvbkJ1dHRvblxuICAgICAgICAgICAgcmVmPXtlbW9qaUJ1dHRvblJlZn1cbiAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICBjb2xvclBhbGV0dGU9e2lzTWluZSA/ICdwcmltYXJ5JyA6ICdjb250cmFzdCd9XG4gICAgICAgICAgICBzaGFwZT1cInNxdWFyZVwiXG4gICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy10cmFuc3BhcmVudCEgaG92ZXI6YmctZ3JheS04MDAhXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUVtb2ppUGlja2VyfVxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIuumrOyVoeyFmCDstpTqsIBcIlxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJtZXNzYWdlLXJlYWN0aW9uLWJ1dHRvblwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPExpa2VJY29uIHNpemU9ezE2fSAvPlxuICAgICAgICAgIDwvSWNvbkJ1dHRvbj5cblxuICAgICAgICAgIHtzaG93RW1vamlQaWNrZXIgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgUmVhY3RET00uY3JlYXRlUG9ydGFsKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICByZWY9e2Vtb2ppUGlja2VyUmVmfVxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAgIHpJbmRleDogOTk5OSxcbiAgICAgICAgICAgICAgICAuLi5nZXRFbW9qaVBpY2tlclBvc2l0aW9uKClcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImVtb2ppLXBpY2tlci1jb250YWluZXJcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktODAwIHJvdW5kZWQtbGcgc2hhZG93LWxnIGJvcmRlciBib3JkZXItZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICA8RW1vamlQaWNrZXJcbiAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXtoYW5kbGVSZWFjdGlvblNlbGVjdH1cbiAgICAgICAgICAgICAgICAgIGVtb2ppU2l6ZT17MjB9XG4gICAgICAgICAgICAgICAgICBwZXJMaW5lPXs4fVxuICAgICAgICAgICAgICAgICAgdGhlbWU9XCJsaWdodFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj4sXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICBjb2xvclBhbGV0dGU9e2lzTWluZSA/ICdwcmltYXJ5JyA6ICdjb250cmFzdCd9XG4gICAgICAgICAgc2hhcGU9XCJzcXVhcmVcIlxuICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJiZy10cmFuc3BhcmVudCEgaG92ZXI6YmctZ3JheS04MDAhXCJcbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDb3B5fVxuICAgICAgICAgIGFyaWEtbGFiZWw9XCLrqZTsi5zsp4Ag67O17IKsXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxDb3B5SWNvbiBzaXplPXsxNn0gLz5cbiAgICAgICAgPC9JY29uQnV0dG9uPlxuICAgICAgPC9IU3RhY2s+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5NZXNzYWdlQWN0aW9ucy5kZWZhdWx0UHJvcHMgPSB7XG4gIG1lc3NhZ2VJZDogJycsXG4gIG1lc3NhZ2VDb250ZW50OiAnJyxcbiAgcmVhY3Rpb25zOiB7fSxcbiAgY3VycmVudFVzZXJJZDogbnVsbCxcbiAgb25SZWFjdGlvbkFkZDogKCkgPT4ge30sXG4gIG9uUmVhY3Rpb25SZW1vdmU6ICgpID0+IHt9LFxuICBpc01pbmU6IGZhbHNlLFxuICByb29tOiBudWxsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKE1lc3NhZ2VBY3Rpb25zKTsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiUmVhY3RET00iLCJMaWtlSWNvbiIsIkNvcHlJY29uIiwiQnV0dG9uIiwiSWNvbkJ1dHRvbiIsIlZTdGFjayIsIkhTdGFjayIsIkJveCIsIkVtb2ppUGlja2VyIiwiVG9hc3QiLCJNZXNzYWdlQWN0aW9ucyIsIm1lc3NhZ2VJZCIsIm1lc3NhZ2VDb250ZW50IiwicmVhY3Rpb25zIiwiY3VycmVudFVzZXJJZCIsIm9uUmVhY3Rpb25BZGQiLCJvblJlYWN0aW9uUmVtb3ZlIiwiaXNNaW5lIiwicm9vbSIsInNob3dFbW9qaVBpY2tlciIsInNldFNob3dFbW9qaVBpY2tlciIsInRvb2x0aXBTdGF0ZXMiLCJzZXRUb29sdGlwU3RhdGVzIiwibGVmdE9mZnNldCIsInNldExlZnRPZmZzZXQiLCJlbW9qaVBpY2tlclJlZiIsImVtb2ppQnV0dG9uUmVmIiwiY29udGFpbmVyUmVmIiwicmVhY3Rpb25SZWZzIiwicmFmSWQiLCJoYW5kbGVDbGlja091dHNpZGUiLCJldmVudCIsImlzQ2xpY2tJbnNpZGVFbW9qaVBpY2tlciIsImN1cnJlbnQiLCJjb250YWlucyIsInRhcmdldCIsImlzQ2xpY2tPbkVtb2ppQnV0dG9uIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUNvcHkiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb25zb2xlIiwiaGFuZGxlUmVhY3Rpb25TZWxlY3QiLCJlbW9qaSIsImVtb2ppQ2hhciIsIm5hdGl2ZSIsImhhc1JlYWN0ZWQiLCJpbmNsdWRlcyIsInRvZ2dsZVRvb2x0aXAiLCJwcmV2IiwiZ2V0UmVhY3Rpb25Ub29sdGlwIiwidXNlcklkcyIsInBhcnRpY2lwYW50cyIsIkFycmF5IiwiaXNBcnJheSIsIndhcm4iLCJwYXJ0aWNpcGFudE1hcCIsIk1hcCIsIm1hcCIsInAiLCJTdHJpbmciLCJfaWQiLCJpZCIsIm5hbWUiLCJyZWFjdGlvblVzZXJzIiwidXNlcklkIiwidXNlcklkU3RyIiwidXNlck5hbWUiLCJnZXQiLCJ1bmlxdWVVc2VycyIsIlNldCIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJqb2luIiwicmVuZGVyUmVhY3Rpb25zIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImdhcCIsImVudHJpZXMiLCJ1c2VycyIsInJlYWN0aW9uSWQiLCJjcmVhdGVSZWYiLCJ0b29sdGlwQ29udGVudCIsInJlZiIsInNpemUiLCJ2YXJpYW50IiwiY29sb3IiLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwib25Nb3VzZUVudGVyIiwib25Nb3VzZUxlYXZlIiwiZGF0YS1icy10b2dnbGUiLCJkYXRhLWJzLXBsYWNlbWVudCIsInRpdGxlIiwiZGF0YS10ZXN0aWQiLCJzcGFuIiwidG9nZ2xlRW1vamlQaWNrZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiZ2V0RW1vamlQaWNrZXJQb3NpdGlvbiIsInRvcCIsImxlZnQiLCJidXR0b25SZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicGlja2VySGVpZ2h0IiwicGlja2VyV2lkdGgiLCJidXR0b25IZWlnaHQiLCJoZWlnaHQiLCJib3R0b20iLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZGl2IiwiYWxpZ25JdGVtcyIsImNvbG9yUGFsZXR0ZSIsInNoYXBlIiwiYXJpYS1sYWJlbCIsImNyZWF0ZVBvcnRhbCIsInN0eWxlIiwicG9zaXRpb24iLCJ6SW5kZXgiLCJvblNlbGVjdCIsImVtb2ppU2l6ZSIsInBlckxpbmUiLCJ0aGVtZSIsImJvZHkiLCJkZWZhdWx0UHJvcHMiLCJtZW1vIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/MessageActions.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/MessageContent.js":
/*!**************************************!*\
  !*** ./components/MessageContent.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__]);\n_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst MessageContent = ({ content })=>{\n    // 멘션 패턴을 찾아서 React 엘리먼트로 변환하는 함수\n    const renderContentWithMentions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"MessageContent.useMemo[renderContentWithMentions]\": ()=>({\n                \"MessageContent.useMemo[renderContentWithMentions]\": (text)=>{\n                    const mentionPattern = /@([\\w.-]+)/g;\n                    const parts = [];\n                    let lastIndex = 0;\n                    let match;\n                    while((match = mentionPattern.exec(text)) !== null){\n                        if (match.index > lastIndex) {\n                            parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: text.slice(lastIndex, match.index)\n                            }, `text-${lastIndex}`, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageContent.js\",\n                                lineNumber: 15,\n                                columnNumber: 11\n                            }, undefined));\n                        }\n                        const mentionedName = match[1];\n                        parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__.Badge, {\n                            colorPalette: \"primary\",\n                            shape: \"square\",\n                            size: \"sm\",\n                            children: [\n                                \"@\",\n                                mentionedName\n                            ]\n                        }, `mention-${match.index}`, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageContent.js\",\n                            lineNumber: 24,\n                            columnNumber: 9\n                        }, undefined));\n                        lastIndex = match.index + match[0].length;\n                    }\n                    if (lastIndex < text.length) {\n                        parts.push(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            children: text.slice(lastIndex)\n                        }, `text-${lastIndex}`, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageContent.js\",\n                            lineNumber: 39,\n                            columnNumber: 9\n                        }, undefined));\n                    }\n                    return parts;\n                }\n            })[\"MessageContent.useMemo[renderContentWithMentions]\"]\n    }[\"MessageContent.useMemo[renderContentWithMentions]\"], []);\n    if (typeof content !== 'string') {\n        return String(content);\n    }\n    // 줄바꿈을 처리하여 렌더링\n    const lines = content.split('\\n');\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__.Text, {\n        typography: \"body2\",\n        className: \"message-text\",\n        style: {\n            whiteSpace: 'pre-wrap'\n        },\n        children: lines.map((line, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                children: [\n                    line.includes('@') ? renderContentWithMentions(line) : line,\n                    index < lines.length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageContent.js\",\n                        lineNumber: 60,\n                        columnNumber: 40\n                    }, undefined)\n                ]\n            }, index, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageContent.js\",\n                lineNumber: 58,\n                columnNumber: 9\n            }, undefined))\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/MessageContent.js\",\n        lineNumber: 56,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(MessageContent));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvTWVzc2FnZUNvbnRlbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF1QztBQUNNO0FBRTdDLE1BQU1JLGlCQUFpQixDQUFDLEVBQUVDLE9BQU8sRUFBRTtJQUNqQyxpQ0FBaUM7SUFDakMsTUFBTUMsNEJBQTRCTCw4Q0FBT0E7NkRBQUM7cUVBQU0sQ0FBQ007b0JBQy9DLE1BQU1DLGlCQUFpQjtvQkFDdkIsTUFBTUMsUUFBUSxFQUFFO29CQUNoQixJQUFJQyxZQUFZO29CQUNoQixJQUFJQztvQkFFSixNQUFPLENBQUNBLFFBQVFILGVBQWVJLElBQUksQ0FBQ0wsS0FBSSxNQUFPLEtBQU07d0JBQ25ELElBQUlJLE1BQU1FLEtBQUssR0FBR0gsV0FBVzs0QkFDM0JELE1BQU1LLElBQUksZUFDUiw4REFBQ0M7MENBQ0VSLEtBQUtTLEtBQUssQ0FBQ04sV0FBV0MsTUFBTUUsS0FBSzsrQkFEekIsQ0FBQyxLQUFLLEVBQUVILFdBQVc7Ozs7O3dCQUlsQzt3QkFFQSxNQUFNTyxnQkFBZ0JOLEtBQUssQ0FBQyxFQUFFO3dCQUU5QkYsTUFBTUssSUFBSSxlQUNSLDhEQUFDWCxpREFBS0E7NEJBRUplLGNBQWE7NEJBQ2JDLE9BQU07NEJBQ05DLE1BQUs7O2dDQUNOO2dDQUNHSDs7MkJBTEcsQ0FBQyxRQUFRLEVBQUVOLE1BQU1FLEtBQUssRUFBRTs7Ozs7d0JBU2pDSCxZQUFZQyxNQUFNRSxLQUFLLEdBQUdGLEtBQUssQ0FBQyxFQUFFLENBQUNVLE1BQU07b0JBQzNDO29CQUVBLElBQUlYLFlBQVlILEtBQUtjLE1BQU0sRUFBRTt3QkFDM0JaLE1BQU1LLElBQUksZUFDUiw4REFBQ0M7c0NBQ0VSLEtBQUtTLEtBQUssQ0FBQ047MkJBREgsQ0FBQyxLQUFLLEVBQUVBLFdBQVc7Ozs7O29CQUlsQztvQkFFQSxPQUFPRDtnQkFDVDs7NERBQUcsRUFBRTtJQUVMLElBQUksT0FBT0osWUFBWSxVQUFVO1FBQy9CLE9BQU9pQixPQUFPakI7SUFDaEI7SUFFQSxnQkFBZ0I7SUFDaEIsTUFBTWtCLFFBQVFsQixRQUFRbUIsS0FBSyxDQUFDO0lBRTVCLHFCQUNFLDhEQUFDdEIsZ0RBQUlBO1FBQUN1QixZQUFXO1FBQVFDLFdBQVU7UUFBZUMsT0FBTztZQUFFQyxZQUFZO1FBQVc7a0JBQy9FTCxNQUFNTSxHQUFHLENBQUMsQ0FBQ0MsTUFBTWpCLHNCQUNoQiw4REFBQ2IsdURBQWM7O29CQUNaOEIsS0FBS0UsUUFBUSxDQUFDLE9BQU8xQiwwQkFBMEJ3QixRQUFRQTtvQkFDdkRqQixRQUFRVSxNQUFNRixNQUFNLEdBQUcsbUJBQUssOERBQUNZOzs7Ozs7ZUFGWHBCOzs7Ozs7Ozs7O0FBTzdCO0FBRUEsOEVBQWViLGlEQUFVLENBQUNJLGVBQWVBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL2NvbXBvbmVudHMvTWVzc2FnZUNvbnRlbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUZXh0LCBCYWRnZSB9IGZyb20gJ0B2YXBvci11aS9jb3JlJztcblxuY29uc3QgTWVzc2FnZUNvbnRlbnQgPSAoeyBjb250ZW50IH0pID0+IHtcbiAgLy8g66mY7IWYIO2MqO2EtOydhCDssL7slYTshJwgUmVhY3Qg7JeY66as66i87Yq466GcIOuzgO2ZmO2VmOuKlCDtlajsiJhcbiAgY29uc3QgcmVuZGVyQ29udGVudFdpdGhNZW50aW9ucyA9IHVzZU1lbW8oKCkgPT4gKHRleHQpID0+IHtcbiAgICBjb25zdCBtZW50aW9uUGF0dGVybiA9IC9AKFtcXHcuLV0rKS9nO1xuICAgIGNvbnN0IHBhcnRzID0gW107XG4gICAgbGV0IGxhc3RJbmRleCA9IDA7XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IG1lbnRpb25QYXR0ZXJuLmV4ZWModGV4dCkpICE9PSBudWxsKSB7XG4gICAgICBpZiAobWF0Y2guaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgICAgcGFydHMucHVzaChcbiAgICAgICAgICA8c3BhbiBrZXk9e2B0ZXh0LSR7bGFzdEluZGV4fWB9PlxuICAgICAgICAgICAge3RleHQuc2xpY2UobGFzdEluZGV4LCBtYXRjaC5pbmRleCl9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtZW50aW9uZWROYW1lID0gbWF0Y2hbMV07XG5cbiAgICAgIHBhcnRzLnB1c2goXG4gICAgICAgIDxCYWRnZVxuICAgICAgICAgIGtleT17YG1lbnRpb24tJHttYXRjaC5pbmRleH1gfVxuICAgICAgICAgIGNvbG9yUGFsZXR0ZT1cInByaW1hcnlcIlxuICAgICAgICAgIHNoYXBlPVwic3F1YXJlXCJcbiAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICA+XG4gICAgICAgICAgQHttZW50aW9uZWROYW1lfVxuICAgICAgICA8L0JhZGdlPlxuICAgICAgKTtcblxuICAgICAgbGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICBwYXJ0cy5wdXNoKFxuICAgICAgICA8c3BhbiBrZXk9e2B0ZXh0LSR7bGFzdEluZGV4fWB9PlxuICAgICAgICAgIHt0ZXh0LnNsaWNlKGxhc3RJbmRleCl9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnRzO1xuICB9LCBbXSk7XG5cbiAgaWYgKHR5cGVvZiBjb250ZW50ICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBTdHJpbmcoY29udGVudCk7XG4gIH1cblxuICAvLyDspITrsJTqv4jsnYQg7LKY66as7ZWY7JesIOugjOuNlOungVxuICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICBcbiAgcmV0dXJuIChcbiAgICA8VGV4dCB0eXBvZ3JhcGh5PVwiYm9keTJcIiBjbGFzc05hbWU9XCJtZXNzYWdlLXRleHRcIiBzdHlsZT17eyB3aGl0ZVNwYWNlOiAncHJlLXdyYXAnIH19PlxuICAgICAge2xpbmVzLm1hcCgobGluZSwgaW5kZXgpID0+IChcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50IGtleT17aW5kZXh9PlxuICAgICAgICAgIHtsaW5lLmluY2x1ZGVzKCdAJykgPyByZW5kZXJDb250ZW50V2l0aE1lbnRpb25zKGxpbmUpIDogbGluZX1cbiAgICAgICAgICB7aW5kZXggPCBsaW5lcy5sZW5ndGggLSAxICYmIDxiciAvPn1cbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICkpfVxuICAgIDwvVGV4dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oTWVzc2FnZUNvbnRlbnQpOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZU1lbW8iLCJUZXh0IiwiQmFkZ2UiLCJNZXNzYWdlQ29udGVudCIsImNvbnRlbnQiLCJyZW5kZXJDb250ZW50V2l0aE1lbnRpb25zIiwidGV4dCIsIm1lbnRpb25QYXR0ZXJuIiwicGFydHMiLCJsYXN0SW5kZXgiLCJtYXRjaCIsImV4ZWMiLCJpbmRleCIsInB1c2giLCJzcGFuIiwic2xpY2UiLCJtZW50aW9uZWROYW1lIiwiY29sb3JQYWxldHRlIiwic2hhcGUiLCJzaXplIiwibGVuZ3RoIiwiU3RyaW5nIiwibGluZXMiLCJzcGxpdCIsInR5cG9ncmFwaHkiLCJjbGFzc05hbWUiLCJzdHlsZSIsIndoaXRlU3BhY2UiLCJtYXAiLCJsaW5lIiwiRnJhZ21lbnQiLCJpbmNsdWRlcyIsImJyIiwibWVtbyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/MessageContent.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/ReadStatus.js":
/*!**********************************!*\
  !*** ./components/ReadStatus.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__]);\n_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst ReadStatus = ({ messageType = 'text', participants = [], readers = [], className = '', socketRef = null, messageId = null, messageRef = null, currentUserId = null // 현재 사용자 ID 추가\n })=>{\n    const [hasMarkedAsRead, setHasMarkedAsRead] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const statusRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const observerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // 읽지 않은 참여자 명단 생성 \n    const unreadParticipants = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ReadStatus.useMemo[unreadParticipants]\": ()=>{\n            if (messageType === 'system') return [];\n            return participants.filter({\n                \"ReadStatus.useMemo[unreadParticipants]\": (participant)=>!readers.some({\n                        \"ReadStatus.useMemo[unreadParticipants]\": (reader)=>reader.userId === participant._id || reader.userId === participant.id\n                    }[\"ReadStatus.useMemo[unreadParticipants]\"])\n            }[\"ReadStatus.useMemo[unreadParticipants]\"]);\n        }\n    }[\"ReadStatus.useMemo[unreadParticipants]\"], [\n        participants,\n        readers,\n        messageType\n    ]);\n    // 읽지 않은 참여자 수 계산\n    const unreadCount = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ReadStatus.useMemo[unreadCount]\": ()=>{\n            if (messageType === 'system') {\n                return 0;\n            }\n            return unreadParticipants.length;\n        }\n    }[\"ReadStatus.useMemo[unreadCount]\"], [\n        unreadParticipants.length,\n        messageType\n    ]);\n    // 메시지를 읽음으로 표시하는 함수\n    const markMessageAsRead = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ReadStatus.useCallback[markMessageAsRead]\": async ()=>{\n            if (!messageId || !currentUserId || hasMarkedAsRead || messageType === 'system' || !socketRef?.current) {\n                return;\n            }\n            try {\n                // Socket.IO를 통해 서버에 읽음 상태 전송\n                socketRef.current.emit('markMessagesAsRead', {\n                    messageIds: [\n                        messageId\n                    ]\n                });\n                setHasMarkedAsRead(true);\n            } catch (error) {\n                console.error('Error marking message as read:', error);\n            }\n        }\n    }[\"ReadStatus.useCallback[markMessageAsRead]\"], [\n        messageId,\n        currentUserId,\n        hasMarkedAsRead,\n        messageType,\n        socketRef\n    ]);\n    // Intersection Observer 설정\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ReadStatus.useEffect\": ()=>{\n            if (!messageRef?.current || !currentUserId || hasMarkedAsRead || messageType === 'system') {\n                return;\n            }\n            // 이미 읽은 메시지인지 확인\n            const isAlreadyRead = readers.some({\n                \"ReadStatus.useEffect.isAlreadyRead\": (reader)=>reader.userId === currentUserId\n            }[\"ReadStatus.useEffect.isAlreadyRead\"]);\n            if (isAlreadyRead) {\n                setHasMarkedAsRead(true);\n                return;\n            }\n            const observerOptions = {\n                root: null,\n                rootMargin: '0px',\n                threshold: 0.5 // 메시지의 50%가 보여야 읽음으로 처리\n            };\n            const handleIntersect = {\n                \"ReadStatus.useEffect.handleIntersect\": (entries)=>{\n                    entries.forEach({\n                        \"ReadStatus.useEffect.handleIntersect\": (entry)=>{\n                            if (entry.isIntersecting && !hasMarkedAsRead) {\n                                markMessageAsRead();\n                            }\n                        }\n                    }[\"ReadStatus.useEffect.handleIntersect\"]);\n                }\n            }[\"ReadStatus.useEffect.handleIntersect\"];\n            observerRef.current = new IntersectionObserver(handleIntersect, observerOptions);\n            observerRef.current.observe(messageRef.current);\n            return ({\n                \"ReadStatus.useEffect\": ()=>{\n                    if (observerRef.current) {\n                        observerRef.current.disconnect();\n                    }\n                }\n            })[\"ReadStatus.useEffect\"];\n        }\n    }[\"ReadStatus.useEffect\"], [\n        messageRef,\n        currentUserId,\n        hasMarkedAsRead,\n        messageType,\n        readers,\n        markMessageAsRead\n    ]);\n    // 시스템 메시지는 읽음 상태 표시 안 함\n    if (messageType === 'system') {\n        return null;\n    }\n    // 모두 읽은 경우\n    if (unreadCount === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.HStack, {\n            className: className,\n            ref: statusRef,\n            gap: \"$050\",\n            alignItems: \"center\",\n            role: \"status\",\n            \"aria-label\": \"모든 참여자가 메시지를 읽었습니다\",\n            \"data-testid\": \"read-status-all-read\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.HStack, {\n                    alignItems: \"center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ConfirmOutlineIcon, {\n                            size: 12,\n                            className: \"text-v-success-100\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n                            lineNumber: 117,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ConfirmOutlineIcon, {\n                            size: 12,\n                            className: \"-ml-1.5 text-v-success-100\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n                            lineNumber: 118,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n                    lineNumber: 116,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                    typography: \"subtitle2\",\n                    className: \"text-v-hint-200\",\n                    children: \"모두 읽음\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n                    lineNumber: 120,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n            lineNumber: 107,\n            columnNumber: 7\n        }, undefined);\n    }\n    // 읽지 않은 사람이 있는 경우\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.HStack, {\n        className: className,\n        ref: statusRef,\n        gap: \"$050\",\n        alignItems: \"center\",\n        role: \"status\",\n        \"aria-label\": `${unreadCount}명이 메시지를 읽지 않았습니다`,\n        \"data-testid\": \"read-status-unread\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ConfirmOutlineIcon, {\n                size: 12,\n                className: \"text-v-hint-200\"\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n                lineNumber: 136,\n                columnNumber: 7\n            }, undefined),\n            unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                typography: \"subtitle2\",\n                className: \"text-v-hint-200\",\n                children: [\n                    unreadCount,\n                    \"명 안 읽음\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n                lineNumber: 138,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/ReadStatus.js\",\n        lineNumber: 127,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ReadStatus);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvUmVhZFN0YXR1cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFpRjtBQUM1QjtBQUNQO0FBRTlDLE1BQU1TLGFBQWEsQ0FBQyxFQUNsQkMsY0FBYyxNQUFNLEVBQ3BCQyxlQUFlLEVBQUUsRUFDakJDLFVBQVUsRUFBRSxFQUNaQyxZQUFZLEVBQUUsRUFDZEMsWUFBWSxJQUFJLEVBQ2hCQyxZQUFZLElBQUksRUFDaEJDLGFBQWEsSUFBSSxFQUNqQkMsZ0JBQWdCLEtBQUssZUFBZTtBQUFoQixFQUNyQjtJQUNDLE1BQU0sQ0FBQ0MsaUJBQWlCQyxtQkFBbUIsR0FBR2hCLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU1pQixZQUFZZiw2Q0FBTUEsQ0FBQztJQUN6QixNQUFNZ0IsY0FBY2hCLDZDQUFNQSxDQUFDO0lBRTNCLG1CQUFtQjtJQUNuQixNQUFNaUIscUJBQXFCckIsOENBQU9BO2tEQUFDO1lBQ2pDLElBQUlTLGdCQUFnQixVQUFVLE9BQU8sRUFBRTtZQUV2QyxPQUFPQyxhQUFhWSxNQUFNOzBEQUFDQyxDQUFBQSxjQUN6QixDQUFDWixRQUFRYSxJQUFJO2tFQUFDQyxDQUFBQSxTQUNaQSxPQUFPQyxNQUFNLEtBQUtILFlBQVlJLEdBQUcsSUFDakNGLE9BQU9DLE1BQU0sS0FBS0gsWUFBWUssRUFBRTs7O1FBR3RDO2lEQUFHO1FBQUNsQjtRQUFjQztRQUFTRjtLQUFZO0lBRXZDLGlCQUFpQjtJQUNqQixNQUFNb0IsY0FBYzdCLDhDQUFPQTsyQ0FBQztZQUMxQixJQUFJUyxnQkFBZ0IsVUFBVTtnQkFDNUIsT0FBTztZQUNUO1lBQ0EsT0FBT1ksbUJBQW1CUyxNQUFNO1FBQ2xDOzBDQUFHO1FBQUNULG1CQUFtQlMsTUFBTTtRQUFFckI7S0FBWTtJQUUzQyxvQkFBb0I7SUFDcEIsTUFBTXNCLG9CQUFvQjVCLGtEQUFXQTtxREFBQztZQUNwQyxJQUFJLENBQUNXLGFBQWEsQ0FBQ0UsaUJBQWlCQyxtQkFDaENSLGdCQUFnQixZQUFZLENBQUNJLFdBQVdtQixTQUFTO2dCQUNuRDtZQUNGO1lBRUEsSUFBSTtnQkFDRiw2QkFBNkI7Z0JBQzdCbkIsVUFBVW1CLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLHNCQUFzQjtvQkFDM0NDLFlBQVk7d0JBQUNwQjtxQkFBVTtnQkFDekI7Z0JBRUFJLG1CQUFtQjtZQUVyQixFQUFFLE9BQU9pQixPQUFPO2dCQUNkQyxRQUFRRCxLQUFLLENBQUMsa0NBQWtDQTtZQUNsRDtRQUNGO29EQUFHO1FBQUNyQjtRQUFXRTtRQUFlQztRQUFpQlI7UUFBYUk7S0FBVTtJQUV0RSwyQkFBMkI7SUFDM0JaLGdEQUFTQTtnQ0FBQztZQUNSLElBQUksQ0FBQ2MsWUFBWWlCLFdBQVcsQ0FBQ2hCLGlCQUFpQkMsbUJBQW1CUixnQkFBZ0IsVUFBVTtnQkFDekY7WUFDRjtZQUVBLGlCQUFpQjtZQUNqQixNQUFNNEIsZ0JBQWdCMUIsUUFBUWEsSUFBSTtzREFBQ0MsQ0FBQUEsU0FDakNBLE9BQU9DLE1BQU0sS0FBS1Y7O1lBR3BCLElBQUlxQixlQUFlO2dCQUNqQm5CLG1CQUFtQjtnQkFDbkI7WUFDRjtZQUVBLE1BQU1vQixrQkFBa0I7Z0JBQ3RCQyxNQUFNO2dCQUNOQyxZQUFZO2dCQUNaQyxXQUFXLElBQUksd0JBQXdCO1lBQ3pDO1lBRUEsTUFBTUM7d0RBQWtCLENBQUNDO29CQUN2QkEsUUFBUUMsT0FBTztnRUFBQ0MsQ0FBQUE7NEJBQ2QsSUFBSUEsTUFBTUMsY0FBYyxJQUFJLENBQUM3QixpQkFBaUI7Z0NBQzVDYzs0QkFDRjt3QkFDRjs7Z0JBQ0Y7O1lBRUFYLFlBQVlZLE9BQU8sR0FBRyxJQUFJZSxxQkFBcUJMLGlCQUFpQko7WUFDaEVsQixZQUFZWSxPQUFPLENBQUNnQixPQUFPLENBQUNqQyxXQUFXaUIsT0FBTztZQUU5Qzt3Q0FBTztvQkFDTCxJQUFJWixZQUFZWSxPQUFPLEVBQUU7d0JBQ3ZCWixZQUFZWSxPQUFPLENBQUNpQixVQUFVO29CQUNoQztnQkFDRjs7UUFDRjsrQkFBRztRQUFDbEM7UUFBWUM7UUFBZUM7UUFBaUJSO1FBQWFFO1FBQVNvQjtLQUFrQjtJQUV4Rix3QkFBd0I7SUFDeEIsSUFBSXRCLGdCQUFnQixVQUFVO1FBQzVCLE9BQU87SUFDVDtJQUVBLFdBQVc7SUFDWCxJQUFJb0IsZ0JBQWdCLEdBQUc7UUFDckIscUJBQ0UsOERBQUN0QixrREFBTUE7WUFDTEssV0FBV0E7WUFDWHNDLEtBQUsvQjtZQUNMZ0MsS0FBSTtZQUNKQyxZQUFXO1lBQ1hDLE1BQUs7WUFDTEMsY0FBVztZQUNYQyxlQUFZOzs4QkFFWiw4REFBQ2hELGtEQUFNQTtvQkFBQzZDLFlBQVc7O3NDQUNqQiw4REFBQy9DLCtEQUFrQkE7NEJBQUNtRCxNQUFNOzRCQUFJNUMsV0FBVTs7Ozs7O3NDQUN4Qyw4REFBQ1AsK0RBQWtCQTs0QkFBQ21ELE1BQU07NEJBQUk1QyxXQUFVOzs7Ozs7Ozs7Ozs7OEJBRTFDLDhEQUFDTixnREFBSUE7b0JBQUNtRCxZQUFXO29CQUFZN0MsV0FBVTs4QkFBa0I7Ozs7Ozs7Ozs7OztJQUcvRDtJQUVBLGtCQUFrQjtJQUNsQixxQkFDRSw4REFBQ0wsa0RBQU1BO1FBQ0xLLFdBQVdBO1FBQ1hzQyxLQUFLL0I7UUFDTGdDLEtBQUk7UUFDSkMsWUFBVztRQUNYQyxNQUFLO1FBQ0xDLGNBQVksR0FBR3pCLFlBQVksZ0JBQWdCLENBQUM7UUFDNUMwQixlQUFZOzswQkFFWiw4REFBQ2xELCtEQUFrQkE7Z0JBQUNtRCxNQUFNO2dCQUFJNUMsV0FBVTs7Ozs7O1lBQ3ZDaUIsY0FBYyxtQkFDYiw4REFBQ3ZCLGdEQUFJQTtnQkFBQ21ELFlBQVc7Z0JBQVk3QyxXQUFVOztvQkFDcENpQjtvQkFBWTs7Ozs7Ozs7Ozs7OztBQUt2QjtBQUVBLGlFQUFlckIsVUFBVUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvY29tcG9uZW50cy9SZWFkU3RhdHVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VNZW1vLCB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ29uZmlybU91dGxpbmVJY29uIH0gZnJvbSAnQHZhcG9yLXVpL2ljb25zJztcbmltcG9ydCB7IFRleHQsIEhTdGFjayB9IGZyb20gJ0B2YXBvci11aS9jb3JlJztcblxuY29uc3QgUmVhZFN0YXR1cyA9ICh7IFxuICBtZXNzYWdlVHlwZSA9ICd0ZXh0JyxcbiAgcGFydGljaXBhbnRzID0gW10sXG4gIHJlYWRlcnMgPSBbXSxcbiAgY2xhc3NOYW1lID0gJycsXG4gIHNvY2tldFJlZiA9IG51bGwsXG4gIG1lc3NhZ2VJZCA9IG51bGwsXG4gIG1lc3NhZ2VSZWYgPSBudWxsLCAvLyDrqZTsi5zsp4Ag7JqU7IaM7J2YIHJlZiDstpTqsIBcbiAgY3VycmVudFVzZXJJZCA9IG51bGwgLy8g7ZiE7J6sIOyCrOyaqeyekCBJRCDstpTqsIBcbn0pID0+IHtcbiAgY29uc3QgW2hhc01hcmtlZEFzUmVhZCwgc2V0SGFzTWFya2VkQXNSZWFkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc3RhdHVzUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBvYnNlcnZlclJlZiA9IHVzZVJlZihudWxsKTtcblxuICAvLyDsnb3sp4Ag7JWK7J2AIOywuOyXrOyekCDrqoXri6gg7IOd7ISxIFxuICBjb25zdCB1bnJlYWRQYXJ0aWNpcGFudHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobWVzc2FnZVR5cGUgPT09ICdzeXN0ZW0nKSByZXR1cm4gW107XG4gICAgXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50cy5maWx0ZXIocGFydGljaXBhbnQgPT4gXG4gICAgICAhcmVhZGVycy5zb21lKHJlYWRlciA9PiBcbiAgICAgICAgcmVhZGVyLnVzZXJJZCA9PT0gcGFydGljaXBhbnQuX2lkIHx8IFxuICAgICAgICByZWFkZXIudXNlcklkID09PSBwYXJ0aWNpcGFudC5pZFxuICAgICAgKVxuICAgICk7XG4gIH0sIFtwYXJ0aWNpcGFudHMsIHJlYWRlcnMsIG1lc3NhZ2VUeXBlXSk7XG5cbiAgLy8g7J297KeAIOyViuydgCDssLjsl6zsnpAg7IiYIOqzhOyCsFxuICBjb25zdCB1bnJlYWRDb3VudCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gdW5yZWFkUGFydGljaXBhbnRzLmxlbmd0aDtcbiAgfSwgW3VucmVhZFBhcnRpY2lwYW50cy5sZW5ndGgsIG1lc3NhZ2VUeXBlXSk7XG5cbiAgLy8g66mU7Iuc7KeA66W8IOydveydjOycvOuhnCDtkZzsi5ztlZjripQg7ZWo7IiYXG4gIGNvbnN0IG1hcmtNZXNzYWdlQXNSZWFkID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbWVzc2FnZUlkIHx8ICFjdXJyZW50VXNlcklkIHx8IGhhc01hcmtlZEFzUmVhZCB8fCBcbiAgICAgICAgbWVzc2FnZVR5cGUgPT09ICdzeXN0ZW0nIHx8ICFzb2NrZXRSZWY/LmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gU29ja2V0LklP66W8IO2Gte2VtCDshJzrsoTsl5Ag7J297J2MIOyDge2DnCDsoITshqFcbiAgICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ21hcmtNZXNzYWdlc0FzUmVhZCcsIHtcbiAgICAgICAgbWVzc2FnZUlkczogW21lc3NhZ2VJZF1cbiAgICAgIH0pO1xuXG4gICAgICBzZXRIYXNNYXJrZWRBc1JlYWQodHJ1ZSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFya2luZyBtZXNzYWdlIGFzIHJlYWQ6JywgZXJyb3IpO1xuICAgIH1cbiAgfSwgW21lc3NhZ2VJZCwgY3VycmVudFVzZXJJZCwgaGFzTWFya2VkQXNSZWFkLCBtZXNzYWdlVHlwZSwgc29ja2V0UmVmXSk7XG5cbiAgLy8gSW50ZXJzZWN0aW9uIE9ic2VydmVyIOyEpOyglVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbWVzc2FnZVJlZj8uY3VycmVudCB8fCAhY3VycmVudFVzZXJJZCB8fCBoYXNNYXJrZWRBc1JlYWQgfHwgbWVzc2FnZVR5cGUgPT09ICdzeXN0ZW0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g7J2066+4IOydveydgCDrqZTsi5zsp4Dsnbjsp4Ag7ZmV7J24XG4gICAgY29uc3QgaXNBbHJlYWR5UmVhZCA9IHJlYWRlcnMuc29tZShyZWFkZXIgPT4gXG4gICAgICByZWFkZXIudXNlcklkID09PSBjdXJyZW50VXNlcklkXG4gICAgKTtcblxuICAgIGlmIChpc0FscmVhZHlSZWFkKSB7XG4gICAgICBzZXRIYXNNYXJrZWRBc1JlYWQodHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2JzZXJ2ZXJPcHRpb25zID0ge1xuICAgICAgcm9vdDogbnVsbCxcbiAgICAgIHJvb3RNYXJnaW46ICcwcHgnLFxuICAgICAgdGhyZXNob2xkOiAwLjUgLy8g66mU7Iuc7KeA7J2YIDUwJeqwgCDrs7Tsl6zslbwg7J297J2M7Jy866GcIOyymOumrFxuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVJbnRlcnNlY3QgPSAoZW50cmllcykgPT4ge1xuICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmICFoYXNNYXJrZWRBc1JlYWQpIHtcbiAgICAgICAgICBtYXJrTWVzc2FnZUFzUmVhZCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgb2JzZXJ2ZXJSZWYuY3VycmVudCA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihoYW5kbGVJbnRlcnNlY3QsIG9ic2VydmVyT3B0aW9ucyk7XG4gICAgb2JzZXJ2ZXJSZWYuY3VycmVudC5vYnNlcnZlKG1lc3NhZ2VSZWYuY3VycmVudCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKG9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW21lc3NhZ2VSZWYsIGN1cnJlbnRVc2VySWQsIGhhc01hcmtlZEFzUmVhZCwgbWVzc2FnZVR5cGUsIHJlYWRlcnMsIG1hcmtNZXNzYWdlQXNSZWFkXSk7XG5cbiAgLy8g7Iuc7Iqk7YWcIOuplOyLnOyngOuKlCDsnb3snYwg7IOB7YOcIO2RnOyLnCDslYgg7ZWoXG4gIGlmIChtZXNzYWdlVHlwZSA9PT0gJ3N5c3RlbScpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIOuqqOuRkCDsnb3snYAg6rK97JqwXG4gIGlmICh1bnJlYWRDb3VudCA9PT0gMCkge1xuICAgIHJldHVybiAoXG4gICAgICA8SFN0YWNrXG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICByZWY9e3N0YXR1c1JlZn1cbiAgICAgICAgZ2FwPVwiJDA1MFwiXG4gICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICByb2xlPVwic3RhdHVzXCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIuuqqOuToCDssLjsl6zsnpDqsIAg66mU7Iuc7KeA66W8IOydveyXiOyKteuLiOuLpFwiXG4gICAgICAgIGRhdGEtdGVzdGlkPVwicmVhZC1zdGF0dXMtYWxsLXJlYWRcIlxuICAgICAgPlxuICAgICAgICA8SFN0YWNrIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgICAgICA8Q29uZmlybU91dGxpbmVJY29uIHNpemU9ezEyfSBjbGFzc05hbWU9J3RleHQtdi1zdWNjZXNzLTEwMCcgLz5cbiAgICAgICAgICA8Q29uZmlybU91dGxpbmVJY29uIHNpemU9ezEyfSBjbGFzc05hbWU9Jy1tbC0xLjUgdGV4dC12LXN1Y2Nlc3MtMTAwJyAvPlxuICAgICAgICA8L0hTdGFjaz5cbiAgICAgICAgPFRleHQgdHlwb2dyYXBoeT1cInN1YnRpdGxlMlwiIGNsYXNzTmFtZT1cInRleHQtdi1oaW50LTIwMFwiPuuqqOuRkCDsnb3snYw8L1RleHQ+XG4gICAgICA8L0hTdGFjaz5cbiAgICApO1xuICB9XG5cbiAgLy8g7J297KeAIOyViuydgCDsgqzrnozsnbQg7J6I64qUIOqyveyasFxuICByZXR1cm4gKFxuICAgIDxIU3RhY2tcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgcmVmPXtzdGF0dXNSZWZ9XG4gICAgICBnYXA9XCIkMDUwXCJcbiAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICBhcmlhLWxhYmVsPXtgJHt1bnJlYWRDb3VudH3rqoXsnbQg66mU7Iuc7KeA66W8IOydveyngCDslYrslZjsirXri4jri6RgfVxuICAgICAgZGF0YS10ZXN0aWQ9XCJyZWFkLXN0YXR1cy11bnJlYWRcIlxuICAgID5cbiAgICAgIDxDb25maXJtT3V0bGluZUljb24gc2l6ZT17MTJ9IGNsYXNzTmFtZT1cInRleHQtdi1oaW50LTIwMFwiIC8+XG4gICAgICB7dW5yZWFkQ291bnQgPiAwICYmIChcbiAgICAgICAgPFRleHQgdHlwb2dyYXBoeT1cInN1YnRpdGxlMlwiIGNsYXNzTmFtZT1cInRleHQtdi1oaW50LTIwMFwiPlxuICAgICAgICAgIHt1bnJlYWRDb3VudH3rqoUg7JWIIOydveydjFxuICAgICAgICA8L1RleHQ+XG4gICAgICApfVxuICAgIDwvSFN0YWNrPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUmVhZFN0YXR1czsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VNZW1vIiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsIkNvbmZpcm1PdXRsaW5lSWNvbiIsIlRleHQiLCJIU3RhY2siLCJSZWFkU3RhdHVzIiwibWVzc2FnZVR5cGUiLCJwYXJ0aWNpcGFudHMiLCJyZWFkZXJzIiwiY2xhc3NOYW1lIiwic29ja2V0UmVmIiwibWVzc2FnZUlkIiwibWVzc2FnZVJlZiIsImN1cnJlbnRVc2VySWQiLCJoYXNNYXJrZWRBc1JlYWQiLCJzZXRIYXNNYXJrZWRBc1JlYWQiLCJzdGF0dXNSZWYiLCJvYnNlcnZlclJlZiIsInVucmVhZFBhcnRpY2lwYW50cyIsImZpbHRlciIsInBhcnRpY2lwYW50Iiwic29tZSIsInJlYWRlciIsInVzZXJJZCIsIl9pZCIsImlkIiwidW5yZWFkQ291bnQiLCJsZW5ndGgiLCJtYXJrTWVzc2FnZUFzUmVhZCIsImN1cnJlbnQiLCJlbWl0IiwibWVzc2FnZUlkcyIsImVycm9yIiwiY29uc29sZSIsImlzQWxyZWFkeVJlYWQiLCJvYnNlcnZlck9wdGlvbnMiLCJyb290Iiwicm9vdE1hcmdpbiIsInRocmVzaG9sZCIsImhhbmRsZUludGVyc2VjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwib2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCJyZWYiLCJnYXAiLCJhbGlnbkl0ZW1zIiwicm9sZSIsImFyaWEtbGFiZWwiLCJkYXRhLXRlc3RpZCIsInNpemUiLCJ0eXBvZ3JhcGh5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/ReadStatus.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/SystemMessage.js":
/*!*************************************!*\
  !*** ./components/SystemMessage.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__]);\n_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst SystemMessage = ({ msg })=>{\n    const formattedTime = new Date(msg.timestamp).toLocaleString('ko-KR', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n    }).replace(/\\./g, '년').replace(/\\s/g, ' ').replace('일 ', '일 ');\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__.VStack, {\n        gap: \"$050\",\n        padding: \"$100 $200\",\n        margin: \"$100 0\",\n        className: \"self-center rounded-xl backdrop-blur-md bg-v-gray-100/50\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                typography: \"subtitle1\",\n                className: \"text-v-gray-500\",\n                children: msg.content\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/SystemMessage.js\",\n                lineNumber: 22,\n                columnNumber: 7\n            }, undefined),\n            formattedTime && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                typography: \"subtitle2\",\n                className: \"opacity-50 text-v-gray-500 text-center\",\n                children: formattedTime\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/SystemMessage.js\",\n                lineNumber: 26,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/SystemMessage.js\",\n        lineNumber: 16,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(SystemMessage));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvU3lzdGVtTWVzc2FnZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBCO0FBQ29CO0FBRTlDLE1BQU1HLGdCQUFnQixDQUFDLEVBQUVDLEdBQUcsRUFBRTtJQUM1QixNQUFNQyxnQkFBZ0IsSUFBSUMsS0FBS0YsSUFBSUcsU0FBUyxFQUFFQyxjQUFjLENBQUMsU0FBUztRQUNwRUMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLEtBQUs7UUFDTEMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsUUFBUTtJQUNWLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLEtBQUtBLE9BQU8sQ0FBQyxPQUFPLEtBQUtBLE9BQU8sQ0FBQyxNQUFNO0lBRXpELHFCQUNFLDhEQUFDZixrREFBTUE7UUFDTGdCLEtBQUk7UUFDSkMsU0FBUTtRQUNSQyxRQUFPO1FBQ1BDLFdBQVU7OzBCQUVWLDhEQUFDbEIsZ0RBQUlBO2dCQUFDbUIsWUFBVztnQkFBWUQsV0FBVTswQkFDcENoQixJQUFJa0IsT0FBTzs7Ozs7O1lBRWJqQiwrQkFDQyw4REFBQ0gsZ0RBQUlBO2dCQUFDbUIsWUFBVztnQkFBWUQsV0FBVTswQkFDcENmOzs7Ozs7Ozs7Ozs7QUFLWDtBQUVBLDhFQUFlTCxpREFBVSxDQUFDRyxjQUFjQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb21wb25lbnRzL1N5c3RlbU1lc3NhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFZTdGFjaywgVGV4dCB9IGZyb20gJ0B2YXBvci11aS9jb3JlJztcblxuY29uc3QgU3lzdGVtTWVzc2FnZSA9ICh7IG1zZyB9KSA9PiB7XG4gIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBuZXcgRGF0ZShtc2cudGltZXN0YW1wKS50b0xvY2FsZVN0cmluZygna28tS1InLCB7XG4gICAgeWVhcjogJ251bWVyaWMnLFxuICAgIG1vbnRoOiAnbG9uZycsXG4gICAgZGF5OiAnbnVtZXJpYycsXG4gICAgaG91cjogJzItZGlnaXQnLFxuICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgIHNlY29uZDogJzItZGlnaXQnLFxuICAgIGhvdXIxMjogZmFsc2VcbiAgfSkucmVwbGFjZSgvXFwuL2csICfrhYQnKS5yZXBsYWNlKC9cXHMvZywgJyAnKS5yZXBsYWNlKCfsnbwgJywgJ+ydvCAnKTtcblxuICByZXR1cm4gKFxuICAgIDxWU3RhY2tcbiAgICAgIGdhcD1cIiQwNTBcIlxuICAgICAgcGFkZGluZz1cIiQxMDAgJDIwMFwiXG4gICAgICBtYXJnaW49XCIkMTAwIDBcIlxuICAgICAgY2xhc3NOYW1lPVwic2VsZi1jZW50ZXIgcm91bmRlZC14bCBiYWNrZHJvcC1ibHVyLW1kIGJnLXYtZ3JheS0xMDAvNTBcIlxuICAgID5cbiAgICAgIDxUZXh0IHR5cG9ncmFwaHk9XCJzdWJ0aXRsZTFcIiBjbGFzc05hbWU9XCJ0ZXh0LXYtZ3JheS01MDBcIj5cbiAgICAgICAge21zZy5jb250ZW50fVxuICAgICAgPC9UZXh0PlxuICAgICAge2Zvcm1hdHRlZFRpbWUgJiYgKFxuICAgICAgICA8VGV4dCB0eXBvZ3JhcGh5PVwic3VidGl0bGUyXCIgY2xhc3NOYW1lPVwib3BhY2l0eS01MCB0ZXh0LXYtZ3JheS01MDAgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICB7Zm9ybWF0dGVkVGltZX1cbiAgICAgICAgPC9UZXh0PlxuICAgICAgKX1cbiAgICA8L1ZTdGFjaz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oU3lzdGVtTWVzc2FnZSk7Il0sIm5hbWVzIjpbIlJlYWN0IiwiVlN0YWNrIiwiVGV4dCIsIlN5c3RlbU1lc3NhZ2UiLCJtc2ciLCJmb3JtYXR0ZWRUaW1lIiwiRGF0ZSIsInRpbWVzdGFtcCIsInRvTG9jYWxlU3RyaW5nIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsImhvdXIxMiIsInJlcGxhY2UiLCJnYXAiLCJwYWRkaW5nIiwibWFyZ2luIiwiY2xhc3NOYW1lIiwidHlwb2dyYXBoeSIsImNvbnRlbnQiLCJtZW1vIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/SystemMessage.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/Toast.js":
/*!*****************************!*\
  !*** ./components/Toast.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Toast: () => (/* binding */ Toast),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var react_toastify_dist_ReactToastify_min_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-toastify/dist/ReactToastify.min.css */ \"(pages-dir-node)/./node_modules/react-toastify/dist/ReactToastify.min.css\");\n/* harmony import */ var react_toastify_dist_ReactToastify_min_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_toastify_dist_ReactToastify_min_css__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_2__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_5__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_2__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n// react-toastify 기본 스타일 제거\nconst toastStyles = `\n  .Toastify__toast {\n    background: transparent !important;\n    box-shadow: none !important;\n    padding: 0 !important;\n    min-height: auto !important;\n  }\n  \n  .Toastify__toast-body {\n    padding: 0 !important;\n    margin: 0 !important;\n  }\n  \n  .Toastify__close-button {\n    display: none !important;\n  }\n  \n  .Toastify__toast-icon {\n    display: none !important;\n  }\n`;\n// Toast 타입별 설정\nconst TOAST_TYPES = {\n    success: {\n        type: 'success',\n        colorPalette: 'success',\n        icon: _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_4__.CheckCircleIcon,\n        duration: 3000\n    },\n    error: {\n        type: 'error',\n        colorPalette: 'danger',\n        icon: _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_4__.ErrorCircleIcon,\n        duration: 5000\n    },\n    warning: {\n        type: 'warning',\n        colorPalette: 'warning',\n        icon: _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_4__.WarningIcon,\n        duration: 4000\n    },\n    info: {\n        type: 'info',\n        colorPalette: 'primary',\n        icon: _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_4__.InfoCircleOutlineIcon,\n        duration: 3000\n    }\n};\n// Vapor-UI Callout 스타일 Toast 컴포넌트\nconst CalloutToast = ({ message, type })=>{\n    const config = TOAST_TYPES[type] || TOAST_TYPES.info;\n    const IconComponent = config.icon;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_5__.Callout.Root, {\n        colorPalette: config.colorPalette,\n        \"data-testid\": `toast-${type}`,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_5__.Callout.Icon, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(IconComponent, {}, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/Toast.js\",\n                    lineNumber: 71,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/Toast.js\",\n                lineNumber: 70,\n                columnNumber: 7\n            }, undefined),\n            message\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/Toast.js\",\n        lineNumber: 69,\n        columnNumber: 5\n    }, undefined);\n};\n// Toast 클래스 정의\nclass Toast {\n    static show(message, type = 'info', options = {}) {\n        const config = TOAST_TYPES[type] || TOAST_TYPES.info;\n        react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast[config.type](/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(CalloutToast, {\n            message: message,\n            type: type\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/Toast.js\",\n            lineNumber: 84,\n            columnNumber: 7\n        }, this), {\n            position: \"top-right\",\n            autoClose: options.duration || config.duration,\n            hideProgressBar: true,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            ...options\n        });\n    }\n    static success(message, options = {}) {\n        this.show(message, 'success', options);\n    }\n    static error(message, options = {}) {\n        this.show(message, 'error', options);\n    }\n    static warning(message, options = {}) {\n        this.show(message, 'warning', options);\n    }\n    static info(message, options = {}) {\n        this.show(message, 'info', options);\n    }\n    static dismiss(toastId) {\n        if (toastId) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(toastId);\n        } else {\n            react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast.dismiss(); // 모든 toast 닫기\n        }\n    }\n    static isActive(toastId) {\n        return react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast.isActive(toastId);\n    }\n}\n// Container 컴포넌트\nconst ToastContainer$ = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"style\", {\n                children: toastStyles\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/Toast.js\",\n                lineNumber: 130,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_toastify__WEBPACK_IMPORTED_MODULE_2__.ToastContainer, {\n                position: \"top-right\",\n                autoClose: 3000,\n                hideProgressBar: true,\n                newestOnTop: true,\n                closeOnClick: true,\n                rtl: false,\n                pauseOnFocusLoss: true,\n                draggable: true,\n                pauseOnHover: true,\n                theme: \"light\",\n                transition: react_toastify__WEBPACK_IMPORTED_MODULE_2__.Slide\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/Toast.js\",\n                lineNumber: 131,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true);\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ToastContainer$);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7OzswQkFDUiw4REFBQ1IsMERBQWNBO2dCQUNiNEIsVUFBUztnQkFDVEMsV0FBVztnQkFDWEMsaUJBQWlCO2dCQUNqQlMsYUFBYTtnQkFDYlIsY0FBYztnQkFDZFMsS0FBSztnQkFDTEMsa0JBQWtCO2dCQUNsQlIsV0FBVztnQkFDWEQsY0FBYztnQkFDZFUsT0FBTTtnQkFDTkMsWUFBWXpDLGlEQUFLQTs7Ozs7Ozs7QUFJekI7QUFFaUI7QUFDakIsaUVBQWVtQyxlQUFlQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb21wb25lbnRzL1RvYXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUb2FzdENvbnRhaW5lciwgdG9hc3QsIFNsaWRlIH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xuaW1wb3J0ICdyZWFjdC10b2FzdGlmeS9kaXN0L1JlYWN0VG9hc3RpZnkubWluLmNzcyc7XG5pbXBvcnQgeyBDYWxsb3V0IH0gZnJvbSAnQHZhcG9yLXVpL2NvcmUnO1xuaW1wb3J0IHsgXG4gIENoZWNrQ2lyY2xlSWNvbixcbiAgRXJyb3JDaXJjbGVJY29uLFxuICBJbmZvQ2lyY2xlT3V0bGluZUljb24sXG4gIFdhcm5pbmdJY29uXG59IGZyb20gJ0B2YXBvci11aS9pY29ucyc7XG5cbi8vIHJlYWN0LXRvYXN0aWZ5IOq4sOuzuCDsiqTtg4Dsnbwg7KCc6rGwXG5jb25zdCB0b2FzdFN0eWxlcyA9IGBcbiAgLlRvYXN0aWZ5X190b2FzdCB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZzogMCAhaW1wb3J0YW50O1xuICAgIG1pbi1oZWlnaHQ6IGF1dG8gIWltcG9ydGFudDtcbiAgfVxuICBcbiAgLlRvYXN0aWZ5X190b2FzdC1ib2R5IHtcbiAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7XG4gICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XG4gIH1cbiAgXG4gIC5Ub2FzdGlmeV9fY2xvc2UtYnV0dG9uIHtcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gIH1cbiAgXG4gIC5Ub2FzdGlmeV9fdG9hc3QtaWNvbiB7XG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICB9XG5gO1xuXG4vLyBUb2FzdCDtg4DsnoXrs4Qg7ISk7KCVXG5jb25zdCBUT0FTVF9UWVBFUyA9IHtcbiAgc3VjY2Vzczoge1xuICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICBjb2xvclBhbGV0dGU6ICdzdWNjZXNzJyxcbiAgICBpY29uOiBDaGVja0NpcmNsZUljb24sXG4gICAgZHVyYXRpb246IDMwMDBcbiAgfSxcbiAgZXJyb3I6IHtcbiAgICB0eXBlOiAnZXJyb3InLFxuICAgIGNvbG9yUGFsZXR0ZTogJ2RhbmdlcicsXG4gICAgaWNvbjogRXJyb3JDaXJjbGVJY29uLFxuICAgIGR1cmF0aW9uOiA1MDAwXG4gIH0sXG4gIHdhcm5pbmc6IHtcbiAgICB0eXBlOiAnd2FybmluZycsXG4gICAgY29sb3JQYWxldHRlOiAnd2FybmluZycsXG4gICAgaWNvbjogV2FybmluZ0ljb24sXG4gICAgZHVyYXRpb246IDQwMDBcbiAgfSxcbiAgaW5mbzoge1xuICAgIHR5cGU6ICdpbmZvJyxcbiAgICBjb2xvclBhbGV0dGU6ICdwcmltYXJ5JyxcbiAgICBpY29uOiBJbmZvQ2lyY2xlT3V0bGluZUljb24sXG4gICAgZHVyYXRpb246IDMwMDBcbiAgfVxufTtcblxuLy8gVmFwb3ItVUkgQ2FsbG91dCDsiqTtg4DsnbwgVG9hc3Qg7Lu07Y+s64SM7Yq4XG5jb25zdCBDYWxsb3V0VG9hc3QgPSAoeyBtZXNzYWdlLCB0eXBlIH0pID0+IHtcbiAgY29uc3QgY29uZmlnID0gVE9BU1RfVFlQRVNbdHlwZV0gfHwgVE9BU1RfVFlQRVMuaW5mbztcbiAgY29uc3QgSWNvbkNvbXBvbmVudCA9IGNvbmZpZy5pY29uO1xuXG4gIHJldHVybiAoXG4gICAgPENhbGxvdXQuUm9vdCBjb2xvclBhbGV0dGU9e2NvbmZpZy5jb2xvclBhbGV0dGV9IGRhdGEtdGVzdGlkPXtgdG9hc3QtJHt0eXBlfWB9PlxuICAgICAgPENhbGxvdXQuSWNvbj5cbiAgICAgICAgPEljb25Db21wb25lbnQgLz5cbiAgICAgIDwvQ2FsbG91dC5JY29uPlxuICAgICAge21lc3NhZ2V9XG4gICAgPC9DYWxsb3V0LlJvb3Q+XG4gICk7XG59O1xuXG4vLyBUb2FzdCDtgbTrnpjsiqQg7KCV7J2YXG5jbGFzcyBUb2FzdCB7XG4gIHN0YXRpYyBzaG93KG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IFRPQVNUX1RZUEVTW3R5cGVdIHx8IFRPQVNUX1RZUEVTLmluZm87XG5cbiAgICB0b2FzdFtjb25maWcudHlwZV0oXG4gICAgICA8Q2FsbG91dFRvYXN0IG1lc3NhZ2U9e21lc3NhZ2V9IHR5cGU9e3R5cGV9IC8+LFxuICAgICAge1xuICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcbiAgICAgICAgYXV0b0Nsb3NlOiBvcHRpb25zLmR1cmF0aW9uIHx8IGNvbmZpZy5kdXJhdGlvbixcbiAgICAgICAgaGlkZVByb2dyZXNzQmFyOiB0cnVlLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBzdWNjZXNzKG1lc3NhZ2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuc2hvdyhtZXNzYWdlLCAnc3VjY2VzcycsIG9wdGlvbnMpO1xuICB9XG5cbiAgc3RhdGljIGVycm9yKG1lc3NhZ2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuc2hvdyhtZXNzYWdlLCAnZXJyb3InLCBvcHRpb25zKTtcbiAgfVxuXG4gIHN0YXRpYyB3YXJuaW5nKG1lc3NhZ2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuc2hvdyhtZXNzYWdlLCAnd2FybmluZycsIG9wdGlvbnMpO1xuICB9XG5cbiAgc3RhdGljIGluZm8obWVzc2FnZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5zaG93KG1lc3NhZ2UsICdpbmZvJywgb3B0aW9ucyk7XG4gIH1cbiAgXG4gIHN0YXRpYyBkaXNtaXNzKHRvYXN0SWQpIHtcbiAgICBpZiAodG9hc3RJZCkge1xuICAgICAgdG9hc3QuZGlzbWlzcyh0b2FzdElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9hc3QuZGlzbWlzcygpOyAvLyDrqqjrk6AgdG9hc3Qg64ur6riwXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGlzQWN0aXZlKHRvYXN0SWQpIHtcbiAgICByZXR1cm4gdG9hc3QuaXNBY3RpdmUodG9hc3RJZCk7XG4gIH1cbn1cblxuLy8gQ29udGFpbmVyIOy7tO2PrOuEjO2KuFxuY29uc3QgVG9hc3RDb250YWluZXIkID0gKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8c3R5bGU+e3RvYXN0U3R5bGVzfTwvc3R5bGU+XG4gICAgICA8VG9hc3RDb250YWluZXJcbiAgICAgICAgcG9zaXRpb249XCJ0b3AtcmlnaHRcIlxuICAgICAgICBhdXRvQ2xvc2U9ezMwMDB9XG4gICAgICAgIGhpZGVQcm9ncmVzc0Jhcj17dHJ1ZX1cbiAgICAgICAgbmV3ZXN0T25Ub3A9e3RydWV9XG4gICAgICAgIGNsb3NlT25DbGljaz17dHJ1ZX1cbiAgICAgICAgcnRsPXtmYWxzZX1cbiAgICAgICAgcGF1c2VPbkZvY3VzTG9zcz17dHJ1ZX1cbiAgICAgICAgZHJhZ2dhYmxlPXt0cnVlfVxuICAgICAgICBwYXVzZU9uSG92ZXI9e3RydWV9XG4gICAgICAgIHRoZW1lPVwibGlnaHRcIlxuICAgICAgICB0cmFuc2l0aW9uPXtTbGlkZX1cbiAgICAgIC8+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgeyBUb2FzdCB9O1xuZXhwb3J0IGRlZmF1bHQgVG9hc3RDb250YWluZXIkOyJdLCJuYW1lcyI6WyJSZWFjdCIsIlRvYXN0Q29udGFpbmVyIiwidG9hc3QiLCJTbGlkZSIsIkNhbGxvdXQiLCJDaGVja0NpcmNsZUljb24iLCJFcnJvckNpcmNsZUljb24iLCJJbmZvQ2lyY2xlT3V0bGluZUljb24iLCJXYXJuaW5nSWNvbiIsInRvYXN0U3R5bGVzIiwiVE9BU1RfVFlQRVMiLCJzdWNjZXNzIiwidHlwZSIsImNvbG9yUGFsZXR0ZSIsImljb24iLCJkdXJhdGlvbiIsImVycm9yIiwid2FybmluZyIsImluZm8iLCJDYWxsb3V0VG9hc3QiLCJtZXNzYWdlIiwiY29uZmlnIiwiSWNvbkNvbXBvbmVudCIsIlJvb3QiLCJkYXRhLXRlc3RpZCIsIkljb24iLCJUb2FzdCIsInNob3ciLCJvcHRpb25zIiwicG9zaXRpb24iLCJhdXRvQ2xvc2UiLCJoaWRlUHJvZ3Jlc3NCYXIiLCJjbG9zZU9uQ2xpY2siLCJwYXVzZU9uSG92ZXIiLCJkcmFnZ2FibGUiLCJkaXNtaXNzIiwidG9hc3RJZCIsImlzQWN0aXZlIiwiVG9hc3RDb250YWluZXIkIiwic3R5bGUiLCJuZXdlc3RPblRvcCIsInJ0bCIsInBhdXNlT25Gb2N1c0xvc3MiLCJ0aGVtZSIsInRyYW5zaXRpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/Toast.js\n");

/***/ }),

/***/ "(pages-dir-node)/./components/UserMessage.js":
/*!***********************************!*\
  !*** ./components/UserMessage.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _MessageContent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MessageContent */ \"(pages-dir-node)/./components/MessageContent.js\");\n/* harmony import */ var _MessageActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MessageActions */ \"(pages-dir-node)/./components/MessageActions.js\");\n/* harmony import */ var _CustomAvatar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CustomAvatar */ \"(pages-dir-node)/./components/CustomAvatar.js\");\n/* harmony import */ var _ReadStatus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ReadStatus */ \"(pages-dir-node)/./components/ReadStatus.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_MessageContent__WEBPACK_IMPORTED_MODULE_2__, _MessageActions__WEBPACK_IMPORTED_MODULE_3__, _CustomAvatar__WEBPACK_IMPORTED_MODULE_4__, _ReadStatus__WEBPACK_IMPORTED_MODULE_5__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__]);\n([_MessageContent__WEBPACK_IMPORTED_MODULE_2__, _MessageActions__WEBPACK_IMPORTED_MODULE_3__, _CustomAvatar__WEBPACK_IMPORTED_MODULE_4__, _ReadStatus__WEBPACK_IMPORTED_MODULE_5__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst UserMessage = ({ msg = {}, isMine = false, currentUser = null, onReactionAdd, onReactionRemove, room = null, socketRef })=>{\n    // 메시지 DOM 요소에 대한 ref 생성\n    const messageDomRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const formattedTime = new Date(msg.timestamp).toLocaleString('ko-KR', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n    }).replace(/\\./g, '년').replace(/\\s/g, ' ').replace('일 ', '일 ');\n    const user = isMine ? currentUser : msg.sender;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"my-4\",\n        ref: messageDomRef,\n        \"data-testid\": \"message-container\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.VStack, {\n            className: `max-w-[65%] ${isMine ? 'ml-auto items-end' : 'mr-auto items-start'}`,\n            gap: \"$100\",\n            align: isMine ? 'flex-end' : 'flex-start',\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.HStack, {\n                    gap: \"$100\",\n                    alignItems: \"center\",\n                    className: \"px-1\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_CustomAvatar__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                            user: user,\n                            size: \"lg\",\n                            persistent: true,\n                            showInitials: true\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                            lineNumber: 40,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"text-sm font-medium text-gray-300\",\n                            children: isMine ? '나' : msg.sender?.name\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                            lineNumber: 46,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                    lineNumber: 39,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: `\n          relative group\n          rounded-2xl px-4 py-3\n          border transition-all duration-200\n          ${isMine ? 'bg-gray-800 border-blue-500 hover:border-blue-400 hover:shadow-md' : 'bg-transparent border-gray-400 hover:border-gray-300 hover:shadow-md'}\n        `,\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: `\n            text-base leading-relaxed\n            ${isMine ? 'text-blue-100' : 'text-white'}\n          `,\n                            \"data-testid\": \"message-content\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MessageContent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                content: msg.content\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                                lineNumber: 68,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                            lineNumber: 62,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_6__.HStack, {\n                            gap: \"$150\",\n                            justifyContent: \"flex-end\",\n                            alignItems: \"center\",\n                            className: `mt-2 pt-2 border-t ${isMine ? 'border-gray-700' : 'border-gray-600'}`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `text-xs ${isMine ? 'text-blue-400' : 'text-gray-300'}`,\n                                    children: formattedTime\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                                    lineNumber: 78,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ReadStatus__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                    messageType: msg.type,\n                                    participants: room?.participants || [],\n                                    readers: msg.readers || [],\n                                    messageId: msg._id,\n                                    messageRef: messageDomRef,\n                                    currentUserId: currentUser?._id || currentUser?.id,\n                                    socketRef: socketRef\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                                    lineNumber: 81,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                            lineNumber: 72,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                    lineNumber: 52,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MessageActions__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                    messageId: msg._id,\n                    messageContent: msg.content,\n                    reactions: msg.reactions,\n                    currentUserId: currentUser?._id || currentUser?.id,\n                    onReactionAdd: onReactionAdd,\n                    onReactionRemove: onReactionRemove,\n                    isMine: isMine,\n                    room: room\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n                    lineNumber: 94,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n            lineNumber: 33,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/components/UserMessage.js\",\n        lineNumber: 32,\n        columnNumber: 5\n    }, undefined);\n};\nUserMessage.defaultProps = {\n    msg: {},\n    isMine: false,\n    currentUser: null,\n    onReactionAdd: ()=>{},\n    onReactionRemove: ()=>{},\n    room: null\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(UserMessage));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvVXNlck1lc3NhZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0M7QUFDVTtBQUNGO0FBQ0E7QUFDSjtBQUNKO0FBRXRDLE1BQU1RLGNBQWMsQ0FBQyxFQUNuQkMsTUFBTSxDQUFDLENBQUMsRUFDUkMsU0FBUyxLQUFLLEVBQ2RDLGNBQWMsSUFBSSxFQUNsQkMsYUFBYSxFQUNiQyxnQkFBZ0IsRUFDaEJDLE9BQU8sSUFBSSxFQUNYQyxTQUFTLEVBQ1Y7SUFDQyx3QkFBd0I7SUFDeEIsTUFBTUMsZ0JBQWdCZiw2Q0FBTUEsQ0FBQztJQUM3QixNQUFNZ0IsZ0JBQWdCLElBQUlDLEtBQUtULElBQUlVLFNBQVMsRUFBRUMsY0FBYyxDQUFDLFNBQVM7UUFDcEVDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLFFBQVE7SUFDVixHQUFHQyxPQUFPLENBQUMsT0FBTyxLQUFLQSxPQUFPLENBQUMsT0FBTyxLQUFLQSxPQUFPLENBQUMsTUFBTTtJQUV6RCxNQUFNQyxPQUFPbkIsU0FBU0MsY0FBY0YsSUFBSXFCLE1BQU07SUFFOUMscUJBQ0UsOERBQUNDO1FBQUlDLFdBQVU7UUFBT0MsS0FBS2pCO1FBQWVrQixlQUFZO2tCQUNwRCw0RUFBQ2hDLGtEQUFNQTtZQUNMOEIsV0FBVyxDQUFDLFlBQVksRUFBRXRCLFNBQVMsc0JBQXNCLHVCQUF1QjtZQUNoRnlCLEtBQUk7WUFDSkMsT0FBTzFCLFNBQVMsYUFBYTs7OEJBRzdCLDhEQUFDUCxrREFBTUE7b0JBQUNnQyxLQUFJO29CQUFPRSxZQUFXO29CQUFTTCxXQUFVOztzQ0FDL0MsOERBQUMxQixxREFBWUE7NEJBQ1h1QixNQUFNQTs0QkFDTlMsTUFBSzs0QkFDTEMsVUFBVTs0QkFDVkMsWUFBWTs7Ozs7O3NDQUVkLDhEQUFDQzs0QkFBS1QsV0FBVTtzQ0FDYnRCLFNBQVMsTUFBTUQsSUFBSXFCLE1BQU0sRUFBRVk7Ozs7Ozs7Ozs7Ozs4QkFLaEMsOERBQUNYO29CQUFJQyxXQUFXLENBQUM7Ozs7VUFJZixFQUFFdEIsU0FDRSxzRUFDQSx1RUFDSDtRQUNILENBQUM7O3NDQUVDLDhEQUFDcUI7NEJBQUlDLFdBQVcsQ0FBQzs7WUFFZixFQUFFdEIsU0FBUyxrQkFBa0IsYUFBYTtVQUM1QyxDQUFDOzRCQUNDd0IsZUFBWTtzQ0FFWiw0RUFBQzlCLHVEQUFjQTtnQ0FBQ3VDLFNBQVNsQyxJQUFJa0MsT0FBTzs7Ozs7Ozs7Ozs7c0NBSXRDLDhEQUFDeEMsa0RBQU1BOzRCQUNMZ0MsS0FBSTs0QkFDSlMsZ0JBQWU7NEJBQ2ZQLFlBQVc7NEJBQ1hMLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRXRCLFNBQVMsb0JBQW9CLG1CQUFtQjs7OENBRWpGLDhEQUFDcUI7b0NBQUlDLFdBQVcsQ0FBQyxRQUFRLEVBQUV0QixTQUFTLGtCQUFrQixpQkFBaUI7OENBQ3BFTzs7Ozs7OzhDQUVILDhEQUFDVixtREFBVUE7b0NBQ1RzQyxhQUFhcEMsSUFBSXFDLElBQUk7b0NBQ3JCQyxjQUFjakMsTUFBTWlDLGdCQUFnQixFQUFFO29DQUN0Q0MsU0FBU3ZDLElBQUl1QyxPQUFPLElBQUksRUFBRTtvQ0FDMUJDLFdBQVd4QyxJQUFJeUMsR0FBRztvQ0FDbEJDLFlBQVluQztvQ0FDWm9DLGVBQWV6QyxhQUFhdUMsT0FBT3ZDLGFBQWEwQztvQ0FDaER0QyxXQUFXQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQU1qQiw4REFBQ1YsdURBQWNBO29CQUNiNEMsV0FBV3hDLElBQUl5QyxHQUFHO29CQUNsQkksZ0JBQWdCN0MsSUFBSWtDLE9BQU87b0JBQzNCWSxXQUFXOUMsSUFBSThDLFNBQVM7b0JBQ3hCSCxlQUFlekMsYUFBYXVDLE9BQU92QyxhQUFhMEM7b0JBQ2hEekMsZUFBZUE7b0JBQ2ZDLGtCQUFrQkE7b0JBQ2xCSCxRQUFRQTtvQkFDUkksTUFBTUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS2hCO0FBRUFOLFlBQVlnRCxZQUFZLEdBQUc7SUFDekIvQyxLQUFLLENBQUM7SUFDTkMsUUFBUTtJQUNSQyxhQUFhO0lBQ2JDLGVBQWUsS0FBTztJQUN0QkMsa0JBQWtCLEtBQU87SUFDekJDLE1BQU07QUFDUjtBQUVBLDhFQUFlZCxpREFBVSxDQUFDUSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb21wb25lbnRzL1VzZXJNZXNzYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBWU3RhY2ssIEhTdGFjayB9IGZyb20gJ0B2YXBvci11aS9jb3JlJztcbmltcG9ydCBNZXNzYWdlQ29udGVudCBmcm9tICcuL01lc3NhZ2VDb250ZW50JztcbmltcG9ydCBNZXNzYWdlQWN0aW9ucyBmcm9tICcuL01lc3NhZ2VBY3Rpb25zJztcbmltcG9ydCBDdXN0b21BdmF0YXIgZnJvbSAnLi9DdXN0b21BdmF0YXInO1xuaW1wb3J0IFJlYWRTdGF0dXMgZnJvbSAnLi9SZWFkU3RhdHVzJztcblxuY29uc3QgVXNlck1lc3NhZ2UgPSAoe1xuICBtc2cgPSB7fSwgXG4gIGlzTWluZSA9IGZhbHNlLCBcbiAgY3VycmVudFVzZXIgPSBudWxsLFxuICBvblJlYWN0aW9uQWRkLFxuICBvblJlYWN0aW9uUmVtb3ZlLFxuICByb29tID0gbnVsbCxcbiAgc29ja2V0UmVmXG59KSA9PiB7XG4gIC8vIOuplOyLnOyngCBET00g7JqU7IaM7JeQIOuMgO2VnCByZWYg7IOd7ISxXG4gIGNvbnN0IG1lc3NhZ2VEb21SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBuZXcgRGF0ZShtc2cudGltZXN0YW1wKS50b0xvY2FsZVN0cmluZygna28tS1InLCB7XG4gICAgeWVhcjogJ251bWVyaWMnLFxuICAgIG1vbnRoOiAnbG9uZycsXG4gICAgZGF5OiAnbnVtZXJpYycsXG4gICAgaG91cjogJzItZGlnaXQnLFxuICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgIHNlY29uZDogJzItZGlnaXQnLFxuICAgIGhvdXIxMjogZmFsc2VcbiAgfSkucmVwbGFjZSgvXFwuL2csICfrhYQnKS5yZXBsYWNlKC9cXHMvZywgJyAnKS5yZXBsYWNlKCfsnbwgJywgJ+ydvCAnKTtcblxuICBjb25zdCB1c2VyID0gaXNNaW5lID8gY3VycmVudFVzZXIgOiBtc2cuc2VuZGVyO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJteS00XCIgcmVmPXttZXNzYWdlRG9tUmVmfSBkYXRhLXRlc3RpZD1cIm1lc3NhZ2UtY29udGFpbmVyXCI+XG4gICAgICA8VlN0YWNrXG4gICAgICAgIGNsYXNzTmFtZT17YG1heC13LVs2NSVdICR7aXNNaW5lID8gJ21sLWF1dG8gaXRlbXMtZW5kJyA6ICdtci1hdXRvIGl0ZW1zLXN0YXJ0J31gfVxuICAgICAgICBnYXA9XCIkMTAwXCJcbiAgICAgICAgYWxpZ249e2lzTWluZSA/ICdmbGV4LWVuZCcgOiAnZmxleC1zdGFydCd9XG4gICAgICA+XG4gICAgICAgIHsvKiBTZW5kZXIgSW5mbyAqL31cbiAgICAgICAgPEhTdGFjayBnYXA9XCIkMTAwXCIgYWxpZ25JdGVtcz1cImNlbnRlclwiIGNsYXNzTmFtZT1cInB4LTFcIj5cbiAgICAgICAgICA8Q3VzdG9tQXZhdGFyXG4gICAgICAgICAgICB1c2VyPXt1c2VyfVxuICAgICAgICAgICAgc2l6ZT1cImxnXCJcbiAgICAgICAgICAgIHBlcnNpc3RlbnRcbiAgICAgICAgICAgIHNob3dJbml0aWFsc1xuICAgICAgICAgIC8+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktMzAwXCI+XG4gICAgICAgICAgICB7aXNNaW5lID8gJ+uCmCcgOiBtc2cuc2VuZGVyPy5uYW1lfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9IU3RhY2s+XG5cbiAgICAgICAgey8qIE1lc3NhZ2UgQnViYmxlIC0gT3V0bGluZSBCYXNlZCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BcbiAgICAgICAgICByZWxhdGl2ZSBncm91cFxuICAgICAgICAgIHJvdW5kZWQtMnhsIHB4LTQgcHktM1xuICAgICAgICAgIGJvcmRlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDBcbiAgICAgICAgICAke2lzTWluZVxuICAgICAgICAgICAgPyAnYmctZ3JheS04MDAgYm9yZGVyLWJsdWUtNTAwIGhvdmVyOmJvcmRlci1ibHVlLTQwMCBob3ZlcjpzaGFkb3ctbWQnXG4gICAgICAgICAgICA6ICdiZy10cmFuc3BhcmVudCBib3JkZXItZ3JheS00MDAgaG92ZXI6Ym9yZGVyLWdyYXktMzAwIGhvdmVyOnNoYWRvdy1tZCdcbiAgICAgICAgICB9XG4gICAgICAgIGB9PlxuICAgICAgICAgIHsvKiBNZXNzYWdlIENvbnRlbnQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgIHRleHQtYmFzZSBsZWFkaW5nLXJlbGF4ZWRcbiAgICAgICAgICAgICR7aXNNaW5lID8gJ3RleHQtYmx1ZS0xMDAnIDogJ3RleHQtd2hpdGUnfVxuICAgICAgICAgIGB9XG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cIm1lc3NhZ2UtY29udGVudFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPE1lc3NhZ2VDb250ZW50IGNvbnRlbnQ9e21zZy5jb250ZW50fSAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIE1lc3NhZ2UgRm9vdGVyICovfVxuICAgICAgICAgIDxIU3RhY2tcbiAgICAgICAgICAgIGdhcD1cIiQxNTBcIlxuICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ9XCJmbGV4LWVuZFwiXG4gICAgICAgICAgICBhbGlnbkl0ZW1zPVwiY2VudGVyXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YG10LTIgcHQtMiBib3JkZXItdCAke2lzTWluZSA/ICdib3JkZXItZ3JheS03MDAnIDogJ2JvcmRlci1ncmF5LTYwMCd9YH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHRleHQteHMgJHtpc01pbmUgPyAndGV4dC1ibHVlLTQwMCcgOiAndGV4dC1ncmF5LTMwMCd9YH0+XG4gICAgICAgICAgICAgIHtmb3JtYXR0ZWRUaW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8UmVhZFN0YXR1c1xuICAgICAgICAgICAgICBtZXNzYWdlVHlwZT17bXNnLnR5cGV9XG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50cz17cm9vbT8ucGFydGljaXBhbnRzIHx8IFtdfVxuICAgICAgICAgICAgICByZWFkZXJzPXttc2cucmVhZGVycyB8fCBbXX1cbiAgICAgICAgICAgICAgbWVzc2FnZUlkPXttc2cuX2lkfVxuICAgICAgICAgICAgICBtZXNzYWdlUmVmPXttZXNzYWdlRG9tUmVmfVxuICAgICAgICAgICAgICBjdXJyZW50VXNlcklkPXtjdXJyZW50VXNlcj8uX2lkIHx8IGN1cnJlbnRVc2VyPy5pZH1cbiAgICAgICAgICAgICAgc29ja2V0UmVmPXtzb2NrZXRSZWZ9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvSFN0YWNrPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogTWVzc2FnZSBBY3Rpb25zICovfVxuICAgICAgICA8TWVzc2FnZUFjdGlvbnNcbiAgICAgICAgICBtZXNzYWdlSWQ9e21zZy5faWR9XG4gICAgICAgICAgbWVzc2FnZUNvbnRlbnQ9e21zZy5jb250ZW50fVxuICAgICAgICAgIHJlYWN0aW9ucz17bXNnLnJlYWN0aW9uc31cbiAgICAgICAgICBjdXJyZW50VXNlcklkPXtjdXJyZW50VXNlcj8uX2lkIHx8IGN1cnJlbnRVc2VyPy5pZH1cbiAgICAgICAgICBvblJlYWN0aW9uQWRkPXtvblJlYWN0aW9uQWRkfVxuICAgICAgICAgIG9uUmVhY3Rpb25SZW1vdmU9e29uUmVhY3Rpb25SZW1vdmV9XG4gICAgICAgICAgaXNNaW5lPXtpc01pbmV9XG4gICAgICAgICAgcm9vbT17cm9vbX1cbiAgICAgICAgLz5cbiAgICAgIDwvVlN0YWNrPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuVXNlck1lc3NhZ2UuZGVmYXVsdFByb3BzID0ge1xuICBtc2c6IHt9LFxuICBpc01pbmU6IGZhbHNlLFxuICBjdXJyZW50VXNlcjogbnVsbCxcbiAgb25SZWFjdGlvbkFkZDogKCkgPT4ge30sXG4gIG9uUmVhY3Rpb25SZW1vdmU6ICgpID0+IHt9LFxuICByb29tOiBudWxsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKFVzZXJNZXNzYWdlKTsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VSZWYiLCJWU3RhY2siLCJIU3RhY2siLCJNZXNzYWdlQ29udGVudCIsIk1lc3NhZ2VBY3Rpb25zIiwiQ3VzdG9tQXZhdGFyIiwiUmVhZFN0YXR1cyIsIlVzZXJNZXNzYWdlIiwibXNnIiwiaXNNaW5lIiwiY3VycmVudFVzZXIiLCJvblJlYWN0aW9uQWRkIiwib25SZWFjdGlvblJlbW92ZSIsInJvb20iLCJzb2NrZXRSZWYiLCJtZXNzYWdlRG9tUmVmIiwiZm9ybWF0dGVkVGltZSIsIkRhdGUiLCJ0aW1lc3RhbXAiLCJ0b0xvY2FsZVN0cmluZyIsInllYXIiLCJtb250aCIsImRheSIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJob3VyMTIiLCJyZXBsYWNlIiwidXNlciIsInNlbmRlciIsImRpdiIsImNsYXNzTmFtZSIsInJlZiIsImRhdGEtdGVzdGlkIiwiZ2FwIiwiYWxpZ24iLCJhbGlnbkl0ZW1zIiwic2l6ZSIsInBlcnNpc3RlbnQiLCJzaG93SW5pdGlhbHMiLCJzcGFuIiwibmFtZSIsImNvbnRlbnQiLCJqdXN0aWZ5Q29udGVudCIsIm1lc3NhZ2VUeXBlIiwidHlwZSIsInBhcnRpY2lwYW50cyIsInJlYWRlcnMiLCJtZXNzYWdlSWQiLCJfaWQiLCJtZXNzYWdlUmVmIiwiY3VycmVudFVzZXJJZCIsImlkIiwibWVzc2FnZUNvbnRlbnQiLCJyZWFjdGlvbnMiLCJkZWZhdWx0UHJvcHMiLCJtZW1vIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/UserMessage.js\n");

/***/ }),

/***/ "(pages-dir-node)/./contexts/AuthContext.js":
/*!*********************************!*\
  !*** ./contexts/AuthContext.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useAuth: () => (/* binding */ useAuth),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withoutAuth: () => (/* binding */ withoutAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"(pages-dir-node)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _services_socket__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/socket */ \"(pages-dir-node)/./services/socket.js\");\n/* harmony import */ var _services_authService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/authService */ \"(pages-dir-node)/./services/authService.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_socket__WEBPACK_IMPORTED_MODULE_3__, _services_authService__WEBPACK_IMPORTED_MODULE_4__]);\n([_services_socket__WEBPACK_IMPORTED_MODULE_3__, _services_authService__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\n/**\n * useAuth Hook - AuthContext를 사용하기 위한 커스텀 훅\n */ const useAuth = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n};\nconst SESSION_TIMEOUT = 2 * 60 * 60 * 1000; // 2 hours\nconst TOKEN_VERIFICATION_INTERVAL = 5 * 60 * 1000; // 5 minutes\n/**\n * AuthProvider: 전역 인증 상태 관리\n *\n * 제공하는 상태:\n * - user: 현재 로그인한 사용자 정보\n * - isAuthenticated: 인증 여부\n * - isLoading: 인증 상태 확인 중 여부\n *\n * 제공하는 메서드:\n * - login: 로그인 처리\n * - logout: 로그아웃 처리\n * - register: 회원가입 처리\n * - updateProfile: 프로필 업데이트\n * - updateUser: 사용자 정보 직접 업데이트 (프로필 이미지 등)\n */ const AuthProvider = ({ children })=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const sessionCheckInterval = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // localStorage에서 사용자 정보 로드\n    const loadUserFromStorage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[loadUserFromStorage]\": ()=>{\n            try {\n                if (true) return null;\n                const userStr = localStorage.getItem('user');\n                if (!userStr) return null;\n                const userData = JSON.parse(userStr);\n                // 세션 타임아웃 체크\n                if (Date.now() - userData.lastActivity > SESSION_TIMEOUT) {\n                    localStorage.removeItem('user');\n                    return null;\n                }\n                // 활동 시간 업데이트\n                userData.lastActivity = Date.now();\n                localStorage.setItem('user', JSON.stringify(userData));\n                return userData;\n            } catch (error) {\n                console.error('Failed to load user from storage:', error);\n                localStorage.removeItem('user');\n                return null;\n            }\n        }\n    }[\"AuthProvider.useCallback[loadUserFromStorage]\"], []);\n    // 사용자 정보를 localStorage와 state에 저장\n    const saveUser = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[saveUser]\": (userData)=>{\n            if (!userData) {\n                localStorage.removeItem('user');\n                setUser(null);\n                return;\n            }\n            const userToSave = {\n                ...userData,\n                lastActivity: Date.now()\n            };\n            localStorage.setItem('user', JSON.stringify(userToSave));\n            setUser(userToSave);\n        }\n    }[\"AuthProvider.useCallback[saveUser]\"], []);\n    // 세션 타임아웃 체크 (백그라운드)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            if (!user) {\n                if (sessionCheckInterval.current) {\n                    clearInterval(sessionCheckInterval.current);\n                    sessionCheckInterval.current = null;\n                }\n                return;\n            }\n            // 5분마다 세션 타임아웃 체크\n            sessionCheckInterval.current = setInterval({\n                \"AuthProvider.useEffect\": ()=>{\n                    const currentUser = loadUserFromStorage();\n                    if (!currentUser) {\n                        // 세션 만료됨\n                        setUser(null);\n                        _services_socket__WEBPACK_IMPORTED_MODULE_3__[\"default\"].disconnect();\n                        router.replace('/');\n                    }\n                }\n            }[\"AuthProvider.useEffect\"], 5 * 60 * 1000);\n            return ({\n                \"AuthProvider.useEffect\": ()=>{\n                    if (sessionCheckInterval.current) {\n                        clearInterval(sessionCheckInterval.current);\n                    }\n                }\n            })[\"AuthProvider.useEffect\"];\n        }\n    }[\"AuthProvider.useEffect\"], [\n        user,\n        loadUserFromStorage,\n        router\n    ]);\n    // 초기 로드\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            const userData = loadUserFromStorage();\n            setUser(userData);\n            setIsLoading(false);\n        }\n    }[\"AuthProvider.useEffect\"], [\n        loadUserFromStorage\n    ]);\n    // 로그인 (API 호출 + 상태 저장)\n    const login = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[login]\": async (credentials)=>{\n            const userData = await _services_authService__WEBPACK_IMPORTED_MODULE_4__[\"default\"].login(credentials);\n            saveUser(userData);\n            return userData;\n        }\n    }[\"AuthProvider.useCallback[login]\"], [\n        saveUser\n    ]);\n    // 로그아웃 (API 호출 + 상태 정리)\n    const logout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[logout]\": async ()=>{\n            try {\n                // authService를 통해 로그아웃 API 호출\n                await _services_authService__WEBPACK_IMPORTED_MODULE_4__[\"default\"].logout(user?.token, user?.sessionId);\n            } catch (error) {\n                console.error('Logout error:', error);\n            } finally{\n                // 소켓 연결 해제\n                _services_socket__WEBPACK_IMPORTED_MODULE_3__[\"default\"].disconnect();\n                // 로컬 상태 정리\n                saveUser(null);\n                // 로그인 페이지로 이동\n                router.push('/');\n            }\n        }\n    }[\"AuthProvider.useCallback[logout]\"], [\n        user,\n        saveUser,\n        router\n    ]);\n    // 회원가입\n    const register = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[register]\": async (userData)=>{\n            const registeredUser = await _services_authService__WEBPACK_IMPORTED_MODULE_4__[\"default\"].register(userData);\n            return registeredUser;\n        }\n    }[\"AuthProvider.useCallback[register]\"], []);\n    // 프로필 업데이트 (API 호출 + 상태 저장)\n    const updateProfile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[updateProfile]\": async (updates)=>{\n            if (!user) return;\n            const updatedUserData = await _services_authService__WEBPACK_IMPORTED_MODULE_4__[\"default\"].updateProfile(updates, user.token, user.sessionId);\n            const updatedUser = {\n                ...user,\n                ...updatedUserData,\n                token: user.token,\n                sessionId: user.sessionId,\n                lastActivity: Date.now()\n            };\n            saveUser(updatedUser);\n            return updatedUser;\n        }\n    }[\"AuthProvider.useCallback[updateProfile]\"], [\n        user,\n        saveUser\n    ]);\n    // 사용자 정보 직접 업데이트 (외부에서 사용)\n    const updateUser = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[updateUser]\": (userData)=>{\n            if (!userData) {\n                saveUser(null);\n                return;\n            }\n            const updatedUser = {\n                ...user,\n                ...userData,\n                lastActivity: Date.now()\n            };\n            saveUser(updatedUser);\n        }\n    }[\"AuthProvider.useCallback[updateUser]\"], [\n        user,\n        saveUser\n    ]);\n    // 토큰 검증\n    const verifyToken = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[verifyToken]\": async ()=>{\n            try {\n                if (!user?.token || !user?.sessionId) {\n                    throw new Error('No authentication data found');\n                }\n                // 마지막 검증 시간 확인\n                const lastVerification = localStorage.getItem('lastTokenVerification');\n                if (lastVerification && Date.now() - parseInt(lastVerification) < TOKEN_VERIFICATION_INTERVAL) {\n                    return true;\n                }\n                // authService를 통해 토큰 검증 (API 호출)\n                const API_URL = \"http://localhost:5001\";\n                const response = await fetch(`${API_URL}/api/auth/verify-token`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'x-auth-token': user.token,\n                        'x-session-id': user.sessionId\n                    },\n                    credentials: 'include'\n                });\n                const data = await response.json();\n                if (data.success) {\n                    localStorage.setItem('lastTokenVerification', Date.now().toString());\n                    return true;\n                }\n                throw new Error(data.message || '토큰 검증에 실패했습니다.');\n            } catch (error) {\n                if (error.response?.status === 401) {\n                    try {\n                        await refreshToken();\n                        localStorage.setItem('lastTokenVerification', Date.now().toString());\n                        return true;\n                    } catch (refreshError) {\n                        await logout();\n                        throw new Error('세션이 만료되었습니다. 다시 로그인해주세요.');\n                    }\n                }\n                throw error;\n            }\n        }\n    }[\"AuthProvider.useCallback[verifyToken]\"], [\n        user\n    ]);\n    // 토큰 갱신\n    const refreshToken = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AuthProvider.useCallback[refreshToken]\": async ()=>{\n            try {\n                if (!user?.token) {\n                    throw new Error('인증 정보가 없습니다.');\n                }\n                const API_URL = \"http://localhost:5001\";\n                const response = await fetch(`${API_URL}/api/auth/refresh-token`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'x-auth-token': user.token,\n                        'x-session-id': user.sessionId\n                    },\n                    credentials: 'include'\n                });\n                const data = await response.json();\n                if (data.success && data.token) {\n                    const updatedUser = {\n                        ...user,\n                        token: data.token,\n                        lastActivity: Date.now()\n                    };\n                    saveUser(updatedUser);\n                    return data.token;\n                }\n                throw new Error('토큰 갱신에 실패했습니다.');\n            } catch (error) {\n                console.error('Token refresh error:', error);\n                throw error;\n            }\n        }\n    }[\"AuthProvider.useCallback[refreshToken]\"], [\n        user,\n        saveUser\n    ]);\n    const value = {\n        user,\n        isAuthenticated: !!user,\n        isLoading,\n        login,\n        logout,\n        register,\n        updateProfile,\n        updateUser,\n        verifyToken,\n        refreshToken\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/contexts/AuthContext.js\",\n        lineNumber: 292,\n        columnNumber: 5\n    }, undefined);\n};\n/**\n * withAuth HOC - 인증이 필요한 페이지를 보호\n *\n * AuthContext를 사용하여 인증 상태를 확인하고,\n * 인증되지 않은 사용자를 로그인 페이지로 리다이렉트\n */ const withAuth = (WrappedComponent)=>{\n    const WithAuthComponent = (props)=>{\n        const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n        const { isAuthenticated, isLoading } = useAuth();\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n            \"withAuth.WithAuthComponent.useEffect\": ()=>{\n                // 로딩이 끝나고 인증되지 않은 경우 리다이렉트\n                if (!isLoading && !isAuthenticated) {\n                    router.replace('/?redirect=' + router.asPath);\n                }\n            }\n        }[\"withAuth.WithAuthComponent.useEffect\"], [\n            isAuthenticated,\n            isLoading,\n            router\n        ]);\n        // 로딩 중이거나 인증되지 않은 경우 로딩 화면 표시\n        if (isLoading || !isAuthenticated) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    height: '100vh',\n                    backgroundColor: 'var(--vapor-color-background)',\n                    color: 'var(--vapor-color-text-primary)'\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: \"Loading...\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/contexts/AuthContext.js\",\n                    lineNumber: 327,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/contexts/AuthContext.js\",\n                lineNumber: 319,\n                columnNumber: 9\n            }, undefined);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(WrappedComponent, {\n            ...props\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/contexts/AuthContext.js\",\n            lineNumber: 332,\n            columnNumber: 12\n        }, undefined);\n    };\n    // HOC에 displayName 설정\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n    WithAuthComponent.displayName = `WithAuth(${displayName})`;\n    return WithAuthComponent;\n};\n/**\n * withoutAuth HOC - 인증되지 않은 사용자만 접근 가능 (로그인/회원가입)\n *\n * 이미 로그인한 사용자는 /chat으로 리다이렉트\n */ const withoutAuth = (WrappedComponent)=>{\n    const WithoutAuthComponent = (props)=>{\n        const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n        const { isAuthenticated, isLoading } = useAuth();\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n            \"withoutAuth.WithoutAuthComponent.useEffect\": ()=>{\n                // 라우터가 준비되고 로딩이 끝났을 때\n                if (router.isReady && !isLoading && isAuthenticated) {\n                    // 이미 로그인된 사용자는 채팅 페이지로 리다이렉트\n                    router.replace('/chat');\n                }\n            }\n        }[\"withoutAuth.WithoutAuthComponent.useEffect\"], [\n            isAuthenticated,\n            isLoading,\n            router,\n            router.isReady\n        ]);\n        // 로딩 중이거나 이미 로그인된 사용자인 경우 로딩 화면\n        if (isLoading || isAuthenticated) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    height: '100vh',\n                    backgroundColor: 'var(--vapor-color-background)',\n                    color: 'var(--vapor-color-text-primary)'\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: \"Loading...\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/contexts/AuthContext.js\",\n                    lineNumber: 371,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/contexts/AuthContext.js\",\n                lineNumber: 363,\n                columnNumber: 9\n            }, undefined);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(WrappedComponent, {\n            ...props\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/contexts/AuthContext.js\",\n            lineNumber: 376,\n            columnNumber: 12\n        }, undefined);\n    };\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n    WithoutAuthComponent.displayName = `WithoutAuth(${displayName})`;\n    return WithoutAuthComponent;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuthContext);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbnRleHRzL0F1dGhDb250ZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRGO0FBQ3BEO0FBQ087QUFDRztBQUVsRCxNQUFNUyw0QkFBY1Qsb0RBQWFBLENBQUM7QUFFbEM7O0NBRUMsR0FDTSxNQUFNVSxVQUFVO0lBQ3JCLE1BQU1DLFVBQVVOLGlEQUFVQSxDQUFDSTtJQUMzQixJQUFJLENBQUNFLFNBQVM7UUFDWixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSxPQUFPRDtBQUNULEVBQUU7QUFFRixNQUFNRSxrQkFBa0IsSUFBSSxLQUFLLEtBQUssTUFBTSxVQUFVO0FBQ3RELE1BQU1DLDhCQUE4QixJQUFJLEtBQUssTUFBTSxZQUFZO0FBRS9EOzs7Ozs7Ozs7Ozs7OztDQWNDLEdBQ00sTUFBTUMsZUFBZSxDQUFDLEVBQUVDLFFBQVEsRUFBRTtJQUN2QyxNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR2pCLCtDQUFRQSxDQUFDO0lBQ2pDLE1BQU0sQ0FBQ2tCLFdBQVdDLGFBQWEsR0FBR25CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU1vQixTQUFTZixzREFBU0E7SUFDeEIsTUFBTWdCLHVCQUF1QmxCLDZDQUFNQSxDQUFDO0lBRXBDLDJCQUEyQjtJQUMzQixNQUFNbUIsc0JBQXNCcEIsa0RBQVdBO3lEQUFDO1lBQ3RDLElBQUk7Z0JBQ0YsSUFBSSxJQUE2QixFQUFFLE9BQU87Z0JBRTFDLE1BQU1xQixVQUFVQyxhQUFhQyxPQUFPLENBQUM7Z0JBQ3JDLElBQUksQ0FBQ0YsU0FBUyxPQUFPO2dCQUVyQixNQUFNRyxXQUFXQyxLQUFLQyxLQUFLLENBQUNMO2dCQUU1QixhQUFhO2dCQUNiLElBQUlNLEtBQUtDLEdBQUcsS0FBS0osU0FBU0ssWUFBWSxHQUFHbkIsaUJBQWlCO29CQUN4RFksYUFBYVEsVUFBVSxDQUFDO29CQUN4QixPQUFPO2dCQUNUO2dCQUVBLGFBQWE7Z0JBQ2JOLFNBQVNLLFlBQVks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LElBQUksSUFBSTtJQUM3RVosa0JBQWtCVyxXQUFXLEdBQUcsQ0FBQyxTQUFTLEVBQUVBLFlBQVksQ0FBQyxDQUFDO0lBRTFELE9BQU9YO0FBQ1QsRUFBRTtBQUVGOzs7O0NBSUMsR0FDTSxNQUFNYSxjQUFjLENBQUNkO0lBQzFCLE1BQU1lLHVCQUF1QixDQUFDYjtRQUM1QixNQUFNL0QsU0FBU2Ysc0RBQVNBO1FBQ3hCLE1BQU0sRUFBRXlFLGVBQWUsRUFBRTVELFNBQVMsRUFBRSxHQUFHVDtRQUV2Q1IsZ0RBQVNBOzBEQUFDO2dCQUNSLHNCQUFzQjtnQkFDdEIsSUFBSW1CLE9BQU82RSxPQUFPLElBQUksQ0FBQy9FLGFBQWE0RCxpQkFBaUI7b0JBQ25ELDZCQUE2QjtvQkFDN0IxRCxPQUFPd0IsT0FBTyxDQUFDO2dCQUNqQjtZQUNGO3lEQUFHO1lBQUNrQztZQUFpQjVEO1lBQVdFO1lBQVFBLE9BQU82RSxPQUFPO1NBQUM7UUFFdkQsZ0NBQWdDO1FBQ2hDLElBQUkvRSxhQUFhNEQsaUJBQWlCO1lBQ2hDLHFCQUNFLDhEQUFDTztnQkFBSUMsT0FBTztvQkFDVkMsU0FBUztvQkFDVEMsWUFBWTtvQkFDWkMsZ0JBQWdCO29CQUNoQkMsUUFBUTtvQkFDUkMsaUJBQWlCO29CQUNqQkMsT0FBTztnQkFDVDswQkFDRSw0RUFBQ1A7OEJBQUk7Ozs7Ozs7Ozs7O1FBR1g7UUFFQSxxQkFBTyw4REFBQ0o7WUFBa0IsR0FBR0UsS0FBSzs7Ozs7O0lBQ3BDO0lBRUEsTUFBTVUsY0FBY1osaUJBQWlCWSxXQUFXLElBQUlaLGlCQUFpQmEsSUFBSSxJQUFJO0lBQzdFRSxxQkFBcUJILFdBQVcsR0FBRyxDQUFDLFlBQVksRUFBRUEsWUFBWSxDQUFDLENBQUM7SUFFaEUsT0FBT0c7QUFDVCxFQUFFO0FBRUYsaUVBQWV4RixXQUFXQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9jb250ZXh0cy9BdXRoQ29udGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IHNvY2tldFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvc29ja2V0JztcbmltcG9ydCBhdXRoU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9hdXRoU2VydmljZSc7XG5cbmNvbnN0IEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcblxuLyoqXG4gKiB1c2VBdXRoIEhvb2sgLSBBdXRoQ29udGV4dOulvCDsgqzsmqntlZjquLAg7JyE7ZWcIOy7pOyKpO2FgCDtm4VcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VBdXRoIG11c3QgYmUgdXNlZCB3aXRoaW4gQXV0aFByb3ZpZGVyJyk7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59O1xuXG5jb25zdCBTRVNTSU9OX1RJTUVPVVQgPSAyICogNjAgKiA2MCAqIDEwMDA7IC8vIDIgaG91cnNcbmNvbnN0IFRPS0VOX1ZFUklGSUNBVElPTl9JTlRFUlZBTCA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlc1xuXG4vKipcbiAqIEF1dGhQcm92aWRlcjog7KCE7JetIOyduOymnSDsg4Htg5wg6rSA66asXG4gKlxuICog7KCc6rO17ZWY64qUIOyDge2DnDpcbiAqIC0gdXNlcjog7ZiE7J6sIOuhnOq3uOyduO2VnCDsgqzsmqnsnpAg7KCV67O0XG4gKiAtIGlzQXV0aGVudGljYXRlZDog7J247KadIOyXrOu2gFxuICogLSBpc0xvYWRpbmc6IOyduOymnSDsg4Htg5wg7ZmV7J24IOykkSDsl6zrtoBcbiAqXG4gKiDsoJzqs7XtlZjripQg66mU7ISc65OcOlxuICogLSBsb2dpbjog66Gc6re47J24IOyymOumrFxuICogLSBsb2dvdXQ6IOuhnOq3uOyVhOybgyDsspjrpqxcbiAqIC0gcmVnaXN0ZXI6IO2ajOybkOqwgOyehSDsspjrpqxcbiAqIC0gdXBkYXRlUHJvZmlsZTog7ZSE66Gc7ZWEIOyXheuNsOydtO2KuFxuICogLSB1cGRhdGVVc2VyOiDsgqzsmqnsnpAg7KCV67O0IOyngeygkSDsl4XrjbDsnbTtirggKO2UhOuhnO2VhCDsnbTrr7jsp4Ag65OxKVxuICovXG5leHBvcnQgY29uc3QgQXV0aFByb3ZpZGVyID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3Qgc2Vzc2lvbkNoZWNrSW50ZXJ2YWwgPSB1c2VSZWYobnVsbCk7XG5cbiAgLy8gbG9jYWxTdG9yYWdl7JeQ7IScIOyCrOyaqeyekCDsoJXrs7Qg66Gc65OcXG4gIGNvbnN0IGxvYWRVc2VyRnJvbVN0b3JhZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHVzZXJTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpO1xuICAgICAgaWYgKCF1c2VyU3RyKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgdXNlckRhdGEgPSBKU09OLnBhcnNlKHVzZXJTdHIpO1xuXG4gICAgICAvLyDshLjshZgg7YOA7J6E7JWE7JuDIOyytO2BrFxuICAgICAgaWYgKERhdGUubm93KCkgLSB1c2VyRGF0YS5sYXN0QWN0aXZpdHkgPiBTRVNTSU9OX1RJTUVPVVQpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIO2ZnOuPmSDsi5zqsIQg7JeF642w7J207Yq4XG4gICAgICB1c2VyRGF0YS5sYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSkpO1xuXG4gICAgICByZXR1cm4gdXNlckRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHVzZXIgZnJvbSBzdG9yYWdlOicsIGVycm9yKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyDsgqzsmqnsnpAg7KCV67O066W8IGxvY2FsU3RvcmFnZeyZgCBzdGF0ZeyXkCDsoIDsnqVcbiAgY29uc3Qgc2F2ZVVzZXIgPSB1c2VDYWxsYmFjaygodXNlckRhdGEpID0+IHtcbiAgICBpZiAoIXVzZXJEYXRhKSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpO1xuICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyVG9TYXZlID0ge1xuICAgICAgLi4udXNlckRhdGEsXG4gICAgICBsYXN0QWN0aXZpdHk6IERhdGUubm93KClcbiAgICB9O1xuXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyVG9TYXZlKSk7XG4gICAgc2V0VXNlcih1c2VyVG9TYXZlKTtcbiAgfSwgW10pO1xuXG4gIC8vIOyEuOyFmCDtg4DsnoTslYTsm4Mg7LK07YGsICjrsLHqt7jrnbzsmrTrk5wpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBpZiAoc2Vzc2lvbkNoZWNrSW50ZXJ2YWwuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKHNlc3Npb25DaGVja0ludGVydmFsLmN1cnJlbnQpO1xuICAgICAgICBzZXNzaW9uQ2hlY2tJbnRlcnZhbC5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA167aE66eI64ukIOyEuOyFmCDtg4DsnoTslYTsm4Mg7LK07YGsXG4gICAgc2Vzc2lvbkNoZWNrSW50ZXJ2YWwuY3VycmVudCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gbG9hZFVzZXJGcm9tU3RvcmFnZSgpO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICAvLyDshLjshZgg66eM66OM65CoXG4gICAgICAgIHNldFVzZXIobnVsbCk7XG4gICAgICAgIHNvY2tldFNlcnZpY2UuZGlzY29ubmVjdCgpO1xuICAgICAgICByb3V0ZXIucmVwbGFjZSgnLycpO1xuICAgICAgfVxuICAgIH0sIDUgKiA2MCAqIDEwMDApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChzZXNzaW9uQ2hlY2tJbnRlcnZhbC5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2Vzc2lvbkNoZWNrSW50ZXJ2YWwuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3VzZXIsIGxvYWRVc2VyRnJvbVN0b3JhZ2UsIHJvdXRlcl0pO1xuXG4gIC8vIOy0iOq4sCDroZzrk5xcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1c2VyRGF0YSA9IGxvYWRVc2VyRnJvbVN0b3JhZ2UoKTtcbiAgICBzZXRVc2VyKHVzZXJEYXRhKTtcbiAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICB9LCBbbG9hZFVzZXJGcm9tU3RvcmFnZV0pO1xuXG4gIC8vIOuhnOq3uOyduCAoQVBJIO2YuOy2nCArIOyDge2DnCDsoIDsnqUpXG4gIGNvbnN0IGxvZ2luID0gdXNlQ2FsbGJhY2soYXN5bmMgKGNyZWRlbnRpYWxzKSA9PiB7XG4gICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBhdXRoU2VydmljZS5sb2dpbihjcmVkZW50aWFscyk7XG4gICAgc2F2ZVVzZXIodXNlckRhdGEpO1xuICAgIHJldHVybiB1c2VyRGF0YTtcbiAgfSwgW3NhdmVVc2VyXSk7XG5cbiAgLy8g66Gc6re47JWE7JuDIChBUEkg7Zi47LacICsg7IOB7YOcIOygleumrClcbiAgY29uc3QgbG9nb3V0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBhdXRoU2VydmljZeulvCDthrXtlbQg66Gc6re47JWE7JuDIEFQSSDtmLjstpxcbiAgICAgIGF3YWl0IGF1dGhTZXJ2aWNlLmxvZ291dCh1c2VyPy50b2tlbiwgdXNlcj8uc2Vzc2lvbklkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignTG9nb3V0IGVycm9yOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8g7IaM7LyTIOyXsOqysCDtlbTsoJxcbiAgICAgIHNvY2tldFNlcnZpY2UuZGlzY29ubmVjdCgpO1xuXG4gICAgICAvLyDroZzsu6wg7IOB7YOcIOygleumrFxuICAgICAgc2F2ZVVzZXIobnVsbCk7XG5cbiAgICAgIC8vIOuhnOq3uOyduCDtjpjsnbTsp4DroZwg7J2064+ZXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH1cbiAgfSwgW3VzZXIsIHNhdmVVc2VyLCByb3V0ZXJdKTtcblxuICAvLyDtmozsm5DqsIDsnoVcbiAgY29uc3QgcmVnaXN0ZXIgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlckRhdGEpID0+IHtcbiAgICBjb25zdCByZWdpc3RlcmVkVXNlciA9IGF3YWl0IGF1dGhTZXJ2aWNlLnJlZ2lzdGVyKHVzZXJEYXRhKTtcbiAgICByZXR1cm4gcmVnaXN0ZXJlZFVzZXI7XG4gIH0sIFtdKTtcblxuICAvLyDtlITroZztlYQg7JeF642w7J207Yq4IChBUEkg7Zi47LacICsg7IOB7YOcIOyggOyepSlcbiAgY29uc3QgdXBkYXRlUHJvZmlsZSA9IHVzZUNhbGxiYWNrKGFzeW5jICh1cGRhdGVzKSA9PiB7XG4gICAgaWYgKCF1c2VyKSByZXR1cm47XG5cbiAgICBjb25zdCB1cGRhdGVkVXNlckRhdGEgPSBhd2FpdCBhdXRoU2VydmljZS51cGRhdGVQcm9maWxlKFxuICAgICAgdXBkYXRlcyxcbiAgICAgIHVzZXIudG9rZW4sXG4gICAgICB1c2VyLnNlc3Npb25JZFxuICAgICk7XG5cbiAgICBjb25zdCB1cGRhdGVkVXNlciA9IHtcbiAgICAgIC4uLnVzZXIsXG4gICAgICAuLi51cGRhdGVkVXNlckRhdGEsXG4gICAgICB0b2tlbjogdXNlci50b2tlbixcbiAgICAgIHNlc3Npb25JZDogdXNlci5zZXNzaW9uSWQsXG4gICAgICBsYXN0QWN0aXZpdHk6IERhdGUubm93KClcbiAgICB9O1xuXG4gICAgc2F2ZVVzZXIodXBkYXRlZFVzZXIpO1xuICAgIHJldHVybiB1cGRhdGVkVXNlcjtcbiAgfSwgW3VzZXIsIHNhdmVVc2VyXSk7XG5cbiAgLy8g7IKs7Jqp7J6QIOygleuztCDsp4HsoJEg7JeF642w7J207Yq4ICjsmbjrtoDsl5DshJwg7IKs7JqpKVxuICBjb25zdCB1cGRhdGVVc2VyID0gdXNlQ2FsbGJhY2soKHVzZXJEYXRhKSA9PiB7XG4gICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgc2F2ZVVzZXIobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSB7XG4gICAgICAuLi51c2VyLFxuICAgICAgLi4udXNlckRhdGEsXG4gICAgICBsYXN0QWN0aXZpdHk6IERhdGUubm93KClcbiAgICB9O1xuXG4gICAgc2F2ZVVzZXIodXBkYXRlZFVzZXIpO1xuICB9LCBbdXNlciwgc2F2ZVVzZXJdKTtcblxuICAvLyDthqDtgbAg6rKA7KadXG4gIGNvbnN0IHZlcmlmeVRva2VuID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXVzZXI/LnRva2VuIHx8ICF1c2VyPy5zZXNzaW9uSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhdXRoZW50aWNhdGlvbiBkYXRhIGZvdW5kJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOuniOyngOuniSDqsoDspp0g7Iuc6rCEIO2ZleyduFxuICAgICAgY29uc3QgbGFzdFZlcmlmaWNhdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYXN0VG9rZW5WZXJpZmljYXRpb24nKTtcbiAgICAgIGlmIChsYXN0VmVyaWZpY2F0aW9uICYmIERhdGUubm93KCkgLSBwYXJzZUludChsYXN0VmVyaWZpY2F0aW9uKSA8IFRPS0VOX1ZFUklGSUNBVElPTl9JTlRFUlZBTCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gYXV0aFNlcnZpY2Xrpbwg7Ya17ZW0IO2GoO2BsCDqsoDspp0gKEFQSSDtmLjstpwpXG4gICAgICBjb25zdCBBUElfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX1VSTH0vYXBpL2F1dGgvdmVyaWZ5LXRva2VuYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ3gtYXV0aC10b2tlbic6IHVzZXIudG9rZW4sXG4gICAgICAgICAgJ3gtc2Vzc2lvbi1pZCc6IHVzZXIuc2Vzc2lvbklkXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZSdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYXN0VG9rZW5WZXJpZmljYXRpb24nLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubWVzc2FnZSB8fCAn7Yag7YGwIOqygOymneyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCByZWZyZXNoVG9rZW4oKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGFzdFRva2VuVmVyaWZpY2F0aW9uJywgRGF0ZS5ub3coKS50b1N0cmluZygpKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAocmVmcmVzaEVycm9yKSB7XG4gICAgICAgICAgYXdhaXQgbG9nb3V0KCk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfshLjshZjsnbQg66eM66OM65CY7JeI7Iq164uI64ukLiDri6Tsi5wg66Gc6re47J247ZW07KO87IS47JqULicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFt1c2VyXSk7XG5cbiAgLy8g7Yag7YGwIOqwseyLoFxuICBjb25zdCByZWZyZXNoVG9rZW4gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdXNlcj8udG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfsnbjspp0g7KCV67O06rCAIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgQVBJX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkw7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L2FwaS9hdXRoL3JlZnJlc2gtdG9rZW5gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAneC1hdXRoLXRva2VuJzogdXNlci50b2tlbixcbiAgICAgICAgICAneC1zZXNzaW9uLWlkJzogdXNlci5zZXNzaW9uSWRcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChkYXRhLnN1Y2Nlc3MgJiYgZGF0YS50b2tlbikge1xuICAgICAgICBjb25zdCB1cGRhdGVkVXNlciA9IHtcbiAgICAgICAgICAuLi51c2VyLFxuICAgICAgICAgIHRva2VuOiBkYXRhLnRva2VuLFxuICAgICAgICAgIGxhc3RBY3Rpdml0eTogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICBzYXZlVXNlcih1cGRhdGVkVXNlcik7XG4gICAgICAgIHJldHVybiBkYXRhLnRva2VuO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+2GoO2BsCDqsLHsi6Dsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUb2tlbiByZWZyZXNoIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSwgW3VzZXIsIHNhdmVVc2VyXSk7XG5cbiAgY29uc3QgdmFsdWUgPSB7XG4gICAgdXNlcixcbiAgICBpc0F1dGhlbnRpY2F0ZWQ6ICEhdXNlcixcbiAgICBpc0xvYWRpbmcsXG4gICAgbG9naW4sXG4gICAgbG9nb3V0LFxuICAgIHJlZ2lzdGVyLFxuICAgIHVwZGF0ZVByb2ZpbGUsXG4gICAgdXBkYXRlVXNlcixcbiAgICB2ZXJpZnlUb2tlbixcbiAgICByZWZyZXNoVG9rZW5cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBdXRoQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17dmFsdWV9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvQXV0aENvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuXG4vKipcbiAqIHdpdGhBdXRoIEhPQyAtIOyduOymneydtCDtlYTsmpTtlZwg7Y6Y7J207KeA66W8IOuztO2YuFxuICpcbiAqIEF1dGhDb250ZXh066W8IOyCrOyaqe2VmOyXrCDsnbjspp0g7IOB7YOc66W8IO2ZleyduO2VmOqzoCxcbiAqIOyduOymneuQmOyngCDslYrsnYAg7IKs7Jqp7J6Q66W8IOuhnOq3uOyduCDtjpjsnbTsp4DroZwg66as64uk7J2066CJ7Yq4XG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoQXV0aCA9IChXcmFwcGVkQ29tcG9uZW50KSA9PiB7XG4gIGNvbnN0IFdpdGhBdXRoQ29tcG9uZW50ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gICAgY29uc3QgeyBpc0F1dGhlbnRpY2F0ZWQsIGlzTG9hZGluZyB9ID0gdXNlQXV0aCgpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIC8vIOuhnOuUqeydtCDrgZ3rgpjqs6Ag7J247Kad65CY7KeAIOyViuydgCDqsr3smrAg66as64uk7J2066CJ7Yq4XG4gICAgICBpZiAoIWlzTG9hZGluZyAmJiAhaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICAgIHJvdXRlci5yZXBsYWNlKCcvP3JlZGlyZWN0PScgKyByb3V0ZXIuYXNQYXRoKTtcbiAgICAgIH1cbiAgICB9LCBbaXNBdXRoZW50aWNhdGVkLCBpc0xvYWRpbmcsIHJvdXRlcl0pO1xuXG4gICAgLy8g66Gc65SpIOykkeydtOqxsOuCmCDsnbjspp3rkJjsp4Ag7JWK7J2AIOqyveyasCDroZzrlKkg7ZmU66m0IO2RnOyLnFxuICAgIGlmIChpc0xvYWRpbmcgfHwgIWlzQXV0aGVudGljYXRlZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17e1xuICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwdmgnLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLXZhcG9yLWNvbG9yLWJhY2tncm91bmQpJyxcbiAgICAgICAgICBjb2xvcjogJ3ZhcigtLXZhcG9yLWNvbG9yLXRleHQtcHJpbWFyeSknXG4gICAgICAgIH19PlxuICAgICAgICAgIDxkaXY+TG9hZGluZy4uLjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIDxXcmFwcGVkQ29tcG9uZW50IHsuLi5wcm9wc30gLz47XG4gIH07XG5cbiAgLy8gSE9D7JeQIGRpc3BsYXlOYW1lIOyEpOyglVxuICBjb25zdCBkaXNwbGF5TmFtZSA9IFdyYXBwZWRDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgV3JhcHBlZENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnO1xuICBXaXRoQXV0aENvbXBvbmVudC5kaXNwbGF5TmFtZSA9IGBXaXRoQXV0aCgke2Rpc3BsYXlOYW1lfSlgO1xuXG4gIHJldHVybiBXaXRoQXV0aENvbXBvbmVudDtcbn07XG5cbi8qKlxuICogd2l0aG91dEF1dGggSE9DIC0g7J247Kad65CY7KeAIOyViuydgCDsgqzsmqnsnpDrp4wg7KCR6re8IOqwgOuKpSAo66Gc6re47J24L+2ajOybkOqwgOyehSlcbiAqXG4gKiDsnbTrr7gg66Gc6re47J247ZWcIOyCrOyaqeyekOuKlCAvY2hhdOycvOuhnCDrpqzri6TsnbTroIntirhcbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhvdXRBdXRoID0gKFdyYXBwZWRDb21wb25lbnQpID0+IHtcbiAgY29uc3QgV2l0aG91dEF1dGhDb21wb25lbnQgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgICBjb25zdCB7IGlzQXV0aGVudGljYXRlZCwgaXNMb2FkaW5nIH0gPSB1c2VBdXRoKCk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgLy8g65287Jqw7YSw6rCAIOykgOu5hOuQmOqzoCDroZzrlKnsnbQg64Gd64Ks7J2EIOuVjFxuICAgICAgaWYgKHJvdXRlci5pc1JlYWR5ICYmICFpc0xvYWRpbmcgJiYgaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICAgIC8vIOydtOuvuCDroZzqt7jsnbjrkJwg7IKs7Jqp7J6Q64qUIOyxhO2MhSDtjpjsnbTsp4DroZwg66as64uk7J2066CJ7Yq4XG4gICAgICAgIHJvdXRlci5yZXBsYWNlKCcvY2hhdCcpO1xuICAgICAgfVxuICAgIH0sIFtpc0F1dGhlbnRpY2F0ZWQsIGlzTG9hZGluZywgcm91dGVyLCByb3V0ZXIuaXNSZWFkeV0pO1xuXG4gICAgLy8g66Gc65SpIOykkeydtOqxsOuCmCDsnbTrr7gg66Gc6re47J2465CcIOyCrOyaqeyekOyduCDqsr3smrAg66Gc65SpIO2ZlOuptFxuICAgIGlmIChpc0xvYWRpbmcgfHwgaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgICBoZWlnaHQ6ICcxMDB2aCcsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAndmFyKC0tdmFwb3ItY29sb3ItYmFja2dyb3VuZCknLFxuICAgICAgICAgIGNvbG9yOiAndmFyKC0tdmFwb3ItY29sb3ItdGV4dC1wcmltYXJ5KSdcbiAgICAgICAgfX0+XG4gICAgICAgICAgPGRpdj5Mb2FkaW5nLi4uPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gPFdyYXBwZWRDb21wb25lbnQgey4uLnByb3BzfSAvPjtcbiAgfTtcblxuICBjb25zdCBkaXNwbGF5TmFtZSA9IFdyYXBwZWRDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgV3JhcHBlZENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnO1xuICBXaXRob3V0QXV0aENvbXBvbmVudC5kaXNwbGF5TmFtZSA9IGBXaXRob3V0QXV0aCgke2Rpc3BsYXlOYW1lfSlgO1xuXG4gIHJldHVybiBXaXRob3V0QXV0aENvbXBvbmVudDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhDb250ZXh0O1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlQ29udGV4dCIsInVzZVJvdXRlciIsInNvY2tldFNlcnZpY2UiLCJhdXRoU2VydmljZSIsIkF1dGhDb250ZXh0IiwidXNlQXV0aCIsImNvbnRleHQiLCJFcnJvciIsIlNFU1NJT05fVElNRU9VVCIsIlRPS0VOX1ZFUklGSUNBVElPTl9JTlRFUlZBTCIsIkF1dGhQcm92aWRlciIsImNoaWxkcmVuIiwidXNlciIsInNldFVzZXIiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJyb3V0ZXIiLCJzZXNzaW9uQ2hlY2tJbnRlcnZhbCIsImxvYWRVc2VyRnJvbVN0b3JhZ2UiLCJ1c2VyU3RyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInVzZXJEYXRhIiwiSlNPTiIsInBhcnNlIiwiRGF0ZSIsIm5vdyIsImxhc3RBY3Rpdml0eSIsInJlbW92ZUl0ZW0iLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJjb25zb2xlIiwic2F2ZVVzZXIiLCJ1c2VyVG9TYXZlIiwiY3VycmVudCIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImN1cnJlbnRVc2VyIiwiZGlzY29ubmVjdCIsInJlcGxhY2UiLCJsb2dpbiIsImNyZWRlbnRpYWxzIiwibG9nb3V0IiwidG9rZW4iLCJzZXNzaW9uSWQiLCJwdXNoIiwicmVnaXN0ZXIiLCJyZWdpc3RlcmVkVXNlciIsInVwZGF0ZVByb2ZpbGUiLCJ1cGRhdGVzIiwidXBkYXRlZFVzZXJEYXRhIiwidXBkYXRlZFVzZXIiLCJ1cGRhdGVVc2VyIiwidmVyaWZ5VG9rZW4iLCJsYXN0VmVyaWZpY2F0aW9uIiwicGFyc2VJbnQiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsInRvU3RyaW5nIiwibWVzc2FnZSIsInN0YXR1cyIsInJlZnJlc2hUb2tlbiIsInJlZnJlc2hFcnJvciIsInZhbHVlIiwiaXNBdXRoZW50aWNhdGVkIiwiUHJvdmlkZXIiLCJ3aXRoQXV0aCIsIldyYXBwZWRDb21wb25lbnQiLCJXaXRoQXV0aENvbXBvbmVudCIsInByb3BzIiwiYXNQYXRoIiwiZGl2Iiwic3R5bGUiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJkaXNwbGF5TmFtZSIsIm5hbWUiLCJ3aXRob3V0QXV0aCIsIldpdGhvdXRBdXRoQ29tcG9uZW50IiwiaXNSZWFkeSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./contexts/AuthContext.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useAutoScroll.js":
/*!********************************!*\
  !*** ./hooks/useAutoScroll.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useAutoScroll: () => (/* binding */ useAutoScroll)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n/**\n * 채팅 메시지 자동 스크롤 훅\n * \n * 특징:\n * - 내가 쓴 메시지: 무조건 최하단 스크롤\n * - 남이 쓴 메시지: 사용자가 하단 근처에 있을 때만 자동 스크롤\n * - 이전 메시지 로딩 시: 스크롤 위치 복원\n * \n * @param {Array} messages - 메시지 배열\n * @param {string} currentUserId - 현재 사용자 ID\n * @param {boolean} isLoadingMessages - 이전 메시지 로딩 중 여부\n * @param {number} threshold - 자동 스크롤 임계값 (px, 기본 100)\n * @returns {Object} { containerRef, scrollToBottom, isNearBottom }\n */ const useAutoScroll = (messages = [], currentUserId = null, isLoadingMessages = false, threshold = 100)=>{\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const isNearBottomRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    const previousMessagesLengthRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const isAutoScrollingRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    // 스크롤 복원을 위한 ref\n    const previousScrollHeightRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const previousScrollTopRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const isRestoringRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    /**\n   * 스크롤이 하단 근처에 있는지 확인\n   */ const checkIsNearBottom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAutoScroll.useCallback[checkIsNearBottom]\": ()=>{\n            const container = containerRef.current;\n            if (!container) return true;\n            const { scrollHeight, scrollTop, clientHeight } = container;\n            const distanceFromBottom = scrollHeight - (scrollTop + clientHeight);\n            return distanceFromBottom <= threshold;\n        }\n    }[\"useAutoScroll.useCallback[checkIsNearBottom]\"], [\n        threshold\n    ]);\n    /**\n   * 최하단으로 스크롤\n   */ const scrollToBottom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAutoScroll.useCallback[scrollToBottom]\": (behavior = 'smooth')=>{\n            const container = containerRef.current;\n            if (!container) return;\n            isAutoScrollingRef.current = true;\n            container.scrollTo({\n                top: container.scrollHeight,\n                behavior\n            });\n            // 스크롤 완료 후 플래그 리셋\n            setTimeout({\n                \"useAutoScroll.useCallback[scrollToBottom]\": ()=>{\n                    isAutoScrollingRef.current = false;\n                    isNearBottomRef.current = true;\n                }\n            }[\"useAutoScroll.useCallback[scrollToBottom]\"], 300);\n        }\n    }[\"useAutoScroll.useCallback[scrollToBottom]\"], []);\n    /**\n   * 스크롤 이벤트 핸들러 - 사용자가 스크롤할 때 위치 추적\n   */ (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAutoScroll.useEffect\": ()=>{\n            const container = containerRef.current;\n            if (!container) return;\n            const handleScroll = {\n                \"useAutoScroll.useEffect.handleScroll\": ()=>{\n                    // 자동 스크롤 중이면 무시\n                    if (isAutoScrollingRef.current) return;\n                    isNearBottomRef.current = checkIsNearBottom();\n                }\n            }[\"useAutoScroll.useEffect.handleScroll\"];\n            container.addEventListener('scroll', handleScroll, {\n                passive: true\n            });\n            return ({\n                \"useAutoScroll.useEffect\": ()=>{\n                    container.removeEventListener('scroll', handleScroll);\n                }\n            })[\"useAutoScroll.useEffect\"];\n        }\n    }[\"useAutoScroll.useEffect\"], [\n        checkIsNearBottom\n    ]);\n    /**\n   * 이전 메시지 로딩 시작 시 스크롤 위치 저장\n   */ (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAutoScroll.useEffect\": ()=>{\n            const container = containerRef.current;\n            if (!container) return;\n            if (isLoadingMessages && !isRestoringRef.current) {\n                previousScrollHeightRef.current = container.scrollHeight;\n                previousScrollTopRef.current = container.scrollTop;\n                isRestoringRef.current = true;\n            }\n        }\n    }[\"useAutoScroll.useEffect\"], [\n        isLoadingMessages\n    ]);\n    /**\n   * 이전 메시지 로딩 완료 시 스크롤 위치 복원\n   */ (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAutoScroll.useEffect\": ()=>{\n            const container = containerRef.current;\n            if (!container || !isRestoringRef.current || isLoadingMessages) return;\n            const newScrollHeight = container.scrollHeight;\n            const heightDifference = newScrollHeight - previousScrollHeightRef.current;\n            if (heightDifference > 0) {\n                container.scrollTop = previousScrollTopRef.current + heightDifference;\n            }\n            isRestoringRef.current = false;\n        }\n    }[\"useAutoScroll.useEffect\"], [\n        messages,\n        isLoadingMessages\n    ]);\n    /**\n   * 메시지 추가 시 자동 스크롤 로직\n   */ (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAutoScroll.useEffect\": ()=>{\n            // 스크롤 복원 중이면 자동 스크롤 안함\n            if (isRestoringRef.current || isLoadingMessages) {\n                return;\n            }\n            // 메시지가 추가되지 않았으면 무시\n            if (messages.length === 0 || messages.length === previousMessagesLengthRef.current) {\n                return;\n            }\n            // 이전보다 메시지가 줄었으면 (초기화 등) 무시\n            if (messages.length < previousMessagesLengthRef.current) {\n                previousMessagesLengthRef.current = messages.length;\n                return;\n            }\n            // 새로 추가된 메시지들 확인\n            const newMessages = messages.slice(previousMessagesLengthRef.current);\n            previousMessagesLengthRef.current = messages.length;\n            // 새 메시지가 없으면 무시\n            if (newMessages.length === 0) return;\n            // 가장 최근 메시지 확인\n            const latestMessage = newMessages[newMessages.length - 1];\n            if (!latestMessage) return;\n            // 메시지 발신자 확인\n            const senderId = latestMessage.sender?._id || latestMessage.sender?.id || latestMessage.sender;\n            const isMyMessage = senderId === currentUserId;\n            // 자동 스크롤 조건 확인\n            if (isMyMessage) {\n                // 내가 쓴 메시지 → 무조건 스크롤\n                scrollToBottom('smooth');\n            } else if (isNearBottomRef.current) {\n                // 남이 쓴 메시지 + 하단 근처에 있음 → 자동 스크롤\n                scrollToBottom('smooth');\n            } else {\n            // 남이 쓴 메시지 + 상단에 있음 → 스크롤 안함\n            }\n        }\n    }[\"useAutoScroll.useEffect\"], [\n        messages,\n        currentUserId,\n        scrollToBottom,\n        isLoadingMessages\n    ]);\n    /**\n   * 초기 로드 시 최하단으로 스크롤\n   */ (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAutoScroll.useEffect\": ()=>{\n            if (messages.length > 0 && previousMessagesLengthRef.current === 0) {\n                // 초기 로드는 즉시 스크롤 (애니메이션 없이)\n                setTimeout({\n                    \"useAutoScroll.useEffect\": ()=>scrollToBottom('auto')\n                }[\"useAutoScroll.useEffect\"], 100);\n            }\n        }\n    }[\"useAutoScroll.useEffect\"], [\n        messages.length,\n        scrollToBottom\n    ]);\n    return {\n        containerRef,\n        scrollToBottom,\n        isNearBottom: ()=>isNearBottomRef.current\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useAutoScroll);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0RBQVNBO21DQUFDO1lBQ1IsSUFBSUcsU0FBUzZCLE1BQU0sR0FBRyxLQUFLdkIsMEJBQTBCTyxPQUFPLEtBQUssR0FBRztnQkFDbEUsMkJBQTJCO2dCQUMzQlM7K0NBQVcsSUFBTUosZUFBZTs4Q0FBUztZQUMzQztRQUNGO2tDQUFHO1FBQUNsQixTQUFTNkIsTUFBTTtRQUFFWDtLQUFlO0lBRXBDLE9BQU87UUFDTGQ7UUFDQWM7UUFDQW9CLGNBQWMsSUFBTWpDLGdCQUFnQlEsT0FBTztJQUM3QztBQUNGLEVBQUU7QUFFRixpRUFBZWQsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvaG9va3MvdXNlQXV0b1Njcm9sbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbi8qKlxuICog7LGE7YyFIOuplOyLnOyngCDsnpDrj5kg7Iqk7YGs66GkIO2bhVxuICogXG4gKiDtirnsp5U6XG4gKiAtIOuCtOqwgCDsk7Qg66mU7Iuc7KeAOiDrrLTsobDqsbQg7LWc7ZWY64uoIOyKpO2BrOuhpFxuICogLSDrgqjsnbQg7JO0IOuplOyLnOyngDog7IKs7Jqp7J6Q6rCAIO2VmOuLqCDqt7zsspjsl5Ag7J6I7J2EIOuVjOunjCDsnpDrj5kg7Iqk7YGs66GkXG4gKiAtIOydtOyghCDrqZTsi5zsp4Ag66Gc65SpIOyLnDog7Iqk7YGs66GkIOychOy5mCDrs7Xsm5BcbiAqIFxuICogQHBhcmFtIHtBcnJheX0gbWVzc2FnZXMgLSDrqZTsi5zsp4Ag67Cw7Je0XG4gKiBAcGFyYW0ge3N0cmluZ30gY3VycmVudFVzZXJJZCAtIO2YhOyerCDsgqzsmqnsnpAgSURcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMb2FkaW5nTWVzc2FnZXMgLSDsnbTsoIQg66mU7Iuc7KeAIOuhnOuUqSDspJEg7Jes67aAXG4gKiBAcGFyYW0ge251bWJlcn0gdGhyZXNob2xkIC0g7J6Q64+ZIOyKpO2BrOuhpCDsnoTqs4TqsJIgKHB4LCDquLDrs7ggMTAwKVxuICogQHJldHVybnMge09iamVjdH0geyBjb250YWluZXJSZWYsIHNjcm9sbFRvQm90dG9tLCBpc05lYXJCb3R0b20gfVxuICovXG5leHBvcnQgY29uc3QgdXNlQXV0b1Njcm9sbCA9IChcbiAgbWVzc2FnZXMgPSBbXSwgXG4gIGN1cnJlbnRVc2VySWQgPSBudWxsLCBcbiAgaXNMb2FkaW5nTWVzc2FnZXMgPSBmYWxzZSxcbiAgdGhyZXNob2xkID0gMTAwXG4pID0+IHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBpc05lYXJCb3R0b21SZWYgPSB1c2VSZWYodHJ1ZSk7XG4gIGNvbnN0IHByZXZpb3VzTWVzc2FnZXNMZW5ndGhSZWYgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IGlzQXV0b1Njcm9sbGluZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG4gIFxuICAvLyDsiqTtgazroaQg67O17JuQ7J2EIOychO2VnCByZWZcbiAgY29uc3QgcHJldmlvdXNTY3JvbGxIZWlnaHRSZWYgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IHByZXZpb3VzU2Nyb2xsVG9wUmVmID0gdXNlUmVmKDApO1xuICBjb25zdCBpc1Jlc3RvcmluZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgLyoqXG4gICAqIOyKpO2BrOuhpOydtCDtlZjri6gg6re87LKY7JeQIOyeiOuKlOyngCDtmZXsnbhcbiAgICovXG4gIGNvbnN0IGNoZWNrSXNOZWFyQm90dG9tID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IHsgc2Nyb2xsSGVpZ2h0LCBzY3JvbGxUb3AsIGNsaWVudEhlaWdodCB9ID0gY29udGFpbmVyO1xuICAgIGNvbnN0IGRpc3RhbmNlRnJvbUJvdHRvbSA9IHNjcm9sbEhlaWdodCAtIChzY3JvbGxUb3AgKyBjbGllbnRIZWlnaHQpO1xuXG4gICAgcmV0dXJuIGRpc3RhbmNlRnJvbUJvdHRvbSA8PSB0aHJlc2hvbGQ7XG4gIH0sIFt0aHJlc2hvbGRdKTtcblxuICAvKipcbiAgICog7LWc7ZWY64uo7Jy866GcIOyKpO2BrOuhpFxuICAgKi9cbiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSB1c2VDYWxsYmFjaygoYmVoYXZpb3IgPSAnc21vb3RoJykgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG5cbiAgICBpc0F1dG9TY3JvbGxpbmdSZWYuY3VycmVudCA9IHRydWU7XG5cbiAgICBjb250YWluZXIuc2Nyb2xsVG8oe1xuICAgICAgdG9wOiBjb250YWluZXIuc2Nyb2xsSGVpZ2h0LFxuICAgICAgYmVoYXZpb3JcbiAgICB9KTtcblxuICAgIC8vIOyKpO2BrOuhpCDsmYTro4wg7ZuEIO2UjOuemOq3uCDrpqzshYtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlzQXV0b1Njcm9sbGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBpc05lYXJCb3R0b21SZWYuY3VycmVudCA9IHRydWU7XG4gICAgfSwgMzAwKTtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiDsiqTtgazroaQg7J2067Kk7Yq4IO2VuOuTpOufrCAtIOyCrOyaqeyekOqwgCDsiqTtgazroaTtlaAg65WMIOychOy5mCDstpTsoIFcbiAgICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gY29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGhhbmRsZVNjcm9sbCA9ICgpID0+IHtcbiAgICAgIC8vIOyekOuPmSDsiqTtgazroaQg7KSR7J2066m0IOustOyLnFxuICAgICAgaWYgKGlzQXV0b1Njcm9sbGluZ1JlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGlzTmVhckJvdHRvbVJlZi5jdXJyZW50ID0gY2hlY2tJc05lYXJCb3R0b20oKTtcbiAgICB9O1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVTY3JvbGwpO1xuICAgIH07XG4gIH0sIFtjaGVja0lzTmVhckJvdHRvbV0pO1xuXG4gIC8qKlxuICAgKiDsnbTsoIQg66mU7Iuc7KeAIOuhnOuUqSDsi5zsnpEg7IucIOyKpO2BrOuhpCDsnITsuZgg7KCA7J6lXG4gICAqL1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG5cbiAgICBpZiAoaXNMb2FkaW5nTWVzc2FnZXMgJiYgIWlzUmVzdG9yaW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgIHByZXZpb3VzU2Nyb2xsSGVpZ2h0UmVmLmN1cnJlbnQgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xuICAgICAgcHJldmlvdXNTY3JvbGxUb3BSZWYuY3VycmVudCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XG4gICAgICBpc1Jlc3RvcmluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH0sIFtpc0xvYWRpbmdNZXNzYWdlc10pO1xuXG4gIC8qKlxuICAgKiDsnbTsoIQg66mU7Iuc7KeAIOuhnOuUqSDsmYTro4wg7IucIOyKpO2BrOuhpCDsnITsuZgg67O17JuQXG4gICAqL1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgIGlmICghY29udGFpbmVyIHx8ICFpc1Jlc3RvcmluZ1JlZi5jdXJyZW50IHx8IGlzTG9hZGluZ01lc3NhZ2VzKSByZXR1cm47XG5cbiAgICBjb25zdCBuZXdTY3JvbGxIZWlnaHQgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xuICAgIGNvbnN0IGhlaWdodERpZmZlcmVuY2UgPSBuZXdTY3JvbGxIZWlnaHQgLSBwcmV2aW91c1Njcm9sbEhlaWdodFJlZi5jdXJyZW50O1xuXG4gICAgaWYgKGhlaWdodERpZmZlcmVuY2UgPiAwKSB7XG4gICAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gcHJldmlvdXNTY3JvbGxUb3BSZWYuY3VycmVudCArIGhlaWdodERpZmZlcmVuY2U7XG4gICAgfVxuXG4gICAgaXNSZXN0b3JpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICB9LCBbbWVzc2FnZXMsIGlzTG9hZGluZ01lc3NhZ2VzXSk7XG5cbiAgLyoqXG4gICAqIOuplOyLnOyngCDstpTqsIAg7IucIOyekOuPmSDsiqTtgazroaQg66Gc7KeBXG4gICAqL1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIOyKpO2BrOuhpCDrs7Xsm5Ag7KSR7J2066m0IOyekOuPmSDsiqTtgazroaQg7JWI7ZWoXG4gICAgaWYgKGlzUmVzdG9yaW5nUmVmLmN1cnJlbnQgfHwgaXNMb2FkaW5nTWVzc2FnZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDrqZTsi5zsp4DqsIAg7LaU6rCA65CY7KeAIOyViuyVmOycvOuptCDrrLTsi5xcbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAwIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gcHJldmlvdXNNZXNzYWdlc0xlbmd0aFJlZi5jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g7J207KCE67O064ukIOuplOyLnOyngOqwgCDspITsl4jsnLzrqbQgKOy0iOq4sO2ZlCDrk7EpIOustOyLnFxuICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPCBwcmV2aW91c01lc3NhZ2VzTGVuZ3RoUmVmLmN1cnJlbnQpIHtcbiAgICAgIHByZXZpb3VzTWVzc2FnZXNMZW5ndGhSZWYuY3VycmVudCA9IG1lc3NhZ2VzLmxlbmd0aDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDsg4jroZwg7LaU6rCA65CcIOuplOyLnOyngOuTpCDtmZXsnbhcbiAgICBjb25zdCBuZXdNZXNzYWdlcyA9IG1lc3NhZ2VzLnNsaWNlKHByZXZpb3VzTWVzc2FnZXNMZW5ndGhSZWYuY3VycmVudCk7XG4gICAgcHJldmlvdXNNZXNzYWdlc0xlbmd0aFJlZi5jdXJyZW50ID0gbWVzc2FnZXMubGVuZ3RoO1xuXG4gICAgLy8g7IOIIOuplOyLnOyngOqwgCDsl4bsnLzrqbQg66y07IucXG4gICAgaWYgKG5ld01lc3NhZ2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8g6rCA7J6lIOy1nOq3vCDrqZTsi5zsp4Ag7ZmV7J24XG4gICAgY29uc3QgbGF0ZXN0TWVzc2FnZSA9IG5ld01lc3NhZ2VzW25ld01lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgIGlmICghbGF0ZXN0TWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgLy8g66mU7Iuc7KeAIOuwnOyLoOyekCDtmZXsnbhcbiAgICBjb25zdCBzZW5kZXJJZCA9IGxhdGVzdE1lc3NhZ2Uuc2VuZGVyPy5faWQgfHwgbGF0ZXN0TWVzc2FnZS5zZW5kZXI/LmlkIHx8IGxhdGVzdE1lc3NhZ2Uuc2VuZGVyO1xuICAgIGNvbnN0IGlzTXlNZXNzYWdlID0gc2VuZGVySWQgPT09IGN1cnJlbnRVc2VySWQ7XG5cbiAgICAvLyDsnpDrj5kg7Iqk7YGs66GkIOyhsOqxtCDtmZXsnbhcbiAgICBpZiAoaXNNeU1lc3NhZ2UpIHtcbiAgICAgIC8vIOuCtOqwgCDsk7Qg66mU7Iuc7KeAIOKGkiDrrLTsobDqsbQg7Iqk7YGs66GkXG4gICAgICBzY3JvbGxUb0JvdHRvbSgnc21vb3RoJyk7XG4gICAgfSBlbHNlIGlmIChpc05lYXJCb3R0b21SZWYuY3VycmVudCkge1xuICAgICAgLy8g64Ko7J20IOyTtCDrqZTsi5zsp4AgKyDtlZjri6gg6re87LKY7JeQIOyeiOydjCDihpIg7J6Q64+ZIOyKpO2BrOuhpFxuICAgICAgc2Nyb2xsVG9Cb3R0b20oJ3Ntb290aCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDrgqjsnbQg7JO0IOuplOyLnOyngCArIOyDgeuLqOyXkCDsnojsnYwg4oaSIOyKpO2BrOuhpCDslYjtlahcbiAgICB9XG4gIH0sIFttZXNzYWdlcywgY3VycmVudFVzZXJJZCwgc2Nyb2xsVG9Cb3R0b20sIGlzTG9hZGluZ01lc3NhZ2VzXSk7XG5cbiAgLyoqXG4gICAqIOy0iOq4sCDroZzrk5wg7IucIOy1nO2VmOuLqOycvOuhnCDsiqTtgazroaRcbiAgICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgcHJldmlvdXNNZXNzYWdlc0xlbmd0aFJlZi5jdXJyZW50ID09PSAwKSB7XG4gICAgICAvLyDstIjquLAg66Gc65Oc64qUIOymieyLnCDsiqTtgazroaQgKOyVoOuLiOuplOydtOyFmCDsl4bsnbQpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHNjcm9sbFRvQm90dG9tKCdhdXRvJyksIDEwMCk7XG4gICAgfVxuICB9LCBbbWVzc2FnZXMubGVuZ3RoLCBzY3JvbGxUb0JvdHRvbV0pO1xuXG4gIHJldHVybiB7XG4gICAgY29udGFpbmVyUmVmLFxuICAgIHNjcm9sbFRvQm90dG9tLFxuICAgIGlzTmVhckJvdHRvbTogKCkgPT4gaXNOZWFyQm90dG9tUmVmLmN1cnJlbnRcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUF1dG9TY3JvbGw7XG4iXSwibmFtZXMiOlsidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VBdXRvU2Nyb2xsIiwibWVzc2FnZXMiLCJjdXJyZW50VXNlcklkIiwiaXNMb2FkaW5nTWVzc2FnZXMiLCJ0aHJlc2hvbGQiLCJjb250YWluZXJSZWYiLCJpc05lYXJCb3R0b21SZWYiLCJwcmV2aW91c01lc3NhZ2VzTGVuZ3RoUmVmIiwiaXNBdXRvU2Nyb2xsaW5nUmVmIiwicHJldmlvdXNTY3JvbGxIZWlnaHRSZWYiLCJwcmV2aW91c1Njcm9sbFRvcFJlZiIsImlzUmVzdG9yaW5nUmVmIiwiY2hlY2tJc05lYXJCb3R0b20iLCJjb250YWluZXIiLCJjdXJyZW50Iiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsVG9wIiwiY2xpZW50SGVpZ2h0IiwiZGlzdGFuY2VGcm9tQm90dG9tIiwic2Nyb2xsVG9Cb3R0b20iLCJiZWhhdmlvciIsInNjcm9sbFRvIiwidG9wIiwic2V0VGltZW91dCIsImhhbmRsZVNjcm9sbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm5ld1Njcm9sbEhlaWdodCIsImhlaWdodERpZmZlcmVuY2UiLCJsZW5ndGgiLCJuZXdNZXNzYWdlcyIsInNsaWNlIiwibGF0ZXN0TWVzc2FnZSIsInNlbmRlcklkIiwic2VuZGVyIiwiX2lkIiwiaWQiLCJpc015TWVzc2FnZSIsImlzTmVhckJvdHRvbSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useAutoScroll.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useChatRoom.js":
/*!******************************!*\
  !*** ./hooks/useChatRoom.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useChatRoom: () => (/* binding */ useChatRoom)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/router */ \"(pages-dir-node)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _services_socket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/socket */ \"(pages-dir-node)/./services/socket.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../contexts/AuthContext */ \"(pages-dir-node)/./contexts/AuthContext.js\");\n/* harmony import */ var _useFileHandling__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useFileHandling */ \"(pages-dir-node)/./hooks/useFileHandling.js\");\n/* harmony import */ var _useMessageHandling__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useMessageHandling */ \"(pages-dir-node)/./hooks/useMessageHandling.js\");\n/* harmony import */ var _useReactionHandling__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useReactionHandling */ \"(pages-dir-node)/./hooks/useReactionHandling.js\");\n/* harmony import */ var _useSocketHandling__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useSocketHandling */ \"(pages-dir-node)/./hooks/useSocketHandling.js\");\n/* harmony import */ var _useRoomHandling__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./useRoomHandling */ \"(pages-dir-node)/./hooks/useRoomHandling.js\");\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_socket__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _useFileHandling__WEBPACK_IMPORTED_MODULE_4__, _useMessageHandling__WEBPACK_IMPORTED_MODULE_5__, _useReactionHandling__WEBPACK_IMPORTED_MODULE_6__, _useSocketHandling__WEBPACK_IMPORTED_MODULE_7__, _useRoomHandling__WEBPACK_IMPORTED_MODULE_8__, _components_Toast__WEBPACK_IMPORTED_MODULE_9__]);\n([_services_socket__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _useFileHandling__WEBPACK_IMPORTED_MODULE_4__, _useMessageHandling__WEBPACK_IMPORTED_MODULE_5__, _useReactionHandling__WEBPACK_IMPORTED_MODULE_6__, _useSocketHandling__WEBPACK_IMPORTED_MODULE_7__, _useRoomHandling__WEBPACK_IMPORTED_MODULE_8__, _components_Toast__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\nconst CLEANUP_REASONS = {\n    DISCONNECT: 'disconnect',\n    MANUAL: 'manual',\n    RECONNECT: 'reconnect',\n    UNMOUNT: 'unmount',\n    ERROR: 'error'\n};\nconst useChatRoom = ()=>{\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)();\n    const { user: authUser, logout } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const [room, setRoom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [currentUser, setCurrentUser] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [connectionStatus, setConnectionStatus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('checking');\n    const [messageLoadError, setMessageLoadError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isInitialized, setIsInitialized] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [hasMoreMessages, setHasMoreMessages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [loadingMessages, setLoadingMessages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Refs\n    const messageInputRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const messageLoadAttemptRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const mountedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    const initializingRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const setupCompleteRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const socketInitializedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const cleanupInProgressRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const cleanupCountRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const userRooms = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    const previousMessagesRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Set());\n    const messageProcessingRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const initialLoadCompletedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const processedMessageIds = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Set());\n    const loadMoreTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // Socket handling setup\n    const { connected, socketRef, handleConnectionError, handleReconnect, setConnected } = (0,_useSocketHandling__WEBPACK_IMPORTED_MODULE_7__.useSocketHandling)(router);\n    // Message handling hook\n    const { message, showEmojiPicker, showMentionList, mentionFilter, mentionIndex, filePreview, uploading, uploadProgress, uploadError, setMessage, setShowEmojiPicker, setShowMentionList, setMentionFilter, setMentionIndex, setFilePreview, handleMessageChange, handleMessageSubmit, handleLoadMore, handleEmojiToggle, getFilteredParticipants, insertMention, removeFilePreview } = (0,_useMessageHandling__WEBPACK_IMPORTED_MODULE_5__.useMessageHandling)(socketRef, currentUser, router, undefined, messages, loadingMessages, setLoadingMessages);\n    // Cleanup 함수 수정\n    const cleanup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useChatRoom.useCallback[cleanup]\": (reason = 'MANUAL')=>{\n            if (!mountedRef.current || !router.query.room) return;\n            try {\n                // cleanup이 이미 진행 중인지 확인\n                if (cleanupInProgressRef.current) {\n                    return;\n                }\n                cleanupInProgressRef.current = true;\n                // Socket cleanup\n                if (router.query.room && socketRef.current?.connected) {\n                    socketRef.current.emit('leaveRoom', router.query.room);\n                }\n                if (socketRef.current && reason !== 'RECONNECT') {\n                    socketRef.current.off('message');\n                    socketRef.current.off('previousMessages');\n                    socketRef.current.off('previousMessagesLoaded');\n                    socketRef.current.off('participantsUpdate');\n                    socketRef.current.off('messagesRead');\n                    socketRef.current.off('messageReactionUpdate');\n                    socketRef.current.off('session_ended');\n                    socketRef.current.off('error');\n                }\n                // Clear timeouts\n                if (loadMoreTimeoutRef.current) {\n                    clearTimeout(loadMoreTimeoutRef.current);\n                    loadMoreTimeoutRef.current = null;\n                }\n                // Reset refs\n                processedMessageIds.current.clear();\n                previousMessagesRef.current.clear();\n                messageProcessingRef.current = false;\n                // Reset states only if needed\n                if (reason === 'MANUAL' && mountedRef.current) {\n                    setError(null);\n                    setLoading(false);\n                    setLoadingMessages(false);\n                    setMessages([]);\n                    if (userRooms.current.size > 0) {\n                        userRooms.current.clear();\n                    }\n                } else if (reason === 'DISCONNECT' && mountedRef.current) {\n                    setError('채팅 연결이 끊어졌습니다. 재연결을 시도합니다.');\n                }\n            } catch (error) {\n                if (mountedRef.current) {\n                    setError('채팅방 정리 중 오류가 발생했습니다.');\n                }\n            } finally{\n                cleanupInProgressRef.current = false;\n            }\n        }\n    }[\"useChatRoom.useCallback[cleanup]\"], [\n        setMessages,\n        setError,\n        setLoading,\n        setLoadingMessages,\n        mountedRef,\n        socketRef\n    ]);\n    // Connection state utility\n    const getConnectionState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useChatRoom.useCallback[getConnectionState]\": ()=>{\n            if (!socketRef.current) return 'disconnected';\n            if (loading) return 'connecting';\n            if (error) return 'error';\n            return socketRef.current.connected ? 'connected' : 'disconnected';\n        }\n    }[\"useChatRoom.useCallback[getConnectionState]\"], [\n        loading,\n        error,\n        socketRef\n    ]);\n    // Reaction handling hook\n    const { handleReactionAdd, handleReactionRemove, handleReactionUpdate } = (0,_useReactionHandling__WEBPACK_IMPORTED_MODULE_6__.useReactionHandling)(socketRef, currentUser, messages, setMessages);\n    // 메시지 처리 유틸리티 함수\n    const processMessages = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useChatRoom.useCallback[processMessages]\": (loadedMessages, hasMore, isInitialLoad = false)=>{\n            try {\n                if (!Array.isArray(loadedMessages)) {\n                    throw new Error('Invalid messages format');\n                }\n                setMessages({\n                    \"useChatRoom.useCallback[processMessages]\": (prev)=>{\n                        // 중복 메시지 필터링 개선\n                        const newMessages = loadedMessages.filter({\n                            \"useChatRoom.useCallback[processMessages].newMessages\": (msg)=>{\n                                if (!msg._id) return false;\n                                if (processedMessageIds.current.has(msg._id)) return false;\n                                processedMessageIds.current.add(msg._id);\n                                return true;\n                            }\n                        }[\"useChatRoom.useCallback[processMessages].newMessages\"]);\n                        // 기존 메시지와 새 메시지 결합 및 정렬\n                        const allMessages = [\n                            ...prev,\n                            ...newMessages\n                        ].sort({\n                            \"useChatRoom.useCallback[processMessages].allMessages\": (a, b)=>{\n                                return new Date(a.timestamp || 0) - new Date(b.timestamp || 0);\n                            }\n                        }[\"useChatRoom.useCallback[processMessages].allMessages\"]);\n                        // 중복 제거 (가장 최근 메시지 유지)\n                        const messageMap = new Map();\n                        allMessages.forEach({\n                            \"useChatRoom.useCallback[processMessages]\": (msg)=>messageMap.set(msg._id, msg)\n                        }[\"useChatRoom.useCallback[processMessages]\"]);\n                        return Array.from(messageMap.values());\n                    }\n                }[\"useChatRoom.useCallback[processMessages]\"]);\n                // 메시지 로드 상태 업데이트\n                if (isInitialLoad) {\n                    setHasMoreMessages(hasMore);\n                    initialLoadCompletedRef.current = true;\n                } else {\n                    setHasMoreMessages(hasMore);\n                }\n            } catch (error) {\n                throw error;\n            }\n        }\n    }[\"useChatRoom.useCallback[processMessages]\"], [\n        setMessages,\n        setHasMoreMessages\n    ]);\n    // Cleanup 함수 수정\n    const setupEventListeners = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useChatRoom.useCallback[setupEventListeners]\": ()=>{\n            if (!socketRef.current || !mountedRef.current) return;\n            // 참가자 업데이트 이벤트\n            socketRef.current.on('participantsUpdate', {\n                \"useChatRoom.useCallback[setupEventListeners]\": (participants)=>{\n                    if (!mountedRef.current) return;\n                    setRoom({\n                        \"useChatRoom.useCallback[setupEventListeners]\": (prev)=>({\n                                ...prev,\n                                participants: participants || []\n                            })\n                    }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n                }\n            }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n            // 읽음 상태 업데이트 이벤트 (메시지 목록의 readers 배열 업데이트)\n            socketRef.current.on('messagesRead', {\n                \"useChatRoom.useCallback[setupEventListeners]\": ({ userId, messageIds, timestamp })=>{\n                    if (!mountedRef.current) return;\n                    setMessages({\n                        \"useChatRoom.useCallback[setupEventListeners]\": (prev)=>prev.map({\n                                \"useChatRoom.useCallback[setupEventListeners]\": (msg)=>{\n                                    // 해당 메시지가 읽음 처리된 메시지인지 확인\n                                    if (messageIds.includes(msg._id)) {\n                                        // 이미 읽은 사용자인지 확인\n                                        const alreadyRead = msg.readers?.some({\n                                            \"useChatRoom.useCallback[setupEventListeners]\": (reader)=>reader.userId === userId || reader._id === userId\n                                        }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n                                        if (!alreadyRead) {\n                                            return {\n                                                ...msg,\n                                                readers: [\n                                                    ...msg.readers || [],\n                                                    {\n                                                        userId,\n                                                        readAt: timestamp || new Date()\n                                                    }\n                                                ]\n                                            };\n                                        }\n                                    }\n                                    return msg;\n                                }\n                            }[\"useChatRoom.useCallback[setupEventListeners]\"])\n                    }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n                }\n            }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n            // 메시지 이벤트\n            socketRef.current.on('message', {\n                \"useChatRoom.useCallback[setupEventListeners]\": (message)=>{\n                    if (!message || !mountedRef.current || messageProcessingRef.current || !message._id) return;\n                    if (processedMessageIds.current.has(message._id)) {\n                        return;\n                    }\n                    processedMessageIds.current.add(message._id);\n                    setMessages({\n                        \"useChatRoom.useCallback[setupEventListeners]\": (prev)=>{\n                            const isDuplicate = prev.some({\n                                \"useChatRoom.useCallback[setupEventListeners].isDuplicate\": (msg)=>msg._id === message._id\n                            }[\"useChatRoom.useCallback[setupEventListeners].isDuplicate\"]);\n                            if (isDuplicate) {\n                                return prev;\n                            }\n                            return [\n                                ...prev,\n                                message\n                            ];\n                        }\n                    }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n                }\n            }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n            // 이전 메시지 이벤트 (previousMessages와 previousMessagesLoaded 둘 다 처리)\n            const handlePreviousMessages = {\n                \"useChatRoom.useCallback[setupEventListeners].handlePreviousMessages\": (response)=>{\n                    if (!mountedRef.current || messageProcessingRef.current) return;\n                    try {\n                        messageProcessingRef.current = true;\n                        if (!response || typeof response !== 'object') {\n                            throw new Error('Invalid response format');\n                        }\n                        const { messages: loadedMessages = [], hasMore } = response;\n                        const isInitialLoad = messages.length === 0;\n                        processMessages(loadedMessages, hasMore, isInitialLoad);\n                        setLoadingMessages(false);\n                    } catch (error) {\n                        setLoadingMessages(false);\n                        setError('메시지 처리 중 오류가 발생했습니다.');\n                        setHasMoreMessages(false);\n                    } finally{\n                        messageProcessingRef.current = false;\n                    }\n                }\n            }[\"useChatRoom.useCallback[setupEventListeners].handlePreviousMessages\"];\n            socketRef.current.on('previousMessages', handlePreviousMessages);\n            socketRef.current.on('previousMessagesLoaded', handlePreviousMessages);\n            // 리액션 이벤트\n            socketRef.current.on('messageReactionUpdate', {\n                \"useChatRoom.useCallback[setupEventListeners]\": (data)=>{\n                    if (!mountedRef.current) return;\n                    handleReactionUpdate(data);\n                }\n            }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n            // 세션 이벤트\n            socketRef.current.on('session_ended', {\n                \"useChatRoom.useCallback[setupEventListeners]\": ()=>{\n                    if (!mountedRef.current) return;\n                    cleanup();\n                    logout();\n                    router.replace('/?error=session_expired');\n                }\n            }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n            socketRef.current.on('error', {\n                \"useChatRoom.useCallback[setupEventListeners]\": (error)=>{\n                    if (!mountedRef.current) return;\n                    console.error('Socket error:', error);\n                    // 금칙어 메시지 거부 처리\n                    if (error?.code === 'MESSAGE_REJECTED') {\n                        _components_Toast__WEBPACK_IMPORTED_MODULE_9__.Toast.error(error.message || '금칙어가 포함되어 메시지를 전송할 수 없습니다.');\n                        return;\n                    }\n                    setError(error.message || '채팅 연결에 문제가 발생했습니다.');\n                }\n            }[\"useChatRoom.useCallback[setupEventListeners]\"]);\n        }\n    }[\"useChatRoom.useCallback[setupEventListeners]\"], [\n        processMessages,\n        setHasMoreMessages,\n        cleanup,\n        handleReactionUpdate,\n        setLoadingMessages,\n        setError,\n        logout\n    ]);\n    // Room handling hook initialization\n    const { setupRoom, joinRoom, loadInitialMessages, fetchRoomData, handleSessionError } = (0,_useRoomHandling__WEBPACK_IMPORTED_MODULE_8__.useRoomHandling)(socketRef, currentUser, mountedRef, router, setRoom, setError, setMessages, setHasMoreMessages, setLoadingMessages, setLoading, setupEventListeners, cleanup, loading, setIsInitialized, initializingRef, setupCompleteRef, userRooms.current, processMessages);\n    // Socket connection monitoring\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useChatRoom.useEffect\": ()=>{\n            if (!socketRef.current || !currentUser) return;\n            const handleConnect = {\n                \"useChatRoom.useEffect.handleConnect\": ()=>{\n                    if (!mountedRef.current) return;\n                    setConnectionStatus('connected');\n                    setConnected(true);\n                    if (router.query.room && !setupCompleteRef.current && !initializingRef.current && !isInitialized) {\n                        socketInitializedRef.current = true;\n                        setupRoom().catch({\n                            \"useChatRoom.useEffect.handleConnect\": ()=>{\n                                setError('채팅방 연결에 실패했습니다.');\n                            }\n                        }[\"useChatRoom.useEffect.handleConnect\"]);\n                    }\n                }\n            }[\"useChatRoom.useEffect.handleConnect\"];\n            const handleDisconnect = {\n                \"useChatRoom.useEffect.handleDisconnect\": (reason)=>{\n                    if (!mountedRef.current) return;\n                    setConnectionStatus('disconnected');\n                    socketInitializedRef.current = false;\n                    setupCompleteRef.current = false;\n                }\n            }[\"useChatRoom.useEffect.handleDisconnect\"];\n            const handleError = {\n                \"useChatRoom.useEffect.handleError\": (error)=>{\n                    if (!mountedRef.current) return;\n                    setConnectionStatus('error');\n                    setError('채팅 서버와의 연결이 끊어졌습니다.');\n                }\n            }[\"useChatRoom.useEffect.handleError\"];\n            const handleReconnecting = {\n                \"useChatRoom.useEffect.handleReconnecting\": (attemptNumber)=>{\n                    if (!mountedRef.current) return;\n                    setConnectionStatus('connecting');\n                }\n            }[\"useChatRoom.useEffect.handleReconnecting\"];\n            const handleReconnectSuccess = {\n                \"useChatRoom.useEffect.handleReconnectSuccess\": ()=>{\n                    if (!mountedRef.current) return;\n                    setConnectionStatus('connected');\n                    setConnected(true);\n                    setError('');\n                    // 재연결 시 채팅방 재접속\n                    if (router.query.room) {\n                        setupRoom().catch({\n                            \"useChatRoom.useEffect.handleReconnectSuccess\": ()=>{\n                                setError('채팅방 재연결에 실패했습니다.');\n                            }\n                        }[\"useChatRoom.useEffect.handleReconnectSuccess\"]);\n                    }\n                }\n            }[\"useChatRoom.useEffect.handleReconnectSuccess\"];\n            socketRef.current.on('connect', handleConnect);\n            socketRef.current.on('disconnect', handleDisconnect);\n            socketRef.current.on('connect_error', handleError);\n            socketRef.current.on('reconnecting', handleReconnecting);\n            socketRef.current.on('reconnect', handleReconnectSuccess);\n            setConnectionStatus(socketRef.current.connected ? 'connected' : 'disconnected');\n            return ({\n                \"useChatRoom.useEffect\": ()=>{\n                    if (socketRef.current) {\n                        socketRef.current.off('connect', handleConnect);\n                        socketRef.current.off('disconnect', handleDisconnect);\n                        socketRef.current.off('connect_error', handleError);\n                        socketRef.current.off('reconnecting', handleReconnecting);\n                        socketRef.current.off('reconnect', handleReconnectSuccess);\n                    }\n                }\n            })[\"useChatRoom.useEffect\"];\n        }\n    }[\"useChatRoom.useEffect\"], [\n        router.query.room,\n        setupRoom,\n        setConnected,\n        currentUser,\n        isInitialized,\n        setError\n    ]);\n    // Component initialization and cleanup\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useChatRoom.useEffect\": ()=>{\n            const initializeChat = {\n                \"useChatRoom.useEffect.initializeChat\": async ()=>{\n                    if (initializingRef.current) return;\n                    if (!authUser) {\n                        router.replace('/?redirect=' + router.asPath);\n                        return;\n                    }\n                    if (!currentUser) {\n                        setCurrentUser(authUser);\n                    }\n                    // 채팅방이 있을 때만 초기화 진행\n                    if (!isInitialized && router.query.room) {\n                        try {\n                            initializingRef.current = true;\n                            await setupRoom();\n                        } catch (error) {\n                            setError('채팅방 초기화에 실패했습니다.');\n                        } finally{\n                            initializingRef.current = false;\n                        }\n                    }\n                }\n            }[\"useChatRoom.useEffect.initializeChat\"];\n            mountedRef.current = true;\n            // 라우터 쿼리가 준비되면 초기화 진행\n            if (router.query.room) {\n                initializeChat();\n            }\n            const tokenCheckInterval = setInterval({\n                \"useChatRoom.useEffect.tokenCheckInterval\": ()=>{\n                    if (!mountedRef.current) return;\n                    if (!authUser) {\n                        clearInterval(tokenCheckInterval);\n                        router.replace('/?redirect=' + router.asPath);\n                    }\n                }\n            }[\"useChatRoom.useEffect.tokenCheckInterval\"], 60000);\n            return ({\n                \"useChatRoom.useEffect\": ()=>{\n                    mountedRef.current = false;\n                    clearInterval(tokenCheckInterval);\n                    if (loadMoreTimeoutRef.current) {\n                        clearTimeout(loadMoreTimeoutRef.current);\n                    }\n                    // Run cleanup only if socket is connected and room exists\n                    if (socketRef.current?.connected && router.query.room && !cleanupInProgressRef.current) {\n                        cleanup(CLEANUP_REASONS.UNMOUNT);\n                    }\n                }\n            })[\"useChatRoom.useEffect\"];\n        }\n    }[\"useChatRoom.useEffect\"], [\n        router.query.room,\n        cleanup,\n        setupRoom,\n        isInitialized,\n        setError,\n        authUser\n    ]);\n    // Handle page refresh/close to ensure leaveRoom is called\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useChatRoom.useEffect\": ()=>{\n            const handleBeforeUnload = {\n                \"useChatRoom.useEffect.handleBeforeUnload\": ()=>{\n                    if (socketRef.current?.connected && router.query.room) {\n                        socketRef.current.emit('leaveRoom', router.query.room);\n                    }\n                }\n            }[\"useChatRoom.useEffect.handleBeforeUnload\"];\n            window.addEventListener('beforeunload', handleBeforeUnload);\n            return ({\n                \"useChatRoom.useEffect\": ()=>{\n                    window.removeEventListener('beforeunload', handleBeforeUnload);\n                }\n            })[\"useChatRoom.useEffect\"];\n        }\n    }[\"useChatRoom.useEffect\"], [\n        router.query.room\n    ]);\n    // File handling hook\n    const { fileInputRef, uploading: fileUploading, uploadProgress: fileUploadProgress, uploadError: fileUploadError, handleFileUpload, handleFileSelect, handleFileDrop, removeFilePreview: removeFile } = (0,_useFileHandling__WEBPACK_IMPORTED_MODULE_4__.useFileHandling)(socketRef, currentUser, router);\n    // Enter key handler\n    const handleKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useChatRoom.useCallback[handleKeyDown]\": (e)=>{\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                handleMessageSubmit(e);\n            }\n        }\n    }[\"useChatRoom.useCallback[handleKeyDown]\"], [\n        handleMessageSubmit\n    ]);\n    return {\n        // State\n        room,\n        messages,\n        error,\n        loading,\n        connected,\n        currentUser,\n        message,\n        showEmojiPicker,\n        showMentionList,\n        mentionFilter,\n        mentionIndex,\n        filePreview,\n        uploading,\n        uploadProgress,\n        uploadError,\n        hasMoreMessages,\n        loadingMessages,\n        // Refs\n        fileInputRef,\n        messageInputRef,\n        socketRef,\n        // Handlers\n        handleMessageChange,\n        handleMessageSubmit,\n        handleEmojiToggle,\n        handleKeyDown,\n        handleConnectionError,\n        handleReconnect,\n        getFilteredParticipants,\n        insertMention,\n        removeFilePreview,\n        handleReactionAdd,\n        handleReactionRemove,\n        handleLoadMore,\n        cleanup,\n        // Setters\n        setMessage,\n        setShowEmojiPicker,\n        setShowMentionList,\n        setMentionFilter,\n        setMentionIndex,\n        setError,\n        // Status\n        connectionStatus: getConnectionState(),\n        messageLoadError,\n        // Retry handler\n        retryMessageLoad: (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n            \"useChatRoom.useCallback\": ()=>{\n                if (mountedRef.current) {\n                    messageLoadAttemptRef.current = 0;\n                    previousMessagesRef.current.clear();\n                    processedMessageIds.current.clear();\n                    initialLoadCompletedRef.current = false;\n                    loadInitialMessages(router.query.room);\n                }\n            }\n        }[\"useChatRoom.useCallback\"], [\n            loadInitialMessages,\n            router.query.room\n        ])\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useChatRoom);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2hvb2tzL3VzZUNoYXRSb29tLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBFO0FBQ2xDO0FBQ087QUFDRztBQUNFO0FBQ007QUFDRTtBQUNKO0FBQ0o7QUFDUjtBQUU1QyxNQUFNYyxrQkFBa0I7SUFDdEJDLFlBQVk7SUFDWkMsUUFBUTtJQUNSQyxXQUFXO0lBQ1hDLFNBQVM7SUFDVEMsT0FBTztBQUNUO0FBRU8sTUFBTUMsY0FBYztJQUN6QixNQUFNQyxTQUFTaEIsc0RBQVNBO0lBQ3hCLE1BQU0sRUFBRWlCLE1BQU1DLFFBQVEsRUFBRUMsTUFBTSxFQUFFLEdBQUdqQiw4REFBT0E7SUFDMUMsTUFBTSxDQUFDa0IsTUFBTUMsUUFBUSxHQUFHMUIsK0NBQVFBLENBQUM7SUFDakMsTUFBTSxDQUFDMkIsVUFBVUMsWUFBWSxHQUFHNUIsK0NBQVFBLENBQUMsRUFBRTtJQUMzQyxNQUFNLENBQUM2QixhQUFhQyxlQUFlLEdBQUc5QiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUMrQixPQUFPQyxTQUFTLEdBQUdoQywrQ0FBUUEsQ0FBQztJQUNuQyxNQUFNLENBQUNpQyxTQUFTQyxXQUFXLEdBQUdsQywrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUNtQyxrQkFBa0JDLG9CQUFvQixHQUFHcEMsK0NBQVFBLENBQUM7SUFDekQsTUFBTSxDQUFDcUMsa0JBQWtCQyxvQkFBb0IsR0FBR3RDLCtDQUFRQSxDQUFDO0lBQ3pELE1BQU0sQ0FBQ3VDLGVBQWVDLGlCQUFpQixHQUFHeEMsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDeUMsaUJBQWlCQyxtQkFBbUIsR0FBRzFDLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQzJDLGlCQUFpQkMsbUJBQW1CLEdBQUc1QywrQ0FBUUEsQ0FBQztJQUV2RCxPQUFPO0lBQ1AsTUFBTTZDLGtCQUFrQjNDLDZDQUFNQSxDQUFDO0lBQy9CLE1BQU00Qyx3QkFBd0I1Qyw2Q0FB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QixJQUFJNEMsV0FBVzRDLE9BQU8sRUFBRTtvQkFDdEI3QyxzQkFBc0I2QyxPQUFPLEdBQUc7b0JBQ2hDcEMsb0JBQW9Cb0MsT0FBTyxDQUFDSyxLQUFLO29CQUNqQ3JDLG9CQUFvQmdDLE9BQU8sQ0FBQ0ssS0FBSztvQkFDakN0Qyx3QkFBd0JpQyxPQUFPLEdBQUc7b0JBQ2xDMEQsb0JBQW9CaEksT0FBT3VFLEtBQUssQ0FBQ25FLElBQUk7Z0JBQ3ZDO1lBQ0Y7c0NBQUc7WUFBQzRIO1lBQXFCaEksT0FBT3VFLEtBQUssQ0FBQ25FLElBQUk7U0FBQztJQUM3QztBQUNGLEVBQUU7QUFFRixpRUFBZUwsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvaG9va3MvdXNlQ2hhdFJvb20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCBzb2NrZXRTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL3NvY2tldCc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi4vY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgdXNlRmlsZUhhbmRsaW5nIH0gZnJvbSAnLi91c2VGaWxlSGFuZGxpbmcnO1xuaW1wb3J0IHsgdXNlTWVzc2FnZUhhbmRsaW5nIH0gZnJvbSAnLi91c2VNZXNzYWdlSGFuZGxpbmcnO1xuaW1wb3J0IHsgdXNlUmVhY3Rpb25IYW5kbGluZyB9IGZyb20gJy4vdXNlUmVhY3Rpb25IYW5kbGluZyc7XG5pbXBvcnQgeyB1c2VTb2NrZXRIYW5kbGluZyB9IGZyb20gJy4vdXNlU29ja2V0SGFuZGxpbmcnO1xuaW1wb3J0IHsgdXNlUm9vbUhhbmRsaW5nIH0gZnJvbSAnLi91c2VSb29tSGFuZGxpbmcnO1xuaW1wb3J0IHsgVG9hc3QgfSBmcm9tICcuLi9jb21wb25lbnRzL1RvYXN0JztcblxuY29uc3QgQ0xFQU5VUF9SRUFTT05TID0ge1xuICBESVNDT05ORUNUOiAnZGlzY29ubmVjdCcsXG4gIE1BTlVBTDogJ21hbnVhbCcsXG4gIFJFQ09OTkVDVDogJ3JlY29ubmVjdCcsXG4gIFVOTU9VTlQ6ICd1bm1vdW50JyxcbiAgRVJST1I6ICdlcnJvcidcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VDaGF0Um9vbSA9ICgpID0+IHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgdXNlcjogYXV0aFVzZXIsIGxvZ291dCB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCBbcm9vbSwgc2V0Um9vbV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtjdXJyZW50VXNlciwgc2V0Q3VycmVudFVzZXJdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2Nvbm5lY3Rpb25TdGF0dXMsIHNldENvbm5lY3Rpb25TdGF0dXNdID0gdXNlU3RhdGUoJ2NoZWNraW5nJyk7XG4gIGNvbnN0IFttZXNzYWdlTG9hZEVycm9yLCBzZXRNZXNzYWdlTG9hZEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNJbml0aWFsaXplZCwgc2V0SXNJbml0aWFsaXplZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtoYXNNb3JlTWVzc2FnZXMsIHNldEhhc01vcmVNZXNzYWdlc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2xvYWRpbmdNZXNzYWdlcywgc2V0TG9hZGluZ01lc3NhZ2VzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIC8vIFJlZnNcbiAgY29uc3QgbWVzc2FnZUlucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBtZXNzYWdlTG9hZEF0dGVtcHRSZWYgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IG1vdW50ZWRSZWYgPSB1c2VSZWYodHJ1ZSk7XG4gIGNvbnN0IGluaXRpYWxpemluZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IHNldHVwQ29tcGxldGVSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBzb2NrZXRJbml0aWFsaXplZFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGNsZWFudXBJblByb2dyZXNzUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgY2xlYW51cENvdW50UmVmID0gdXNlUmVmKDApO1xuICBjb25zdCB1c2VyUm9vbXMgPSB1c2VSZWYobmV3IE1hcCgpKTtcbiAgY29uc3QgcHJldmlvdXNNZXNzYWdlc1JlZiA9IHVzZVJlZihuZXcgU2V0KCkpO1xuICBjb25zdCBtZXNzYWdlUHJvY2Vzc2luZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGluaXRpYWxMb2FkQ29tcGxldGVkUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgcHJvY2Vzc2VkTWVzc2FnZUlkcyA9IHVzZVJlZihuZXcgU2V0KCkpO1xuICBjb25zdCBsb2FkTW9yZVRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgLy8gU29ja2V0IGhhbmRsaW5nIHNldHVwXG4gIGNvbnN0IHtcbiAgICBjb25uZWN0ZWQsXG4gICAgc29ja2V0UmVmLFxuICAgIGhhbmRsZUNvbm5lY3Rpb25FcnJvcixcbiAgICBoYW5kbGVSZWNvbm5lY3QsXG4gICAgc2V0Q29ubmVjdGVkXG4gIH0gPSB1c2VTb2NrZXRIYW5kbGluZyhyb3V0ZXIpO1xuXG4gIC8vIE1lc3NhZ2UgaGFuZGxpbmcgaG9va1xuICBjb25zdCB7XG4gICAgbWVzc2FnZSxcbiAgICBzaG93RW1vamlQaWNrZXIsXG4gICAgc2hvd01lbnRpb25MaXN0LFxuICAgIG1lbnRpb25GaWx0ZXIsXG4gICAgbWVudGlvbkluZGV4LFxuICAgIGZpbGVQcmV2aWV3LFxuICAgIHVwbG9hZGluZyxcbiAgICB1cGxvYWRQcm9ncmVzcyxcbiAgICB1cGxvYWRFcnJvcixcbiAgICBzZXRNZXNzYWdlLFxuICAgIHNldFNob3dFbW9qaVBpY2tlcixcbiAgICBzZXRTaG93TWVudGlvbkxpc3QsXG4gICAgc2V0TWVudGlvbkZpbHRlcixcbiAgICBzZXRNZW50aW9uSW5kZXgsXG4gICAgc2V0RmlsZVByZXZpZXcsXG4gICAgaGFuZGxlTWVzc2FnZUNoYW5nZSxcbiAgICBoYW5kbGVNZXNzYWdlU3VibWl0LFxuICAgIGhhbmRsZUxvYWRNb3JlLFxuICAgIGhhbmRsZUVtb2ppVG9nZ2xlLFxuICAgIGdldEZpbHRlcmVkUGFydGljaXBhbnRzLFxuICAgIGluc2VydE1lbnRpb24sXG4gICAgcmVtb3ZlRmlsZVByZXZpZXdcbiAgfSA9IHVzZU1lc3NhZ2VIYW5kbGluZyhzb2NrZXRSZWYsIGN1cnJlbnRVc2VyLCByb3V0ZXIsIHVuZGVmaW5lZCwgbWVzc2FnZXMsIGxvYWRpbmdNZXNzYWdlcywgc2V0TG9hZGluZ01lc3NhZ2VzKTtcblxuICAvLyBDbGVhbnVwIO2VqOyImCDsiJjsoJVcbiAgY29uc3QgY2xlYW51cCA9IHVzZUNhbGxiYWNrKChyZWFzb24gPSAnTUFOVUFMJykgPT4ge1xuICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50IHx8ICFyb3V0ZXIucXVlcnkucm9vbSkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIGNsZWFudXDsnbQg7J2066+4IOynhO2WiSDspJHsnbjsp4Ag7ZmV7J24XG4gICAgICBpZiAoY2xlYW51cEluUHJvZ3Jlc3NSZWYuY3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXBJblByb2dyZXNzUmVmLmN1cnJlbnQgPSB0cnVlO1xuXG4gICAgICAvLyBTb2NrZXQgY2xlYW51cFxuICAgICAgaWYgKHJvdXRlci5xdWVyeS5yb29tICYmIHNvY2tldFJlZi5jdXJyZW50Py5jb25uZWN0ZWQpIHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnbGVhdmVSb29tJywgcm91dGVyLnF1ZXJ5LnJvb20pO1xuICAgICAgfVxuXG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQgJiYgcmVhc29uICE9PSAnUkVDT05ORUNUJykge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5vZmYoJ21lc3NhZ2UnKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQub2ZmKCdwcmV2aW91c01lc3NhZ2VzJyk7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50Lm9mZigncHJldmlvdXNNZXNzYWdlc0xvYWRlZCcpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5vZmYoJ3BhcnRpY2lwYW50c1VwZGF0ZScpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5vZmYoJ21lc3NhZ2VzUmVhZCcpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5vZmYoJ21lc3NhZ2VSZWFjdGlvblVwZGF0ZScpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5vZmYoJ3Nlc3Npb25fZW5kZWQnKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQub2ZmKCdlcnJvcicpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aW1lb3V0c1xuICAgICAgaWYgKGxvYWRNb3JlVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChsb2FkTW9yZVRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICAgIGxvYWRNb3JlVGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gUmVzZXQgcmVmc1xuICAgICAgcHJvY2Vzc2VkTWVzc2FnZUlkcy5jdXJyZW50LmNsZWFyKCk7XG4gICAgICBwcmV2aW91c01lc3NhZ2VzUmVmLmN1cnJlbnQuY2xlYXIoKTtcbiAgICAgIG1lc3NhZ2VQcm9jZXNzaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgICAgLy8gUmVzZXQgc3RhdGVzIG9ubHkgaWYgbmVlZGVkXG4gICAgICBpZiAocmVhc29uID09PSAnTUFOVUFMJyAmJiBtb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICBzZXRMb2FkaW5nTWVzc2FnZXMoZmFsc2UpO1xuICAgICAgICBzZXRNZXNzYWdlcyhbXSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodXNlclJvb21zLmN1cnJlbnQuc2l6ZSA+IDApIHtcbiAgICAgICAgICB1c2VyUm9vbXMuY3VycmVudC5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlYXNvbiA9PT0gJ0RJU0NPTk5FQ1QnICYmIG1vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRFcnJvcign7LGE7YyFIOyXsOqysOydtCDrgYrslrTsoYzsirXri4jri6QuIOyerOyXsOqysOydhCDsi5zrj4Ttlanri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKG1vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXRFcnJvcign7LGE7YyF67CpIOygleumrCDspJEg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xlYW51cEluUHJvZ3Jlc3NSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH1cbiAgfSwgW1xuICAgIHNldE1lc3NhZ2VzLFxuICAgIHNldEVycm9yLFxuICAgIHNldExvYWRpbmcsXG4gICAgc2V0TG9hZGluZ01lc3NhZ2VzLFxuICAgIG1vdW50ZWRSZWYsXG4gICAgc29ja2V0UmVmXG4gIF0pO1xuICBcbiAgLy8gQ29ubmVjdGlvbiBzdGF0ZSB1dGlsaXR5XG4gIGNvbnN0IGdldENvbm5lY3Rpb25TdGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIXNvY2tldFJlZi5jdXJyZW50KSByZXR1cm4gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgaWYgKGxvYWRpbmcpIHJldHVybiAnY29ubmVjdGluZyc7XG4gICAgaWYgKGVycm9yKSByZXR1cm4gJ2Vycm9yJztcbiAgICByZXR1cm4gc29ja2V0UmVmLmN1cnJlbnQuY29ubmVjdGVkID8gJ2Nvbm5lY3RlZCcgOiAnZGlzY29ubmVjdGVkJztcbiAgfSwgW2xvYWRpbmcsIGVycm9yLCBzb2NrZXRSZWZdKTtcblxuICAvLyBSZWFjdGlvbiBoYW5kbGluZyBob29rXG4gIGNvbnN0IHtcbiAgICBoYW5kbGVSZWFjdGlvbkFkZCxcbiAgICBoYW5kbGVSZWFjdGlvblJlbW92ZSxcbiAgICBoYW5kbGVSZWFjdGlvblVwZGF0ZVxuICB9ID0gdXNlUmVhY3Rpb25IYW5kbGluZyhzb2NrZXRSZWYsIGN1cnJlbnRVc2VyLCBtZXNzYWdlcywgc2V0TWVzc2FnZXMpO1xuXG4gIC8vIOuplOyLnOyngCDsspjrpqwg7Jyg7Yu466as7YuwIO2VqOyImFxuICBjb25zdCBwcm9jZXNzTWVzc2FnZXMgPSB1c2VDYWxsYmFjaygobG9hZGVkTWVzc2FnZXMsIGhhc01vcmUsIGlzSW5pdGlhbExvYWQgPSBmYWxzZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkobG9hZGVkTWVzc2FnZXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBtZXNzYWdlcyBmb3JtYXQnKTtcbiAgICAgIH1cblxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiB7XG4gICAgICAgIC8vIOykkeuztSDrqZTsi5zsp4Ag7ZWE7YSw66eBIOqwnOyEoFxuICAgICAgICBjb25zdCBuZXdNZXNzYWdlcyA9IGxvYWRlZE1lc3NhZ2VzLmZpbHRlcihtc2cgPT4ge1xuICAgICAgICAgIGlmICghbXNnLl9pZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIGlmIChwcm9jZXNzZWRNZXNzYWdlSWRzLmN1cnJlbnQuaGFzKG1zZy5faWQpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZUlkcy5jdXJyZW50LmFkZChtc2cuX2lkKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g6riw7KG0IOuplOyLnOyngOyZgCDsg4gg66mU7Iuc7KeAIOqysO2VqSDrsI8g7KCV66CsXG4gICAgICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gWy4uLnByZXYsIC4uLm5ld01lc3NhZ2VzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEudGltZXN0YW1wIHx8IDApIC0gbmV3IERhdGUoYi50aW1lc3RhbXAgfHwgMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOykkeuztSDsoJzqsbAgKOqwgOyepSDstZzqt7wg66mU7Iuc7KeAIOycoOyngClcbiAgICAgICAgY29uc3QgbWVzc2FnZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgYWxsTWVzc2FnZXMuZm9yRWFjaChtc2cgPT4gbWVzc2FnZU1hcC5zZXQobXNnLl9pZCwgbXNnKSk7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKG1lc3NhZ2VNYXAudmFsdWVzKCkpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOuplOyLnOyngCDroZzrk5wg7IOB7YOcIOyXheuNsOydtO2KuFxuICAgICAgaWYgKGlzSW5pdGlhbExvYWQpIHtcbiAgICAgICAgc2V0SGFzTW9yZU1lc3NhZ2VzKGhhc01vcmUpO1xuICAgICAgICBpbml0aWFsTG9hZENvbXBsZXRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEhhc01vcmVNZXNzYWdlcyhoYXNNb3JlKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFtzZXRNZXNzYWdlcywgc2V0SGFzTW9yZU1lc3NhZ2VzXSk7XG5cbiAgLy8gQ2xlYW51cCDtlajsiJgg7IiY7KCVXG4gIGNvbnN0IHNldHVwRXZlbnRMaXN0ZW5lcnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFzb2NrZXRSZWYuY3VycmVudCB8fCAhbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAvLyDssLjqsIDsnpAg7JeF642w7J207Yq4IOydtOuypO2KuFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdwYXJ0aWNpcGFudHNVcGRhdGUnLCAocGFydGljaXBhbnRzKSA9PiB7XG4gICAgICBpZiAoIW1vdW50ZWRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgc2V0Um9vbShwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIHBhcnRpY2lwYW50czogcGFydGljaXBhbnRzIHx8IFtdXG4gICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICAvLyDsnb3snYwg7IOB7YOcIOyXheuNsOydtO2KuCDsnbTrsqTtirggKOuplOyLnOyngCDrqqnroZ3snZggcmVhZGVycyDrsLDsl7Qg7JeF642w7J207Yq4KVxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdtZXNzYWdlc1JlYWQnLCAoeyB1c2VySWQsIG1lc3NhZ2VJZHMsIHRpbWVzdGFtcCB9KSA9PiB7XG4gICAgICBpZiAoIW1vdW50ZWRSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgIC8vIO2VtOuLuSDrqZTsi5zsp4DqsIAg7J297J2MIOyymOumrOuQnCDrqZTsi5zsp4Dsnbjsp4Ag7ZmV7J24XG4gICAgICAgIGlmIChtZXNzYWdlSWRzLmluY2x1ZGVzKG1zZy5faWQpKSB7XG4gICAgICAgICAgLy8g7J2066+4IOydveydgCDsgqzsmqnsnpDsnbjsp4Ag7ZmV7J24XG4gICAgICAgICAgY29uc3QgYWxyZWFkeVJlYWQgPSBtc2cucmVhZGVycz8uc29tZShyZWFkZXIgPT4gXG4gICAgICAgICAgICByZWFkZXIudXNlcklkID09PSB1c2VySWQgfHwgcmVhZGVyLl9pZCA9PT0gdXNlcklkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWFscmVhZHlSZWFkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5tc2csXG4gICAgICAgICAgICAgIHJlYWRlcnM6IFtcbiAgICAgICAgICAgICAgICAuLi4obXNnLnJlYWRlcnMgfHwgW10pLFxuICAgICAgICAgICAgICAgIHsgdXNlcklkLCByZWFkQXQ6IHRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIC8vIOuplOyLnOyngCDsnbTrsqTtirhcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignbWVzc2FnZScsIG1lc3NhZ2UgPT4ge1xuICAgICAgaWYgKCFtZXNzYWdlIHx8ICFtb3VudGVkUmVmLmN1cnJlbnQgfHwgbWVzc2FnZVByb2Nlc3NpbmdSZWYuY3VycmVudCB8fCAhbWVzc2FnZS5faWQpIHJldHVybjtcbiAgICAgIFxuICAgICAgaWYgKHByb2Nlc3NlZE1lc3NhZ2VJZHMuY3VycmVudC5oYXMobWVzc2FnZS5faWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcHJvY2Vzc2VkTWVzc2FnZUlkcy5jdXJyZW50LmFkZChtZXNzYWdlLl9pZCk7XG5cbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IHByZXYuc29tZShtc2cgPT4gbXNnLl9pZCA9PT0gbWVzc2FnZS5faWQpO1xuXG4gICAgICAgIGlmIChpc0R1cGxpY2F0ZSkge1xuICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ucHJldiwgbWVzc2FnZV07XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIOydtOyghCDrqZTsi5zsp4Ag7J2067Kk7Yq4IChwcmV2aW91c01lc3NhZ2Vz7JmAIHByZXZpb3VzTWVzc2FnZXNMb2FkZWQg65GYIOuLpCDsspjrpqwpXG4gICAgY29uc3QgaGFuZGxlUHJldmlvdXNNZXNzYWdlcyA9IChyZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKCFtb3VudGVkUmVmLmN1cnJlbnQgfHwgbWVzc2FnZVByb2Nlc3NpbmdSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBtZXNzYWdlUHJvY2Vzc2luZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHR5cGVvZiByZXNwb25zZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1lc3NhZ2VzOiBsb2FkZWRNZXNzYWdlcyA9IFtdLCBoYXNNb3JlIH0gPSByZXNwb25zZTtcbiAgICAgICAgY29uc3QgaXNJbml0aWFsTG9hZCA9IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMDtcblxuICAgICAgICBwcm9jZXNzTWVzc2FnZXMobG9hZGVkTWVzc2FnZXMsIGhhc01vcmUsIGlzSW5pdGlhbExvYWQpO1xuICAgICAgICBzZXRMb2FkaW5nTWVzc2FnZXMoZmFsc2UpO1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBzZXRMb2FkaW5nTWVzc2FnZXMoZmFsc2UpO1xuICAgICAgICBzZXRFcnJvcign66mU7Iuc7KeAIOyymOumrCDspJEg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nKTtcbiAgICAgICAgc2V0SGFzTW9yZU1lc3NhZ2VzKGZhbHNlKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIG1lc3NhZ2VQcm9jZXNzaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ3ByZXZpb3VzTWVzc2FnZXMnLCBoYW5kbGVQcmV2aW91c01lc3NhZ2VzKTtcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbigncHJldmlvdXNNZXNzYWdlc0xvYWRlZCcsIGhhbmRsZVByZXZpb3VzTWVzc2FnZXMpO1xuXG4gICAgLy8g66as7JWh7IWYIOydtOuypO2KuFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdtZXNzYWdlUmVhY3Rpb25VcGRhdGUnLCAoZGF0YSkgPT4ge1xuICAgICAgaWYgKCFtb3VudGVkUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIGhhbmRsZVJlYWN0aW9uVXBkYXRlKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgLy8g7IS47IWYIOydtOuypO2KuFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdzZXNzaW9uX2VuZGVkJywgKCkgPT4ge1xuICAgICAgaWYgKCFtb3VudGVkUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIGNsZWFudXAoKTtcbiAgICAgIGxvZ291dCgpO1xuICAgICAgcm91dGVyLnJlcGxhY2UoJy8/ZXJyb3I9c2Vzc2lvbl9leHBpcmVkJyk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuXG4gICAgICAvLyDquIjsuZnslrQg66mU7Iuc7KeAIOqxsOu2gCDsspjrpqxcbiAgICAgIGlmIChlcnJvcj8uY29kZSA9PT0gJ01FU1NBR0VfUkVKRUNURUQnKSB7XG4gICAgICAgIFRvYXN0LmVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+q4iOy5meyWtOqwgCDtj6ztlajrkJjslrQg66mU7Iuc7KeA66W8IOyghOyGoe2VoCDsiJgg7JeG7Iq164uI64ukLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+yxhO2MhSDsl7DqsrDsl5Ag66y47KCc6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nKTtcbiAgICB9KTtcblxuICB9LCBbcHJvY2Vzc01lc3NhZ2VzLCBzZXRIYXNNb3JlTWVzc2FnZXMsIGNsZWFudXAsIGhhbmRsZVJlYWN0aW9uVXBkYXRlLCBzZXRMb2FkaW5nTWVzc2FnZXMsIHNldEVycm9yLCBsb2dvdXRdKTtcblxuICAvLyBSb29tIGhhbmRsaW5nIGhvb2sgaW5pdGlhbGl6YXRpb25cbiAgY29uc3Qge1xuICAgIHNldHVwUm9vbSxcbiAgICBqb2luUm9vbSxcbiAgICBsb2FkSW5pdGlhbE1lc3NhZ2VzLFxuICAgIGZldGNoUm9vbURhdGEsXG4gICAgaGFuZGxlU2Vzc2lvbkVycm9yXG4gIH0gPSB1c2VSb29tSGFuZGxpbmcoXG4gICAgc29ja2V0UmVmLFxuICAgIGN1cnJlbnRVc2VyLFxuICAgIG1vdW50ZWRSZWYsXG4gICAgcm91dGVyLFxuICAgIHNldFJvb20sXG4gICAgc2V0RXJyb3IsXG4gICAgc2V0TWVzc2FnZXMsXG4gICAgc2V0SGFzTW9yZU1lc3NhZ2VzLFxuICAgIHNldExvYWRpbmdNZXNzYWdlcyxcbiAgICBzZXRMb2FkaW5nLFxuICAgIHNldHVwRXZlbnRMaXN0ZW5lcnMsXG4gICAgY2xlYW51cCxcbiAgICBsb2FkaW5nLFxuICAgIHNldElzSW5pdGlhbGl6ZWQsXG4gICAgaW5pdGlhbGl6aW5nUmVmLFxuICAgIHNldHVwQ29tcGxldGVSZWYsXG4gICAgdXNlclJvb21zLmN1cnJlbnQsXG4gICAgcHJvY2Vzc01lc3NhZ2VzXG4gICk7XG5cbiAgLy8gU29ja2V0IGNvbm5lY3Rpb24gbW9uaXRvcmluZ1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc29ja2V0UmVmLmN1cnJlbnQgfHwgIWN1cnJlbnRVc2VyKSByZXR1cm47XG5cbiAgICBjb25zdCBoYW5kbGVDb25uZWN0ID0gKCkgPT4ge1xuICAgICAgaWYgKCFtb3VudGVkUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIHNldENvbm5lY3Rpb25TdGF0dXMoJ2Nvbm5lY3RlZCcpO1xuICAgICAgc2V0Q29ubmVjdGVkKHRydWUpO1xuXG4gICAgICBpZiAocm91dGVyLnF1ZXJ5LnJvb20gJiYgIXNldHVwQ29tcGxldGVSZWYuY3VycmVudCAmJlxuICAgICAgICAgICFpbml0aWFsaXppbmdSZWYuY3VycmVudCAmJiAhaXNJbml0aWFsaXplZCkge1xuICAgICAgICBzb2NrZXRJbml0aWFsaXplZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgc2V0dXBSb29tKCkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIHNldEVycm9yKCfssYTtjIXrsKkg7Jew6rKw7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZURpc2Nvbm5lY3QgPSAocmVhc29uKSA9PiB7XG4gICAgICBpZiAoIW1vdW50ZWRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnZGlzY29ubmVjdGVkJyk7XG4gICAgICBzb2NrZXRJbml0aWFsaXplZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBzZXR1cENvbXBsZXRlUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdlcnJvcicpO1xuICAgICAgc2V0RXJyb3IoJ+yxhO2MhSDshJzrsoTsmYDsnZgg7Jew6rKw7J20IOuBiuyWtOyhjOyKteuLiOuLpC4nKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUmVjb25uZWN0aW5nID0gKGF0dGVtcHROdW1iZXIpID0+IHtcbiAgICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdjb25uZWN0aW5nJyk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVJlY29ubmVjdFN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICBpZiAoIW1vdW50ZWRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnY29ubmVjdGVkJyk7XG4gICAgICBzZXRDb25uZWN0ZWQodHJ1ZSk7XG4gICAgICBzZXRFcnJvcignJyk7XG5cbiAgICAgIC8vIOyerOyXsOqysCDsi5wg7LGE7YyF67CpIOyerOygkeyGjVxuICAgICAgaWYgKHJvdXRlci5xdWVyeS5yb29tKSB7XG4gICAgICAgIHNldHVwUm9vbSgpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICBzZXRFcnJvcign7LGE7YyF67CpIOyerOyXsOqysOyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignY29ubmVjdCcsIGhhbmRsZUNvbm5lY3QpO1xuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdkaXNjb25uZWN0JywgaGFuZGxlRGlzY29ubmVjdCk7XG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ2Nvbm5lY3RfZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ3JlY29ubmVjdGluZycsIGhhbmRsZVJlY29ubmVjdGluZyk7XG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ3JlY29ubmVjdCcsIGhhbmRsZVJlY29ubmVjdFN1Y2Nlc3MpO1xuXG4gICAgc2V0Q29ubmVjdGlvblN0YXR1cyhzb2NrZXRSZWYuY3VycmVudC5jb25uZWN0ZWQgPyAnY29ubmVjdGVkJyA6ICdkaXNjb25uZWN0ZWQnKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQub2ZmKCdjb25uZWN0JywgaGFuZGxlQ29ubmVjdCk7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50Lm9mZignZGlzY29ubmVjdCcsIGhhbmRsZURpc2Nvbm5lY3QpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5vZmYoJ2Nvbm5lY3RfZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50Lm9mZigncmVjb25uZWN0aW5nJywgaGFuZGxlUmVjb25uZWN0aW5nKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQub2ZmKCdyZWNvbm5lY3QnLCBoYW5kbGVSZWNvbm5lY3RTdWNjZXNzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbcm91dGVyLnF1ZXJ5LnJvb20sIHNldHVwUm9vbSwgc2V0Q29ubmVjdGVkLCBjdXJyZW50VXNlciwgaXNJbml0aWFsaXplZCwgc2V0RXJyb3JdKTtcblxuICAvLyBDb21wb25lbnQgaW5pdGlhbGl6YXRpb24gYW5kIGNsZWFudXBcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQ2hhdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChpbml0aWFsaXppbmdSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICBpZiAoIWF1dGhVc2VyKSB7XG4gICAgICAgIHJvdXRlci5yZXBsYWNlKCcvP3JlZGlyZWN0PScgKyByb3V0ZXIuYXNQYXRoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHNldEN1cnJlbnRVc2VyKGF1dGhVc2VyKTtcbiAgICAgIH1cblxuICAgICAgLy8g7LGE7YyF67Cp7J20IOyeiOydhCDrlYzrp4wg7LSI6riw7ZmUIOynhO2WiVxuICAgICAgaWYgKCFpc0luaXRpYWxpemVkICYmIHJvdXRlci5xdWVyeS5yb29tKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaW5pdGlhbGl6aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgIGF3YWl0IHNldHVwUm9vbSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHNldEVycm9yKCfssYTtjIXrsKkg7LSI6riw7ZmU7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpbml0aWFsaXppbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7XG5cbiAgICAvLyDrnbzsmrDthLAg7L+866as6rCAIOykgOu5hOuQmOuptCDstIjquLDtmZQg7KeE7ZaJXG4gICAgaWYgKHJvdXRlci5xdWVyeS5yb29tKSB7XG4gICAgICBpbml0aWFsaXplQ2hhdCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICghbW91bnRlZFJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGlmICghYXV0aFVzZXIpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0b2tlbkNoZWNrSW50ZXJ2YWwpO1xuICAgICAgICByb3V0ZXIucmVwbGFjZSgnLz9yZWRpcmVjdD0nICsgcm91dGVyLmFzUGF0aCk7XG4gICAgICB9XG4gICAgfSwgNjAwMDApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgY2xlYXJJbnRlcnZhbCh0b2tlbkNoZWNrSW50ZXJ2YWwpO1xuXG4gICAgICBpZiAobG9hZE1vcmVUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGxvYWRNb3JlVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gUnVuIGNsZWFudXAgb25seSBpZiBzb2NrZXQgaXMgY29ubmVjdGVkIGFuZCByb29tIGV4aXN0c1xuICAgICAgaWYgKHNvY2tldFJlZi5jdXJyZW50Py5jb25uZWN0ZWQgJiYgcm91dGVyLnF1ZXJ5LnJvb20gJiYgIWNsZWFudXBJblByb2dyZXNzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYW51cChDTEVBTlVQX1JFQVNPTlMuVU5NT1VOVCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3JvdXRlci5xdWVyeS5yb29tLCBjbGVhbnVwLCBzZXR1cFJvb20sIGlzSW5pdGlhbGl6ZWQsIHNldEVycm9yLCBhdXRoVXNlcl0pO1xuXG4gIC8vIEhhbmRsZSBwYWdlIHJlZnJlc2gvY2xvc2UgdG8gZW5zdXJlIGxlYXZlUm9vbSBpcyBjYWxsZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVCZWZvcmVVbmxvYWQgPSAoKSA9PiB7XG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQ/LmNvbm5lY3RlZCAmJiByb3V0ZXIucXVlcnkucm9vbSkge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdsZWF2ZVJvb20nLCByb3V0ZXIucXVlcnkucm9vbSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBoYW5kbGVCZWZvcmVVbmxvYWQpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgaGFuZGxlQmVmb3JlVW5sb2FkKTtcbiAgICB9O1xuICB9LCBbcm91dGVyLnF1ZXJ5LnJvb21dKTtcblxuICAvLyBGaWxlIGhhbmRsaW5nIGhvb2tcbiAgY29uc3Qge1xuICAgIGZpbGVJbnB1dFJlZixcbiAgICB1cGxvYWRpbmc6IGZpbGVVcGxvYWRpbmcsXG4gICAgdXBsb2FkUHJvZ3Jlc3M6IGZpbGVVcGxvYWRQcm9ncmVzcyxcbiAgICB1cGxvYWRFcnJvcjogZmlsZVVwbG9hZEVycm9yLFxuICAgIGhhbmRsZUZpbGVVcGxvYWQsXG4gICAgaGFuZGxlRmlsZVNlbGVjdCxcbiAgICBoYW5kbGVGaWxlRHJvcCxcbiAgICByZW1vdmVGaWxlUHJldmlldzogcmVtb3ZlRmlsZVxuICB9ID0gdXNlRmlsZUhhbmRsaW5nKHNvY2tldFJlZiwgY3VycmVudFVzZXIsIHJvdXRlcik7XG5cbiAgLy8gRW50ZXIga2V5IGhhbmRsZXJcbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBoYW5kbGVNZXNzYWdlU3VibWl0KGUpO1xuICAgIH1cbiAgfSwgW2hhbmRsZU1lc3NhZ2VTdWJtaXRdKTtcblxuICByZXR1cm4ge1xuICAgIC8vIFN0YXRlXG4gICAgcm9vbSxcbiAgICBtZXNzYWdlcyxcbiAgICBlcnJvcixcbiAgICBsb2FkaW5nLFxuICAgIGNvbm5lY3RlZCxcbiAgICBjdXJyZW50VXNlcixcbiAgICBtZXNzYWdlLFxuICAgIHNob3dFbW9qaVBpY2tlcixcbiAgICBzaG93TWVudGlvbkxpc3QsXG4gICAgbWVudGlvbkZpbHRlcixcbiAgICBtZW50aW9uSW5kZXgsXG4gICAgZmlsZVByZXZpZXcsXG4gICAgdXBsb2FkaW5nLFxuICAgIHVwbG9hZFByb2dyZXNzLFxuICAgIHVwbG9hZEVycm9yLFxuICAgIGhhc01vcmVNZXNzYWdlcyxcbiAgICBsb2FkaW5nTWVzc2FnZXMsXG5cbiAgICAvLyBSZWZzXG4gICAgZmlsZUlucHV0UmVmLFxuICAgIG1lc3NhZ2VJbnB1dFJlZixcbiAgICBzb2NrZXRSZWYsXG5cbiAgICAvLyBIYW5kbGVyc1xuICAgIGhhbmRsZU1lc3NhZ2VDaGFuZ2UsXG4gICAgaGFuZGxlTWVzc2FnZVN1Ym1pdCxcbiAgICBoYW5kbGVFbW9qaVRvZ2dsZSxcbiAgICBoYW5kbGVLZXlEb3duLFxuICAgIGhhbmRsZUNvbm5lY3Rpb25FcnJvcixcbiAgICBoYW5kbGVSZWNvbm5lY3QsXG4gICAgZ2V0RmlsdGVyZWRQYXJ0aWNpcGFudHMsXG4gICAgaW5zZXJ0TWVudGlvbixcbiAgICByZW1vdmVGaWxlUHJldmlldyxcbiAgICBoYW5kbGVSZWFjdGlvbkFkZCxcbiAgICBoYW5kbGVSZWFjdGlvblJlbW92ZSxcbiAgICBoYW5kbGVMb2FkTW9yZSwgLy8g7Y6Y7J207KeVIO2VuOuTpOufrCDstpTqsIBcbiAgICBjbGVhbnVwLFxuXG4gICAgLy8gU2V0dGVyc1xuICAgIHNldE1lc3NhZ2UsXG4gICAgc2V0U2hvd0Vtb2ppUGlja2VyLFxuICAgIHNldFNob3dNZW50aW9uTGlzdCxcbiAgICBzZXRNZW50aW9uRmlsdGVyLFxuICAgIHNldE1lbnRpb25JbmRleCxcbiAgICBzZXRFcnJvcixcblxuICAgIC8vIFN0YXR1c1xuICAgIGNvbm5lY3Rpb25TdGF0dXM6IGdldENvbm5lY3Rpb25TdGF0ZSgpLFxuICAgIG1lc3NhZ2VMb2FkRXJyb3IsXG5cbiAgICAvLyBSZXRyeSBoYW5kbGVyXG4gICAgcmV0cnlNZXNzYWdlTG9hZDogdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgaWYgKG1vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBtZXNzYWdlTG9hZEF0dGVtcHRSZWYuY3VycmVudCA9IDA7XG4gICAgICAgIHByZXZpb3VzTWVzc2FnZXNSZWYuY3VycmVudC5jbGVhcigpO1xuICAgICAgICBwcm9jZXNzZWRNZXNzYWdlSWRzLmN1cnJlbnQuY2xlYXIoKTtcbiAgICAgICAgaW5pdGlhbExvYWRDb21wbGV0ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICBsb2FkSW5pdGlhbE1lc3NhZ2VzKHJvdXRlci5xdWVyeS5yb29tKTtcbiAgICAgIH1cbiAgICB9LCBbbG9hZEluaXRpYWxNZXNzYWdlcywgcm91dGVyLnF1ZXJ5LnJvb21dKVxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlQ2hhdFJvb207Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJ1c2VNZW1vIiwidXNlUm91dGVyIiwic29ja2V0U2VydmljZSIsInVzZUF1dGgiLCJ1c2VGaWxlSGFuZGxpbmciLCJ1c2VNZXNzYWdlSGFuZGxpbmciLCJ1c2VSZWFjdGlvbkhhbmRsaW5nIiwidXNlU29ja2V0SGFuZGxpbmciLCJ1c2VSb29tSGFuZGxpbmciLCJUb2FzdCIsIkNMRUFOVVBfUkVBU09OUyIsIkRJU0NPTk5FQ1QiLCJNQU5VQUwiLCJSRUNPTk5FQ1QiLCJVTk1PVU5UIiwiRVJST1IiLCJ1c2VDaGF0Um9vbSIsInJvdXRlciIsInVzZXIiLCJhdXRoVXNlciIsImxvZ291dCIsInJvb20iLCJzZXRSb29tIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImN1cnJlbnRVc2VyIiwic2V0Q3VycmVudFVzZXIiLCJlcnJvciIsInNldEVycm9yIiwibG9hZGluZyIsInNldExvYWRpbmciLCJjb25uZWN0aW9uU3RhdHVzIiwic2V0Q29ubmVjdGlvblN0YXR1cyIsIm1lc3NhZ2VMb2FkRXJyb3IiLCJzZXRNZXNzYWdlTG9hZEVycm9yIiwiaXNJbml0aWFsaXplZCIsInNldElzSW5pdGlhbGl6ZWQiLCJoYXNNb3JlTWVzc2FnZXMiLCJzZXRIYXNNb3JlTWVzc2FnZXMiLCJsb2FkaW5nTWVzc2FnZXMiLCJzZXRMb2FkaW5nTWVzc2FnZXMiLCJtZXNzYWdlSW5wdXRSZWYiLCJtZXNzYWdlTG9hZEF0dGVtcHRSZWYiLCJtb3VudGVkUmVmIiwiaW5pdGlhbGl6aW5nUmVmIiwic2V0dXBDb21wbGV0ZVJlZiIsInNvY2tldEluaXRpYWxpemVkUmVmIiwiY2xlYW51cEluUHJvZ3Jlc3NSZWYiLCJjbGVhbnVwQ291bnRSZWYiLCJ1c2VyUm9vbXMiLCJNYXAiLCJwcmV2aW91c01lc3NhZ2VzUmVmIiwiU2V0IiwibWVzc2FnZVByb2Nlc3NpbmdSZWYiLCJpbml0aWFsTG9hZENvbXBsZXRlZFJlZiIsInByb2Nlc3NlZE1lc3NhZ2VJZHMiLCJsb2FkTW9yZVRpbWVvdXRSZWYiLCJjb25uZWN0ZWQiLCJzb2NrZXRSZWYiLCJoYW5kbGVDb25uZWN0aW9uRXJyb3IiLCJoYW5kbGVSZWNvbm5lY3QiLCJzZXRDb25uZWN0ZWQiLCJtZXNzYWdlIiwic2hvd0Vtb2ppUGlja2VyIiwic2hvd01lbnRpb25MaXN0IiwibWVudGlvbkZpbHRlciIsIm1lbnRpb25JbmRleCIsImZpbGVQcmV2aWV3IiwidXBsb2FkaW5nIiwidXBsb2FkUHJvZ3Jlc3MiLCJ1cGxvYWRFcnJvciIsInNldE1lc3NhZ2UiLCJzZXRTaG93RW1vamlQaWNrZXIiLCJzZXRTaG93TWVudGlvbkxpc3QiLCJzZXRNZW50aW9uRmlsdGVyIiwic2V0TWVudGlvbkluZGV4Iiwic2V0RmlsZVByZXZpZXciLCJoYW5kbGVNZXNzYWdlQ2hhbmdlIiwiaGFuZGxlTWVzc2FnZVN1Ym1pdCIsImhhbmRsZUxvYWRNb3JlIiwiaGFuZGxlRW1vamlUb2dnbGUiLCJnZXRGaWx0ZXJlZFBhcnRpY2lwYW50cyIsImluc2VydE1lbnRpb24iLCJyZW1vdmVGaWxlUHJldmlldyIsInVuZGVmaW5lZCIsImNsZWFudXAiLCJyZWFzb24iLCJjdXJyZW50IiwicXVlcnkiLCJlbWl0Iiwib2ZmIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXIiLCJzaXplIiwiZ2V0Q29ubmVjdGlvblN0YXRlIiwiaGFuZGxlUmVhY3Rpb25BZGQiLCJoYW5kbGVSZWFjdGlvblJlbW92ZSIsImhhbmRsZVJlYWN0aW9uVXBkYXRlIiwicHJvY2Vzc01lc3NhZ2VzIiwibG9hZGVkTWVzc2FnZXMiLCJoYXNNb3JlIiwiaXNJbml0aWFsTG9hZCIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwicHJldiIsIm5ld01lc3NhZ2VzIiwiZmlsdGVyIiwibXNnIiwiX2lkIiwiaGFzIiwiYWRkIiwiYWxsTWVzc2FnZXMiLCJzb3J0IiwiYSIsImIiLCJEYXRlIiwidGltZXN0YW1wIiwibWVzc2FnZU1hcCIsImZvckVhY2giLCJzZXQiLCJmcm9tIiwidmFsdWVzIiwic2V0dXBFdmVudExpc3RlbmVycyIsIm9uIiwicGFydGljaXBhbnRzIiwidXNlcklkIiwibWVzc2FnZUlkcyIsIm1hcCIsImluY2x1ZGVzIiwiYWxyZWFkeVJlYWQiLCJyZWFkZXJzIiwic29tZSIsInJlYWRlciIsInJlYWRBdCIsImlzRHVwbGljYXRlIiwiaGFuZGxlUHJldmlvdXNNZXNzYWdlcyIsInJlc3BvbnNlIiwibGVuZ3RoIiwiZGF0YSIsInJlcGxhY2UiLCJjb25zb2xlIiwiY29kZSIsInNldHVwUm9vbSIsImpvaW5Sb29tIiwibG9hZEluaXRpYWxNZXNzYWdlcyIsImZldGNoUm9vbURhdGEiLCJoYW5kbGVTZXNzaW9uRXJyb3IiLCJoYW5kbGVDb25uZWN0IiwiY2F0Y2giLCJoYW5kbGVEaXNjb25uZWN0IiwiaGFuZGxlRXJyb3IiLCJoYW5kbGVSZWNvbm5lY3RpbmciLCJhdHRlbXB0TnVtYmVyIiwiaGFuZGxlUmVjb25uZWN0U3VjY2VzcyIsImluaXRpYWxpemVDaGF0IiwiYXNQYXRoIiwidG9rZW5DaGVja0ludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiaGFuZGxlQmVmb3JlVW5sb2FkIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmaWxlSW5wdXRSZWYiLCJmaWxlVXBsb2FkaW5nIiwiZmlsZVVwbG9hZFByb2dyZXNzIiwiZmlsZVVwbG9hZEVycm9yIiwiaGFuZGxlRmlsZVVwbG9hZCIsImhhbmRsZUZpbGVTZWxlY3QiLCJoYW5kbGVGaWxlRHJvcCIsInJlbW92ZUZpbGUiLCJoYW5kbGVLZXlEb3duIiwiZSIsImtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJyZXRyeU1lc3NhZ2VMb2FkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useChatRoom.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useFileHandling.js":
/*!**********************************!*\
  !*** ./hooks/useFileHandling.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useFileHandling: () => (/* binding */ useFileHandling)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\n/* harmony import */ var _services_fileService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/fileService */ \"(pages-dir-node)/./services/fileService.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_Toast__WEBPACK_IMPORTED_MODULE_1__, _services_fileService__WEBPACK_IMPORTED_MODULE_2__]);\n([_components_Toast__WEBPACK_IMPORTED_MODULE_1__, _services_fileService__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst useFileHandling = (socketRef, currentUser, router, handleSessionError)=>{\n    const [filePreview, setFilePreview] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [uploadProgress, setUploadProgress] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [uploadError, setUploadError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const handleFileUpload = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFileHandling.useCallback[handleFileUpload]\": async (file, content = '')=>{\n            if (!socketRef.current?.connected || !currentUser) {\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error('채팅 서버와 연결이 끊어졌습니다.');\n                return;\n            }\n            // router.query가 초기화되지 않았을 때 처리\n            const roomId = router?.query?.room;\n            if (!roomId) {\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error('채팅방 정보를 찾을 수 없습니다.');\n                return;\n            }\n            try {\n                setUploading(true);\n                setUploadError(null);\n                setUploadProgress(0);\n                const uploadResponse = await _services_fileService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].uploadFile(file, {\n                    \"useFileHandling.useCallback[handleFileUpload]\": (progress)=>setUploadProgress(progress)\n                }[\"useFileHandling.useCallback[handleFileUpload]\"], currentUser.token, currentUser.sessionId);\n                if (!uploadResponse.success) {\n                    throw new Error(uploadResponse.message || '파일 업로드에 실패했습니다.');\n                }\n                await socketRef.current.emit('chatMessage', {\n                    room: roomId,\n                    type: 'file',\n                    content: content,\n                    fileData: {\n                        _id: uploadResponse.data.file._id,\n                        filename: uploadResponse.data.file.filename,\n                        originalname: uploadResponse.data.file.originalname,\n                        mimetype: uploadResponse.data.file.mimetype,\n                        size: uploadResponse.data.file.size\n                    }\n                });\n                setFilePreview(null);\n                setUploading(false);\n                setUploadProgress(0);\n            } catch (error) {\n                console.error('File upload error:', error);\n                if (error.message?.includes('세션') || error.message?.includes('인증') || error.message?.includes('토큰')) {\n                    await handleSessionError();\n                    return;\n                }\n                setUploadError(error.message || '파일 업로드에 실패했습니다.');\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error(error.message || '파일 업로드에 실패했습니다.');\n            } finally{\n                setUploading(false);\n            }\n        }\n    }[\"useFileHandling.useCallback[handleFileUpload]\"], [\n        socketRef,\n        currentUser,\n        router,\n        handleSessionError\n    ]);\n    const handleFileSelect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFileHandling.useCallback[handleFileSelect]\": async (file)=>{\n            try {\n                // 파일 유효성 검사\n                const validationResult = await _services_fileService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].validateFile(file);\n                if (!validationResult.success) {\n                    throw new Error(validationResult.message);\n                }\n                // 미리보기 생성\n                const preview = {\n                    file,\n                    url: URL.createObjectURL(file),\n                    name: file.name,\n                    type: file.type,\n                    size: file.size\n                };\n                setFilePreview(preview);\n                setUploadError(null);\n            } catch (error) {\n                console.error('File selection error:', error);\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error(error.message || '파일 선택 중 오류가 발생했습니다.');\n                if (fileInputRef.current) {\n                    fileInputRef.current.value = '';\n                }\n            }\n        }\n    }[\"useFileHandling.useCallback[handleFileSelect]\"], []);\n    const handleFileDrop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFileHandling.useCallback[handleFileDrop]\": async (e)=>{\n            e.preventDefault();\n            e.stopPropagation();\n            const files = Array.from(e.dataTransfer.files);\n            if (files.length === 0) return;\n            try {\n                await handleFileSelect(files[0]);\n            } catch (error) {\n                console.error('File drop error:', error);\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error(error.message || '파일 드롭 중 오류가 발생했습니다.');\n            }\n        }\n    }[\"useFileHandling.useCallback[handleFileDrop]\"], [\n        handleFileSelect\n    ]);\n    const removeFilePreview = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFileHandling.useCallback[removeFilePreview]\": ()=>{\n            if (filePreview?.url) {\n                URL.revokeObjectURL(filePreview.url);\n            }\n            setFilePreview(null);\n            setUploadError(null);\n            setUploadProgress(0);\n            if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n            }\n        }\n    }[\"useFileHandling.useCallback[removeFilePreview]\"], [\n        filePreview\n    ]);\n    const handlePaste = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFileHandling.useCallback[handlePaste]\": async (e)=>{\n            const items = e.clipboardData?.items;\n            if (!items) return;\n            const fileItem = Array.from(items).find({\n                \"useFileHandling.useCallback[handlePaste].fileItem\": (item)=>item.kind === 'file' && (item.type.startsWith('image/') || item.type.startsWith('video/') || item.type.startsWith('audio/') || item.type === 'application/pdf')\n            }[\"useFileHandling.useCallback[handlePaste].fileItem\"]);\n            if (!fileItem) return;\n            const file = fileItem.getAsFile();\n            if (!file) return;\n            try {\n                await handleFileSelect(file);\n                e.preventDefault();\n            } catch (error) {\n                console.error('File paste error:', error);\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error(error.message || '파일 붙여넣기 중 오류가 발생했습니다.');\n            }\n        }\n    }[\"useFileHandling.useCallback[handlePaste]\"], [\n        handleFileSelect\n    ]);\n    // Cleanup on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFileHandling.useEffect\": ()=>{\n            return ({\n                \"useFileHandling.useEffect\": ()=>{\n                    if (filePreview?.url) {\n                        URL.revokeObjectURL(filePreview.url);\n                    }\n                }\n            })[\"useFileHandling.useEffect\"];\n        }\n    }[\"useFileHandling.useEffect\"], [\n        filePreview\n    ]);\n    return {\n        filePreview,\n        uploading,\n        uploadProgress,\n        uploadError,\n        fileInputRef,\n        setFilePreview,\n        setUploading,\n        setUploadProgress,\n        setUploadError,\n        handleFileUpload,\n        handleFileSelect,\n        handleFileDrop,\n        handlePaste,\n        removeFilePreview\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useFileHandling);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2hvb2tzL3VzZUZpbGVIYW5kbGluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBaUU7QUFDckI7QUFDTTtBQUUzQyxNQUFNTSxrQkFBa0IsQ0FBQ0MsV0FBV0MsYUFBYUMsUUFBUUM7SUFDOUQsTUFBTSxDQUFDQyxhQUFhQyxlQUFlLEdBQUdaLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ2EsV0FBV0MsYUFBYSxHQUFHZCwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNlLGdCQUFnQkMsa0JBQWtCLEdBQUdoQiwrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUNpQixhQUFhQyxlQUFlLEdBQUdsQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNbUIsZUFBZWpCLDZDQUFNQSxDQUFDO0lBRTVCLE1BQU1rQixtQkFBbUJqQixrREFBV0E7eURBQUMsT0FBT2tCLE1BQU1DLFVBQVUsRUFBRTtZQUM1RCxJQUFJLENBQUNmLFVBQVVnQixPQUFPLEVBQUVDLGFBQWEsQ0FBQ2hCLGFBQWE7Z0JBQ2pESixvREFBS0EsQ0FBQ3FCLEtBQUssQ0FBQztnQkFDWjtZQUNGO1lBRUEsK0JBQStCO1lBQy9CLE1BQU1DLFNBQVNqQixRQUFRa0IsT0FBT0M7WUFDOUIsSUFBSSxDQUFDRixRQUFRO2dCQUNYdEIsb0RBQUtBLENBQUNxQixLQUFLLENBQUM7Z0JBQ1o7WUFDRjtZQUVBLElBQUk7Z0JBQ0ZYLGFBQWE7Z0JBQ2JJLGVBQWU7Z0JBQ2ZGLGtCQUFrQjtnQkFFbEIsTUFBTWEsaUJBQWlCLE1BQU14Qix3RUFBc0IsQ0FDakRnQjtxRUFDQSxDQUFDVSxXQUFhZixrQkFBa0JlO29FQUNoQ3ZCLFlBQVl3QixLQUFLLEVBQ2pCeEIsWUFBWXlCLFNBQVM7Z0JBR3ZCLElBQUksQ0FBQ0osZUFBZUssT0FBTyxFQUFFO29CQUMzQixNQUFNLElBQUlDLE1BQU1OLGVBQWVPLE9BQU8sSUFBSTtnQkFDNUM7Z0JBRUEsTUFBTTdCLFVBQVVnQixPQUFPLENB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NUQsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvaG9va3MvdXNlRmlsZUhhbmRsaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUb2FzdCB9IGZyb20gJy4uL2NvbXBvbmVudHMvVG9hc3QnO1xuaW1wb3J0IGZpbGVTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2ZpbGVTZXJ2aWNlJztcblxuZXhwb3J0IGNvbnN0IHVzZUZpbGVIYW5kbGluZyA9IChzb2NrZXRSZWYsIGN1cnJlbnRVc2VyLCByb3V0ZXIsIGhhbmRsZVNlc3Npb25FcnJvcikgPT4ge1xuICBjb25zdCBbZmlsZVByZXZpZXcsIHNldEZpbGVQcmV2aWV3XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbdXBsb2FkaW5nLCBzZXRVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXBsb2FkUHJvZ3Jlc3MsIHNldFVwbG9hZFByb2dyZXNzXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbdXBsb2FkRXJyb3IsIHNldFVwbG9hZEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWxlLCBjb250ZW50ID0gJycpID0+IHtcbiAgICBpZiAoIXNvY2tldFJlZi5jdXJyZW50Py5jb25uZWN0ZWQgfHwgIWN1cnJlbnRVc2VyKSB7XG4gICAgICBUb2FzdC5lcnJvcign7LGE7YyFIOyEnOuyhOyZgCDsl7DqsrDsnbQg64GK7Ja07KGM7Iq164uI64ukLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHJvdXRlci5xdWVyeeqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7J2EIOuVjCDsspjrpqxcbiAgICBjb25zdCByb29tSWQgPSByb3V0ZXI/LnF1ZXJ5Py5yb29tO1xuICAgIGlmICghcm9vbUlkKSB7XG4gICAgICBUb2FzdC5lcnJvcign7LGE7YyF67CpIOygleuztOulvCDssL7snYQg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgc2V0VXBsb2FkaW5nKHRydWUpO1xuICAgICAgc2V0VXBsb2FkRXJyb3IobnVsbCk7XG4gICAgICBzZXRVcGxvYWRQcm9ncmVzcygwKTtcblxuICAgICAgY29uc3QgdXBsb2FkUmVzcG9uc2UgPSBhd2FpdCBmaWxlU2VydmljZS51cGxvYWRGaWxlKFxuICAgICAgICBmaWxlLFxuICAgICAgICAocHJvZ3Jlc3MpID0+IHNldFVwbG9hZFByb2dyZXNzKHByb2dyZXNzKSxcbiAgICAgICAgY3VycmVudFVzZXIudG9rZW4sXG4gICAgICAgIGN1cnJlbnRVc2VyLnNlc3Npb25JZFxuICAgICAgKTtcblxuICAgICAgaWYgKCF1cGxvYWRSZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih1cGxvYWRSZXNwb25zZS5tZXNzYWdlIHx8ICftjIzsnbwg7JeF66Gc65Oc7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnY2hhdE1lc3NhZ2UnLCB7XG4gICAgICAgIHJvb206IHJvb21JZCxcbiAgICAgICAgdHlwZTogJ2ZpbGUnLFxuICAgICAgICBjb250ZW50OiBjb250ZW50LFxuICAgICAgICBmaWxlRGF0YToge1xuICAgICAgICAgIF9pZDogdXBsb2FkUmVzcG9uc2UuZGF0YS5maWxlLl9pZCxcbiAgICAgICAgICBmaWxlbmFtZTogdXBsb2FkUmVzcG9uc2UuZGF0YS5maWxlLmZpbGVuYW1lLFxuICAgICAgICAgIG9yaWdpbmFsbmFtZTogdXBsb2FkUmVzcG9uc2UuZGF0YS5maWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICBtaW1ldHlwZTogdXBsb2FkUmVzcG9uc2UuZGF0YS5maWxlLm1pbWV0eXBlLFxuICAgICAgICAgIHNpemU6IHVwbG9hZFJlc3BvbnNlLmRhdGEuZmlsZS5zaXplXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzZXRGaWxlUHJldmlldyhudWxsKTtcbiAgICAgIHNldFVwbG9hZGluZyhmYWxzZSk7XG4gICAgICBzZXRVcGxvYWRQcm9ncmVzcygwKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGaWxlIHVwbG9hZCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygn7IS47IWYJykgfHwgXG4gICAgICAgICAgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ+yduOymnScpIHx8IFxuICAgICAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCfthqDtgbAnKSkge1xuICAgICAgICBhd2FpdCBoYW5kbGVTZXNzaW9uRXJyb3IoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZXRVcGxvYWRFcnJvcihlcnJvci5tZXNzYWdlIHx8ICftjIzsnbwg7JeF66Gc65Oc7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcbiAgICAgIFRvYXN0LmVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+2MjOydvCDsl4XroZzrk5zsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRVcGxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3NvY2tldFJlZiwgY3VycmVudFVzZXIsIHJvdXRlciwgaGFuZGxlU2Vzc2lvbkVycm9yXSk7XG5cbiAgY29uc3QgaGFuZGxlRmlsZVNlbGVjdCA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIO2MjOydvCDsnKDtmqjshLEg6rKA7IKsXG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgZmlsZVNlcnZpY2UudmFsaWRhdGVGaWxlKGZpbGUpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHZhbGlkYXRpb25SZXN1bHQubWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIOuvuOumrOuztOq4sCDsg53shLFcbiAgICAgIGNvbnN0IHByZXZpZXcgPSB7XG4gICAgICAgIGZpbGUsXG4gICAgICAgIHVybDogVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSxcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgIHNpemU6IGZpbGUuc2l6ZVxuICAgICAgfTtcblxuICAgICAgc2V0RmlsZVByZXZpZXcocHJldmlldyk7XG4gICAgICBzZXRVcGxvYWRFcnJvcihudWxsKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGaWxlIHNlbGVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICBUb2FzdC5lcnJvcihlcnJvci5tZXNzYWdlIHx8ICftjIzsnbwg7ISg7YOdIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicpO1xuICAgICAgXG4gICAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVGaWxlRHJvcCA9IHVzZUNhbGxiYWNrKGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS5kYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBoYW5kbGVGaWxlU2VsZWN0KGZpbGVzWzBdKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmlsZSBkcm9wIGVycm9yOicsIGVycm9yKTtcbiAgICAgIFRvYXN0LmVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+2MjOydvCDrk5zroa0g7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJyk7XG4gICAgfVxuICB9LCBbaGFuZGxlRmlsZVNlbGVjdF0pO1xuXG4gIGNvbnN0IHJlbW92ZUZpbGVQcmV2aWV3ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChmaWxlUHJldmlldz8udXJsKSB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGZpbGVQcmV2aWV3LnVybCk7XG4gICAgfVxuICAgIHNldEZpbGVQcmV2aWV3KG51bGwpO1xuICAgIHNldFVwbG9hZEVycm9yKG51bGwpO1xuICAgIHNldFVwbG9hZFByb2dyZXNzKDApO1xuXG4gICAgaWYgKGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfSwgW2ZpbGVQcmV2aWV3XSk7XG5cbiAgY29uc3QgaGFuZGxlUGFzdGUgPSB1c2VDYWxsYmFjayhhc3luYyAoZSkgPT4ge1xuICAgIGNvbnN0IGl0ZW1zID0gZS5jbGlwYm9hcmREYXRhPy5pdGVtcztcbiAgICBpZiAoIWl0ZW1zKSByZXR1cm47XG5cbiAgICBjb25zdCBmaWxlSXRlbSA9IEFycmF5LmZyb20oaXRlbXMpLmZpbmQoXG4gICAgICBpdGVtID0+IGl0ZW0ua2luZCA9PT0gJ2ZpbGUnICYmIChcbiAgICAgICAgaXRlbS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpIHx8XG4gICAgICAgIGl0ZW0udHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSB8fFxuICAgICAgICBpdGVtLnR5cGUuc3RhcnRzV2l0aCgnYXVkaW8vJykgfHxcbiAgICAgICAgaXRlbS50eXBlID09PSAnYXBwbGljYXRpb24vcGRmJ1xuICAgICAgKVxuICAgICk7XG5cbiAgICBpZiAoIWZpbGVJdGVtKSByZXR1cm47XG5cbiAgICBjb25zdCBmaWxlID0gZmlsZUl0ZW0uZ2V0QXNGaWxlKCk7XG4gICAgaWYgKCFmaWxlKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgaGFuZGxlRmlsZVNlbGVjdChmaWxlKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmlsZSBwYXN0ZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICBUb2FzdC5lcnJvcihlcnJvci5tZXNzYWdlIHx8ICftjIzsnbwg67aZ7Jes64Sj6riwIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicpO1xuICAgIH1cbiAgfSwgW2hhbmRsZUZpbGVTZWxlY3RdKTtcblxuICAvLyBDbGVhbnVwIG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGZpbGVQcmV2aWV3Py51cmwpIHtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChmaWxlUHJldmlldy51cmwpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtmaWxlUHJldmlld10pO1xuXG4gIHJldHVybiB7XG4gICAgZmlsZVByZXZpZXcsXG4gICAgdXBsb2FkaW5nLFxuICAgIHVwbG9hZFByb2dyZXNzLFxuICAgIHVwbG9hZEVycm9yLFxuICAgIGZpbGVJbnB1dFJlZixcbiAgICBzZXRGaWxlUHJldmlldyxcbiAgICBzZXRVcGxvYWRpbmcsXG4gICAgc2V0VXBsb2FkUHJvZ3Jlc3MsXG4gICAgc2V0VXBsb2FkRXJyb3IsXG4gICAgaGFuZGxlRmlsZVVwbG9hZCxcbiAgICBoYW5kbGVGaWxlU2VsZWN0LFxuICAgIGhhbmRsZUZpbGVEcm9wLFxuICAgIGhhbmRsZVBhc3RlLFxuICAgIHJlbW92ZUZpbGVQcmV2aWV3XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VGaWxlSGFuZGxpbmc7Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJUb2FzdCIsImZpbGVTZXJ2aWNlIiwidXNlRmlsZUhhbmRsaW5nIiwic29ja2V0UmVmIiwiY3VycmVudFVzZXIiLCJyb3V0ZXIiLCJoYW5kbGVTZXNzaW9uRXJyb3IiLCJmaWxlUHJldmlldyIsInNldEZpbGVQcmV2aWV3IiwidXBsb2FkaW5nIiwic2V0VXBsb2FkaW5nIiwidXBsb2FkUHJvZ3Jlc3MiLCJzZXRVcGxvYWRQcm9ncmVzcyIsInVwbG9hZEVycm9yIiwic2V0VXBsb2FkRXJyb3IiLCJmaWxlSW5wdXRSZWYiLCJoYW5kbGVGaWxlVXBsb2FkIiwiZmlsZSIsImNvbnRlbnQiLCJjdXJyZW50IiwiY29ubmVjdGVkIiwiZXJyb3IiLCJyb29tSWQiLCJxdWVyeSIsInJvb20iLCJ1cGxvYWRSZXNwb25zZSIsInVwbG9hZEZpbGUiLCJwcm9ncmVzcyIsInRva2VuIiwic2Vzc2lvbklkIiwic3VjY2VzcyIsIkVycm9yIiwibWVzc2FnZSIsImVtaXQiLCJ0eXBlIiwiZmlsZURhdGEiLCJfaWQiLCJkYXRhIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJtaW1ldHlwZSIsInNpemUiLCJjb25zb2xlIiwiaW5jbHVkZXMiLCJoYW5kbGVGaWxlU2VsZWN0IiwidmFsaWRhdGlvblJlc3VsdCIsInZhbGlkYXRlRmlsZSIsInByZXZpZXciLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJuYW1lIiwidmFsdWUiLCJoYW5kbGVGaWxlRHJvcCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImZpbGVzIiwiQXJyYXkiLCJmcm9tIiwiZGF0YVRyYW5zZmVyIiwibGVuZ3RoIiwicmVtb3ZlRmlsZVByZXZpZXciLCJyZXZva2VPYmplY3RVUkwiLCJoYW5kbGVQYXN0ZSIsIml0ZW1zIiwiY2xpcGJvYXJkRGF0YSIsImZpbGVJdGVtIiwiZmluZCIsIml0ZW0iLCJraW5kIiwic3RhcnRzV2l0aCIsImdldEFzRmlsZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useFileHandling.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useInfiniteScroll.js":
/*!************************************!*\
  !*** ./hooks/useInfiniteScroll.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useInfiniteScroll: () => (/* binding */ useInfiniteScroll)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n/**\n * IntersectionObserver 기반 무한 스크롤 훅\n * \n * @param {Function} onLoadMore - 더 로드할 때 호출할 함수\n * @param {boolean} hasMore - 더 불러올 데이터가 있는지 여부\n * @param {boolean} isLoading - 현재 로딩 중인지 여부\n * @param {Object} options - IntersectionObserver 옵션\n * @returns {Object} { sentinelRef } - Sentinel 요소에 연결할 ref\n */ const useInfiniteScroll = (onLoadMore, hasMore = true, isLoading = false, options = {})=>{\n    const sentinelRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const observerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const handleIntersect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInfiniteScroll.useCallback[handleIntersect]\": (entries)=>{\n            const [entry] = entries;\n            if (entry.isIntersecting && hasMore && !isLoading) {\n                onLoadMore();\n            }\n        }\n    }[\"useInfiniteScroll.useCallback[handleIntersect]\"], [\n        onLoadMore,\n        hasMore,\n        isLoading\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useInfiniteScroll.useEffect\": ()=>{\n            const sentinel = sentinelRef.current;\n            if (!sentinel || !hasMore) {\n                return;\n            }\n            // IntersectionObserver 옵션 설정\n            const observerOptions = {\n                root: options.root || null,\n                rootMargin: options.rootMargin || '0px',\n                threshold: options.threshold || 0.1,\n                ...options\n            };\n            // Observer 생성\n            observerRef.current = new IntersectionObserver(handleIntersect, observerOptions);\n            observerRef.current.observe(sentinel);\n            return ({\n                \"useInfiniteScroll.useEffect\": ()=>{\n                    if (observerRef.current && sentinel) {\n                        observerRef.current.unobserve(sentinel);\n                    }\n                }\n            })[\"useInfiniteScroll.useEffect\"];\n        }\n    }[\"useInfiniteScroll.useEffect\"], [\n        hasMore,\n        handleIntersect,\n        options\n    ]);\n    // 컴포넌트 언마운트 시 정리\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useInfiniteScroll.useEffect\": ()=>{\n            return ({\n                \"useInfiniteScroll.useEffect\": ()=>{\n                    if (observerRef.current) {\n                        observerRef.current.disconnect();\n                        observerRef.current = null;\n                    }\n                }\n            })[\"useInfiniteScroll.useEffect\"];\n        }\n    }[\"useInfiniteScroll.useEffect\"], []);\n    return {\n        sentinelRef\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useInfiniteScroll);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2hvb2tzL3VzZUluZmluaXRlU2Nyb2xsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7QUFFdkQ7Ozs7Ozs7O0NBUUMsR0FDTSxNQUFNRyxvQkFBb0IsQ0FDL0JDLFlBQ0FDLFVBQVUsSUFBSSxFQUNkQyxZQUFZLEtBQUssRUFDakJDLFVBQVUsQ0FBQyxDQUFDO0lBRVosTUFBTUMsY0FBY1IsNkNBQU1BLENBQUM7SUFDM0IsTUFBTVMsY0FBY1QsNkNBQU1BLENBQUM7SUFFM0IsTUFBTVUsa0JBQWtCUixrREFBV0E7MERBQ2pDLENBQUNTO1lBQ0MsTUFBTSxDQUFDQyxNQUFNLEdBQUdEO1lBRWhCLElBQUlDLE1BQU1DLGNBQWMsSUFBSVIsV0FBVyxDQUFDQyxXQUFXO2dCQUNqREY7WUFDRjtRQUNGO3lEQUNBO1FBQUNBO1FBQVlDO1FBQVNDO0tBQVU7SUFHbENMLGdEQUFTQTt1Q0FBQztZQUNSLE1BQU1hLFdBQVdOLFlBQVlPLE9BQU87WUFDcEMsSUFBSSxDQUFDRCxZQUFZLENBQUNULFNBQVM7Z0JBQ3pCO1lBQ0Y7WUFFQSw2QkFBNkI7WUFDN0IsTUFBTVcsa0JBQWtCO2dCQUN0QkMsTUFBTVYsUUFBUVUsSUFBSSxJQUFJO2dCQUN0QkMsWUFBWVgsUUFBUVcsVUFBVSxJQUFJO2dCQUNsQ0MsV0FBV1osUUFBUVksU0FBUyxJQUFJO2dCQUNoQyxHQUFHWixPQUFPO1lBQ1o7WUFFQSxjQUFjO1lBQ2RFLFlBQVlNLE9BQU8sR0FBRyxJQUFJSyxxQkFDeEJWLGlCQUNBTTtZQUdGUCxZQUFZTSxPQUFPLENBQUNNLE9BQU8sQ0FBQ1A7WUFFNUI7K0NBQU87b0JBQ0wsSUFBSUwsWUFBWU0sT0FBTyxJQUFJRCxVQUFVO3dCQUNuQ0wsWUFBWU0sT0FBTyxDQUFDTyxTQUFTLENBQUNSO29CQUNoQztnQkFDRjs7UUFDRjtzQ0FBRztRQUFDVDtRQUFTSztRQUFpQkg7S0FBUTtJQUV0QyxpQkFBaUI7SUFDakJOLGdEQUFTQTt1Q0FBQztZQUNSOytDQUFPO29CQUNMLElBQUlRLFlBQVlNLE9BQU8sRUFBRTt3QkFDdkJOLFlBQVlNLE9BQU8sQ0FBQ1EsVUFBVTt3QkFDOUJkLFlBQVlNLE9BQU8sR0FBRztvQkFDeEI7Z0JBQ0Y7O1FBQ0Y7c0NBQUcsRUFBRTtJQUVMLE9BQU87UUFBRVA7SUFBWTtBQUN2QixFQUFFO0FBRUYsaUVBQWVMLGlCQUFpQkEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvaG9va3MvdXNlSW5maW5pdGVTY3JvbGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG4vKipcbiAqIEludGVyc2VjdGlvbk9ic2VydmVyIOq4sOuwmCDrrLTtlZwg7Iqk7YGs66GkIO2bhVxuICogXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkxvYWRNb3JlIC0g642UIOuhnOuTnO2VoCDrlYwg7Zi47Lac7ZWgIO2VqOyImFxuICogQHBhcmFtIHtib29sZWFufSBoYXNNb3JlIC0g642UIOu2iOufrOyYrCDrjbDsnbTthLDqsIAg7J6I64qU7KeAIOyXrOu2gFxuICogQHBhcmFtIHtib29sZWFufSBpc0xvYWRpbmcgLSDtmITsnqwg66Gc65SpIOykkeyduOyngCDsl6zrtoBcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIg7Ji17IWYXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB7IHNlbnRpbmVsUmVmIH0gLSBTZW50aW5lbCDsmpTshozsl5Ag7Jew6rKw7ZWgIHJlZlxuICovXG5leHBvcnQgY29uc3QgdXNlSW5maW5pdGVTY3JvbGwgPSAoXG4gIG9uTG9hZE1vcmUsXG4gIGhhc01vcmUgPSB0cnVlLFxuICBpc0xvYWRpbmcgPSBmYWxzZSxcbiAgb3B0aW9ucyA9IHt9XG4pID0+IHtcbiAgY29uc3Qgc2VudGluZWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IG9ic2VydmVyUmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIGNvbnN0IGhhbmRsZUludGVyc2VjdCA9IHVzZUNhbGxiYWNrKFxuICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICBjb25zdCBbZW50cnldID0gZW50cmllcztcblxuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmIGhhc01vcmUgJiYgIWlzTG9hZGluZykge1xuICAgICAgICBvbkxvYWRNb3JlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbb25Mb2FkTW9yZSwgaGFzTW9yZSwgaXNMb2FkaW5nXVxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc2VudGluZWwgPSBzZW50aW5lbFJlZi5jdXJyZW50O1xuICAgIGlmICghc2VudGluZWwgfHwgIWhhc01vcmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnRlcnNlY3Rpb25PYnNlcnZlciDsmLXshZgg7ISk7KCVXG4gICAgY29uc3Qgb2JzZXJ2ZXJPcHRpb25zID0ge1xuICAgICAgcm9vdDogb3B0aW9ucy5yb290IHx8IG51bGwsIC8vIHZpZXdwb3J0IOq4sOykgFxuICAgICAgcm9vdE1hcmdpbjogb3B0aW9ucy5yb290TWFyZ2luIHx8ICcwcHgnLCAvLyAyMDBweCDsoITsl5Ag66+466asIOuhnOuTnFxuICAgICAgdGhyZXNob2xkOiBvcHRpb25zLnRocmVzaG9sZCB8fCAwLjEsIC8vIDEwJSDsnbTsg4Eg67O07J2066m0IO2KuOumrOqxsFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG5cbiAgICAvLyBPYnNlcnZlciDsg53shLFcbiAgICBvYnNlcnZlclJlZi5jdXJyZW50ID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgaGFuZGxlSW50ZXJzZWN0LFxuICAgICAgb2JzZXJ2ZXJPcHRpb25zXG4gICAgKTtcblxuICAgIG9ic2VydmVyUmVmLmN1cnJlbnQub2JzZXJ2ZShzZW50aW5lbCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKG9ic2VydmVyUmVmLmN1cnJlbnQgJiYgc2VudGluZWwpIHtcbiAgICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudC51bm9ic2VydmUoc2VudGluZWwpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtoYXNNb3JlLCBoYW5kbGVJbnRlcnNlY3QsIG9wdGlvbnNdKTtcblxuICAvLyDsu7Ttj6zrhIztirgg7Ja466eI7Jq07Yq4IOyLnCDsoJXrpqxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKG9ic2VydmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgb2JzZXJ2ZXJSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgIG9ic2VydmVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4geyBzZW50aW5lbFJlZiB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlSW5maW5pdGVTY3JvbGw7XG4iXSwibmFtZXMiOlsidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VJbmZpbml0ZVNjcm9sbCIsIm9uTG9hZE1vcmUiLCJoYXNNb3JlIiwiaXNMb2FkaW5nIiwib3B0aW9ucyIsInNlbnRpbmVsUmVmIiwib2JzZXJ2ZXJSZWYiLCJoYW5kbGVJbnRlcnNlY3QiLCJlbnRyaWVzIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsInNlbnRpbmVsIiwiY3VycmVudCIsIm9ic2VydmVyT3B0aW9ucyIsInJvb3QiLCJyb290TWFyZ2luIiwidGhyZXNob2xkIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlIiwidW5vYnNlcnZlIiwiZGlzY29ubmVjdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useInfiniteScroll.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useMessageHandling.js":
/*!*************************************!*\
  !*** ./hooks/useMessageHandling.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useMessageHandling: () => (/* binding */ useMessageHandling)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\n/* harmony import */ var _services_fileService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/fileService */ \"(pages-dir-node)/./services/fileService.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_Toast__WEBPACK_IMPORTED_MODULE_1__, _services_fileService__WEBPACK_IMPORTED_MODULE_2__]);\n([_components_Toast__WEBPACK_IMPORTED_MODULE_1__, _services_fileService__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst useMessageHandling = (socketRef, currentUser, router, handleSessionError, messages = [], loadingMessages = false, setLoadingMessages)=>{\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n    const [showEmojiPicker, setShowEmojiPicker] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showMentionList, setShowMentionList] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [mentionFilter, setMentionFilter] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n    const [mentionIndex, setMentionIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [filePreview, setFilePreview] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [uploadProgress, setUploadProgress] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [uploadError, setUploadError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const handleMessageChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMessageHandling.useCallback[handleMessageChange]\": (e)=>{\n            const newValue = e.target.value;\n            setMessage(newValue);\n            const cursorPosition = e.target.selectionStart;\n            const textBeforeCursor = newValue.slice(0, cursorPosition);\n            const atSymbolIndex = textBeforeCursor.lastIndexOf('@');\n            if (atSymbolIndex !== -1) {\n                const mentionText = textBeforeCursor.slice(atSymbolIndex + 1);\n                if (!mentionText.includes(' ')) {\n                    setMentionFilter(mentionText.toLowerCase());\n                    setShowMentionList(true);\n                    setMentionIndex(0);\n                    return;\n                }\n            }\n            setShowMentionList(false);\n        }\n    }[\"useMessageHandling.useCallback[handleMessageChange]\"], []);\n    const handleLoadMore = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMessageHandling.useCallback[handleLoadMore]\": ()=>{\n            if (!socketRef.current?.connected) {\n                return;\n            }\n            if (loadingMessages) {\n                return;\n            }\n            // 가장 오래된 메시지의 타임스탬프 찾기\n            const sortedMessages = [\n                ...messages\n            ].sort({\n                \"useMessageHandling.useCallback[handleLoadMore].sortedMessages\": (a, b)=>new Date(a.timestamp) - new Date(b.timestamp)\n            }[\"useMessageHandling.useCallback[handleLoadMore].sortedMessages\"]);\n            const oldestMessage = sortedMessages[0];\n            const beforeTimestamp = oldestMessage?.timestamp;\n            if (!beforeTimestamp) {\n                return;\n            }\n            setLoadingMessages(true);\n            // Socket.IO 이벤트만 발행 - 응답은 useChatRoom의 previousMessages 이벤트 핸들러에서 처리\n            socketRef.current.emit('fetchPreviousMessages', {\n                roomId: router?.query?.room,\n                before: beforeTimestamp,\n                limit: 30\n            });\n        }\n    }[\"useMessageHandling.useCallback[handleLoadMore]\"], [\n        socketRef,\n        router?.query?.room,\n        loadingMessages,\n        messages,\n        setLoadingMessages\n    ]);\n    const handleMessageSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMessageHandling.useCallback[handleMessageSubmit]\": async (messageData)=>{\n            if (!socketRef.current?.connected || !currentUser) {\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error('채팅 서버와 연결이 끊어졌습니다.');\n                return;\n            }\n            const roomId = router?.query?.room;\n            if (!roomId) {\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error('채팅방 정보를 찾을 수 없습니다.');\n                return;\n            }\n            try {\n                if (messageData.type === 'file') {\n                    setUploading(true);\n                    setUploadError(null);\n                    setUploadProgress(0);\n                    const uploadResponse = await _services_fileService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].uploadFile(messageData.fileData.file, {\n                        \"useMessageHandling.useCallback[handleMessageSubmit]\": (progress)=>setUploadProgress(progress)\n                    }[\"useMessageHandling.useCallback[handleMessageSubmit]\"], currentUser.token, currentUser.sessionId);\n                    if (!uploadResponse.success) {\n                        throw new Error(uploadResponse.message || '파일 업로드에 실패했습니다.');\n                    }\n                    socketRef.current.emit('chatMessage', {\n                        room: roomId,\n                        type: 'file',\n                        content: messageData.content || '',\n                        fileData: {\n                            _id: uploadResponse.data.file._id,\n                            filename: uploadResponse.data.file.filename,\n                            originalname: uploadResponse.data.file.originalname,\n                            mimetype: uploadResponse.data.file.mimetype,\n                            size: uploadResponse.data.file.size\n                        }\n                    });\n                    setFilePreview(null);\n                    setMessage('');\n                    setUploading(false);\n                    setUploadProgress(0);\n                } else if (messageData.content?.trim()) {\n                    socketRef.current.emit('chatMessage', {\n                        room: roomId,\n                        type: 'text',\n                        content: messageData.content.trim()\n                    });\n                    setMessage('');\n                }\n                setShowEmojiPicker(false);\n                setShowMentionList(false);\n            } catch (error) {\n                if (error.message?.includes('세션') || error.message?.includes('인증') || error.message?.includes('토큰')) {\n                    await handleSessionError();\n                    return;\n                }\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error(error.message || '메시지 전송 중 오류가 발생했습니다.');\n                if (messageData.type === 'file') {\n                    setUploadError(error.message);\n                    setUploading(false);\n                }\n            }\n        }\n    }[\"useMessageHandling.useCallback[handleMessageSubmit]\"], [\n        currentUser,\n        router,\n        handleSessionError,\n        socketRef\n    ]);\n    const handleEmojiToggle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMessageHandling.useCallback[handleEmojiToggle]\": ()=>{\n            setShowEmojiPicker({\n                \"useMessageHandling.useCallback[handleEmojiToggle]\": (prev)=>!prev\n            }[\"useMessageHandling.useCallback[handleEmojiToggle]\"]);\n        }\n    }[\"useMessageHandling.useCallback[handleEmojiToggle]\"], []);\n    const getFilteredParticipants = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMessageHandling.useCallback[getFilteredParticipants]\": (room)=>{\n            if (!room?.participants) return [];\n            return room.participants.filter({\n                \"useMessageHandling.useCallback[getFilteredParticipants]\": (user)=>user.name.toLowerCase().includes(mentionFilter) || user.email.toLowerCase().includes(mentionFilter)\n            }[\"useMessageHandling.useCallback[getFilteredParticipants]\"]);\n        }\n    }[\"useMessageHandling.useCallback[getFilteredParticipants]\"], [\n        mentionFilter\n    ]);\n    const insertMention = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMessageHandling.useCallback[insertMention]\": (messageInputRef, user)=>{\n            if (!messageInputRef?.current) return;\n            const cursorPosition = messageInputRef.current.selectionStart;\n            const textBeforeCursor = message.slice(0, cursorPosition);\n            const atSymbolIndex = textBeforeCursor.lastIndexOf('@');\n            if (atSymbolIndex !== -1) {\n                const textBeforeAt = message.slice(0, atSymbolIndex);\n                const newMessage = textBeforeAt + `@${user.name} ` + message.slice(cursorPosition);\n                setMessage(newMessage);\n                setShowMentionList(false);\n                setTimeout({\n                    \"useMessageHandling.useCallback[insertMention]\": ()=>{\n                        const newPosition = atSymbolIndex + user.name.length + 2;\n                        messageInputRef.current.focus();\n                        messageInputRef.current.setSelectionRange(newPosition, newPosition);\n                    }\n                }[\"useMessageHandling.useCallback[insertMention]\"], 0);\n            }\n        }\n    }[\"useMessageHandling.useCallback[insertMention]\"], [\n        message\n    ]);\n    const removeFilePreview = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMessageHandling.useCallback[removeFilePreview]\": ()=>{\n            setFilePreview(null);\n            setUploadError(null);\n            setUploadProgress(0);\n        }\n    }[\"useMessageHandling.useCallback[removeFilePreview]\"], []);\n    return {\n        message,\n        showEmojiPicker,\n        showMentionList,\n        mentionFilter,\n        mentionIndex,\n        filePreview,\n        uploading,\n        uploadProgress,\n        uploadError,\n        setMessage,\n        setShowEmojiPicker,\n        setShowMentionList,\n        setMentionFilter,\n        setMentionIndex,\n        setFilePreview,\n        handleMessageChange,\n        handleMessageSubmit,\n        handleEmojiToggle,\n        handleLoadMore,\n        getFilteredParticipants,\n        insertMention,\n        removeFilePreview\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useMessageHandling);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2hvb2tzL3VzZU1lc3NhZ2VIYW5kbGluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEM7QUFDRjtBQUNNO0FBRTNDLE1BQU1JLHFCQUFxQixDQUFDQyxXQUFXQyxhQUFhQyxRQUFRQyxvQkFBb0JDLFdBQVcsRUFBRSxFQUFFQyxrQkFBa0IsS0FBSyxFQUFFQztJQUM5SCxNQUFNLENBQUNDLFNBQVNDLFdBQVcsR0FBR2IsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDYyxpQkFBaUJDLG1CQUFtQixHQUFHZiwrQ0FBUUEsQ0FBQztJQUN2RCxNQUFNLENBQUNnQixpQkFBaUJDLG1CQUFtQixHQUFHakIsK0NBQVFBLENBQUM7SUFDdkQsTUFBTSxDQUFDa0IsZUFBZUMsaUJBQWlCLEdBQUduQiwrQ0FBUUEsQ0FBQztJQUNuRCxNQUFNLENBQUNvQixjQUFjQyxnQkFBZ0IsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3NCLGFBQWFDLGVBQWUsR0FBR3ZCLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ3dCLFdBQVdDLGFBQWEsR0FBR3pCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQzBCLGdCQUFnQkMsa0JBQWtCLEdBQUczQiwrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNLENBQUM0QixhQUFhQyxlQUFlLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUUvQyxNQUFNOEIsc0JBQXNCN0Isa0RBQVdBOytEQUFDLENBQUM4QjtZQUN2QyxNQUFNQyxXQUFXRCxFQUFFRSxNQUFNLENBQUNDLEtBQUs7WUFDL0JyQixXQUFXbUI7WUFFWCxNQUFNRyxpQkFBaUJKLEVBQUVFLE1BQU0sQ0FBQ0csY0FBYztZQUM5QyxNQUFNQyxtQkFBbUJMLFNBQVNNLEtBQUssQ0FBQyxHQUFHSDtZQUMzQyxNQUFNSSxnQkFBZ0JGLGlCQUFpQkcsV0FBVyxDQUFDO1lBRW5ELElBQUlELGtCQUFrQixDQUFDLEdBQUc7Z0JBQ3hCLE1BQU1FLGNBQWNKLGlCQUFpQkMsS0FBSyxDQUFDQyxnQkFBZ0I7Z0JBQzNELElBQUksQ0FBQ0UsWUFBWUMsUUFBUSxDQUFDLE1BQU07b0JBQzlCdkIsaUJBQWlCc0IsWUFBWUUsV0FBVztvQkFDeEMxQixtQkFBbUI7b0JBQ25CSSxnQkFBZ0I7b0JBQ2hCO2dCQUNGO1lBQ0Y7WUFFQUosbUJBQW1CO1FBQ3JCOzhEQUFHLEVBQUU7SUFFSixNQUFNMkIsaUJBQWlCM0Msa0RBQVdBOzBEQUFDO1lBQ2pDLElBQUksQ0FBQ0ksVUFBVXdDLE9BQU8sRUFBRUMsV0FBVztnQkFDakM7WUFDRjtZQUVBLElBQUlwQyxpQkFBaUI7Z0JBQ25CO1lBQ0Y7WUFFQSx1QkFBdUI7WUFDdkIsTUFBTXFDLGlCQUFpQjttQkFBSXRDO2FBQVMsQ0FBQ3VDLElBQUk7aUZBQ3ZDLENBQUNDLEdBQUdDLElBQU0sSUFBSUMsS0FBS0YsRUFBRUcsU0FBUyxJQUFJLElBQUlELEtBQUtELEVBQUVFLFNBQVM7O1lBRXhELE1BQU1DLGdCQUFnQk4sY0FBYyxDQUFDLEVBQUU7WUFDdkMsTUFBTU8sa0JBQWtCRCxlQUFlRDtZQUV2QyxJQUFJLENBQUNFLGlCQUFpQjtnQkFDcEI7WUFDRjtZQUVBM0MsbUJBQW1CO1lBRW5CLHFFQUFxRTtZQUNyRU4sVUFBVXdDLE9BQU8sQ0FBQ1UsSUFBSSxDQUFDLHlCQUF5QjtnQkFDOUNDLFFBQVFqRCxRQUFRa0QsT0FBT0M7Z0JBQ3ZCQyxRQUFRTDtnQkFDUk0sT0FBTztZQUNUO1FBQ0Y7eURBQUc7UUFBQ3ZEO1FBQVdFLFFBQVFrRCxPQUFPQztRQUFNaEQ7UUFBaUJEO1FBQVVFO0tBQW1CO0lBRW5GLE1BQU1rRCxzQkFBc0I1RCxrREFBV0E7K0RBQUMsT0FBTzZEO1lBQzdDLElBQUksQ0FBQ3pELFVBQVV3QyxPQUFPLEVBQUVDLGFBQWEsQ0FBQ3hDLGFBQWE7Z0JBQ2pESixvREFBS0EsQ0FBQzZELEtBQUssQ0FBQztnQkFDWjtZQUNGO1lBRUEsTUFBTVAsU0FBU2pELFFBQVFrRCxPQUFPQztZQUM5QixJQUFJLENBQUNGLFFBQVE7Z0JBQ1h0RCxvREFBS0EsQ0FBQzZELEtBQUssQ0FBQztnQkFDWjtZQUNGO1lBRUEsSUFBSTtnQkFDRCxJQUFJRCxZQUFZRSxJQUFJLEtBQUssUUFBUTtvQkFDL0J2QyxhQUFhO29CQUNiSSxlQUFlO29CQUNmRixrQkFBa0I7b0JBRWxCLE1BQU1zQyxpQkFBaUIsTUFBTTlELHdFQUFzQixDQUNqRDJELFlBQVlLLFFBQVEsQ0FBQ0MsSUFBSTsrRUFDekIsQ0FBQ0MsV0FBYTFDLGtCQUFrQjBDOzhFQUNoQy9ELFlBQVlnRSxLQUFLLEVBQ2pCaEUsWUFBWWlFLFNBQVM7b0JBR3hCLElBQUksQ0FBQ04sZUFBZU8sT0FBTyxFQUFFO3dCQUMzQixNQUFNLElBQUlDLE1BQU1SLGVBQWVyRCxPQUFPLElBQUk7b0JBQzVDO29CQUVBUCxVQUFVd0MsT0FBTyxDQUFDVSxJQUFJLENBQUMsZUFBZTt3QkFDcENHLE1BQU1GO3dCQUNOUSxNQUFNO3dCQUNOVSxTQUFTWixZQUFZWSxPQUFPLElBQUk7d0JBQ2hDUCxVQUFVOzRCQUNSUSxLQUFLVixlQUFlVyxJQUFJLENBQUNSLElBQUksQ0FBQ08sR0FBRzs0QkFDakNFLFVBQVVaLGVBQWVXLElBQUksQ0FBQ1IsSUFBSSxDQUFDUyxRQUFROzRCQUMzQ0MsY0FBY2IsZUFBZVcsSUFBSSxDQUFDUixJQUFJLENBQUNVLFlBQVk7NEJBQ25EQyxVQUFVZCxlQUFlVyxJQUFJLENBQUNSLElBQUksQ0FBQ1csUUFBUTs0QkFDM0NDLE1BQU1mLGVBQWVXLElBQUksQ0FBQ1IsSUFBSSxDQUFDWSxJQUFJO3dCQUNyQztvQkFDRjtvQkFFQXpELGVBQWU7b0JBQ2ZWLFdBQVc7b0JBQ1hZLGFBQWE7b0JBQ2JFLGtCQUFrQjtnQkFFcEIsT0FBTyxJQUFJbUMsWUFBWVksT0FBTyxFQUFFTyxRQUFRO29CQUN0QzVFLFVBQVV3QyxPQUFPLENBQUNVLElBQUksQ0FBQyxlQUFlO3dCQUNwQ0csTUFBTUY7d0JBQ05RLE1BQU07d0JBQ05VLFNBQVNaLFlBQVlZLE9BQU8sQ0FBQ08sSUFBSTtvQkFDbkM7b0JBRUFwRSxXQUFXO2dCQUNiO2dCQUVBRSxtQkFBbUI7Z0JBQ25CRSxtQkFBbUI7WUFFckIsRUFBRSxPQUFPOEMsT0FBTztnQkFDZCxJQUFJQSxNQUFNbkQsT0FBTyxFQUFFOEIsU0FBUyxTQUN4QnFCLE1BQU1uRCxPQUFPLEVBQUU4QixTQUFTLFNBQ3hCcUIsTUFBTW5ELE9BQU8sRUFBRThCLFNBQVMsT0FBTztvQkFDakMsTUFBTWxDO29CQUNOO2dCQUNGO2dCQUVBTixvREFBS0EsQ0FBQzZELEtBQUssQ0FBQ0EsTUFBTW5ELE9BQU8sSUFBSTtnQkFDN0IsSUFBSWtELFlBQVlFLElBQUksS0FBSyxRQUFRO29CQUMvQm5DLGVBQWVrQyxNQUFNbkQsT0FBTztvQkFDNUJhLGFBQWE7Z0JBQ2Y7WUFDRjtRQUNGOzhEQUFHO1FBQUNuQjtRQUFhQztRQUFRQztRQUFvQkg7S0FBVTtJQUV2RCxNQUFNNkUsb0JBQW9CakYsa0RBQVdBOzZEQUFDO1lBQ3BDYztxRUFBbUJvRSxDQUFBQSxPQUFRLENBQUNBOztRQUM5Qjs0REFBRyxFQUFFO0lBRUwsTUFBTUMsMEJBQTBCbkYsa0RBQVdBO21FQUFDLENBQUN5RDtZQUMzQyxJQUFJLENBQUNBLE1BQU0yQixjQUFjLE9BQU8sRUFBRTtZQUVsQyxPQUFPM0IsS0FBSzJCLFlBQVksQ0FBQ0MsTUFBTTsyRUFBQ0MsQ0FBQUEsT0FDOUJBLEtBQUtDLElBQUksQ0FBQzdDLFdBQVcsR0FBR0QsUUFBUSxDQUFDeEIsa0JBQ2pDcUUsS0FBS0UsS0FBSyxDQUFDOUMsV0FBVyxHQUFHRCxRQUFRLENBQUN4Qjs7UUFFdEM7a0VBQUc7UUFBQ0E7S0FBYztJQUVsQixNQUFNd0UsZ0JBQWdCekYsa0RBQVdBO3lEQUFDLENBQUMwRixpQkFBaUJKO1lBQ2xELElBQUksQ0FBQ0ksaUJBQWlCOUMsU0FBUztZQUUvQixNQUFNVixpQkFBaUJ3RCxnQkFBZ0I5QyxPQUFPLENBQUNULGNBQWM7WUFDN0QsTUFBTUMsbUJBQW1CekIsUUFBUTBCLEtBQUssQ0FBQyxHQUFHSDtZQUMxQyxNQUFNSSxnQkFBZ0JGLGlCQUFpQkcsV0FBVyxDQUFDO1lBRW5ELElBQUlELGtCQUFrQixDQUFDLEdBQUc7Z0JBQ3hCLE1BQU1xRCxlQUFlaEYsUUFBUTBCLEtBQUssQ0FBQyxHQUFHQztnQkFDdEMsTUFBTXNELGFBQ0pELGVBQ0EsQ0FBQyxDQUFDLEVBQUVMLEtBQUtDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FDaEI1RSxRQUFRMEIsS0FBSyxDQUFDSDtnQkFFaEJ0QixXQUFXZ0Y7Z0JBQ1g1RSxtQkFBbUI7Z0JBRW5CNkU7cUVBQVc7d0JBQ1QsTUFBTUMsY0FBY3hELGdCQUFnQmdELEtBQUtDLElBQUksQ0FBQ1EsTUFBTSxHQUFHO3dCQUN2REwsZ0JBQWdCOUMsT0FBTyxDQUFDb0QsS0FBSzt3QkFDN0JOLGdCQUFnQjlDLE9BQU8sQ0FBQ3FELGlCQUFpQixDQUFDSCxhQUFhQTtvQkFDekQ7b0VBQUc7WUFDTDtRQUNGO3dEQUFHO1FBQUNuRjtLQUFRO0lBRVosTUFBTXVGLG9CQUFvQmxHLGtEQUFXQTs2REFBQztZQUNwQ3NCLGVBQWU7WUFDZk0sZUFBZTtZQUNmRixrQkFBa0I7UUFDcEI7NERBQUcsRUFBRTtJQUVMLE9BQU87UUFDTGY7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQWY7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQU87UUFDQStCO1FBQ0FxQjtRQUNBdEM7UUFDQXdDO1FBQ0FNO1FBQ0FTO0lBQ0Y7QUFDRCxFQUFFO0FBRUYsaUVBQWUvRixrQkFBa0JBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL2hvb2tzL3VzZU1lc3NhZ2VIYW5kbGluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUb2FzdCB9IGZyb20gJy4uL2NvbXBvbmVudHMvVG9hc3QnO1xuaW1wb3J0IGZpbGVTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2ZpbGVTZXJ2aWNlJztcblxuZXhwb3J0IGNvbnN0IHVzZU1lc3NhZ2VIYW5kbGluZyA9IChzb2NrZXRSZWYsIGN1cnJlbnRVc2VyLCByb3V0ZXIsIGhhbmRsZVNlc3Npb25FcnJvciwgbWVzc2FnZXMgPSBbXSwgbG9hZGluZ01lc3NhZ2VzID0gZmFsc2UsIHNldExvYWRpbmdNZXNzYWdlcykgPT4ge1xuIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcbiBjb25zdCBbc2hvd0Vtb2ppUGlja2VyLCBzZXRTaG93RW1vamlQaWNrZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuIGNvbnN0IFtzaG93TWVudGlvbkxpc3QsIHNldFNob3dNZW50aW9uTGlzdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gY29uc3QgW21lbnRpb25GaWx0ZXIsIHNldE1lbnRpb25GaWx0ZXJdID0gdXNlU3RhdGUoJycpO1xuIGNvbnN0IFttZW50aW9uSW5kZXgsIHNldE1lbnRpb25JbmRleF0gPSB1c2VTdGF0ZSgwKTtcbiBjb25zdCBbZmlsZVByZXZpZXcsIHNldEZpbGVQcmV2aWV3XSA9IHVzZVN0YXRlKG51bGwpO1xuIGNvbnN0IFt1cGxvYWRpbmcsIHNldFVwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gY29uc3QgW3VwbG9hZFByb2dyZXNzLCBzZXRVcGxvYWRQcm9ncmVzc10gPSB1c2VTdGF0ZSgwKTtcbiBjb25zdCBbdXBsb2FkRXJyb3IsIHNldFVwbG9hZEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gY29uc3QgaGFuZGxlTWVzc2FnZUNoYW5nZSA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICBjb25zdCBuZXdWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgc2V0TWVzc2FnZShuZXdWYWx1ZSk7XG5cbiAgIGNvbnN0IGN1cnNvclBvc2l0aW9uID0gZS50YXJnZXQuc2VsZWN0aW9uU3RhcnQ7XG4gICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gbmV3VmFsdWUuc2xpY2UoMCwgY3Vyc29yUG9zaXRpb24pO1xuICAgY29uc3QgYXRTeW1ib2xJbmRleCA9IHRleHRCZWZvcmVDdXJzb3IubGFzdEluZGV4T2YoJ0AnKTtcblxuICAgaWYgKGF0U3ltYm9sSW5kZXggIT09IC0xKSB7XG4gICAgIGNvbnN0IG1lbnRpb25UZXh0ID0gdGV4dEJlZm9yZUN1cnNvci5zbGljZShhdFN5bWJvbEluZGV4ICsgMSk7XG4gICAgIGlmICghbWVudGlvblRleHQuaW5jbHVkZXMoJyAnKSkge1xuICAgICAgIHNldE1lbnRpb25GaWx0ZXIobWVudGlvblRleHQudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgc2V0U2hvd01lbnRpb25MaXN0KHRydWUpO1xuICAgICAgIHNldE1lbnRpb25JbmRleCgwKTtcbiAgICAgICByZXR1cm47XG4gICAgIH1cbiAgIH1cbiAgIFxuICAgc2V0U2hvd01lbnRpb25MaXN0KGZhbHNlKTtcbiB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlTG9hZE1vcmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFzb2NrZXRSZWYuY3VycmVudD8uY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGxvYWRpbmdNZXNzYWdlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOqwgOyepSDsmKTrnpjrkJwg66mU7Iuc7KeA7J2YIO2DgOyehOyKpO2DrO2UhCDssL7quLBcbiAgICBjb25zdCBzb3J0ZWRNZXNzYWdlcyA9IFsuLi5tZXNzYWdlc10uc29ydChcbiAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShhLnRpbWVzdGFtcCkgLSBuZXcgRGF0ZShiLnRpbWVzdGFtcClcbiAgICApO1xuICAgIGNvbnN0IG9sZGVzdE1lc3NhZ2UgPSBzb3J0ZWRNZXNzYWdlc1swXTtcbiAgICBjb25zdCBiZWZvcmVUaW1lc3RhbXAgPSBvbGRlc3RNZXNzYWdlPy50aW1lc3RhbXA7XG5cbiAgICBpZiAoIWJlZm9yZVRpbWVzdGFtcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldExvYWRpbmdNZXNzYWdlcyh0cnVlKTtcblxuICAgIC8vIFNvY2tldC5JTyDsnbTrsqTtirjrp4wg67Cc7ZaJIC0g7J2R64u17J2AIHVzZUNoYXRSb29t7J2YIHByZXZpb3VzTWVzc2FnZXMg7J2067Kk7Yq4IO2VuOuTpOufrOyXkOyEnCDsspjrpqxcbiAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdmZXRjaFByZXZpb3VzTWVzc2FnZXMnLCB7XG4gICAgICByb29tSWQ6IHJvdXRlcj8ucXVlcnk/LnJvb20sXG4gICAgICBiZWZvcmU6IGJlZm9yZVRpbWVzdGFtcCxcbiAgICAgIGxpbWl0OiAzMFxuICAgIH0pO1xuICB9LCBbc29ja2V0UmVmLCByb3V0ZXI/LnF1ZXJ5Py5yb29tLCBsb2FkaW5nTWVzc2FnZXMsIG1lc3NhZ2VzLCBzZXRMb2FkaW5nTWVzc2FnZXNdKTtcblxuIGNvbnN0IGhhbmRsZU1lc3NhZ2VTdWJtaXQgPSB1c2VDYWxsYmFjayhhc3luYyAobWVzc2FnZURhdGEpID0+IHtcbiAgIGlmICghc29ja2V0UmVmLmN1cnJlbnQ/LmNvbm5lY3RlZCB8fCAhY3VycmVudFVzZXIpIHtcbiAgICAgVG9hc3QuZXJyb3IoJ+yxhO2MhSDshJzrsoTsmYAg7Jew6rKw7J20IOuBiuyWtOyhjOyKteuLiOuLpC4nKTtcbiAgICAgcmV0dXJuO1xuICAgfVxuXG4gICBjb25zdCByb29tSWQgPSByb3V0ZXI/LnF1ZXJ5Py5yb29tO1xuICAgaWYgKCFyb29tSWQpIHtcbiAgICAgVG9hc3QuZXJyb3IoJ+yxhO2MheuwqSDsoJXrs7Trpbwg7LC+7J2EIOyImCDsl4bsirXri4jri6QuJyk7XG4gICAgIHJldHVybjtcbiAgIH1cblxuICAgdHJ5IHtcbiAgICAgIGlmIChtZXNzYWdlRGF0YS50eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgc2V0VXBsb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRVcGxvYWRFcnJvcihudWxsKTtcbiAgICAgICAgc2V0VXBsb2FkUHJvZ3Jlc3MoMCk7XG5cbiAgICAgICAgY29uc3QgdXBsb2FkUmVzcG9uc2UgPSBhd2FpdCBmaWxlU2VydmljZS51cGxvYWRGaWxlKFxuICAgICAgICAgIG1lc3NhZ2VEYXRhLmZpbGVEYXRhLmZpbGUsXG4gICAgICAgICAgKHByb2dyZXNzKSA9PiBzZXRVcGxvYWRQcm9ncmVzcyhwcm9ncmVzcyksXG4gICAgICAgICAgY3VycmVudFVzZXIudG9rZW4sXG4gICAgICAgICAgY3VycmVudFVzZXIuc2Vzc2lvbklkXG4gICAgICAgICk7XG5cbiAgICAgICBpZiAoIXVwbG9hZFJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcih1cGxvYWRSZXNwb25zZS5tZXNzYWdlIHx8ICftjIzsnbwg7JeF66Gc65Oc7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcbiAgICAgICB9XG5cbiAgICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdjaGF0TWVzc2FnZScsIHtcbiAgICAgICAgIHJvb206IHJvb21JZCxcbiAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VEYXRhLmNvbnRlbnQgfHwgJycsXG4gICAgICAgICBmaWxlRGF0YToge1xuICAgICAgICAgICBfaWQ6IHVwbG9hZFJlc3BvbnNlLmRhdGEuZmlsZS5faWQsXG4gICAgICAgICAgIGZpbGVuYW1lOiB1cGxvYWRSZXNwb25zZS5kYXRhLmZpbGUuZmlsZW5hbWUsXG4gICAgICAgICAgIG9yaWdpbmFsbmFtZTogdXBsb2FkUmVzcG9uc2UuZGF0YS5maWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICAgbWltZXR5cGU6IHVwbG9hZFJlc3BvbnNlLmRhdGEuZmlsZS5taW1ldHlwZSxcbiAgICAgICAgICAgc2l6ZTogdXBsb2FkUmVzcG9uc2UuZGF0YS5maWxlLnNpemVcbiAgICAgICAgIH1cbiAgICAgICB9KTtcblxuICAgICAgIHNldEZpbGVQcmV2aWV3KG51bGwpO1xuICAgICAgIHNldE1lc3NhZ2UoJycpO1xuICAgICAgIHNldFVwbG9hZGluZyhmYWxzZSk7XG4gICAgICAgc2V0VXBsb2FkUHJvZ3Jlc3MoMCk7XG5cbiAgICAgfSBlbHNlIGlmIChtZXNzYWdlRGF0YS5jb250ZW50Py50cmltKCkpIHtcbiAgICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdjaGF0TWVzc2FnZScsIHtcbiAgICAgICAgIHJvb206IHJvb21JZCxcbiAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2VEYXRhLmNvbnRlbnQudHJpbSgpXG4gICAgICAgfSk7XG5cbiAgICAgICBzZXRNZXNzYWdlKCcnKTtcbiAgICAgfVxuXG4gICAgIHNldFNob3dFbW9qaVBpY2tlcihmYWxzZSk7XG4gICAgIHNldFNob3dNZW50aW9uTGlzdChmYWxzZSk7XG5cbiAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygn7IS47IWYJykgfHwgXG4gICAgICAgICBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygn7J247KadJykgfHwgXG4gICAgICAgICBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygn7Yag7YGwJykpIHtcbiAgICAgICBhd2FpdCBoYW5kbGVTZXNzaW9uRXJyb3IoKTtcbiAgICAgICByZXR1cm47XG4gICAgIH1cblxuICAgICBUb2FzdC5lcnJvcihlcnJvci5tZXNzYWdlIHx8ICfrqZTsi5zsp4Ag7KCE7IahIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicpO1xuICAgICBpZiAobWVzc2FnZURhdGEudHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgc2V0VXBsb2FkRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgc2V0VXBsb2FkaW5nKGZhbHNlKTtcbiAgICAgfVxuICAgfVxuIH0sIFtjdXJyZW50VXNlciwgcm91dGVyLCBoYW5kbGVTZXNzaW9uRXJyb3IsIHNvY2tldFJlZl0pO1xuXG4gY29uc3QgaGFuZGxlRW1vamlUb2dnbGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICBzZXRTaG93RW1vamlQaWNrZXIocHJldiA9PiAhcHJldik7XG4gfSwgW10pO1xuXG4gY29uc3QgZ2V0RmlsdGVyZWRQYXJ0aWNpcGFudHMgPSB1c2VDYWxsYmFjaygocm9vbSkgPT4ge1xuICAgaWYgKCFyb29tPy5wYXJ0aWNpcGFudHMpIHJldHVybiBbXTtcblxuICAgcmV0dXJuIHJvb20ucGFydGljaXBhbnRzLmZpbHRlcih1c2VyID0+IFxuICAgICB1c2VyLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhtZW50aW9uRmlsdGVyKSB8fFxuICAgICB1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobWVudGlvbkZpbHRlcilcbiAgICk7XG4gfSwgW21lbnRpb25GaWx0ZXJdKTtcblxuIGNvbnN0IGluc2VydE1lbnRpb24gPSB1c2VDYWxsYmFjaygobWVzc2FnZUlucHV0UmVmLCB1c2VyKSA9PiB7XG4gICBpZiAoIW1lc3NhZ2VJbnB1dFJlZj8uY3VycmVudCkgcmV0dXJuO1xuXG4gICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IG1lc3NhZ2VJbnB1dFJlZi5jdXJyZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgY29uc3QgdGV4dEJlZm9yZUN1cnNvciA9IG1lc3NhZ2Uuc2xpY2UoMCwgY3Vyc29yUG9zaXRpb24pO1xuICAgY29uc3QgYXRTeW1ib2xJbmRleCA9IHRleHRCZWZvcmVDdXJzb3IubGFzdEluZGV4T2YoJ0AnKTtcblxuICAgaWYgKGF0U3ltYm9sSW5kZXggIT09IC0xKSB7XG4gICAgIGNvbnN0IHRleHRCZWZvcmVBdCA9IG1lc3NhZ2Uuc2xpY2UoMCwgYXRTeW1ib2xJbmRleCk7XG4gICAgIGNvbnN0IG5ld01lc3NhZ2UgPSBcbiAgICAgICB0ZXh0QmVmb3JlQXQgK1xuICAgICAgIGBAJHt1c2VyLm5hbWV9IGAgK1xuICAgICAgIG1lc3NhZ2Uuc2xpY2UoY3Vyc29yUG9zaXRpb24pO1xuXG4gICAgIHNldE1lc3NhZ2UobmV3TWVzc2FnZSk7XG4gICAgIHNldFNob3dNZW50aW9uTGlzdChmYWxzZSk7XG5cbiAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBhdFN5bWJvbEluZGV4ICsgdXNlci5uYW1lLmxlbmd0aCArIDI7XG4gICAgICAgbWVzc2FnZUlucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICBtZXNzYWdlSW5wdXRSZWYuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShuZXdQb3NpdGlvbiwgbmV3UG9zaXRpb24pO1xuICAgICB9LCAwKTtcbiAgIH1cbiB9LCBbbWVzc2FnZV0pO1xuXG4gY29uc3QgcmVtb3ZlRmlsZVByZXZpZXcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICBzZXRGaWxlUHJldmlldyhudWxsKTtcbiAgIHNldFVwbG9hZEVycm9yKG51bGwpO1xuICAgc2V0VXBsb2FkUHJvZ3Jlc3MoMCk7XG4gfSwgW10pO1xuXG4gcmV0dXJuIHtcbiAgIG1lc3NhZ2UsXG4gICBzaG93RW1vamlQaWNrZXIsXG4gICBzaG93TWVudGlvbkxpc3QsXG4gICBtZW50aW9uRmlsdGVyLFxuICAgbWVudGlvbkluZGV4LFxuICAgZmlsZVByZXZpZXcsXG4gICB1cGxvYWRpbmcsXG4gICB1cGxvYWRQcm9ncmVzcyxcbiAgIHVwbG9hZEVycm9yLFxuICAgc2V0TWVzc2FnZSxcbiAgIHNldFNob3dFbW9qaVBpY2tlcixcbiAgIHNldFNob3dNZW50aW9uTGlzdCxcbiAgIHNldE1lbnRpb25GaWx0ZXIsXG4gICBzZXRNZW50aW9uSW5kZXgsXG4gICBzZXRGaWxlUHJldmlldyxcbiAgIGhhbmRsZU1lc3NhZ2VDaGFuZ2UsXG4gICBoYW5kbGVNZXNzYWdlU3VibWl0LFxuICAgaGFuZGxlRW1vamlUb2dnbGUsXG4gICBoYW5kbGVMb2FkTW9yZSxcbiAgIGdldEZpbHRlcmVkUGFydGljaXBhbnRzLFxuICAgaW5zZXJ0TWVudGlvbixcbiAgIHJlbW92ZUZpbGVQcmV2aWV3XG4gfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZU1lc3NhZ2VIYW5kbGluZzsiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsIlRvYXN0IiwiZmlsZVNlcnZpY2UiLCJ1c2VNZXNzYWdlSGFuZGxpbmciLCJzb2NrZXRSZWYiLCJjdXJyZW50VXNlciIsInJvdXRlciIsImhhbmRsZVNlc3Npb25FcnJvciIsIm1lc3NhZ2VzIiwibG9hZGluZ01lc3NhZ2VzIiwic2V0TG9hZGluZ01lc3NhZ2VzIiwibWVzc2FnZSIsInNldE1lc3NhZ2UiLCJzaG93RW1vamlQaWNrZXIiLCJzZXRTaG93RW1vamlQaWNrZXIiLCJzaG93TWVudGlvbkxpc3QiLCJzZXRTaG93TWVudGlvbkxpc3QiLCJtZW50aW9uRmlsdGVyIiwic2V0TWVudGlvbkZpbHRlciIsIm1lbnRpb25JbmRleCIsInNldE1lbnRpb25JbmRleCIsImZpbGVQcmV2aWV3Iiwic2V0RmlsZVByZXZpZXciLCJ1cGxvYWRpbmciLCJzZXRVcGxvYWRpbmciLCJ1cGxvYWRQcm9ncmVzcyIsInNldFVwbG9hZFByb2dyZXNzIiwidXBsb2FkRXJyb3IiLCJzZXRVcGxvYWRFcnJvciIsImhhbmRsZU1lc3NhZ2VDaGFuZ2UiLCJlIiwibmV3VmFsdWUiLCJ0YXJnZXQiLCJ2YWx1ZSIsImN1cnNvclBvc2l0aW9uIiwic2VsZWN0aW9uU3RhcnQiLCJ0ZXh0QmVmb3JlQ3Vyc29yIiwic2xpY2UiLCJhdFN5bWJvbEluZGV4IiwibGFzdEluZGV4T2YiLCJtZW50aW9uVGV4dCIsImluY2x1ZGVzIiwidG9Mb3dlckNhc2UiLCJoYW5kbGVMb2FkTW9yZSIsImN1cnJlbnQiLCJjb25uZWN0ZWQiLCJzb3J0ZWRNZXNzYWdlcyIsInNvcnQiLCJhIiwiYiIsIkRhdGUiLCJ0aW1lc3RhbXAiLCJvbGRlc3RNZXNzYWdlIiwiYmVmb3JlVGltZXN0YW1wIiwiZW1pdCIsInJvb21JZCIsInF1ZXJ5Iiwicm9vbSIsImJlZm9yZSIsImxpbWl0IiwiaGFuZGxlTWVzc2FnZVN1Ym1pdCIsIm1lc3NhZ2VEYXRhIiwiZXJyb3IiLCJ0eXBlIiwidXBsb2FkUmVzcG9uc2UiLCJ1cGxvYWRGaWxlIiwiZmlsZURhdGEiLCJmaWxlIiwicHJvZ3Jlc3MiLCJ0b2tlbiIsInNlc3Npb25JZCIsInN1Y2Nlc3MiLCJFcnJvciIsImNvbnRlbnQiLCJfaWQiLCJkYXRhIiwiZmlsZW5hbWUiLCJvcmlnaW5hbG5hbWUiLCJtaW1ldHlwZSIsInNpemUiLCJ0cmltIiwiaGFuZGxlRW1vamlUb2dnbGUiLCJwcmV2IiwiZ2V0RmlsdGVyZWRQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHMiLCJmaWx0ZXIiLCJ1c2VyIiwibmFtZSIsImVtYWlsIiwiaW5zZXJ0TWVudGlvbiIsIm1lc3NhZ2VJbnB1dFJlZiIsInRleHRCZWZvcmVBdCIsIm5ld01lc3NhZ2UiLCJzZXRUaW1lb3V0IiwibmV3UG9zaXRpb24iLCJsZW5ndGgiLCJmb2N1cyIsInNldFNlbGVjdGlvblJhbmdlIiwicmVtb3ZlRmlsZVByZXZpZXciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useMessageHandling.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useReactionHandling.js":
/*!**************************************!*\
  !*** ./hooks/useReactionHandling.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useReactionHandling: () => (/* binding */ useReactionHandling)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_Toast__WEBPACK_IMPORTED_MODULE_1__]);\n_components_Toast__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// hooks/useReactionHandling.js\n\n\nconst useReactionHandling = (socketRef, currentUser, messages, setMessages)=>{\n    const [pendingReactions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Map());\n    const handleReactionAdd = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useReactionHandling.useCallback[handleReactionAdd]\": async (messageId, reaction)=>{\n            try {\n                if (!socketRef.current?.connected) {\n                    throw new Error('Socket not connected');\n                }\n                // 낙관적 업데이트\n                setMessages({\n                    \"useReactionHandling.useCallback[handleReactionAdd]\": (prevMessages)=>prevMessages.map({\n                            \"useReactionHandling.useCallback[handleReactionAdd]\": (msg)=>{\n                                if (msg._id === messageId) {\n                                    const currentReactions = msg.reactions || {};\n                                    const currentUsers = currentReactions[reaction] || [];\n                                    // 중복 추가 방지\n                                    if (!currentUsers.includes(currentUser.id)) {\n                                        return {\n                                            ...msg,\n                                            reactions: {\n                                                ...currentReactions,\n                                                [reaction]: [\n                                                    ...currentUsers,\n                                                    currentUser.id\n                                                ]\n                                            }\n                                        };\n                                    }\n                                }\n                                return msg;\n                            }\n                        }[\"useReactionHandling.useCallback[handleReactionAdd]\"])\n                }[\"useReactionHandling.useCallback[handleReactionAdd]\"]);\n                await socketRef.current.emit('messageReaction', {\n                    messageId,\n                    reaction,\n                    type: 'add'\n                });\n            } catch (error) {\n                console.error('Add reaction error:', error);\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error('리액션 추가에 실패했습니다.');\n                // 실패 시 롤백\n                setMessages({\n                    \"useReactionHandling.useCallback[handleReactionAdd]\": (prevMessages)=>prevMessages.map({\n                            \"useReactionHandling.useCallback[handleReactionAdd]\": (msg)=>msg._id === messageId ? {\n                                    ...msg,\n                                    reactions: messages.find({\n                                        \"useReactionHandling.useCallback[handleReactionAdd]\": (m)=>m._id === messageId\n                                    }[\"useReactionHandling.useCallback[handleReactionAdd]\"])?.reactions || {}\n                                } : msg\n                        }[\"useReactionHandling.useCallback[handleReactionAdd]\"])\n                }[\"useReactionHandling.useCallback[handleReactionAdd]\"]);\n            }\n        }\n    }[\"useReactionHandling.useCallback[handleReactionAdd]\"], [\n        socketRef,\n        currentUser,\n        messages,\n        setMessages\n    ]);\n    const handleReactionRemove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useReactionHandling.useCallback[handleReactionRemove]\": async (messageId, reaction)=>{\n            try {\n                if (!socketRef.current?.connected) {\n                    throw new Error('Socket not connected');\n                }\n                // 낙관적 업데이트\n                setMessages({\n                    \"useReactionHandling.useCallback[handleReactionRemove]\": (prevMessages)=>prevMessages.map({\n                            \"useReactionHandling.useCallback[handleReactionRemove]\": (msg)=>{\n                                if (msg._id === messageId) {\n                                    const currentReactions = msg.reactions || {};\n                                    const currentUsers = currentReactions[reaction] || [];\n                                    return {\n                                        ...msg,\n                                        reactions: {\n                                            ...currentReactions,\n                                            [reaction]: currentUsers.filter({\n                                                \"useReactionHandling.useCallback[handleReactionRemove]\": (id)=>id !== currentUser.id\n                                            }[\"useReactionHandling.useCallback[handleReactionRemove]\"])\n                                        }\n                                    };\n                                }\n                                return msg;\n                            }\n                        }[\"useReactionHandling.useCallback[handleReactionRemove]\"])\n                }[\"useReactionHandling.useCallback[handleReactionRemove]\"]);\n                await socketRef.current.emit('messageReaction', {\n                    messageId,\n                    reaction,\n                    type: 'remove'\n                });\n            } catch (error) {\n                console.error('Remove reaction error:', error);\n                _components_Toast__WEBPACK_IMPORTED_MODULE_1__.Toast.error('리액션 제거에 실패했습니다.');\n                // 실패 시 롤백\n                setMessages({\n                    \"useReactionHandling.useCallback[handleReactionRemove]\": (prevMessages)=>prevMessages.map({\n                            \"useReactionHandling.useCallback[handleReactionRemove]\": (msg)=>msg._id === messageId ? {\n                                    ...msg,\n                                    reactions: messages.find({\n                                        \"useReactionHandling.useCallback[handleReactionRemove]\": (m)=>m._id === messageId\n                                    }[\"useReactionHandling.useCallback[handleReactionRemove]\"])?.reactions || {}\n                                } : msg\n                        }[\"useReactionHandling.useCallback[handleReactionRemove]\"])\n                }[\"useReactionHandling.useCallback[handleReactionRemove]\"]);\n            }\n        }\n    }[\"useReactionHandling.useCallback[handleReactionRemove]\"], [\n        socketRef,\n        currentUser,\n        messages,\n        setMessages\n    ]);\n    const handleReactionUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useReactionHandling.useCallback[handleReactionUpdate]\": ({ messageId, reactions })=>{\n            setMessages({\n                \"useReactionHandling.useCallback[handleReactionUpdate]\": (prevMessages)=>prevMessages.map({\n                        \"useReactionHandling.useCallback[handleReactionUpdate]\": (msg)=>msg._id === messageId ? {\n                                ...msg,\n                                reactions\n                            } : msg\n                    }[\"useReactionHandling.useCallback[handleReactionUpdate]\"])\n            }[\"useReactionHandling.useCallback[handleReactionUpdate]\"]);\n        }\n    }[\"useReactionHandling.useCallback[handleReactionUpdate]\"], [\n        setMessages\n    ]);\n    return {\n        handleReactionAdd,\n        handleReactionRemove,\n        handleReactionUpdate\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useReactionHandling);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2hvb2tzL3VzZVJlYWN0aW9uSGFuZGxpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSwrQkFBK0I7QUFFZTtBQUNGO0FBRXJDLE1BQU1HLHNCQUFzQixDQUFDQyxXQUFXQyxhQUFhQyxVQUFVQztJQUNwRSxNQUFNLENBQUNDLGlCQUFpQixHQUFHUCwrQ0FBUUEsQ0FBQyxJQUFJUTtJQUV4QyxNQUFNQyxvQkFBb0JWLGtEQUFXQTs4REFBQyxPQUFPVyxXQUFXQztZQUN0RCxJQUFJO2dCQUNGLElBQUksQ0FBQ1IsVUFBVVMsT0FBTyxFQUFFQyxXQUFXO29CQUNqQyxNQUFNLElBQUlDLE1BQU07Z0JBQ2xCO2dCQUVBLFdBQVc7Z0JBQ1hSOzBFQUFZUyxDQUFBQSxlQUNWQSxhQUFhQyxHQUFHO2tGQUFDQyxDQUFBQTtnQ0FDZixJQUFJQSxJQUFJQyxHQUFHLEtBQUtSLFdBQVc7b0NBQ3pCLE1BQU1TLG1CQUFtQkYsSUFBSUcsU0FBUyxJQUFJLENBQUM7b0NBQzNDLE1BQU1DLGVBQWVGLGdCQUFnQixDQUFDUixTQUFTLElBQUksRUFBRTtvQ0FFckQsV0FBVztvQ0FDWCxJQUFJLENBQUNVLGFBQWFDLFFBQVEsQ0FBQ2xCLFlBQVltQixFQUFFLEdBQUc7d0NBQzFDLE9BQU87NENBQ0wsR0FBR04sR0FBRzs0Q0FDTkcsV0FBVztnREFDVCxHQUFHRCxnQkFBZ0I7Z0RBQ25CLENBQUNSLFNBQVMsRUFBRTt1REFBSVU7b0RBQWNqQixZQUFZbUIsRUFBRTtpREFBQzs0Q0FDL0M7d0NBQ0Y7b0NBQ0Y7Z0NBQ0Y7Z0NBQ0EsT0FBT047NEJBQ1Q7OztnQkFHRixNQUFNZCxVQUFVUyxPQUFPLENBQUNZLElBQUksQ0FBQyxtQkFBbUI7b0JBQzlDZDtvQkFDQUM7b0JBQ0FjLE1BQU07Z0JBQ1I7WUFFRixFQUFFLE9BQU9DLE9BQU87Z0JBQ2RDLFFBQVFELEtBQUssQ0FBQyx1QkFBdUJBO2dCQUNyQ3pCLG9EQUFLQSxDQUFDeUIsS0FBSyxDQUFDO2dCQUVaLFVBQVU7Z0JBQ1ZwQjswRUFBWVMsQ0FBQUEsZUFDVkEsYUFBYUMsR0FBRztrRkFBQ0MsQ0FBQUEsTUFDZkEsSUFBSUMsR0FBRyxLQUFLUixZQUNaO29DQUFFLEdBQUdPLEdBQUc7b0NBQUVHLFdBQVdmLFNBQVN1QixJQUFJOzhGQUFDQyxDQUFBQSxJQUFLQSxFQUFFWCxHQUFHLEtBQUtSOzhGQUFZVSxhQUFhLENBQUM7Z0NBQUUsSUFDOUVIOzs7WUFHTjtRQUNGOzZEQUFHO1FBQUNkO1FBQVdDO1FBQWFDO1FBQVVDO0tBQVk7SUFFbEQsTUFBTXdCLHVCQUF1Qi9CLGtEQUFXQTtpRUFBQyxPQUFPVyxXQUFXQztZQUN6RCxJQUFJO2dCQUNGLElBQUksQ0FBQ1IsVUFBVVMsT0FBTyxFQUFFQyxXQUFXO29CQUNqQyxNQUFNLElBQUlDLE1BQU07Z0JBQ2xCO2dCQUVBLFdBQVc7Z0JBQ1hSOzZFQUFZUyxDQUFBQSxlQUNWQSxhQUFhQyxHQUFHO3FGQUFDQyxDQUFBQTtnQ0FDZixJQUFJQSxJQUFJQyxHQUFHLEtBQUtSLFdBQVc7b0NBQ3pCLE1BQU1TLG1CQUFtQkYsSUFBSUcsU0FBUyxJQUFJLENBQUM7b0NBQzNDLE1BQU1DLGVBQWVGLGdCQUFnQixDQUFDUixTQUFTLElBQUksRUFBRTtvQ0FDckQsT0FBTzt3Q0FDTCxHQUFHTSxHQUFHO3dDQUNORyxXQUFXOzRDQUNULEdBQUdELGdCQUFnQjs0Q0FDbkIsQ0FBQ1IsU0FBUyxFQUFFVSxhQUFhVSxNQUFNO3lHQUFDUixDQUFBQSxLQUFNQSxPQUFPbkIsWUFBWW1CLEVBQUU7O3dDQUM3RDtvQ0FDRjtnQ0FDRjtnQ0FDQSxPQUFPTjs0QkFDVDs7O2dCQUdGLE1BQU1kLFVBQVVTLE9BQU8sQ0FBQ1ksSUFBSSxDQUFDLG1CQUFtQjtvQkFDOUNkO29CQUNBQztvQkFDQWMsTUFBTTtnQkFDUjtZQUVGLEVBQUUsT0FBT0MsT0FBTztnQkFDZEMsUUFBUUQsS0FBSyxDQUFDLDBCQUEwQkE7Z0JBQ3hDekIsb0RBQUtBLENBQUN5QixLQUFLLENBQUM7Z0JBRVosVUFBVTtnQkFDVnBCOzZFQUFZUyxDQUFBQSxlQUNWQSxhQUFhQyxHQUFHO3FGQUFDQyxDQUFBQSxNQUNmQSxJQUFJQyxHQUFHLEtBQUtSLFlBQ1o7b0NBQUUsR0FBR08sR0FBRztvQ0FBRUcsV0FBV2YsU0FBU3VCLElBQUk7aUdBQUNDLENBQUFBLElBQUtBLEVBQUVYLEdBQUcsS0FBS1I7aUdBQVlVLGFBQWEsQ0FBQztnQ0FBRSxJQUM5RUg7OztZQUdOO1FBQ0Y7Z0VBQUc7UUFBQ2Q7UUFBV0M7UUFBYUM7UUFBVUM7S0FBWTtJQUVsRCxNQUFNMEIsdUJBQXVCakMsa0RBQVdBO2lFQUFDLENBQUMsRUFBRVcsU0FBUyxFQUFFVSxTQUFTLEVBQUU7WUFDaEVkO3lFQUFZUyxDQUFBQSxlQUNWQSxhQUFhQyxHQUFHO2lGQUFDQyxDQUFBQSxNQUNmQSxJQUFJQyxHQUFHLEtBQUtSLFlBQVk7Z0NBQUUsR0FBR08sR0FBRztnQ0FBRUc7NEJBQVUsSUFBSUg7OztRQUd0RDtnRUFBRztRQUFDWDtLQUFZO0lBRWhCLE9BQU87UUFDTEc7UUFDQXFCO1FBQ0FFO0lBQ0Y7QUFDRixFQUFFO0FBRUYsaUVBQWU5QixtQkFBbUJBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL2hvb2tzL3VzZVJlYWN0aW9uSGFuZGxpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaG9va3MvdXNlUmVhY3Rpb25IYW5kbGluZy5qc1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUb2FzdCB9IGZyb20gJy4uL2NvbXBvbmVudHMvVG9hc3QnO1xuXG5leHBvcnQgY29uc3QgdXNlUmVhY3Rpb25IYW5kbGluZyA9IChzb2NrZXRSZWYsIGN1cnJlbnRVc2VyLCBtZXNzYWdlcywgc2V0TWVzc2FnZXMpID0+IHtcbiAgY29uc3QgW3BlbmRpbmdSZWFjdGlvbnNdID0gdXNlU3RhdGUobmV3IE1hcCgpKTtcblxuICBjb25zdCBoYW5kbGVSZWFjdGlvbkFkZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChtZXNzYWdlSWQsIHJlYWN0aW9uKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghc29ja2V0UmVmLmN1cnJlbnQ/LmNvbm5lY3RlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NvY2tldCBub3QgY29ubmVjdGVkJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOuCmeq0gOyggSDsl4XrjbDsnbTtirhcbiAgICAgIHNldE1lc3NhZ2VzKHByZXZNZXNzYWdlcyA9PiBcbiAgICAgICAgcHJldk1lc3NhZ2VzLm1hcChtc2cgPT4ge1xuICAgICAgICAgIGlmIChtc2cuX2lkID09PSBtZXNzYWdlSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSZWFjdGlvbnMgPSBtc2cucmVhY3Rpb25zIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJzID0gY3VycmVudFJlYWN0aW9uc1tyZWFjdGlvbl0gfHwgW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOykkeuztSDstpTqsIAg67Cp7KeAXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRVc2Vycy5pbmNsdWRlcyhjdXJyZW50VXNlci5pZCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5tc2csXG4gICAgICAgICAgICAgICAgcmVhY3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgICAuLi5jdXJyZW50UmVhY3Rpb25zLFxuICAgICAgICAgICAgICAgICAgW3JlYWN0aW9uXTogWy4uLmN1cnJlbnRVc2VycywgY3VycmVudFVzZXIuaWRdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbXNnO1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnbWVzc2FnZVJlYWN0aW9uJywge1xuICAgICAgICBtZXNzYWdlSWQsXG4gICAgICAgIHJlYWN0aW9uLFxuICAgICAgICB0eXBlOiAnYWRkJ1xuICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQWRkIHJlYWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIFRvYXN0LmVycm9yKCfrpqzslaHshZgg7LaU6rCA7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcblxuICAgICAgLy8g7Iuk7YyoIOyLnCDroaTrsLFcbiAgICAgIHNldE1lc3NhZ2VzKHByZXZNZXNzYWdlcyA9PiBcbiAgICAgICAgcHJldk1lc3NhZ2VzLm1hcChtc2cgPT4gXG4gICAgICAgICAgbXNnLl9pZCA9PT0gbWVzc2FnZUlkID8gXG4gICAgICAgICAgeyAuLi5tc2csIHJlYWN0aW9uczogbWVzc2FnZXMuZmluZChtID0+IG0uX2lkID09PSBtZXNzYWdlSWQpPy5yZWFjdGlvbnMgfHwge30gfSA6IFxuICAgICAgICAgIG1zZ1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfSwgW3NvY2tldFJlZiwgY3VycmVudFVzZXIsIG1lc3NhZ2VzLCBzZXRNZXNzYWdlc10pO1xuXG4gIGNvbnN0IGhhbmRsZVJlYWN0aW9uUmVtb3ZlID0gdXNlQ2FsbGJhY2soYXN5bmMgKG1lc3NhZ2VJZCwgcmVhY3Rpb24pID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFzb2NrZXRSZWYuY3VycmVudD8uY29ubmVjdGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU29ja2V0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICAgIH1cblxuICAgICAgLy8g64KZ6rSA7KCBIOyXheuNsOydtO2KuFxuICAgICAgc2V0TWVzc2FnZXMocHJldk1lc3NhZ2VzID0+IFxuICAgICAgICBwcmV2TWVzc2FnZXMubWFwKG1zZyA9PiB7XG4gICAgICAgICAgaWYgKG1zZy5faWQgPT09IG1lc3NhZ2VJZCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFJlYWN0aW9ucyA9IG1zZy5yZWFjdGlvbnMgfHwge307XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VXNlcnMgPSBjdXJyZW50UmVhY3Rpb25zW3JlYWN0aW9uXSB8fCBbXTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLm1zZyxcbiAgICAgICAgICAgICAgcmVhY3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgLi4uY3VycmVudFJlYWN0aW9ucyxcbiAgICAgICAgICAgICAgICBbcmVhY3Rpb25dOiBjdXJyZW50VXNlcnMuZmlsdGVyKGlkID0+IGlkICE9PSBjdXJyZW50VXNlci5pZClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ21lc3NhZ2VSZWFjdGlvbicsIHtcbiAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICByZWFjdGlvbixcbiAgICAgICAgdHlwZTogJ3JlbW92ZSdcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlbW92ZSByZWFjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICBUb2FzdC5lcnJvcign66as7JWh7IWYIOygnOqxsOyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XG5cbiAgICAgIC8vIOyLpO2MqCDsi5wg66Gk67CxXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2TWVzc2FnZXMgPT4gXG4gICAgICAgIHByZXZNZXNzYWdlcy5tYXAobXNnID0+IFxuICAgICAgICAgIG1zZy5faWQgPT09IG1lc3NhZ2VJZCA/IFxuICAgICAgICAgIHsgLi4ubXNnLCByZWFjdGlvbnM6IG1lc3NhZ2VzLmZpbmQobSA9PiBtLl9pZCA9PT0gbWVzc2FnZUlkKT8ucmVhY3Rpb25zIHx8IHt9IH0gOiBcbiAgICAgICAgICBtc2dcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH0sIFtzb2NrZXRSZWYsIGN1cnJlbnRVc2VyLCBtZXNzYWdlcywgc2V0TWVzc2FnZXNdKTtcblxuICBjb25zdCBoYW5kbGVSZWFjdGlvblVwZGF0ZSA9IHVzZUNhbGxiYWNrKCh7IG1lc3NhZ2VJZCwgcmVhY3Rpb25zIH0pID0+IHtcbiAgICBzZXRNZXNzYWdlcyhwcmV2TWVzc2FnZXMgPT4gXG4gICAgICBwcmV2TWVzc2FnZXMubWFwKG1zZyA9PiBcbiAgICAgICAgbXNnLl9pZCA9PT0gbWVzc2FnZUlkID8geyAuLi5tc2csIHJlYWN0aW9ucyB9IDogbXNnXG4gICAgICApXG4gICAgKTtcbiAgfSwgW3NldE1lc3NhZ2VzXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBoYW5kbGVSZWFjdGlvbkFkZCxcbiAgICBoYW5kbGVSZWFjdGlvblJlbW92ZSxcbiAgICBoYW5kbGVSZWFjdGlvblVwZGF0ZVxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlUmVhY3Rpb25IYW5kbGluZzsiXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VTdGF0ZSIsIlRvYXN0IiwidXNlUmVhY3Rpb25IYW5kbGluZyIsInNvY2tldFJlZiIsImN1cnJlbnRVc2VyIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsInBlbmRpbmdSZWFjdGlvbnMiLCJNYXAiLCJoYW5kbGVSZWFjdGlvbkFkZCIsIm1lc3NhZ2VJZCIsInJlYWN0aW9uIiwiY3VycmVudCIsImNvbm5lY3RlZCIsIkVycm9yIiwicHJldk1lc3NhZ2VzIiwibWFwIiwibXNnIiwiX2lkIiwiY3VycmVudFJlYWN0aW9ucyIsInJlYWN0aW9ucyIsImN1cnJlbnRVc2VycyIsImluY2x1ZGVzIiwiaWQiLCJlbWl0IiwidHlwZSIsImVycm9yIiwiY29uc29sZSIsImZpbmQiLCJtIiwiaGFuZGxlUmVhY3Rpb25SZW1vdmUiLCJmaWx0ZXIiLCJoYW5kbGVSZWFjdGlvblVwZGF0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useReactionHandling.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useRoomHandling.js":
/*!**********************************!*\
  !*** ./hooks/useRoomHandling.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useRoomHandling: () => (/* binding */ useRoomHandling)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_socket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/socket */ \"(pages-dir-node)/./services/socket.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contexts/AuthContext */ \"(pages-dir-node)/./contexts/AuthContext.js\");\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_socket__WEBPACK_IMPORTED_MODULE_1__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__, _components_Toast__WEBPACK_IMPORTED_MODULE_3__]);\n([_services_socket__WEBPACK_IMPORTED_MODULE_1__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__, _components_Toast__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst useRoomHandling = (socketRef, currentUser, mountedRef, router, setRoom, setError, setMessages, setHasMoreMessages, setLoadingMessages, setLoading, setupEventListeners, cleanup, loading, setIsInitialized, initializingRef, setupCompleteRef, userRooms, processMessages)=>{\n    const { user, refreshToken, logout } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const setupPromiseRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const setupTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const joinTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const reconnectTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const socketReconnectAttempts = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const messageRetryCountRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const MAX_SOCKET_RECONNECT_ATTEMPTS = 3;\n    const MAX_MESSAGE_RETRY_ATTEMPTS = 3;\n    const MESSAGE_TIMEOUT = 10000;\n    const MESSAGE_RETRY_DELAY = 2000;\n    const clearAllTimeouts = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRoomHandling.useCallback[clearAllTimeouts]\": ()=>{\n            if (setupTimeoutRef.current) {\n                clearTimeout(setupTimeoutRef.current);\n                setupTimeoutRef.current = null;\n            }\n            if (joinTimeoutRef.current) {\n                clearTimeout(joinTimeoutRef.current);\n                joinTimeoutRef.current = null;\n            }\n            if (reconnectTimeoutRef.current) {\n                clearTimeout(reconnectTimeoutRef.current);\n                reconnectTimeoutRef.current = null;\n            }\n        }\n    }[\"useRoomHandling.useCallback[clearAllTimeouts]\"], []);\n    const handleSessionError = async ()=>{\n        try {\n            if (!user) {\n                throw new Error('No user session found');\n            }\n            await refreshToken();\n            if (mountedRef.current) {\n                return true;\n            }\n        } catch (error) {}\n        if (mountedRef.current) {\n            await logout();\n            router.replace('/?redirect=' + router.asPath);\n        }\n        return false;\n    };\n    const setupSocket = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRoomHandling.useCallback[setupSocket]\": async ()=>{\n            try {\n                if (!user?.token || !user?.sessionId) {\n                    throw new Error('Invalid authentication state');\n                }\n                if (socketRef.current?.connected) {\n                    return socketRef.current;\n                }\n                if (socketRef.current) {\n                    const currentSocket = socketRef.current;\n                    if (userRooms?.get(currentSocket.id)) {\n                        await new Promise({\n                            \"useRoomHandling.useCallback[setupSocket]\": (resolve)=>{\n                                currentSocket.emit('leaveRoom', userRooms.get(currentSocket.id));\n                                setTimeout(resolve, 1000);\n                            }\n                        }[\"useRoomHandling.useCallback[setupSocket]\"]);\n                        userRooms.delete(currentSocket.id);\n                    }\n                    currentSocket.disconnect();\n                    currentSocket.removeAllListeners();\n                    socketRef.current = null;\n                    await new Promise({\n                        \"useRoomHandling.useCallback[setupSocket]\": (resolve)=>setTimeout(resolve, 2000)\n                    }[\"useRoomHandling.useCallback[setupSocket]\"]);\n                }\n                const socket = await _services_socket__WEBPACK_IMPORTED_MODULE_1__[\"default\"].connect({\n                    auth: {\n                        token: user.token,\n                        sessionId: user.sessionId\n                    },\n                    transports: [\n                        'websocket',\n                        'polling'\n                    ],\n                    reconnection: true,\n                    reconnectionAttempts: MAX_SOCKET_RECONNECT_ATTEMPTS,\n                    reconnectionDelay: 1000,\n                    reconnectionDelayMax: 3000,\n                    timeout: 10000,\n                    pingTimeout: 10000,\n                    pingInterval: 8000,\n                    forceNew: true,\n                    autoConnect: true\n                });\n                return new Promise({\n                    \"useRoomHandling.useCallback[setupSocket]\": (resolve, reject)=>{\n                        let socketConnected = false;\n                        const connectionTimeout = setTimeout({\n                            \"useRoomHandling.useCallback[setupSocket].connectionTimeout\": ()=>{\n                                if (!socketConnected) {\n                                    cleanup();\n                                    reject(new Error('Socket connection timeout'));\n                                }\n                            }\n                        }[\"useRoomHandling.useCallback[setupSocket].connectionTimeout\"], 10000);\n                        const handleConnect = {\n                            \"useRoomHandling.useCallback[setupSocket].handleConnect\": ()=>{\n                                if (!socketConnected) {\n                                    socketConnected = true;\n                                    clearTimeout(connectionTimeout);\n                                    socket.removeListener('connect_error', handleError);\n                                    socket.removeListener('error', handleError);\n                                    socketReconnectAttempts.current = 0;\n                                    resolve(socket);\n                                }\n                            }\n                        }[\"useRoomHandling.useCallback[setupSocket].handleConnect\"];\n                        const handleError = {\n                            \"useRoomHandling.useCallback[setupSocket].handleError\": (error)=>{\n                                if (!socketConnected) {\n                                    socketConnected = true;\n                                    clearTimeout(connectionTimeout);\n                                    reject(error);\n                                }\n                            }\n                        }[\"useRoomHandling.useCallback[setupSocket].handleError\"];\n                        if (socket.connected) {\n                            handleConnect();\n                            return;\n                        }\n                        socket.once('connect', handleConnect);\n                        socket.once('connect_error', handleError);\n                        socket.once('error', handleError);\n                    }\n                }[\"useRoomHandling.useCallback[setupSocket]\"]);\n            } catch (error) {\n                if (error.message === 'Invalid authentication state') {\n                    router.replace('/?error=auth_required');\n                }\n                throw error;\n            }\n        }\n    }[\"useRoomHandling.useCallback[setupSocket]\"], [\n        userRooms,\n        cleanup,\n        router\n    ]);\n    const fetchRoomData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRoomHandling.useCallback[fetchRoomData]\": async (roomId)=>{\n            try {\n                if (!user?.token || !user?.sessionId) {\n                    await handleSessionError();\n                    throw new Error('인증 정보가 유효하지 않습니다.');\n                }\n                if (!roomId || !mountedRef.current) {\n                    throw new Error('채팅방 정보가 올바르지 않습니다.');\n                }\n                const response = await fetch(`${\"http://localhost:5001\"}/api/rooms/${roomId}`, {\n                    method: 'GET',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json',\n                        'x-auth-token': user.token,\n                        'x-session-id': user.sessionId\n                    },\n                    credentials: 'include'\n                });\n                if (!response.ok) {\n                    if (response.status === 401) {\n                        const refreshed = await handleSessionError();\n                        if (refreshed && mountedRef.current) {\n                            return fetchRoomData(roomId);\n                        }\n                        throw new Error('인증이 만료되었습니다.');\n                    }\n                    throw new Error('채팅방 정보를 불러오는데 실패했습니다.');\n                }\n                const data = await response.json();\n                if (!data.success || !data.data) {\n                    throw new Error('채팅방 데이터가 올바르지 않습니다.');\n                }\n                return data.data;\n            } catch (error) {\n                throw error;\n            }\n        }\n    }[\"useRoomHandling.useCallback[fetchRoomData]\"], [\n        mountedRef,\n        handleSessionError\n    ]);\n    const joinRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRoomHandling.useCallback[joinRoom]\": async (roomId)=>{\n            if (!roomId || !mountedRef.current) {\n                throw new Error('잘못된 채팅방 정보입니다.');\n            }\n            const socket = socketRef.current;\n            if (!socket?.connected) {\n                throw new Error('Socket not connected');\n            }\n            return new Promise({\n                \"useRoomHandling.useCallback[joinRoom]\": (resolve, reject)=>{\n                    const timeout = setTimeout({\n                        \"useRoomHandling.useCallback[joinRoom].timeout\": ()=>{\n                            reject(new Error('채팅방 입장 시간이 초과되었습니다.'));\n                        }\n                    }[\"useRoomHandling.useCallback[joinRoom].timeout\"], 10000);\n                    const handleSuccess = {\n                        \"useRoomHandling.useCallback[joinRoom].handleSuccess\": (data)=>{\n                            clearTimeout(timeout);\n                            userRooms?.set(socket.id, roomId);\n                            socket.off('joinRoomError', handleError);\n                            socket.off('error', handleError);\n                            resolve(data);\n                        }\n                    }[\"useRoomHandling.useCallback[joinRoom].handleSuccess\"];\n                    const handleError = {\n                        \"useRoomHandling.useCallback[joinRoom].handleError\": (error)=>{\n                            clearTimeout(timeout);\n                            socket.off('joinRoomSuccess', handleSuccess);\n                            socket.off('error', handleError);\n                            reject(error);\n                        }\n                    }[\"useRoomHandling.useCallback[joinRoom].handleError\"];\n                    socket.once('joinRoomSuccess', handleSuccess);\n                    socket.once('joinRoomError', handleError);\n                    socket.once('error', handleError);\n                    socket.emit('joinRoom', roomId);\n                }\n            }[\"useRoomHandling.useCallback[joinRoom]\"]);\n        }\n    }[\"useRoomHandling.useCallback[joinRoom]\"], [\n        socketRef,\n        mountedRef,\n        userRooms\n    ]);\n    const loadInitialMessages = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRoomHandling.useCallback[loadInitialMessages]\": async (roomId)=>{\n            const loadMessagesWithRetry = {\n                \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry\": async (retryCount = 0)=>{\n                    return new Promise({\n                        \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry\": (resolve, reject)=>{\n                            if (!socketRef.current?.connected) {\n                                reject(new Error('Socket not connected'));\n                                return;\n                            }\n                            let timeoutId;\n                            const cleanup = {\n                                \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.cleanup\": ()=>{\n                                    if (timeoutId) clearTimeout(timeoutId);\n                                    socketRef.current?.off('previousMessagesLoaded', handleSuccess);\n                                    socketRef.current?.off('error', handleError);\n                                }\n                            }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.cleanup\"];\n                            const handleSuccess = {\n                                \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleSuccess\": (response)=>{\n                                    cleanup();\n                                    if (!response || !Array.isArray(response.messages)) {\n                                        if (retryCount < MAX_MESSAGE_RETRY_ATTEMPTS) {\n                                            setTimeout({\n                                                \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleSuccess\": ()=>{\n                                                    loadMessagesWithRetry(retryCount + 1).then(resolve).catch(reject);\n                                                }\n                                            }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleSuccess\"], MESSAGE_RETRY_DELAY);\n                                        } else {\n                                            reject(new Error('잘못된 메시지 응답 형식입니다.'));\n                                        }\n                                        return;\n                                    }\n                                    processMessages(response.messages, response.hasMore, true);\n                                    resolve(response);\n                                }\n                            }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleSuccess\"];\n                            const handleError = {\n                                \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleError\": (error)=>{\n                                    cleanup();\n                                    if (retryCount < MAX_MESSAGE_RETRY_ATTEMPTS) {\n                                        setTimeout({\n                                            \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleError\": ()=>{\n                                                loadMessagesWithRetry(retryCount + 1).then(resolve).catch(reject);\n                                            }\n                                        }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleError\"], MESSAGE_RETRY_DELAY);\n                                    } else {\n                                        reject(error);\n                                    }\n                                }\n                            }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleError\"];\n                            const handleTimeout = {\n                                \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleTimeout\": ()=>{\n                                    cleanup();\n                                    if (retryCount < MAX_MESSAGE_RETRY_ATTEMPTS) {\n                                        setTimeout({\n                                            \"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleTimeout\": ()=>{\n                                                loadMessagesWithRetry(retryCount + 1).then(resolve).catch(reject);\n                                            }\n                                        }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleTimeout\"], MESSAGE_RETRY_DELAY);\n                                    } else {\n                                        reject(new Error('메시지 로딩 시간이 초과되었습니다.'));\n                                    }\n                                }\n                            }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry.handleTimeout\"];\n                            socketRef.current.once('previousMessagesLoaded', handleSuccess);\n                            socketRef.current.once('error', handleError);\n                            timeoutId = setTimeout(handleTimeout, MESSAGE_TIMEOUT);\n                            socketRef.current.emit('fetchPreviousMessages', {\n                                roomId,\n                                limit: 30\n                            });\n                        }\n                    }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry\"]);\n                }\n            }[\"useRoomHandling.useCallback[loadInitialMessages].loadMessagesWithRetry\"];\n            try {\n                return await loadMessagesWithRetry();\n            } catch (error) {\n                if (!socketRef.current?.connected) {\n                    await setupSocket();\n                    return loadMessagesWithRetry();\n                }\n                throw error;\n            }\n        }\n    }[\"useRoomHandling.useCallback[loadInitialMessages]\"], [\n        socketRef,\n        processMessages,\n        setupSocket\n    ]);\n    const setupRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRoomHandling.useCallback[setupRoom]\": async ()=>{\n            if (setupPromiseRef.current) {\n                return setupPromiseRef.current;\n            }\n            setupPromiseRef.current = ({\n                \"useRoomHandling.useCallback[setupRoom]\": async ()=>{\n                    try {\n                        initializingRef.current = true;\n                        setLoading(true);\n                        setError(null);\n                        messageRetryCountRef.current = 0;\n                        // 1. Socket Setup\n                        socketRef.current = await setupSocket().catch({\n                            \"useRoomHandling.useCallback[setupRoom]\": (error)=>{\n                                console.log('Socket setup error:', error);\n                                router.push('/_error');\n                            }\n                        }[\"useRoomHandling.useCallback[setupRoom]\"]);\n                        // 2. Fetch Room Data\n                        const roomData = await fetchRoomData(router.query.room);\n                        // Ensure current user is included in participants for display\n                        if (currentUser && roomData.participants) {\n                            const isUserInParticipants = roomData.participants.some({\n                                \"useRoomHandling.useCallback[setupRoom].isUserInParticipants\": (p)=>p._id === currentUser.id || p.id === currentUser.id\n                            }[\"useRoomHandling.useCallback[setupRoom].isUserInParticipants\"]);\n                            if (!isUserInParticipants) {\n                                roomData.participants = [\n                                    ...roomData.participants,\n                                    {\n                                        _id: currentUser.id,\n                                        id: currentUser.id,\n                                        name: currentUser.name,\n                                        email: currentUser.email\n                                    }\n                                ];\n                            }\n                        }\n                        setRoom(roomData);\n                        // 3. Setup Event Listeners\n                        if (mountedRef.current) {\n                            setupEventListeners();\n                        }\n                        // 4. Join Room and Load Messages\n                        if (mountedRef.current && socketRef.current?.connected) {\n                            await joinRoom(router.query.room);\n                            await loadInitialMessages(router.query.room);\n                        }\n                        if (mountedRef.current) {\n                            setupCompleteRef.current = true;\n                            setIsInitialized(true);\n                        }\n                    } catch (error) {\n                        if (mountedRef.current) {\n                            const errorMessage = error.message.includes('시간 초과') ? '채팅방 연결 시간이 초과되었습니다.' : error.message || '채팅방 연결에 실패했습니다.';\n                            setError(errorMessage);\n                            cleanup();\n                            if (socketRef.current) {\n                                socketRef.current.disconnect();\n                                socketRef.current = null;\n                            }\n                        }\n                        throw error;\n                    } finally{\n                        if (mountedRef.current) {\n                            setLoading(false);\n                            initializingRef.current = false;\n                        }\n                        clearAllTimeouts();\n                        setupPromiseRef.current = null;\n                    }\n                }\n            })[\"useRoomHandling.useCallback[setupRoom]\"]();\n            return setupPromiseRef.current;\n        }\n    }[\"useRoomHandling.useCallback[setupRoom]\"], [\n        router.query.room,\n        socketRef,\n        mountedRef,\n        setupSocket,\n        fetchRoomData,\n        joinRoom,\n        loadInitialMessages,\n        cleanup,\n        setupEventListeners,\n        setError,\n        setRoom,\n        setLoading,\n        setIsInitialized,\n        initializingRef,\n        setupCompleteRef,\n        clearAllTimeouts\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useRoomHandling.useEffect\": ()=>{\n            return ({\n                \"useRoomHandling.useEffect\": ()=>{\n                    clearAllTimeouts();\n                    setupPromiseRef.current = null;\n                    initializingRef.current = false;\n                    setupCompleteRef.current = false;\n                    socketReconnectAttempts.current = 0;\n                    messageRetryCountRef.current = 0;\n                    if (socketRef.current) {\n                        socketRef.current.disconnect();\n                        socketRef.current = null;\n                    }\n                }\n            })[\"useRoomHandling.useEffect\"];\n        }\n    }[\"useRoomHandling.useEffect\"], [\n        clearAllTimeouts\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useRoomHandling.useEffect\": ()=>{\n            const handleOnline = {\n                \"useRoomHandling.useEffect.handleOnline\": ()=>{\n                    if (!setupCompleteRef.current && mountedRef.current) {\n                        setupRoom().catch({\n                            \"useRoomHandling.useEffect.handleOnline\": ()=>{}\n                        }[\"useRoomHandling.useEffect.handleOnline\"]);\n                    }\n                }\n            }[\"useRoomHandling.useEffect.handleOnline\"];\n            window.addEventListener('online', handleOnline);\n            return ({\n                \"useRoomHandling.useEffect\": ()=>{\n                    window.removeEventListener('online', handleOnline);\n                }\n            })[\"useRoomHandling.useEffect\"];\n        }\n    }[\"useRoomHandling.useEffect\"], [\n        setupRoom\n    ]);\n    return {\n        setupRoom,\n        joinRoom,\n        loadInitialMessages,\n        fetchRoomData,\n        handleSessionError\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useRoomHandling);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2hvb2tzL3VzZVJvb21IYW5kbGluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQ1I7QUFDRztBQUNOO0FBRXJDLE1BQU1NLGtCQUFrQixDQUM3QkMsV0FDQUMsYUFDQUMsWUFDQUMsUUFDQUMsU0FDQUMsVUFDQUMsYUFDQUMsb0JBQ0FDLG9CQUNBQyxZQUNBQyxxQkFDQUMsU0FDQUMsU0FDQUMsa0JBQ0FDLGlCQUNBQyxrQkFDQUMsV0FDQUM7SUFFQSxNQUFNLEVBQUVDLElBQUksRUFBRUMsWUFBWSxFQUFFQyxNQUFNLEVBQUUsR0FBR3ZCLDhEQUFPQTtJQUM5QyxNQUFNd0Isa0JBQWtCNUIsNkNBQU1BLENBQUM7SUFDL0IsTUFBTTZCLGtCQUFrQjdCLDZDQUFNQSxDQUFDO0lBQy9CLE1BQU04QixpQkFBaUI5Qiw2Q0FBTUEsQ0FBQztJQUM5QixNQUFNK0Isc0JBQXNCL0IsNkNBQU1BLENBQUM7SUFDbkMsTUFBTWdDLDBCQUEwQmhDLDZDQUFNQSxDQUFDO0lBQ3ZDLE1BQU1pQyx1QkFBdUJqQyw2Q0FBTUEsQ0FBQztJQUNwQyxNQUFNa0MsZ0NBQWdDO0lBQ3RDLE1BQU1DLDZCQUE2QjtJQUNuQyxNQUFNQyxrQkFBa0I7SUFDeEIsTUFBTUMsc0JBQXNCO0lBRTVCLE1BQU1DLG1CQUFtQnBDLGtEQUFXQTt5REFBQztZQUNuQyxJQUFJMkIsZ0JBQWdCVSxPQUFPLEVBQUU7Z0JBQzNCQyxhQUFhWCxnQkFBZ0JVLE9BQU87Z0JBQ3BDVixnQkFBZ0JVLE9BQU8sR0FBRztZQUM1QjtZQUNBLElBQUlULGVBQWVTLE9BQU8sRUFBRTtnQkFDMUJDLGFBQWFWLGVBQWVTLE9BQU87Z0JBQ25DVCxlQUFlUyxPQUFPLEdBQUc7WUFDM0I7WUFDQSxJQUFJUixvQkFBb0JRLE9BQU8sRUFBRTtnQkFDL0JDLGFBQWFULG9CQUFvQlEsT0FBTztnQkFDeENSLG9CQUFvQlEsT0FBTyxHQUFHO1lBQ2hDO1FBQ0Y7d0RBQUcsRUFBRTtJ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Q3ZDOztRQUNGO29DQUFHO1FBQUNoQjtLQUFVO0lBRWQsT0FBTztRQUNMQTtRQUNBaEI7UUFDQUk7UUFDQXBCO1FBQ0F4QztJQUNGO0FBQ0YsRUFBRTtBQUVGLGlFQUFlbkMsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvaG9va3MvdXNlUm9vbUhhbmRsaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzb2NrZXRTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL3NvY2tldCc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi4vY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgVG9hc3QgfSBmcm9tICcuLi9jb21wb25lbnRzL1RvYXN0JztcblxuZXhwb3J0IGNvbnN0IHVzZVJvb21IYW5kbGluZyA9IChcbiAgc29ja2V0UmVmLFxuICBjdXJyZW50VXNlcixcbiAgbW91bnRlZFJlZixcbiAgcm91dGVyLFxuICBzZXRSb29tLFxuICBzZXRFcnJvcixcbiAgc2V0TWVzc2FnZXMsXG4gIHNldEhhc01vcmVNZXNzYWdlcyxcbiAgc2V0TG9hZGluZ01lc3NhZ2VzLFxuICBzZXRMb2FkaW5nLFxuICBzZXR1cEV2ZW50TGlzdGVuZXJzLFxuICBjbGVhbnVwLFxuICBsb2FkaW5nLFxuICBzZXRJc0luaXRpYWxpemVkLFxuICBpbml0aWFsaXppbmdSZWYsXG4gIHNldHVwQ29tcGxldGVSZWYsXG4gIHVzZXJSb29tcyxcbiAgcHJvY2Vzc01lc3NhZ2VzXG4pID0+IHtcbiAgY29uc3QgeyB1c2VyLCByZWZyZXNoVG9rZW4sIGxvZ291dCB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCBzZXR1cFByb21pc2VSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHNldHVwVGltZW91dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgam9pblRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHJlY29ubmVjdFRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHNvY2tldFJlY29ubmVjdEF0dGVtcHRzID0gdXNlUmVmKDApO1xuICBjb25zdCBtZXNzYWdlUmV0cnlDb3VudFJlZiA9IHVzZVJlZigwKTtcbiAgY29uc3QgTUFYX1NPQ0tFVF9SRUNPTk5FQ1RfQVRURU1QVFMgPSAzO1xuICBjb25zdCBNQVhfTUVTU0FHRV9SRVRSWV9BVFRFTVBUUyA9IDM7XG4gIGNvbnN0IE1FU1NBR0VfVElNRU9VVCA9IDEwMDAwO1xuICBjb25zdCBNRVNTQUdFX1JFVFJZX0RFTEFZID0gMjAwMDtcblxuICBjb25zdCBjbGVhckFsbFRpbWVvdXRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChzZXR1cFRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHNldHVwVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIHNldHVwVGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGpvaW5UaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dChqb2luVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIGpvaW5UaW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAocmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIHJlY29ubmVjdFRpbWVvdXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlU2Vzc2lvbkVycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIHNlc3Npb24gZm91bmQnKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgcmVmcmVzaFRva2VuKCk7XG4gICAgICBpZiAobW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgfVxuXG4gICAgaWYgKG1vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgYXdhaXQgbG9nb3V0KCk7XG4gICAgICByb3V0ZXIucmVwbGFjZSgnLz9yZWRpcmVjdD0nICsgcm91dGVyLmFzUGF0aCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBjb25zdCBzZXR1cFNvY2tldCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF1c2VyPy50b2tlbiB8fCAhdXNlcj8uc2Vzc2lvbklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhdXRoZW50aWNhdGlvbiBzdGF0ZScpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQ/LmNvbm5lY3RlZCkge1xuICAgICAgICByZXR1cm4gc29ja2V0UmVmLmN1cnJlbnQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgICBjb25zdCBjdXJyZW50U29ja2V0ID0gc29ja2V0UmVmLmN1cnJlbnQ7XG5cbiAgICAgICAgaWYgKHVzZXJSb29tcz8uZ2V0KGN1cnJlbnRTb2NrZXQuaWQpKSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGN1cnJlbnRTb2NrZXQuZW1pdCgnbGVhdmVSb29tJywgdXNlclJvb21zLmdldChjdXJyZW50U29ja2V0LmlkKSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHVzZXJSb29tcy5kZWxldGUoY3VycmVudFNvY2tldC5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50U29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgY3VycmVudFNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQgPSBudWxsO1xuXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDAwKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNvY2tldCA9IGF3YWl0IHNvY2tldFNlcnZpY2UuY29ubmVjdCh7XG4gICAgICAgIGF1dGg6IHtcbiAgICAgICAgICB0b2tlbjogdXNlci50b2tlbixcbiAgICAgICAgICBzZXNzaW9uSWQ6IHVzZXIuc2Vzc2lvbklkXG4gICAgICAgIH0sXG4gICAgICAgIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXSxcbiAgICAgICAgcmVjb25uZWN0aW9uOiB0cnVlLFxuICAgICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogTUFYX1NPQ0tFVF9SRUNPTk5FQ1RfQVRURU1QVFMsXG4gICAgICAgIHJlY29ubmVjdGlvbkRlbGF5OiAxMDAwLFxuICAgICAgICByZWNvbm5lY3Rpb25EZWxheU1heDogMzAwMCxcbiAgICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICAgIHBpbmdUaW1lb3V0OiAxMDAwMCxcbiAgICAgICAgcGluZ0ludGVydmFsOiA4MDAwLFxuICAgICAgICBmb3JjZU5ldzogdHJ1ZSxcbiAgICAgICAgYXV0b0Nvbm5lY3Q6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgc29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKCFzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1NvY2tldCBjb25uZWN0aW9uIHRpbWVvdXQnKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAxMDAwMCk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlQ29ubmVjdCA9ICgpID0+IHtcbiAgICAgICAgICBpZiAoIXNvY2tldENvbm5lY3RlZCkge1xuICAgICAgICAgICAgc29ja2V0Q29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChjb25uZWN0aW9uVGltZW91dCk7XG4gICAgICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Nvbm5lY3RfZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgICAgICAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgaGFuZGxlRXJyb3IpO1xuICAgICAgICAgICAgc29ja2V0UmVjb25uZWN0QXR0ZW1wdHMuY3VycmVudCA9IDA7XG4gICAgICAgICAgICByZXNvbHZlKHNvY2tldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgaWYgKCFzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHNvY2tldENvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoY29ubmVjdGlvblRpbWVvdXQpO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgICAgICBoYW5kbGVDb25uZWN0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc29ja2V0Lm9uY2UoJ2Nvbm5lY3QnLCBoYW5kbGVDb25uZWN0KTtcbiAgICAgICAgc29ja2V0Lm9uY2UoJ2Nvbm5lY3RfZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgICAgIHNvY2tldC5vbmNlKCdlcnJvcicsIGhhbmRsZUVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlID09PSAnSW52YWxpZCBhdXRoZW50aWNhdGlvbiBzdGF0ZScpIHtcbiAgICAgICAgcm91dGVyLnJlcGxhY2UoJy8/ZXJyb3I9YXV0aF9yZXF1aXJlZCcpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LCBbdXNlclJvb21zLCBjbGVhbnVwLCByb3V0ZXJdKTtcblxuICBjb25zdCBmZXRjaFJvb21EYXRhID0gdXNlQ2FsbGJhY2soYXN5bmMgKHJvb21JZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXVzZXI/LnRva2VuIHx8ICF1c2VyPy5zZXNzaW9uSWQpIHtcbiAgICAgICAgYXdhaXQgaGFuZGxlU2Vzc2lvbkVycm9yKCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7J247KadIOygleuztOqwgCDsnKDtmqjtlZjsp4Ag7JWK7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJvb21JZCB8fCAhbW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7LGE7YyF67CpIOygleuztOqwgCDsmKzrsJTrpbTsp4Ag7JWK7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMfS9hcGkvcm9vbXMvJHtyb29tSWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAneC1hdXRoLXRva2VuJzogdXNlci50b2tlbixcbiAgICAgICAgICAgICd4LXNlc3Npb24taWQnOiB1c2VyLnNlc3Npb25JZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgIGNvbnN0IHJlZnJlc2hlZCA9IGF3YWl0IGhhbmRsZVNlc3Npb25FcnJvcigpO1xuICAgICAgICAgIGlmIChyZWZyZXNoZWQgJiYgbW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmV0Y2hSb29tRGF0YShyb29tSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yduOymneydtCDrp4zro4zrkJjsl4jsirXri4jri6QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfssYTtjIXrsKkg7KCV67O066W8IOu2iOufrOyYpOuKlOuNsCDsi6TtjKjtlojsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBpZiAoIWRhdGEuc3VjY2VzcyB8fCAhZGF0YS5kYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7LGE7YyF67CpIOuNsOydtO2EsOqwgCDsmKzrsJTrpbTsp4Ag7JWK7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFttb3VudGVkUmVmLCBoYW5kbGVTZXNzaW9uRXJyb3JdKTtcblxuICBjb25zdCBqb2luUm9vbSA9IHVzZUNhbGxiYWNrKGFzeW5jIChyb29tSWQpID0+IHtcbiAgICBpZiAoIXJvb21JZCB8fCAhbW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yemOuqu+uQnCDssYTtjIXrsKkg7KCV67O07J6F64uI64ukLicpO1xuICAgIH1cblxuICAgIGNvbnN0IHNvY2tldCA9IHNvY2tldFJlZi5jdXJyZW50O1xuICAgIGlmICghc29ja2V0Py5jb25uZWN0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU29ja2V0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCfssYTtjIXrsKkg7J6F7J6lIOyLnOqwhOydtCDstIjqs7zrkJjsl4jsirXri4jri6QuJykpO1xuICAgICAgfSwgMTAwMDApO1xuXG4gICAgICBjb25zdCBoYW5kbGVTdWNjZXNzID0gKGRhdGEpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB1c2VyUm9vbXM/LnNldChzb2NrZXQuaWQsIHJvb21JZCk7XG4gICAgICAgIHNvY2tldC5vZmYoJ2pvaW5Sb29tRXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgICAgIHNvY2tldC5vZmYoJ2Vycm9yJywgaGFuZGxlRXJyb3IpO1xuICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgaGFuZGxlRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICBzb2NrZXQub2ZmKCdqb2luUm9vbVN1Y2Nlc3MnLCBoYW5kbGVTdWNjZXNzKTtcbiAgICAgICAgc29ja2V0Lm9mZignZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9O1xuXG4gICAgICBzb2NrZXQub25jZSgnam9pblJvb21TdWNjZXNzJywgaGFuZGxlU3VjY2Vzcyk7XG4gICAgICBzb2NrZXQub25jZSgnam9pblJvb21FcnJvcicsIGhhbmRsZUVycm9yKTtcbiAgICAgIHNvY2tldC5vbmNlKCdlcnJvcicsIGhhbmRsZUVycm9yKTtcblxuICAgICAgc29ja2V0LmVtaXQoJ2pvaW5Sb29tJywgcm9vbUlkKTtcbiAgICB9KTtcbiAgfSwgW3NvY2tldFJlZiwgbW91bnRlZFJlZiwgdXNlclJvb21zXSk7XG5cbiAgY29uc3QgbG9hZEluaXRpYWxNZXNzYWdlcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChyb29tSWQpID0+IHtcbiAgICBjb25zdCBsb2FkTWVzc2FnZXNXaXRoUmV0cnkgPSBhc3luYyAocmV0cnlDb3VudCA9IDApID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmICghc29ja2V0UmVmLmN1cnJlbnQ/LmNvbm5lY3RlZCkge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1NvY2tldCBub3QgY29ubmVjdGVkJykpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0aW1lb3V0SWQ7XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRpbWVvdXRJZCkgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQ/Lm9mZigncHJldmlvdXNNZXNzYWdlc0xvYWRlZCcsIGhhbmRsZVN1Y2Nlc3MpO1xuICAgICAgICAgIHNvY2tldFJlZi5jdXJyZW50Py5vZmYoJ2Vycm9yJywgaGFuZGxlRXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVN1Y2Nlc3MgPSAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFyZXNwb25zZSB8fCAhQXJyYXkuaXNBcnJheShyZXNwb25zZS5tZXNzYWdlcykpIHtcbiAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgTUFYX01FU1NBR0VfUkVUUllfQVRURU1QVFMpIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9hZE1lc3NhZ2VzV2l0aFJldHJ5KHJldHJ5Q291bnQgKyAxKVxuICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzb2x2ZSlcbiAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICB9LCBNRVNTQUdFX1JFVFJZX0RFTEFZKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ+yemOuqu+uQnCDrqZTsi5zsp4Ag7J2R64u1IO2YleyLneyeheuLiOuLpC4nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcHJvY2Vzc01lc3NhZ2VzKHJlc3BvbnNlLm1lc3NhZ2VzLCByZXNwb25zZS5oYXNNb3JlLCB0cnVlKTtcbiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYW5kbGVFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICBpZiAocmV0cnlDb3VudCA8IE1BWF9NRVNTQUdFX1JFVFJZX0FUVEVNUFRTKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgbG9hZE1lc3NhZ2VzV2l0aFJldHJ5KHJldHJ5Q291bnQgKyAxKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc29sdmUpXG4gICAgICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICB9LCBNRVNTQUdFX1JFVFJZX0RFTEFZKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGFuZGxlVGltZW91dCA9ICgpID0+IHtcbiAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgaWYgKHJldHJ5Q291bnQgPCBNQVhfTUVTU0FHRV9SRVRSWV9BVFRFTVBUUykge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGxvYWRNZXNzYWdlc1dpdGhSZXRyeShyZXRyeUNvdW50ICsgMSlcbiAgICAgICAgICAgICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgfSwgTUVTU0FHRV9SRVRSWV9ERUxBWSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ+uplOyLnOyngCDroZzrlKkg7Iuc6rCE7J20IOy0iOqzvOuQmOyXiOyKteuLiOuLpC4nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uY2UoJ3ByZXZpb3VzTWVzc2FnZXNMb2FkZWQnLCBoYW5kbGVTdWNjZXNzKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQub25jZSgnZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoaGFuZGxlVGltZW91dCwgTUVTU0FHRV9USU1FT1VUKTtcblxuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdmZXRjaFByZXZpb3VzTWVzc2FnZXMnLCB7XG4gICAgICAgICAgcm9vbUlkLFxuICAgICAgICAgIGxpbWl0OiAzMFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGxvYWRNZXNzYWdlc1dpdGhSZXRyeSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoIXNvY2tldFJlZi5jdXJyZW50Py5jb25uZWN0ZWQpIHtcbiAgICAgICAgYXdhaXQgc2V0dXBTb2NrZXQoKTtcbiAgICAgICAgcmV0dXJuIGxvYWRNZXNzYWdlc1dpdGhSZXRyeSgpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LCBbc29ja2V0UmVmLCBwcm9jZXNzTWVzc2FnZXMsIHNldHVwU29ja2V0XSk7XG5cbiAgY29uc3Qgc2V0dXBSb29tID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmIChzZXR1cFByb21pc2VSZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuIHNldHVwUHJvbWlzZVJlZi5jdXJyZW50O1xuICAgIH1cblxuICAgIHNldHVwUHJvbWlzZVJlZi5jdXJyZW50ID0gKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGluaXRpYWxpemluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgIG1lc3NhZ2VSZXRyeUNvdW50UmVmLmN1cnJlbnQgPSAwO1xuXG4gICAgICAgIC8vIDEuIFNvY2tldCBTZXR1cFxuICAgICAgICBzb2NrZXRSZWYuY3VycmVudCA9IGF3YWl0IHNldHVwU29ja2V0KClcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU29ja2V0IHNldHVwIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvX2Vycm9yJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMi4gRmV0Y2ggUm9vbSBEYXRhXG4gICAgICAgIGNvbnN0IHJvb21EYXRhID0gYXdhaXQgZmV0Y2hSb29tRGF0YShyb3V0ZXIucXVlcnkucm9vbSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbnN1cmUgY3VycmVudCB1c2VyIGlzIGluY2x1ZGVkIGluIHBhcnRpY2lwYW50cyBmb3IgZGlzcGxheVxuICAgICAgICBpZiAoY3VycmVudFVzZXIgJiYgcm9vbURhdGEucGFydGljaXBhbnRzKSB7XG4gICAgICAgICAgY29uc3QgaXNVc2VySW5QYXJ0aWNpcGFudHMgPSByb29tRGF0YS5wYXJ0aWNpcGFudHMuc29tZShwID0+XG4gICAgICAgICAgICBwLl9pZCA9PT0gY3VycmVudFVzZXIuaWQgfHwgcC5pZCA9PT0gY3VycmVudFVzZXIuaWRcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghaXNVc2VySW5QYXJ0aWNpcGFudHMpIHtcbiAgICAgICAgICAgIHJvb21EYXRhLnBhcnRpY2lwYW50cyA9IFtcbiAgICAgICAgICAgICAgLi4ucm9vbURhdGEucGFydGljaXBhbnRzLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgX2lkOiBjdXJyZW50VXNlci5pZCxcbiAgICAgICAgICAgICAgICBpZDogY3VycmVudFVzZXIuaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY3VycmVudFVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogY3VycmVudFVzZXIuZW1haWxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFJvb20ocm9vbURhdGEpO1xuXG4gICAgICAgIC8vIDMuIFNldHVwIEV2ZW50IExpc3RlbmVyc1xuICAgICAgICBpZiAobW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgc2V0dXBFdmVudExpc3RlbmVycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNC4gSm9pbiBSb29tIGFuZCBMb2FkIE1lc3NhZ2VzXG4gICAgICAgIGlmIChtb3VudGVkUmVmLmN1cnJlbnQgJiYgc29ja2V0UmVmLmN1cnJlbnQ/LmNvbm5lY3RlZCkge1xuICAgICAgICAgIGF3YWl0IGpvaW5Sb29tKHJvdXRlci5xdWVyeS5yb29tKTtcblxuICAgICAgICAgIGF3YWl0IGxvYWRJbml0aWFsTWVzc2FnZXMocm91dGVyLnF1ZXJ5LnJvb20pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgIHNldHVwQ29tcGxldGVSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgc2V0SXNJbml0aWFsaXplZCh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBcbiAgICAgICAgaWYgKG1vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ+yLnOqwhCDstIjqs7wnKSA/XG4gICAgICAgICAgICAn7LGE7YyF67CpIOyXsOqysCDsi5zqsITsnbQg7LSI6rO865CY7JeI7Iq164uI64ukLicgOlxuICAgICAgICAgICAgZXJyb3IubWVzc2FnZSB8fCAn7LGE7YyF67CpIOyXsOqysOyXkCDsi6TtjKjtlojsirXri4jri6QuJztcbiAgICAgICAgICAgIFxuICAgICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgY2xlYW51cCgpO1xuXG4gICAgICAgICAgaWYgKHNvY2tldFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAobW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgaW5pdGlhbGl6aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2xlYXJBbGxUaW1lb3V0cygpO1xuICAgICAgICBzZXR1cFByb21pc2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIHJldHVybiBzZXR1cFByb21pc2VSZWYuY3VycmVudDtcbiAgfSwgW1xuICAgIHJvdXRlci5xdWVyeS5yb29tLFxuICAgIHNvY2tldFJlZixcbiAgICBtb3VudGVkUmVmLFxuICAgIHNldHVwU29ja2V0LFxuICAgIGZldGNoUm9vbURhdGEsXG4gICAgam9pblJvb20sXG4gICAgbG9hZEluaXRpYWxNZXNzYWdlcyxcbiAgICBjbGVhbnVwLFxuICAgIHNldHVwRXZlbnRMaXN0ZW5lcnMsXG4gICAgc2V0RXJyb3IsXG4gICAgc2V0Um9vbSxcbiAgICBzZXRMb2FkaW5nLFxuICAgIHNldElzSW5pdGlhbGl6ZWQsXG4gICAgaW5pdGlhbGl6aW5nUmVmLFxuICAgIHNldHVwQ29tcGxldGVSZWYsXG4gICAgY2xlYXJBbGxUaW1lb3V0c1xuICBdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckFsbFRpbWVvdXRzKCk7XG4gICAgICBzZXR1cFByb21pc2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICBpbml0aWFsaXppbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgc2V0dXBDb21wbGV0ZVJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBzb2NrZXRSZWNvbm5lY3RBdHRlbXB0cy5jdXJyZW50ID0gMDtcbiAgICAgIG1lc3NhZ2VSZXRyeUNvdW50UmVmLmN1cnJlbnQgPSAwO1xuXG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2NsZWFyQWxsVGltZW91dHNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZU9ubGluZSA9ICgpID0+IHtcbiAgICAgIGlmICghc2V0dXBDb21wbGV0ZVJlZi5jdXJyZW50ICYmIG1vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICBzZXR1cFJvb20oKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCBoYW5kbGVPbmxpbmUpO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb25saW5lJywgaGFuZGxlT25saW5lKTtcbiAgICB9O1xuICB9LCBbc2V0dXBSb29tXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBzZXR1cFJvb20sXG4gICAgam9pblJvb20sXG4gICAgbG9hZEluaXRpYWxNZXNzYWdlcyxcbiAgICBmZXRjaFJvb21EYXRhLFxuICAgIGhhbmRsZVNlc3Npb25FcnJvclxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlUm9vbUhhbmRsaW5nO1xuIl0sIm5hbWVzIjpbInVzZVJlZiIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwic29ja2V0U2VydmljZSIsInVzZUF1dGgiLCJUb2FzdCIsInVzZVJvb21IYW5kbGluZyIsInNvY2tldFJlZiIsImN1cnJlbnRVc2VyIiwibW91bnRlZFJlZiIsInJvdXRlciIsInNldFJvb20iLCJzZXRFcnJvciIsInNldE1lc3NhZ2VzIiwic2V0SGFzTW9yZU1lc3NhZ2VzIiwic2V0TG9hZGluZ01lc3NhZ2VzIiwic2V0TG9hZGluZyIsInNldHVwRXZlbnRMaXN0ZW5lcnMiLCJjbGVhbnVwIiwibG9hZGluZyIsInNldElzSW5pdGlhbGl6ZWQiLCJpbml0aWFsaXppbmdSZWYiLCJzZXR1cENvbXBsZXRlUmVmIiwidXNlclJvb21zIiwicHJvY2Vzc01lc3NhZ2VzIiwidXNlciIsInJlZnJlc2hUb2tlbiIsImxvZ291dCIsInNldHVwUHJvbWlzZVJlZiIsInNldHVwVGltZW91dFJlZiIsImpvaW5UaW1lb3V0UmVmIiwicmVjb25uZWN0VGltZW91dFJlZiIsInNvY2tldFJlY29ubmVjdEF0dGVtcHRzIiwibWVzc2FnZVJldHJ5Q291bnRSZWYiLCJNQVhfU09DS0VUX1JFQ09OTkVDVF9BVFRFTVBUUyIsIk1BWF9NRVNTQUdFX1JFVFJZX0FUVEVNUFRTIiwiTUVTU0FHRV9USU1FT1VUIiwiTUVTU0FHRV9SRVRSWV9ERUxBWSIsImNsZWFyQWxsVGltZW91dHMiLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0IiwiaGFuZGxlU2Vzc2lvbkVycm9yIiwiRXJyb3IiLCJlcnJvciIsInJlcGxhY2UiLCJhc1BhdGgiLCJzZXR1cFNvY2tldCIsInRva2VuIiwic2Vzc2lvbklkIiwiY29ubmVjdGVkIiwiY3VycmVudFNvY2tldCIsImdldCIsImlkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJlbWl0Iiwic2V0VGltZW91dCIsImRlbGV0ZSIsImRpc2Nvbm5lY3QiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJzb2NrZXQiLCJjb25uZWN0IiwiYXV0aCIsInRyYW5zcG9ydHMiLCJyZWNvbm5lY3Rpb24iLCJyZWNvbm5lY3Rpb25BdHRlbXB0cyIsInJlY29ubmVjdGlvbkRlbGF5IiwicmVjb25uZWN0aW9uRGVsYXlNYXgiLCJ0aW1lb3V0IiwicGluZ1RpbWVvdXQiLCJwaW5nSW50ZXJ2YWwiLCJmb3JjZU5ldyIsImF1dG9Db25uZWN0IiwicmVqZWN0Iiwic29ja2V0Q29ubmVjdGVkIiwiY29ubmVjdGlvblRpbWVvdXQiLCJoYW5kbGVDb25uZWN0IiwicmVtb3ZlTGlzdGVuZXIiLCJoYW5kbGVFcnJvciIsIm9uY2UiLCJtZXNzYWdlIiwiZmV0Y2hSb29tRGF0YSIsInJvb21JZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsIm1ldGhvZCIsImhlYWRlcnMiLCJjcmVkZW50aWFscyIsIm9rIiwic3RhdHVzIiwicmVmcmVzaGVkIiwiZGF0YSIsImpzb24iLCJzdWNjZXNzIiwiam9pblJvb20iLCJoYW5kbGVTdWNjZXNzIiwic2V0Iiwib2ZmIiwibG9hZEluaXRpYWxNZXNzYWdlcyIsImxvYWRNZXNzYWdlc1dpdGhSZXRyeSIsInJldHJ5Q291bnQiLCJ0aW1lb3V0SWQiLCJBcnJheSIsImlzQXJyYXkiLCJtZXNzYWdlcyIsInRoZW4iLCJjYXRjaCIsImhhc01vcmUiLCJoYW5kbGVUaW1lb3V0IiwibGltaXQiLCJzZXR1cFJvb20iLCJjb25zb2xlIiwibG9nIiwicHVzaCIsInJvb21EYXRhIiwicXVlcnkiLCJyb29tIiwicGFydGljaXBhbnRzIiwiaXNVc2VySW5QYXJ0aWNpcGFudHMiLCJzb21lIiwicCIsIl9pZCIsIm5hbWUiLCJlbWFpbCIsImVycm9yTWVzc2FnZSIsImluY2x1ZGVzIiwiaGFuZGxlT25saW5lIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useRoomHandling.js\n");

/***/ }),

/***/ "(pages-dir-node)/./hooks/useSocketHandling.js":
/*!************************************!*\
  !*** ./hooks/useSocketHandling.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useSocketHandling: () => (/* binding */ useSocketHandling)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_socket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/socket */ \"(pages-dir-node)/./services/socket.js\");\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_socket__WEBPACK_IMPORTED_MODULE_1__, _components_Toast__WEBPACK_IMPORTED_MODULE_2__]);\n([_services_socket__WEBPACK_IMPORTED_MODULE_1__, _components_Toast__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst useSocketHandling = (router, maxRetries = 5)=>{\n    const [connected, setConnected] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [retryCount, setRetryCount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [isReconnecting, setIsReconnecting] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const retryTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const reconnectIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const connectionTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const cleanup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSocketHandling.useCallback[cleanup]\": ()=>{\n            if (retryTimeoutRef.current) {\n                clearTimeout(retryTimeoutRef.current);\n            }\n            if (reconnectIntervalRef.current) {\n                clearInterval(reconnectIntervalRef.current);\n            }\n            if (connectionTimeoutRef.current) {\n                clearTimeout(connectionTimeoutRef.current);\n            }\n        }\n    }[\"useSocketHandling.useCallback[cleanup]\"], []);\n    const getRetryDelay = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSocketHandling.useCallback[getRetryDelay]\": (retryAttempt)=>{\n            return Math.min(1000 * Math.pow(2, retryAttempt), 10000); // 최대 10초\n        }\n    }[\"useSocketHandling.useCallback[getRetryDelay]\"], []);\n    const handleConnectionError = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSocketHandling.useCallback[handleConnectionError]\": async (error, handleSessionError)=>{\n            setConnected(false);\n            setIsReconnecting(true);\n            try {\n                if (error?.message?.includes('세션') || error?.message?.includes('인증') || error?.message?.includes('토큰')) {\n                    await handleSessionError?.();\n                    return;\n                }\n                if (retryCount < maxRetries) {\n                    const retryDelay = getRetryDelay(retryCount);\n                    cleanup();\n                    retryTimeoutRef.current = setTimeout({\n                        \"useSocketHandling.useCallback[handleConnectionError]\": async ()=>{\n                            try {\n                                if (socketRef.current) {\n                                    await socketRef.current.connect();\n                                    setConnected(true);\n                                    setIsReconnecting(false);\n                                    setRetryCount(0);\n                                    setError(null);\n                                    // 재연결 성공 시 채팅방 재접속\n                                    if (router?.query?.room) {\n                                        socketRef.current.emit('joinRoom', router.query.room);\n                                    }\n                                }\n                            } catch (retryError) {\n                                setRetryCount({\n                                    \"useSocketHandling.useCallback[handleConnectionError]\": (prev)=>prev + 1\n                                }[\"useSocketHandling.useCallback[handleConnectionError]\"]);\n                                handleConnectionError(retryError, handleSessionError);\n                            }\n                        }\n                    }[\"useSocketHandling.useCallback[handleConnectionError]\"], retryDelay);\n                } else {\n                    setIsReconnecting(false);\n                    _components_Toast__WEBPACK_IMPORTED_MODULE_2__.Toast.error('채팅 서버와 연결할 수 없습니다. 페이지를 새로고침해주세요.');\n                }\n            } catch (err) {\n                setIsReconnecting(false);\n            }\n        }\n    }[\"useSocketHandling.useCallback[handleConnectionError]\"], [\n        retryCount,\n        maxRetries,\n        cleanup,\n        getRetryDelay,\n        router?.query?.room\n    ]);\n    const handleReconnect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSocketHandling.useCallback[handleReconnect]\": async (currentUser, handleSessionError)=>{\n            if (isReconnecting) return;\n            try {\n                if (!currentUser?.token || !currentUser?.sessionId) {\n                    throw new Error('Invalid user credentials');\n                }\n                setError(null);\n                setRetryCount(0);\n                setIsReconnecting(true);\n                cleanup();\n                if (socketRef.current) {\n                    socketRef.current.disconnect();\n                    setConnected(false);\n                }\n                const socket = await _services_socket__WEBPACK_IMPORTED_MODULE_1__[\"default\"].connect({\n                    auth: {\n                        token: currentUser.token,\n                        sessionId: currentUser.sessionId\n                    },\n                    transports: [\n                        'websocket',\n                        'polling'\n                    ],\n                    reconnection: true,\n                    reconnectionAttempts: maxRetries,\n                    reconnectionDelay: getRetryDelay(0),\n                    reconnectionDelayMax: 10000,\n                    timeout: 20000\n                });\n                socketRef.current = socket;\n                // 연결 타임아웃 설정\n                connectionTimeoutRef.current = setTimeout({\n                    \"useSocketHandling.useCallback[handleReconnect]\": ()=>{\n                        if (!socket.connected) {\n                            handleConnectionError(new Error('Connection timeout'), handleSessionError);\n                        }\n                    }\n                }[\"useSocketHandling.useCallback[handleReconnect]\"], 20000);\n                // 연결 이벤트 핸들러\n                socket.on('connect', {\n                    \"useSocketHandling.useCallback[handleReconnect]\": ()=>{\n                        setConnected(true);\n                        setIsReconnecting(false);\n                        cleanup();\n                        if (router?.query?.room) {\n                            socket.emit('joinRoom', router.query.room);\n                        }\n                    }\n                }[\"useSocketHandling.useCallback[handleReconnect]\"]);\n                socket.on('connect_error', {\n                    \"useSocketHandling.useCallback[handleReconnect]\": (error)=>{\n                        handleConnectionError(error, handleSessionError);\n                    }\n                }[\"useSocketHandling.useCallback[handleReconnect]\"]);\n                socket.on('disconnect', {\n                    \"useSocketHandling.useCallback[handleReconnect]\": (reason)=>{\n                        setConnected(false);\n                        if (reason === 'io server disconnect' || reason === 'io client disconnect') {\n                            return;\n                        }\n                        handleConnectionError(new Error(`Disconnected: ${reason}`), handleSessionError);\n                    }\n                }[\"useSocketHandling.useCallback[handleReconnect]\"]);\n            } catch (error) {\n                setConnected(false);\n                setIsReconnecting(false);\n                if (error.message?.includes('세션') || error.message?.includes('인증') || error.message?.includes('토큰')) {\n                    await handleSessionError?.();\n                    return;\n                }\n                _components_Toast__WEBPACK_IMPORTED_MODULE_2__.Toast.error('재연결에 실패했습니다.');\n            }\n        }\n    }[\"useSocketHandling.useCallback[handleReconnect]\"], [\n        isReconnecting,\n        cleanup,\n        getRetryDelay,\n        maxRetries,\n        router?.query?.room,\n        handleConnectionError\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSocketHandling.useEffect\": ()=>{\n            return cleanup;\n        }\n    }[\"useSocketHandling.useEffect\"], [\n        cleanup\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSocketHandling.useEffect\": ()=>{\n            const socket = socketRef.current;\n            if (!socket) return;\n            const handleConnect = {\n                \"useSocketHandling.useEffect.handleConnect\": ()=>{\n                    setConnected(true);\n                    setIsReconnecting(false);\n                    setRetryCount(0);\n                    setError(null);\n                }\n            }[\"useSocketHandling.useEffect.handleConnect\"];\n            const handleDisconnect = {\n                \"useSocketHandling.useEffect.handleDisconnect\": ()=>{\n                    setConnected(false);\n                }\n            }[\"useSocketHandling.useEffect.handleDisconnect\"];\n            socket.on('connect', handleConnect);\n            socket.on('disconnect', handleDisconnect);\n            setConnected(socket.connected);\n            return ({\n                \"useSocketHandling.useEffect\": ()=>{\n                    socket.off('connect', handleConnect);\n                    socket.off('disconnect', handleDisconnect);\n                }\n            })[\"useSocketHandling.useEffect\"];\n        }\n    }[\"useSocketHandling.useEffect\"], [\n        socketRef.current\n    ]);\n    // 네트워크 상태 모니터링\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSocketHandling.useEffect\": ()=>{\n            const handleOnline = {\n                \"useSocketHandling.useEffect.handleOnline\": ()=>{\n                    if (!connected && !isReconnecting) {\n                        handleReconnect();\n                    }\n                }\n            }[\"useSocketHandling.useEffect.handleOnline\"];\n            const handleOffline = {\n                \"useSocketHandling.useEffect.handleOffline\": ()=>{\n                    setConnected(false);\n                }\n            }[\"useSocketHandling.useEffect.handleOffline\"];\n            window.addEventListener('online', handleOnline);\n            window.addEventListener('offline', handleOffline);\n            return ({\n                \"useSocketHandling.useEffect\": ()=>{\n                    window.removeEventListener('online', handleOnline);\n                    window.removeEventListener('offline', handleOffline);\n                }\n            })[\"useSocketHandling.useEffect\"];\n        }\n    }[\"useSocketHandling.useEffect\"], [\n        connected,\n        isReconnecting,\n        handleReconnect\n    ]);\n    return {\n        connected,\n        error,\n        socketRef,\n        isReconnecting,\n        setConnected,\n        setError,\n        handleConnectionError,\n        handleReconnect,\n        cleanup\n    };\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useSocketHandling);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2hvb2tzL3VzZVNvY2tldEhhbmRsaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpRTtBQUNsQjtBQUNIO0FBRXJDLE1BQU1NLG9CQUFvQixDQUFDQyxRQUFRQyxhQUFhLENBQUM7SUFDdEQsTUFBTSxDQUFDQyxXQUFXQyxhQUFhLEdBQUdWLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ1csT0FBT0MsU0FBUyxHQUFHWiwrQ0FBUUEsQ0FBQztJQUNuQyxNQUFNLENBQUNhLFlBQVlDLGNBQWMsR0FBR2QsK0NBQVFBLENBQUM7SUFDN0MsTUFBTSxDQUFDZSxnQkFBZ0JDLGtCQUFrQixHQUFHaEIsK0NBQVFBLENBQUM7SUFDckQsTUFBTWlCLFlBQVloQiw2Q0FBTUEsQ0FBQztJQUN6QixNQUFNaUIsa0JBQWtCakIsNkNBQU1BLENBQUM7SUFDL0IsTUFBTWtCLHVCQUF1QmxCLDZDQUFNQSxDQUFDO0lBQ3BDLE1BQU1tQix1QkFBdUJuQiw2Q0FBTUEsQ0FBQztJQUVwQyxNQUFNb0IsVUFBVW5CLGtEQUFXQTtrREFBQztZQUMxQixJQUFJZ0IsZ0JBQWdCSSxPQUFPLEVBQUU7Z0JBQzNCQyxhQUFhTCxnQkFBZ0JJLE9BQU87WUFDdEM7WUFDQSxJQUFJSCxxQkFBcUJHLE9BQU8sRUFBRTtnQkFDaENFLGNBQWNMLHFCQUFxQkcsT0FBTztZQUM1QztZQUNBLElBQUlGLHFCQUFxQkUsT0FBTyxFQUFFO2dCQUNoQ0MsYUFBYUgscUJBQXFCRSxPQUFPO1lBQzNDO1FBQ0Y7aURBQUcsRUFBRTtJQUVMLE1BQU1HLGdCQUFnQnZCLGtEQUFXQTt3REFBQyxDQUFDd0I7WUFDakMsT0FBT0MsS0FBS0MsR0FBRyxDQUFDLE9BQU9ELEtBQUtFLEdBQUcsQ0FBQyxHQUFHSCxlQUFlLFFBQVEsU0FBUztRQUNyRTt1REFBRyxFQUFFO0lBRUwsTUFBTUksd0JBQXdCNUIsa0RBQVdBO2dFQUFDLE9BQU9TLE9BQU9vQjtZQUN0RHJCLGFBQWE7WUFD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QyxnQkFBZ0IsQ0FBQyxVQUFVSDtZQUNsQ0UsT0FBT0MsZ0JBQWdCLENBQUMsV0FBV0Y7WUFFbkM7K0NBQU87b0JBQ0xDLE9BQU9FLG1CQUFtQixDQUFDLFVBQVVKO29CQUNyQ0UsT0FBT0UsbUJBQW1CLENBQUMsV0FBV0g7Z0JBQ3hDOztRQUNGO3NDQUFHO1FBQUN0RDtRQUFXTTtRQUFnQjRCO0tBQWdCO0lBRS9DLE9BQU87UUFDTGxDO1FBQ0FFO1FBQ0FNO1FBQ0FGO1FBQ0FMO1FBQ0FFO1FBQ0FrQjtRQUNBYTtRQUNBdEI7SUFDRjtBQUNGLEVBQUU7QUFFRixpRUFBZWYsaUJBQWlCQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9ob29rcy91c2VTb2NrZXRIYW5kbGluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNvY2tldFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvc29ja2V0JztcbmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9Ub2FzdCc7XG5cbmV4cG9ydCBjb25zdCB1c2VTb2NrZXRIYW5kbGluZyA9IChyb3V0ZXIsIG1heFJldHJpZXMgPSA1KSA9PiB7IC8vIOy1nOuMgCDsnqzsi5zrj4Qg7Zqf7IiYIOymneqwgFxuICBjb25zdCBbY29ubmVjdGVkLCBzZXRDb25uZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbcmV0cnlDb3VudCwgc2V0UmV0cnlDb3VudF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2lzUmVjb25uZWN0aW5nLCBzZXRJc1JlY29ubmVjdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHNvY2tldFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgcmV0cnlUaW1lb3V0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCByZWNvbm5lY3RJbnRlcnZhbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgY29ubmVjdGlvblRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgY29uc3QgY2xlYW51cCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAocmV0cnlUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZXRyeVRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgfVxuICAgIGlmIChyZWNvbm5lY3RJbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhckludGVydmFsKHJlY29ubmVjdEludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgICBpZiAoY29ubmVjdGlvblRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3Rpb25UaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGdldFJldHJ5RGVsYXkgPSB1c2VDYWxsYmFjaygocmV0cnlBdHRlbXB0KSA9PiB7XG4gICAgcmV0dXJuIE1hdGgubWluKDEwMDAgKiBNYXRoLnBvdygyLCByZXRyeUF0dGVtcHQpLCAxMDAwMCk7IC8vIOy1nOuMgCAxMOy0iFxuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlQ29ubmVjdGlvbkVycm9yID0gdXNlQ2FsbGJhY2soYXN5bmMgKGVycm9yLCBoYW5kbGVTZXNzaW9uRXJyb3IpID0+IHtcbiAgICBzZXRDb25uZWN0ZWQoZmFsc2UpO1xuICAgIHNldElzUmVjb25uZWN0aW5nKHRydWUpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBpZiAoZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCfshLjshZgnKSB8fCBcbiAgICAgICAgICBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ+yduOymnScpIHx8IFxuICAgICAgICAgIGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygn7Yag7YGwJykpIHtcbiAgICAgICAgYXdhaXQgaGFuZGxlU2Vzc2lvbkVycm9yPy4oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocmV0cnlDb3VudCA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgY29uc3QgcmV0cnlEZWxheSA9IGdldFJldHJ5RGVsYXkocmV0cnlDb3VudCk7XG5cbiAgICAgICAgY2xlYW51cCgpO1xuXG4gICAgICAgIHJldHJ5VGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICBhd2FpdCBzb2NrZXRSZWYuY3VycmVudC5jb25uZWN0KCk7XG4gICAgICAgICAgICAgIHNldENvbm5lY3RlZCh0cnVlKTtcbiAgICAgICAgICAgICAgc2V0SXNSZWNvbm5lY3RpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICBzZXRSZXRyeUNvdW50KDApO1xuICAgICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIOyerOyXsOqysCDshLHqs7Ug7IucIOyxhO2MheuwqSDsnqzsoJHsho1cbiAgICAgICAgICAgICAgaWYgKHJvdXRlcj8ucXVlcnk/LnJvb20pIHtcbiAgICAgICAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdqb2luUm9vbScsIHJvdXRlci5xdWVyeS5yb29tKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKHJldHJ5RXJyb3IpIHtcbiAgICAgICAgICAgIHNldFJldHJ5Q291bnQocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICBoYW5kbGVDb25uZWN0aW9uRXJyb3IocmV0cnlFcnJvciwgaGFuZGxlU2Vzc2lvbkVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHJldHJ5RGVsYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SXNSZWNvbm5lY3RpbmcoZmFsc2UpO1xuICAgICAgICBUb2FzdC5lcnJvcign7LGE7YyFIOyEnOuyhOyZgCDsl7DqsrDtlaAg7IiYIOyXhuyKteuLiOuLpC4g7Y6Y7J207KeA66W8IOyDiOuhnOqzoOy5qO2VtOyjvOyEuOyalC4nKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHNldElzUmVjb25uZWN0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtyZXRyeUNvdW50LCBtYXhSZXRyaWVzLCBjbGVhbnVwLCBnZXRSZXRyeURlbGF5LCByb3V0ZXI/LnF1ZXJ5Py5yb29tXSk7XG5cbiAgY29uc3QgaGFuZGxlUmVjb25uZWN0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGN1cnJlbnRVc2VyLCBoYW5kbGVTZXNzaW9uRXJyb3IpID0+IHtcbiAgICBpZiAoaXNSZWNvbm5lY3RpbmcpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyPy50b2tlbiB8fCAhY3VycmVudFVzZXI/LnNlc3Npb25JZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdXNlciBjcmVkZW50aWFscycpO1xuICAgICAgfVxuXG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgIHNldFJldHJ5Q291bnQoMCk7XG4gICAgICBzZXRJc1JlY29ubmVjdGluZyh0cnVlKTtcbiAgICAgIFxuICAgICAgY2xlYW51cCgpO1xuICAgICAgXG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpO1xuICAgICAgICBzZXRDb25uZWN0ZWQoZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzb2NrZXQgPSBhd2FpdCBzb2NrZXRTZXJ2aWNlLmNvbm5lY3Qoe1xuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgdG9rZW46IGN1cnJlbnRVc2VyLnRva2VuLFxuICAgICAgICAgIHNlc3Npb25JZDogY3VycmVudFVzZXIuc2Vzc2lvbklkXG4gICAgICAgIH0sXG4gICAgICAgIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXSxcbiAgICAgICAgcmVjb25uZWN0aW9uOiB0cnVlLFxuICAgICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogbWF4UmV0cmllcyxcbiAgICAgICAgcmVjb25uZWN0aW9uRGVsYXk6IGdldFJldHJ5RGVsYXkoMCksXG4gICAgICAgIHJlY29ubmVjdGlvbkRlbGF5TWF4OiAxMDAwMCxcbiAgICAgICAgdGltZW91dDogMjAwMDBcbiAgICAgIH0pO1xuXG4gICAgICBzb2NrZXRSZWYuY3VycmVudCA9IHNvY2tldDtcbiAgICAgIFxuICAgICAgLy8g7Jew6rKwIO2DgOyehOyVhOybgyDshKTsoJVcbiAgICAgIGNvbm5lY3Rpb25UaW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCFzb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICAgICAgaGFuZGxlQ29ubmVjdGlvbkVycm9yKG5ldyBFcnJvcignQ29ubmVjdGlvbiB0aW1lb3V0JyksIGhhbmRsZVNlc3Npb25FcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMDAwKTtcblxuICAgICAgLy8g7Jew6rKwIOydtOuypO2KuCDtlbjrk6Trn6xcbiAgICAgIHNvY2tldC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgc2V0Q29ubmVjdGVkKHRydWUpO1xuICAgICAgICBzZXRJc1JlY29ubmVjdGluZyhmYWxzZSk7XG4gICAgICAgIGNsZWFudXAoKTtcblxuICAgICAgICBpZiAocm91dGVyPy5xdWVyeT8ucm9vbSkge1xuICAgICAgICAgIHNvY2tldC5lbWl0KCdqb2luUm9vbScsIHJvdXRlci5xdWVyeS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICBoYW5kbGVDb25uZWN0aW9uRXJyb3IoZXJyb3IsIGhhbmRsZVNlc3Npb25FcnJvcik7XG4gICAgICB9KTtcblxuICAgICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKHJlYXNvbikgPT4ge1xuICAgICAgICBzZXRDb25uZWN0ZWQoZmFsc2UpO1xuXG4gICAgICAgIGlmIChyZWFzb24gPT09ICdpbyBzZXJ2ZXIgZGlzY29ubmVjdCcgfHwgcmVhc29uID09PSAnaW8gY2xpZW50IGRpc2Nvbm5lY3QnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBoYW5kbGVDb25uZWN0aW9uRXJyb3IobmV3IEVycm9yKGBEaXNjb25uZWN0ZWQ6ICR7cmVhc29ufWApLCBoYW5kbGVTZXNzaW9uRXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2V0Q29ubmVjdGVkKGZhbHNlKTtcbiAgICAgIHNldElzUmVjb25uZWN0aW5nKGZhbHNlKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCfshLjshZgnKSB8fCBcbiAgICAgICAgICBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygn7J247KadJykgfHwgXG4gICAgICAgICAgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ+2GoO2BsCcpKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZVNlc3Npb25FcnJvcj8uKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgVG9hc3QuZXJyb3IoJ+yerOyXsOqysOyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XG4gICAgfVxuICB9LCBbaXNSZWNvbm5lY3RpbmcsIGNsZWFudXAsIGdldFJldHJ5RGVsYXksIG1heFJldHJpZXMsIHJvdXRlcj8ucXVlcnk/LnJvb20sIGhhbmRsZUNvbm5lY3Rpb25FcnJvcl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuIGNsZWFudXA7XG4gIH0sIFtjbGVhbnVwXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzb2NrZXQgPSBzb2NrZXRSZWYuY3VycmVudDtcbiAgICBpZiAoIXNvY2tldCkgcmV0dXJuO1xuXG4gICAgY29uc3QgaGFuZGxlQ29ubmVjdCA9ICgpID0+IHtcbiAgICAgIHNldENvbm5lY3RlZCh0cnVlKTtcbiAgICAgIHNldElzUmVjb25uZWN0aW5nKGZhbHNlKTtcbiAgICAgIHNldFJldHJ5Q291bnQoMCk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlRGlzY29ubmVjdCA9ICgpID0+IHtcbiAgICAgIHNldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfTtcblxuICAgIHNvY2tldC5vbignY29ubmVjdCcsIGhhbmRsZUNvbm5lY3QpO1xuICAgIHNvY2tldC5vbignZGlzY29ubmVjdCcsIGhhbmRsZURpc2Nvbm5lY3QpO1xuXG4gICAgc2V0Q29ubmVjdGVkKHNvY2tldC5jb25uZWN0ZWQpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNvY2tldC5vZmYoJ2Nvbm5lY3QnLCBoYW5kbGVDb25uZWN0KTtcbiAgICAgIHNvY2tldC5vZmYoJ2Rpc2Nvbm5lY3QnLCBoYW5kbGVEaXNjb25uZWN0KTtcbiAgICB9O1xuICB9LCBbc29ja2V0UmVmLmN1cnJlbnRdKTtcblxuICAvLyDrhKTtirjsm4ztgawg7IOB7YOcIOuqqOuLiO2EsOungVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZU9ubGluZSA9ICgpID0+IHtcbiAgICAgIGlmICghY29ubmVjdGVkICYmICFpc1JlY29ubmVjdGluZykge1xuICAgICAgICBoYW5kbGVSZWNvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlT2ZmbGluZSA9ICgpID0+IHtcbiAgICAgIHNldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCBoYW5kbGVPbmxpbmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgaGFuZGxlT2ZmbGluZSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29ubGluZScsIGhhbmRsZU9ubGluZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsIGhhbmRsZU9mZmxpbmUpO1xuICAgIH07XG4gIH0sIFtjb25uZWN0ZWQsIGlzUmVjb25uZWN0aW5nLCBoYW5kbGVSZWNvbm5lY3RdKTtcblxuICByZXR1cm4ge1xuICAgIGNvbm5lY3RlZCxcbiAgICBlcnJvcixcbiAgICBzb2NrZXRSZWYsXG4gICAgaXNSZWNvbm5lY3RpbmcsXG4gICAgc2V0Q29ubmVjdGVkLFxuICAgIHNldEVycm9yLFxuICAgIGhhbmRsZUNvbm5lY3Rpb25FcnJvcixcbiAgICBoYW5kbGVSZWNvbm5lY3QsXG4gICAgY2xlYW51cFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlU29ja2V0SGFuZGxpbmc7Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJzb2NrZXRTZXJ2aWNlIiwiVG9hc3QiLCJ1c2VTb2NrZXRIYW5kbGluZyIsInJvdXRlciIsIm1heFJldHJpZXMiLCJjb25uZWN0ZWQiLCJzZXRDb25uZWN0ZWQiLCJlcnJvciIsInNldEVycm9yIiwicmV0cnlDb3VudCIsInNldFJldHJ5Q291bnQiLCJpc1JlY29ubmVjdGluZyIsInNldElzUmVjb25uZWN0aW5nIiwic29ja2V0UmVmIiwicmV0cnlUaW1lb3V0UmVmIiwicmVjb25uZWN0SW50ZXJ2YWxSZWYiLCJjb25uZWN0aW9uVGltZW91dFJlZiIsImNsZWFudXAiLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsImdldFJldHJ5RGVsYXkiLCJyZXRyeUF0dGVtcHQiLCJNYXRoIiwibWluIiwicG93IiwiaGFuZGxlQ29ubmVjdGlvbkVycm9yIiwiaGFuZGxlU2Vzc2lvbkVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwicmV0cnlEZWxheSIsInNldFRpbWVvdXQiLCJjb25uZWN0IiwicXVlcnkiLCJyb29tIiwiZW1pdCIsInJldHJ5RXJyb3IiLCJwcmV2IiwiZXJyIiwiaGFuZGxlUmVjb25uZWN0IiwiY3VycmVudFVzZXIiLCJ0b2tlbiIsInNlc3Npb25JZCIsIkVycm9yIiwiZGlzY29ubmVjdCIsInNvY2tldCIsImF1dGgiLCJ0cmFuc3BvcnRzIiwicmVjb25uZWN0aW9uIiwicmVjb25uZWN0aW9uQXR0ZW1wdHMiLCJyZWNvbm5lY3Rpb25EZWxheSIsInJlY29ubmVjdGlvbkRlbGF5TWF4IiwidGltZW91dCIsIm9uIiwicmVhc29uIiwiaGFuZGxlQ29ubmVjdCIsImhhbmRsZURpc2Nvbm5lY3QiLCJvZmYiLCJoYW5kbGVPbmxpbmUiLCJoYW5kbGVPZmZsaW5lIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./hooks/useSocketHandling.js\n");

/***/ }),

/***/ "(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat%2F%5Broom%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fchat%2F%5Broom%5D.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat%2F%5Broom%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fchat%2F%5Broom%5D.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages/module.compiled */ \"(pages-dir-node)/./node_modules/next/dist/server/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(pages-dir-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(pages-dir-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"(pages-dir-node)/./pages/_document.js\");\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"(pages-dir-node)/./pages/_app.js\");\n/* harmony import */ var _pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages/chat/[room].js */ \"(pages-dir-node)/./pages/chat/[room].js\");\n/* harmony import */ var next_dist_server_route_modules_pages_pages_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/route-modules/pages/pages-handler */ \"(pages-dir-node)/./node_modules/next/dist/server/route-modules/pages/pages-handler.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__]);\n([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'default'));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticProps');\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticPaths');\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'getServerSideProps');\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'config');\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'reportWebVitals');\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticProps');\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticPaths');\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticParams');\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerProps');\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/chat/[room]\",\n        pathname: \"/chat/[room]\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    },\n    userland: _pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__\n});\nconst handler = (0,next_dist_server_route_modules_pages_pages_handler__WEBPACK_IMPORTED_MODULE_6__.getHandler)({\n    srcPage: \"/chat/[room]\",\n    config,\n    userland: _pages_chat_room_js__WEBPACK_IMPORTED_MODULE_5__,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVMmcGFnZT0lMkZjaGF0JTJGJTVCcm9vbSU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGY2hhdCUyRiU1QnJvb20lNUQuanMmYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Y7QUFDaEM7QUFDRTtBQUMxRDtBQUN5RDtBQUNWO0FBQy9DO0FBQ21EO0FBQzZCO0FBQ2hGO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxnREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyx1QkFBdUIsd0VBQUssQ0FBQyxnREFBUTtBQUNyQyx1QkFBdUIsd0VBQUssQ0FBQyxnREFBUTtBQUNyQywyQkFBMkIsd0VBQUssQ0FBQyxnREFBUTtBQUN6QyxlQUFlLHdFQUFLLENBQUMsZ0RBQVE7QUFDN0Isd0JBQXdCLHdFQUFLLENBQUMsZ0RBQVE7QUFDN0M7QUFDTyxnQ0FBZ0Msd0VBQUssQ0FBQyxnREFBUTtBQUM5QyxnQ0FBZ0Msd0VBQUssQ0FBQyxnREFBUTtBQUM5QyxpQ0FBaUMsd0VBQUssQ0FBQyxnREFBUTtBQUMvQyxnQ0FBZ0Msd0VBQUssQ0FBQyxnREFBUTtBQUM5QyxvQ0FBb0Msd0VBQUssQ0FBQyxnREFBUTtBQUN6RDtBQUNPLHdCQUF3QixrR0FBZ0I7QUFDL0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9EO0FBQ0E7QUFDQSxhQUFhLDhEQUFXO0FBQ3hCLGtCQUFrQixtRUFBZ0I7QUFDbEMsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDO0FBQ00sZ0JBQWdCLDhGQUFVO0FBQ2pDO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgYXBwIGFuZCBkb2N1bWVudCBtb2R1bGVzLlxuaW1wb3J0ICogYXMgZG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCAqIGFzIGFwcCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19hcHBcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2NoYXQvW3Jvb21dLmpzXCI7XG5pbXBvcnQgeyBnZXRIYW5kbGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy9wYWdlcy1oYW5kbGVyXCI7XG4vLyBSZS1leHBvcnQgdGhlIGNvbXBvbmVudCAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsICdnZXRTdGF0aWNQcm9wcycpO1xuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsICdnZXRTdGF0aWNQYXRocycpO1xuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U2VydmVyU2lkZVByb3BzJyk7XG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbmV4cG9ydCBjb25zdCByZXBvcnRXZWJWaXRhbHMgPSBob2lzdCh1c2VybGFuZCwgJ3JlcG9ydFdlYlZpdGFscycpO1xuLy8gUmUtZXhwb3J0IGxlZ2FjeSBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTdGF0aWNQYXRocycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhcmFtcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zJyk7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgJ3Vuc3RhYmxlX2dldFNlcnZlclByb3BzJyk7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHMnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICBwYWdlOiBcIi9jaGF0L1tyb29tXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvY2hhdC9bcm9vbV1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICAvLyBkZWZhdWx0IGV4cG9ydCBtaWdodCBub3QgZXhpc3Qgd2hlbiBvcHRpbWl6ZWQgZm9yIGRhdGEgb25seVxuICAgICAgICBBcHA6IGFwcC5kZWZhdWx0LFxuICAgICAgICBEb2N1bWVudDogZG9jdW1lbnQuZGVmYXVsdFxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSBnZXRIYW5kbGVyKHtcbiAgICBzcmNQYWdlOiBcIi9jaGF0L1tyb29tXVwiLFxuICAgIGNvbmZpZyxcbiAgICB1c2VybGFuZCxcbiAgICByb3V0ZU1vZHVsZSxcbiAgICBnZXRTdGF0aWNQYXRocyxcbiAgICBnZXRTdGF0aWNQcm9wcyxcbiAgICBnZXRTZXJ2ZXJTaWRlUHJvcHNcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat%2F%5Broom%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fchat%2F%5Broom%5D.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/_app.js":
/*!***********************!*\
  !*** ./pages/_app.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"(pages-dir-node)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _vapor_ui_core_styles_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @vapor-ui/core/styles.css */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/styles/themes.css.ts.vanilla.css\");\n/* harmony import */ var _vapor_ui_core_styles_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_vapor_ui_core_styles_css__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/globals.css */ \"(pages-dir-node)/./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _components_ChatHeader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ChatHeader */ \"(pages-dir-node)/./components/ChatHeader.js\");\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(pages-dir-node)/./contexts/AuthContext.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_ChatHeader__WEBPACK_IMPORTED_MODULE_5__, _components_Toast__WEBPACK_IMPORTED_MODULE_6__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_7__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__]);\n([_components_ChatHeader__WEBPACK_IMPORTED_MODULE_5__, _components_Toast__WEBPACK_IMPORTED_MODULE_6__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_7__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const isErrorPage = router.pathname === '/_error';\n    if (isErrorPage) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n            ...pageProps\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_app.js\",\n            lineNumber: 15,\n            columnNumber: 12\n        }, this);\n    }\n    // 로그인/회원가입 페이지에서는 헤더 숨김\n    const showHeader = ![\n        '/',\n        '/register'\n    ].includes(router.pathname);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.ThemeProvider, {\n        defaultTheme: \"dark\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_7__.AuthProvider, {\n            children: [\n                showHeader && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ChatHeader__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {}, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_app.js\",\n                    lineNumber: 24,\n                    columnNumber: 24\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                    ...pageProps\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_app.js\",\n                    lineNumber: 25,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Toast__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_app.js\",\n                    lineNumber: 26,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_app.js\",\n            lineNumber: 23,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_app.js\",\n        lineNumber: 22,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL19hcHAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQjtBQUNjO0FBQ087QUFDWjtBQUNKO0FBQ2tCO0FBQ0Q7QUFDTTtBQUV0RCxTQUFTTSxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFFO0lBQ3JDLE1BQU1DLFNBQVNSLHNEQUFTQTtJQUV4QixNQUFNUyxjQUFjRCxPQUFPRSxRQUFRLEtBQUs7SUFDeEMsSUFBSUQsYUFBYTtRQUNmLHFCQUFPLDhEQUFDSDtZQUFXLEdBQUdDLFNBQVM7Ozs7OztJQUNqQztJQUVBLHdCQUF3QjtJQUN4QixNQUFNSSxhQUFhLENBQUM7UUFBQztRQUFLO0tBQVksQ0FBQ0MsUUFBUSxDQUFDSixPQUFPRSxRQUFRO0lBRS9ELHFCQUNFLDhEQUFDVCx5REFBYUE7UUFBQ1ksY0FBYTtrQkFDMUIsNEVBQUNULCtEQUFZQTs7Z0JBQ1ZPLDRCQUFjLDhEQUFDVCw4REFBVUE7Ozs7OzhCQUMxQiw4REFBQ0k7b0JBQVcsR0FBR0MsU0FBUzs7Ozs7OzhCQUN4Qiw4REFBQ0oseURBQWNBOzs7Ozs7Ozs7Ozs7Ozs7O0FBSXZCO0FBRUEsaUVBQWVFLEtBQUtBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL3BhZ2VzL19hcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICdAdmFwb3ItdWkvY29yZSc7XG5pbXBvcnQgJ0B2YXBvci11aS9jb3JlL3N0eWxlcy5jc3MnO1xuaW1wb3J0ICcuLi9zdHlsZXMvZ2xvYmFscy5jc3MnO1xuaW1wb3J0IENoYXRIZWFkZXIgZnJvbSAnQC9jb21wb25lbnRzL0NoYXRIZWFkZXInO1xuaW1wb3J0IFRvYXN0Q29udGFpbmVyIGZyb20gJ0AvY29tcG9uZW50cy9Ub2FzdCc7XG5pbXBvcnQgeyBBdXRoUHJvdmlkZXIgfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcblxuZnVuY3Rpb24gTXlBcHAoeyBDb21wb25lbnQsIHBhZ2VQcm9wcyB9KSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIGNvbnN0IGlzRXJyb3JQYWdlID0gcm91dGVyLnBhdGhuYW1lID09PSAnL19lcnJvcic7XG4gIGlmIChpc0Vycm9yUGFnZSkge1xuICAgIHJldHVybiA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+O1xuICB9XG5cbiAgLy8g66Gc6re47J24L+2ajOybkOqwgOyehSDtjpjsnbTsp4Dsl5DshJzripQg7Zek642UIOyIqOq5gFxuICBjb25zdCBzaG93SGVhZGVyID0gIVsnLycsICcvcmVnaXN0ZXInXS5pbmNsdWRlcyhyb3V0ZXIucGF0aG5hbWUpO1xuXG4gIHJldHVybiAoXG4gICAgPFRoZW1lUHJvdmlkZXIgZGVmYXVsdFRoZW1lPVwiZGFya1wiPlxuICAgICAgPEF1dGhQcm92aWRlcj5cbiAgICAgICAge3Nob3dIZWFkZXIgJiYgPENoYXRIZWFkZXIgLz59XG4gICAgICAgIDxDb21wb25lbnQgey4uLnBhZ2VQcm9wc30gLz5cbiAgICAgICAgPFRvYXN0Q29udGFpbmVyIC8+XG4gICAgICA8L0F1dGhQcm92aWRlcj5cbiAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE15QXBwOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVJvdXRlciIsIlRoZW1lUHJvdmlkZXIiLCJDaGF0SGVhZGVyIiwiVG9hc3RDb250YWluZXIiLCJBdXRoUHJvdmlkZXIiLCJNeUFwcCIsIkNvbXBvbmVudCIsInBhZ2VQcm9wcyIsInJvdXRlciIsImlzRXJyb3JQYWdlIiwicGF0aG5hbWUiLCJzaG93SGVhZGVyIiwiaW5jbHVkZXMiLCJkZWZhdWx0VGhlbWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/_app.js\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/_document.js":
/*!****************************!*\
  !*** ./pages/_document.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Document)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/document */ \"(pages-dir-node)/./node_modules/next/document.js\");\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_document__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Document() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Html, {\n        lang: \"ko\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Head, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                    charSet: \"utf-8\"\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_document.js\",\n                    lineNumber: 7,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_document.js\",\n                lineNumber: 6,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Main, {}, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_document.js\",\n                        lineNumber: 10,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.NextScript, {}, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_document.js\",\n                        lineNumber: 11,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_document.js\",\n                lineNumber: 9,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/_document.js\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL19kb2N1bWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkQ7QUFFOUMsU0FBU0k7SUFDdEIscUJBQ0UsOERBQUNKLCtDQUFJQTtRQUFDSyxNQUFLOzswQkFDVCw4REFBQ0osK0NBQUlBOzBCQUNILDRFQUFDSztvQkFBS0MsU0FBUTs7Ozs7Ozs7Ozs7MEJBRWhCLDhEQUFDQzs7a0NBQ0MsOERBQUNOLCtDQUFJQTs7Ozs7a0NBQ0wsOERBQUNDLHFEQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJbkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL3BhZ2VzL19kb2N1bWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdG1sLCBIZWFkLCBNYWluLCBOZXh0U2NyaXB0IH0gZnJvbSAnbmV4dC9kb2N1bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERvY3VtZW50KCkge1xuICByZXR1cm4gKFxuICAgIDxIdG1sIGxhbmc9XCJrb1wiPlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDxtZXRhIGNoYXJTZXQ9XCJ1dGYtOFwiIC8+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8Ym9keT5cbiAgICAgICAgPE1haW4gLz5cbiAgICAgICAgPE5leHRTY3JpcHQgLz5cbiAgICAgIDwvYm9keT5cbiAgICA8L0h0bWw+XG4gICk7XG59Il0sIm5hbWVzIjpbIkh0bWwiLCJIZWFkIiwiTWFpbiIsIk5leHRTY3JpcHQiLCJEb2N1bWVudCIsImxhbmciLCJtZXRhIiwiY2hhclNldCIsImJvZHkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/_document.js\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/chat/[room].js":
/*!******************************!*\
  !*** ./pages/chat/[room].js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @vapor-ui/core */ \"(pages-dir-node)/./node_modules/@vapor-ui/core/dist/index.js\");\n/* harmony import */ var _vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vapor-ui/icons */ \"(pages-dir-node)/./node_modules/@vapor-ui/icons/dist/index.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../contexts/AuthContext */ \"(pages-dir-node)/./contexts/AuthContext.js\");\n/* harmony import */ var _hooks_useChatRoom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useChatRoom */ \"(pages-dir-node)/./hooks/useChatRoom.js\");\n/* harmony import */ var _components_ChatMessages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ChatMessages */ \"(pages-dir-node)/./components/ChatMessages.js\");\n/* harmony import */ var _components_ChatInput__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ChatInput */ \"(pages-dir-node)/./components/ChatInput.js\");\n/* harmony import */ var _components_ChatRoomInfo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ChatRoomInfo */ \"(pages-dir-node)/./components/ChatRoomInfo.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _hooks_useChatRoom__WEBPACK_IMPORTED_MODULE_4__, _components_ChatMessages__WEBPACK_IMPORTED_MODULE_5__, _components_ChatInput__WEBPACK_IMPORTED_MODULE_6__, _components_ChatRoomInfo__WEBPACK_IMPORTED_MODULE_7__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _hooks_useChatRoom__WEBPACK_IMPORTED_MODULE_4__, _components_ChatMessages__WEBPACK_IMPORTED_MODULE_5__, _components_ChatInput__WEBPACK_IMPORTED_MODULE_6__, _components_ChatRoomInfo__WEBPACK_IMPORTED_MODULE_7__, _vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\nconst ChatPage = ()=>{\n    const { room, messages, streamingMessages, connected, connectionStatus, messageLoadError, retryMessageLoad, currentUser, message, showEmojiPicker, showMentionList, mentionFilter, mentionIndex, filePreview, fileInputRef, messageInputRef, socketRef, handleMessageChange, handleMessageSubmit, handleEmojiToggle, setMessage, setShowEmojiPicker, setShowMentionList, setMentionFilter, setMentionIndex, handleKeyDown, removeFilePreview, getFilteredParticipants, insertMention, loading, error, handleReactionAdd, handleReactionRemove, loadingMessages, hasMoreMessages, handleLoadMore// 페이징 핸들러 추가\n     } = (0,_hooks_useChatRoom__WEBPACK_IMPORTED_MODULE_4__.useChatRoom)();\n    const renderLoadingState = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"chat-container\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Card.Root, {\n                className: \"chat-room-card\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Card.Body, {\n                    style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center'\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Box, {\n                        style: {\n                            textAlign: 'center',\n                            marginTop: 'var(--vapor-space-500)'\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"spinner-border mb-4\",\n                                role: \"status\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"visually-hidden\",\n                                    children: \"Loading...\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                    lineNumber: 57,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 56,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 59,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Text, {\n                                typography: \"heading5\",\n                                children: \"채팅방 연결 중...\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 60,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                        lineNumber: 55,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                    lineNumber: 54,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 53,\n                columnNumber: 7\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n            lineNumber: 52,\n            columnNumber: 5\n        }, undefined);\n    const renderErrorState = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"chat-container\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Card.Root, {\n                className: \"chat-room-card\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Card.Body, {\n                    style: {\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center',\n                        justifyContent: 'center'\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Box, {\n                            style: {\n                                marginBottom: 'var(--vapor-space-400)'\n                            },\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Callout, {\n                                color: \"danger\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.HStack, {\n                                    alignItems: \"center\",\n                                    gap: \"$200\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ErrorCircleOutlineIcon, {\n                                            className: \"w-5 h-5\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                            lineNumber: 74,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Text, {\n                                            children: error || '채팅방을 불러오는데 실패했습니다.'\n                                        }, void 0, false, {\n                                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                            lineNumber: 75,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                    lineNumber: 73,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 72,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                            lineNumber: 71,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                            onClick: ()=>window.location.reload(),\n                            children: \"다시 시도\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                            lineNumber: 81,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                    lineNumber: 70,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 69,\n                columnNumber: 7\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n            lineNumber: 68,\n            columnNumber: 5\n        }, undefined);\n    const renderContent = ()=>{\n        if (loading) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"d-flex align-items-center justify-content-center p-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"spinner-border spinner-border-sm me-2\",\n                        role: \"status\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"visually-hidden\",\n                            children: \"Loading...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                            lineNumber: 96,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                        lineNumber: 95,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"채팅방 연결 중...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                        lineNumber: 98,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 94,\n                columnNumber: 9\n            }, undefined);\n        }\n        if (error) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"d-flex flex-column align-items-center justify-content-center p-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Callout, {\n                        color: \"danger\",\n                        className: \"mb-4 d-flex align-items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ErrorCircleOutlineIcon, {\n                                className: \"w-5 h-5 me-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 107,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: error\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 108,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                        lineNumber: 106,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                        onClick: ()=>window.location.reload(),\n                        children: \"다시 시도\"\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                        lineNumber: 110,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 105,\n                columnNumber: 9\n            }, undefined);\n        }\n        if (connectionStatus === 'disconnected') {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Box, {\n                style: {\n                    margin: 'var(--vapor-space-400)'\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Callout, {\n                    color: \"warning\",\n                    className: \"d-flex align-items-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.NetworkIcon, {\n                            className: \"w-5 h-5 me-2\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                            lineNumber: 121,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            children: \"연결이 끊어졌습니다. 재연결을 시도합니다...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                            lineNumber: 122,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                    lineNumber: 120,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 119,\n                columnNumber: 9\n            }, undefined);\n        }\n        if (messageLoadError) {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"d-flex flex-column align-items-center justify-content-center p-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Callout, {\n                        color: \"danger\",\n                        className: \"mb-4 d-flex align-items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_icons__WEBPACK_IMPORTED_MODULE_2__.ErrorCircleOutlineIcon, {\n                                className: \"w-5 h-5 me-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 132,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"메시지 로딩 중 오류가 발생했습니다.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                                lineNumber: 133,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                        lineNumber: 131,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.Button, {\n                        onClick: retryMessageLoad,\n                        children: \"메시지 다시 로드\"\n                    }, void 0, false, {\n                        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                        lineNumber: 135,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 130,\n                columnNumber: 9\n            }, undefined);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ChatMessages__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n            messages: messages,\n            streamingMessages: streamingMessages,\n            currentUser: currentUser,\n            room: room,\n            onReactionAdd: handleReactionAdd,\n            onReactionRemove: handleReactionRemove,\n            loadingMessages: loadingMessages,\n            hasMoreMessages: hasMoreMessages,\n            onLoadMore: handleLoadMore,\n            socketRef: socketRef\n        }, void 0, false, {\n            fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n            lineNumber: 143,\n            columnNumber: 7\n        }, undefined);\n    };\n    if (loading || !room) {\n        return renderLoadingState();\n    }\n    if (error) {\n        return renderErrorState();\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.VStack, {\n        gap: \"$0\",\n        // width=\"100%\"\n        // maxWidth=\"1200px\"\n        height: \"calc(100vh - 80px\",\n        margin: \"0 auto\",\n        style: {\n            backgroundColor: 'var(--vapor-color-surface-normal)'\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ChatRoomInfo__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                room: room,\n                connectionStatus: connectionStatus\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 178,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_vapor_ui_core__WEBPACK_IMPORTED_MODULE_8__.VStack, {\n                className: \"flex-1\",\n                overflow: \"hidden\",\n                minHeight: \"0\",\n                children: renderContent()\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 184,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ChatInput__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                message: message,\n                onMessageChange: handleMessageChange,\n                onSubmit: handleMessageSubmit,\n                onEmojiToggle: handleEmojiToggle,\n                fileInputRef: fileInputRef,\n                messageInputRef: messageInputRef,\n                filePreview: filePreview,\n                disabled: connectionStatus !== 'connected',\n                uploading: false,\n                showEmojiPicker: showEmojiPicker,\n                showMentionList: showMentionList,\n                mentionFilter: mentionFilter,\n                mentionIndex: mentionIndex,\n                getFilteredParticipants: getFilteredParticipants,\n                setMessage: setMessage,\n                setShowEmojiPicker: setShowEmojiPicker,\n                setShowMentionList: setShowMentionList,\n                setMentionFilter: setMentionFilter,\n                setMentionIndex: setMentionIndex,\n                room: room,\n                onMentionSelect: (user)=>{\n                    insertMention(user);\n                    setShowMentionList(false);\n                },\n                onFileRemove: removeFilePreview\n            }, void 0, false, {\n                fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n                lineNumber: 193,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/junseopark/Desktop/ktb-BootcampChat/apps/frontend/pages/chat/[room].js\",\n        lineNumber: 167,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.withAuth)(ChatPage));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cUJBQ0UsOERBQUNqRSxrREFBTUE7UUFDTHFFLEtBQUk7UUFDSixlQUFlO1FBQ2Ysb0JBQW9CO1FBQ3BCVSxRQUFPO1FBQ1BKLFFBQU87UUFDUHBCLE9BQU87WUFDTHlCLGlCQUFpQjtRQUNuQjs7MEJBR0EsOERBQUNwRSxnRUFBWUE7Z0JBQ1hFLE1BQU1BO2dCQUNOSSxrQkFBa0JBOzs7Ozs7MEJBSXBCLDhEQUFDbEIsa0RBQU1BO2dCQUNMb0QsV0FBVTtnQkFDVjZCLFVBQVM7Z0JBQ1RDLFdBQVU7MEJBRVRSOzs7Ozs7MEJBSUgsOERBQUMvRCw2REFBU0E7Z0JBQ1JXLFNBQVNBO2dCQUNUNkQsaUJBQWlCcEQ7Z0JBQ2pCcUQsVUFBVXBEO2dCQUNWcUQsZUFBZXBEO2dCQUNmTCxjQUFjQTtnQkFDZEMsaUJBQWlCQTtnQkFDakJGLGFBQWFBO2dCQUNiMkQsVUFBVXBFLHFCQUFxQjtnQkFDL0JxRSxXQUFXO2dCQUNYaEUsaUJBQWlCQTtnQkFDakJDLGlCQUFpQkE7Z0JBQ2pCQyxlQUFlQTtnQkFDZkMsY0FBY0E7Z0JBQ2RlLHlCQUF5QkE7Z0JBQ3pCUCxZQUFZQTtnQkFDWkMsb0JBQW9CQTtnQkFDcEJDLG9CQUFvQkE7Z0JBQ3BCQyxrQkFBa0JBO2dCQUNsQkMsaUJBQWlCQTtnQkFDakJ4QixNQUFNQTtnQkFDTjBFLGlCQUFpQixDQUFDQztvQkFDaEIvQyxjQUFjK0M7b0JBQ2RyRCxtQkFBbUI7Z0JBQ3JCO2dCQUNBc0QsY0FBY2xEOzs7Ozs7Ozs7Ozs7QUFJdEI7QUFFQSxpRUFBZWhDLCtEQUFRQSxDQUFDSyxTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvanVuc2VvcGFyay9EZXNrdG9wL2t0Yi1Cb290Y2FtcENoYXQvYXBwcy9mcm9udGVuZC9wYWdlcy9jaGF0L1tyb29tXS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQm94LCBWU3RhY2ssIEhTdGFjaywgQnV0dG9uLCBUZXh0LCBDYWxsb3V0LCBDYXJkIH0gZnJvbSAnQHZhcG9yLXVpL2NvcmUnO1xuaW1wb3J0IHsgRXJyb3JDaXJjbGVPdXRsaW5lSWNvbiwgTmV0d29ya0ljb24gfSBmcm9tICdAdmFwb3ItdWkvaWNvbnMnO1xuaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICcuLi8uLi9jb250ZXh0cy9BdXRoQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VDaGF0Um9vbSB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZUNoYXRSb29tJztcbmltcG9ydCBDaGF0TWVzc2FnZXMgZnJvbSAnQC9jb21wb25lbnRzL0NoYXRNZXNzYWdlcyc7XG5pbXBvcnQgQ2hhdElucHV0IGZyb20gJ0AvY29tcG9uZW50cy9DaGF0SW5wdXQnO1xuaW1wb3J0IENoYXRSb29tSW5mbyBmcm9tICdAL2NvbXBvbmVudHMvQ2hhdFJvb21JbmZvJztcblxuY29uc3QgQ2hhdFBhZ2UgPSAoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICByb29tLFxuICAgIG1lc3NhZ2VzLFxuICAgIHN0cmVhbWluZ01lc3NhZ2VzLFxuICAgIGNvbm5lY3RlZCxcbiAgICBjb25uZWN0aW9uU3RhdHVzLFxuICAgIG1lc3NhZ2VMb2FkRXJyb3IsXG4gICAgcmV0cnlNZXNzYWdlTG9hZCxcbiAgICBjdXJyZW50VXNlcixcbiAgICBtZXNzYWdlLFxuICAgIHNob3dFbW9qaVBpY2tlcixcbiAgICBzaG93TWVudGlvbkxpc3QsXG4gICAgbWVudGlvbkZpbHRlcixcbiAgICBtZW50aW9uSW5kZXgsXG4gICAgZmlsZVByZXZpZXcsXG4gICAgZmlsZUlucHV0UmVmLFxuICAgIG1lc3NhZ2VJbnB1dFJlZixcbiAgICBzb2NrZXRSZWYsXG4gICAgaGFuZGxlTWVzc2FnZUNoYW5nZSxcbiAgICBoYW5kbGVNZXNzYWdlU3VibWl0LFxuICAgIGhhbmRsZUVtb2ppVG9nZ2xlLFxuICAgIHNldE1lc3NhZ2UsXG4gICAgc2V0U2hvd0Vtb2ppUGlja2VyLFxuICAgIHNldFNob3dNZW50aW9uTGlzdCxcbiAgICBzZXRNZW50aW9uRmlsdGVyLFxuICAgIHNldE1lbnRpb25JbmRleCxcbiAgICBoYW5kbGVLZXlEb3duLFxuICAgIHJlbW92ZUZpbGVQcmV2aWV3LFxuICAgIGdldEZpbHRlcmVkUGFydGljaXBhbnRzLFxuICAgIGluc2VydE1lbnRpb24sXG4gICAgbG9hZGluZyxcbiAgICBlcnJvcixcbiAgICBoYW5kbGVSZWFjdGlvbkFkZCxcbiAgICBoYW5kbGVSZWFjdGlvblJlbW92ZSxcbiAgICBsb2FkaW5nTWVzc2FnZXMsXG4gICAgaGFzTW9yZU1lc3NhZ2VzLFxuICAgIGhhbmRsZUxvYWRNb3JlIC8vIO2OmOydtOynlSDtlbjrk6Trn6wg7LaU6rCAXG4gIH0gPSB1c2VDaGF0Um9vbSgpO1xuXG5cbiAgY29uc3QgcmVuZGVyTG9hZGluZ1N0YXRlID0gKCkgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hhdC1jb250YWluZXJcIj5cbiAgICAgIDxDYXJkLlJvb3QgY2xhc3NOYW1lPVwiY2hhdC1yb29tLWNhcmRcIj5cbiAgICAgICAgPENhcmQuQm9keSBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicgfX0+XG4gICAgICAgICAgPEJveCBzdHlsZT17eyB0ZXh0QWxpZ246ICdjZW50ZXInLCBtYXJnaW5Ub3A6ICd2YXIoLS12YXBvci1zcGFjZS01MDApJyB9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3Bpbm5lci1ib3JkZXIgbWItNFwiIHJvbGU9XCJzdGF0dXNcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidmlzdWFsbHktaGlkZGVuXCI+TG9hZGluZy4uLjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgIDxUZXh0IHR5cG9ncmFwaHk9XCJoZWFkaW5nNVwiPuyxhO2MheuwqSDsl7DqsrAg7KSRLi4uPC9UZXh0PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICA8L0NhcmQuQm9keT5cbiAgICAgIDwvQ2FyZC5Sb290PlxuICAgIDwvZGl2PlxuICApO1xuXG4gIGNvbnN0IHJlbmRlckVycm9yU3RhdGUgPSAoKSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0LWNvbnRhaW5lclwiPlxuICAgICAgPENhcmQuUm9vdCBjbGFzc05hbWU9XCJjaGF0LXJvb20tY2FyZFwiPlxuICAgICAgICA8Q2FyZC5Cb2R5IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicgfX0+XG4gICAgICAgICAgPEJveCBzdHlsZT17eyBtYXJnaW5Cb3R0b206ICd2YXIoLS12YXBvci1zcGFjZS00MDApJyB9fT5cbiAgICAgICAgICAgIDxDYWxsb3V0IGNvbG9yPVwiZGFuZ2VyXCI+XG4gICAgICAgICAgICAgIDxIU3RhY2sgYWxpZ25JdGVtcz1cImNlbnRlclwiIGdhcD1cIiQyMDBcIj5cbiAgICAgICAgICAgICAgICA8RXJyb3JDaXJjbGVPdXRsaW5lSWNvbiBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cbiAgICAgICAgICAgICAgICA8VGV4dD5cbiAgICAgICAgICAgICAgICAgIHtlcnJvciB8fCAn7LGE7YyF67Cp7J2EIOu2iOufrOyYpOuKlOuNsCDsi6TtjKjtlojsirXri4jri6QuJ31cbiAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgIDwvSFN0YWNrPlxuICAgICAgICAgICAgPC9DYWxsb3V0PlxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICDri6Tsi5wg7Iuc64+EXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvQ2FyZC5Cb2R5PlxuICAgICAgPC9DYXJkLlJvb3Q+XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgY29uc3QgcmVuZGVyQ29udGVudCA9ICgpID0+IHtcbiAgICBpZiAobG9hZGluZykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbSBtZS0yXCIgcm9sZT1cInN0YXR1c1wiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidmlzdWFsbHktaGlkZGVuXCI+TG9hZGluZy4uLjwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3Bhbj7ssYTtjIXrsKkg7Jew6rKwIOykkS4uLjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkLWZsZXggZmxleC1jb2x1bW4gYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgcC00XCI+XG4gICAgICAgICAgPENhbGxvdXQgY29sb3I9XCJkYW5nZXJcIiBjbGFzc05hbWU9XCJtYi00IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxFcnJvckNpcmNsZU91dGxpbmVJY29uIGNsYXNzTmFtZT1cInctNSBoLTUgbWUtMlwiIC8+XG4gICAgICAgICAgICA8c3Bhbj57ZXJyb3J9PC9zcGFuPlxuICAgICAgICAgIDwvQ2FsbG91dD5cbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX0+XG4gICAgICAgICAgICDri6Tsi5wg7Iuc64+EXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY29ubmVjdGlvblN0YXR1cyA9PT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxCb3ggc3R5bGU9e3sgbWFyZ2luOiAndmFyKC0tdmFwb3Itc3BhY2UtNDAwKScgfX0+XG4gICAgICAgICAgPENhbGxvdXQgY29sb3I9XCJ3YXJuaW5nXCIgY2xhc3NOYW1lPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPE5ldHdvcmtJY29uIGNsYXNzTmFtZT1cInctNSBoLTUgbWUtMlwiIC8+XG4gICAgICAgICAgICA8c3Bhbj7sl7DqsrDsnbQg64GK7Ja07KGM7Iq164uI64ukLiDsnqzsl7DqsrDsnYQg7Iuc64+E7ZWp64uI64ukLi4uPC9zcGFuPlxuICAgICAgICAgIDwvQ2FsbG91dD5cbiAgICAgICAgPC9Cb3g+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChtZXNzYWdlTG9hZEVycm9yKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImQtZmxleCBmbGV4LWNvbHVtbiBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlciBwLTRcIj5cbiAgICAgICAgICA8Q2FsbG91dCBjb2xvcj1cImRhbmdlclwiIGNsYXNzTmFtZT1cIm1iLTQgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPEVycm9yQ2lyY2xlT3V0bGluZUljb24gY2xhc3NOYW1lPVwidy01IGgtNSBtZS0yXCIgLz5cbiAgICAgICAgICAgIDxzcGFuPuuplOyLnOyngCDroZzrlKkg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuPC9zcGFuPlxuICAgICAgICAgIDwvQ2FsbG91dD5cbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3JldHJ5TWVzc2FnZUxvYWR9PlxuICAgICAgICAgICAg66mU7Iuc7KeAIOuLpOyLnCDroZzrk5xcbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8Q2hhdE1lc3NhZ2VzXG4gICAgICAgIG1lc3NhZ2VzPXttZXNzYWdlc31cbiAgICAgICAgc3RyZWFtaW5nTWVzc2FnZXM9e3N0cmVhbWluZ01lc3NhZ2VzfVxuICAgICAgICBjdXJyZW50VXNlcj17Y3VycmVudFVzZXJ9XG4gICAgICAgIHJvb209e3Jvb219XG4gICAgICAgIG9uUmVhY3Rpb25BZGQ9e2hhbmRsZVJlYWN0aW9uQWRkfVxuICAgICAgICBvblJlYWN0aW9uUmVtb3ZlPXtoYW5kbGVSZWFjdGlvblJlbW92ZX1cbiAgICAgICAgbG9hZGluZ01lc3NhZ2VzPXtsb2FkaW5nTWVzc2FnZXN9XG4gICAgICAgIGhhc01vcmVNZXNzYWdlcz17aGFzTW9yZU1lc3NhZ2VzfVxuICAgICAgICBvbkxvYWRNb3JlPXtoYW5kbGVMb2FkTW9yZX1cbiAgICAgICAgc29ja2V0UmVmPXtzb2NrZXRSZWZ9XG4gICAgICAvPlxuICAgICk7XG4gIH07XG5cbiAgaWYgKGxvYWRpbmcgfHwgIXJvb20pIHtcbiAgICByZXR1cm4gcmVuZGVyTG9hZGluZ1N0YXRlKCk7XG4gIH1cblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVuZGVyRXJyb3JTdGF0ZSgpO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8VlN0YWNrXG4gICAgICBnYXA9XCIkMFwiXG4gICAgICAvLyB3aWR0aD1cIjEwMCVcIlxuICAgICAgLy8gbWF4V2lkdGg9XCIxMjAwcHhcIlxuICAgICAgaGVpZ2h0PVwiY2FsYygxMDB2aCAtIDgwcHhcIlxuICAgICAgbWFyZ2luPVwiMCBhdXRvXCJcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLXZhcG9yLWNvbG9yLXN1cmZhY2Utbm9ybWFsKSdcbiAgICAgIH19XG4gICAgPlxuICAgICAgey8qIOyxhO2MheuwqSDsoJXrs7QgKOywuOyXrOyekCDrqqnroZ0g67CPIOyXsOqysCDsg4Htg5wpICovfVxuICAgICAgPENoYXRSb29tSW5mb1xuICAgICAgICByb29tPXtyb29tfVxuICAgICAgICBjb25uZWN0aW9uU3RhdHVzPXtjb25uZWN0aW9uU3RhdHVzfVxuICAgICAgLz5cblxuICAgICAgey8qIOuplOyLnOyngCDsmIHsl60gKi99XG4gICAgICA8VlN0YWNrXG4gICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMVwiXG4gICAgICAgIG92ZXJmbG93PVwiaGlkZGVuXCJcbiAgICAgICAgbWluSGVpZ2h0PVwiMFwiXG4gICAgICA+XG4gICAgICAgIHtyZW5kZXJDb250ZW50KCl9XG4gICAgICA8L1ZTdGFjaz5cblxuICAgICAgey8qIOyeheugpSDsmIHsl60gKi99XG4gICAgICA8Q2hhdElucHV0XG4gICAgICAgIG1lc3NhZ2U9e21lc3NhZ2V9XG4gICAgICAgIG9uTWVzc2FnZUNoYW5nZT17aGFuZGxlTWVzc2FnZUNoYW5nZX1cbiAgICAgICAgb25TdWJtaXQ9e2hhbmRsZU1lc3NhZ2VTdWJtaXR9XG4gICAgICAgIG9uRW1vamlUb2dnbGU9e2hhbmRsZUVtb2ppVG9nZ2xlfVxuICAgICAgICBmaWxlSW5wdXRSZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgbWVzc2FnZUlucHV0UmVmPXttZXNzYWdlSW5wdXRSZWZ9XG4gICAgICAgIGZpbGVQcmV2aWV3PXtmaWxlUHJldmlld31cbiAgICAgICAgZGlzYWJsZWQ9e2Nvbm5lY3Rpb25TdGF0dXMgIT09ICdjb25uZWN0ZWQnfVxuICAgICAgICB1cGxvYWRpbmc9e2ZhbHNlfVxuICAgICAgICBzaG93RW1vamlQaWNrZXI9e3Nob3dFbW9qaVBpY2tlcn1cbiAgICAgICAgc2hvd01lbnRpb25MaXN0PXtzaG93TWVudGlvbkxpc3R9XG4gICAgICAgIG1lbnRpb25GaWx0ZXI9e21lbnRpb25GaWx0ZXJ9XG4gICAgICAgIG1lbnRpb25JbmRleD17bWVudGlvbkluZGV4fVxuICAgICAgICBnZXRGaWx0ZXJlZFBhcnRpY2lwYW50cz17Z2V0RmlsdGVyZWRQYXJ0aWNpcGFudHN9XG4gICAgICAgIHNldE1lc3NhZ2U9e3NldE1lc3NhZ2V9XG4gICAgICAgIHNldFNob3dFbW9qaVBpY2tlcj17c2V0U2hvd0Vtb2ppUGlja2VyfVxuICAgICAgICBzZXRTaG93TWVudGlvbkxpc3Q9e3NldFNob3dNZW50aW9uTGlzdH1cbiAgICAgICAgc2V0TWVudGlvbkZpbHRlcj17c2V0TWVudGlvbkZpbHRlcn1cbiAgICAgICAgc2V0TWVudGlvbkluZGV4PXtzZXRNZW50aW9uSW5kZXh9XG4gICAgICAgIHJvb209e3Jvb219XG4gICAgICAgIG9uTWVudGlvblNlbGVjdD17KHVzZXIpID0+IHtcbiAgICAgICAgICBpbnNlcnRNZW50aW9uKHVzZXIpO1xuICAgICAgICAgIHNldFNob3dNZW50aW9uTGlzdChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9uRmlsZVJlbW92ZT17cmVtb3ZlRmlsZVByZXZpZXd9XG4gICAgICAvPlxuICAgIDwvVlN0YWNrPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aEF1dGgoQ2hhdFBhZ2UpO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiQm94IiwiVlN0YWNrIiwiSFN0YWNrIiwiQnV0dG9uIiwiVGV4dCIsIkNhbGxvdXQiLCJDYXJkIiwiRXJyb3JDaXJjbGVPdXRsaW5lSWNvbiIsIk5ldHdvcmtJY29uIiwid2l0aEF1dGgiLCJ1c2VDaGF0Um9vbSIsIkNoYXRNZXNzYWdlcyIsIkNoYXRJbnB1dCIsIkNoYXRSb29tSW5mbyIsIkNoYXRQYWdlIiwicm9vbSIsIm1lc3NhZ2VzIiwic3RyZWFtaW5nTWVzc2FnZXMiLCJjb25uZWN0ZWQiLCJjb25uZWN0aW9uU3RhdHVzIiwibWVzc2FnZUxvYWRFcnJvciIsInJldHJ5TWVzc2FnZUxvYWQiLCJjdXJyZW50VXNlciIsIm1lc3NhZ2UiLCJzaG93RW1vamlQaWNrZXIiLCJzaG93TWVudGlvbkxpc3QiLCJtZW50aW9uRmlsdGVyIiwibWVudGlvbkluZGV4IiwiZmlsZVByZXZpZXciLCJmaWxlSW5wdXRSZWYiLCJtZXNzYWdlSW5wdXRSZWYiLCJzb2NrZXRSZWYiLCJoYW5kbGVNZXNzYWdlQ2hhbmdlIiwiaGFuZGxlTWVzc2FnZVN1Ym1pdCIsImhhbmRsZUVtb2ppVG9nZ2xlIiwic2V0TWVzc2FnZSIsInNldFNob3dFbW9qaVBpY2tlciIsInNldFNob3dNZW50aW9uTGlzdCIsInNldE1lbnRpb25GaWx0ZXIiLCJzZXRNZW50aW9uSW5kZXgiLCJoYW5kbGVLZXlEb3duIiwicmVtb3ZlRmlsZVByZXZpZXciLCJnZXRGaWx0ZXJlZFBhcnRpY2lwYW50cyIsImluc2VydE1lbnRpb24iLCJsb2FkaW5nIiwiZXJyb3IiLCJoYW5kbGVSZWFjdGlvbkFkZCIsImhhbmRsZVJlYWN0aW9uUmVtb3ZlIiwibG9hZGluZ01lc3NhZ2VzIiwiaGFzTW9yZU1lc3NhZ2VzIiwiaGFuZGxlTG9hZE1vcmUiLCJyZW5kZXJMb2FkaW5nU3RhdGUiLCJkaXYiLCJjbGFzc05hbWUiLCJSb290IiwiQm9keSIsInN0eWxlIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsInRleHRBbGlnbiIsIm1hcmdpblRvcCIsInJvbGUiLCJzcGFuIiwiYnIiLCJ0eXBvZ3JhcGh5IiwicmVuZGVyRXJyb3JTdGF0ZSIsImZsZXhEaXJlY3Rpb24iLCJtYXJnaW5Cb3R0b20iLCJjb2xvciIsImdhcCIsIm9uQ2xpY2siLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInJlbmRlckNvbnRlbnQiLCJtYXJnaW4iLCJvblJlYWN0aW9uQWRkIiwib25SZWFjdGlvblJlbW92ZSIsIm9uTG9hZE1vcmUiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJvdmVyZmxvdyIsIm1pbkhlaWdodCIsIm9uTWVzc2FnZUNoYW5nZSIsIm9uU3VibWl0Iiwib25FbW9qaVRvZ2dsZSIsImRpc2FibGVkIiwidXBsb2FkaW5nIiwib25NZW50aW9uU2VsZWN0IiwidXNlciIsIm9uRmlsZVJlbW92ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/chat/[room].js\n");

/***/ }),

/***/ "(pages-dir-node)/./services/authService.js":
/*!*********************************!*\
  !*** ./services/authService.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst API_URL = \"http://localhost:5001\";\n// axios 인스턴스 생성\nconst api = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n    baseURL: API_URL,\n    timeout: 30000,\n    headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n    },\n    withCredentials: true\n});\n// 재시도 설정\nconst RETRY_CONFIG = {\n    maxRetries: 3,\n    baseDelay: 1000,\n    maxDelay: 5000,\n    backoffFactor: 2,\n    retryableStatuses: [\n        408,\n        429,\n        500,\n        502,\n        503,\n        504\n    ],\n    retryableErrors: [\n        'ECONNABORTED',\n        'ETIMEDOUT',\n        'ENOTFOUND',\n        'ENETUNREACH',\n        'ERR_NETWORK'\n    ]\n};\n// 유효성 검증 함수\nconst validateCredentials = (credentials)=>{\n    if (!credentials || typeof credentials !== 'object') {\n        throw new Error('인증 정보가 올바르지 않습니다.');\n    }\n    const { email, password } = credentials;\n    if (!email?.trim()) {\n        throw new Error('이메일을 입력해주세요.');\n    }\n    if (!password) {\n        throw new Error('비밀번호를 입력해주세요.');\n    }\n    if (typeof email !== 'string' || typeof password !== 'string') {\n        throw new Error('입력값의 형식이 올바르지 않습니다.');\n    }\n    return {\n        email: email.trim(),\n        password: password\n    };\n};\n// 재시도 딜레이 계산\nconst getRetryDelay = (retryCount)=>{\n    const delay = RETRY_CONFIG.baseDelay * Math.pow(RETRY_CONFIG.backoffFactor, retryCount) * (1 + Math.random() * 0.1);\n    return Math.min(delay, RETRY_CONFIG.maxDelay);\n};\n// 재시도 가능한 에러인지 판단\nconst isRetryableError = (error)=>{\n    if (error.code && RETRY_CONFIG.retryableErrors.includes(error.code)) {\n        return true;\n    }\n    return !error.response || RETRY_CONFIG.retryableStatuses.includes(error.response.status);\n};\n// 요청 인터셉터\napi.interceptors.request.use((config)=>{\n    // 요청 데이터 검증\n    if (!config.data || typeof config.data !== 'object') {\n        config.data = {};\n    }\n    // 설정된 데이터가 문자열이면 파싱 시도\n    if (typeof config.data === 'string') {\n        try {\n            config.data = JSON.parse(config.data);\n        } catch (error) {\n            config.data = {};\n        }\n    }\n    // 인증 토큰 설정\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    if (user?.token) {\n        config.headers['x-auth-token'] = user.token;\n        if (user.sessionId) {\n            config.headers['x-session-id'] = user.sessionId;\n        }\n    }\n    return config;\n}, (error)=>Promise.reject(error));\nclass AuthService {\n    constructor(){}\n    /**\n   * 로그인 API 호출\n   * 상태 관리는 AuthContext에서 처리\n   */ async login(credentials) {\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${API_URL}/api/auth/login`, credentials);\n            if (response.data?.success && response.data?.token) {\n                const userData = {\n                    id: response.data.user._id,\n                    name: response.data.user.name,\n                    email: response.data.user.email,\n                    profileImage: response.data.user.profileImage,\n                    token: response.data.token,\n                    sessionId: response.data.sessionId\n                };\n                return userData;\n            }\n            throw new Error(response.data?.message || '로그인에 실패했습니다.');\n        } catch (error) {\n            if (error.response?.status === 401) {\n                throw new Error('이메일 주소가 없거나 비밀번호가 틀렸습니다.');\n            }\n            if (error.response?.status === 429) {\n                throw new Error('너무 많은 로그인 시도가 있었습니다. 잠시 후 다시 시도해주세요.');\n            }\n            if (!error.response) {\n                throw new Error('서버와 통신할 수 없습니다. 잠시 후 다시 시도해주세요.');\n            }\n            const errorMessage = error.response?.data?.message || '로그인 중 오류가 발생했습니다.';\n            throw new Error(errorMessage);\n        }\n    }\n    /**\n   * 로그아웃 API 호출\n   * 상태 관리와 리다이렉션은 AuthContext에서 처리\n   */ async logout(token, sessionId) {\n        try {\n            if (token) {\n                await api.post('/api/auth/logout', null, {\n                    headers: {\n                        'x-auth-token': token,\n                        'x-session-id': sessionId\n                    }\n                });\n            }\n        } catch (error) {\n        // 로그아웃 API 실패해도 계속 진행 (best effort)\n        }\n    }\n    /**\n   * 회원가입 API 호출\n   * 상태 관리는 AuthContext에서 처리\n   */ async register(userData) {\n        try {\n            const response = await api.post('/api/auth/register', userData);\n            if (response.data?.success) {\n                return response.data;\n            }\n            throw new Error(response.data?.message || '회원가입에 실패했습니다.');\n        } catch (error) {\n            throw this._handleError(error);\n        }\n    }\n    /**\n   * 프로필 업데이트 API 호출\n   * 상태 업데이트는 AuthContext에서 처리\n   */ async updateProfile(data, token, sessionId) {\n        try {\n            if (!token) {\n                throw new Error('인증 정보가 없습니다.');\n            }\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(`${API_URL}/api/users/profile`, data, {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-auth-token': token,\n                    'x-session-id': sessionId\n                }\n            });\n            if (response.data?.success) {\n                return response.data.user;\n            }\n            throw new Error(response.data?.message || '프로필 업데이트에 실패했습니다.');\n        } catch (error) {\n            if (error.response?.status === 401) {\n                throw new Error('인증이 만료되었습니다. 다시 로그인해주세요.');\n            }\n            throw this._handleError(error);\n        }\n    }\n    /**\n   * 비밀번호 변경 API 호출\n   */ async changePassword(currentPassword, newPassword, token, sessionId) {\n        try {\n            if (!token) {\n                throw new Error('인증 정보가 없습니다.');\n            }\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(`${API_URL}/api/users/profile`, {\n                currentPassword,\n                newPassword\n            }, {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-auth-token': token,\n                    'x-session-id': sessionId\n                }\n            });\n            if (response.data?.success) {\n                return true;\n            }\n            throw new Error(response.data?.message || '비밀번호 변경에 실패했습니다.');\n        } catch (error) {\n            if (error.response?.status === 401) {\n                if (error.response.data?.message?.includes('비밀번호가 일치하지 않습니다')) {\n                    throw new Error('현재 비밀번호가 일치하지 않습니다.');\n                }\n                throw new Error('인증이 만료되었습니다. 다시 로그인해주세요.');\n            }\n            throw this._handleError(error);\n        }\n    }\n    /**\n   * @deprecated getCurrentUser는 더 이상 사용하지 않습니다.\n   * useAuth 훅을 사용하여 사용자 정보에 접근하세요.\n   *\n   * @example\n   * // ❌ Bad\n   * const user = authService.getCurrentUser();\n   *\n   * // ✅ Good\n   * const { user } = useAuth();\n   */ getCurrentUser() {\n        try {\n            const userStr = localStorage.getItem('user');\n            if (!userStr) return null;\n            return JSON.parse(userStr);\n        } catch (error) {\n            return null;\n        }\n    }\n    /**\n   * @deprecated verifyToken은 AuthContext로 이동되었습니다.\n   * useAuth 훅의 verifyToken을 사용하세요.\n   */ async verifyToken() {\n        throw new Error('This method has been moved to AuthContext. Use useAuth().verifyToken() instead.');\n    }\n    /**\n   * @deprecated refreshToken은 AuthContext로 이동되었습니다.\n   * useAuth 훅의 refreshToken을 사용하세요.\n   */ async refreshToken() {\n        throw new Error('This method has been moved to AuthContext. Use useAuth().refreshToken() instead.');\n    }\n    async checkServerConnection() {\n        try {\n            // 클라이언트에서만 실행되도록 확인\n            if (true) {\n                return false;\n            }\n            // API_URL이 없으면 연결 실패로 처리\n            if (!API_URL) {\n                throw new Error('API URL이 설정되지 않았습니다.');\n            }\n            const response = await api.get('/api/health', {\n                timeout: 3000,\n                validateStatus: (status)=>status < 500 // 5xx 에러만 실제 에러로 처리\n            });\n            return response.data?.status === 'ok' || response.status === 200;\n        } catch (error) {\n            // 네트워크 에러나 타임아웃은 더 구체적인 메시지 제공\n            if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\n                throw new Error('서버 응답 시간이 초과되었습니다.');\n            }\n            if (error.code === 'ERR_NETWORK' || error.message.includes('Network Error')) {\n                throw new Error('네트워크 연결을 확인해주세요.');\n            }\n            throw this._handleError(error);\n        }\n    }\n    _handleError(error) {\n        if (error.isNetworkError) return error;\n        if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(error)) {\n            if (!error.response) {\n                return new Error('서버와 통신할 수 없습니다. 네트워크 연결을 확인해주세요.');\n            }\n            const { status, data } = error.response;\n            const message = data?.message || error.message;\n            switch(status){\n                case 400:\n                    return new Error(message || '입력 정보를 확인해주세요.');\n                case 401:\n                    return new Error(message || '인증에 실패했습니다.');\n                case 403:\n                    return new Error(message || '접근 권한이 없습니다.');\n                case 404:\n                    return new Error(message || '요청한 리소스를 찾을 수 없습니다.');\n                case 409:\n                    return new Error(message || '이미 가입된 이메일입니다.');\n                case 429:\n                    return new Error(message || '너무 많은 요청이 발생했습니다. 잠시 후 다시 시도해주세요.');\n                case 500:\n                    return new Error(message || '서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.');\n                default:\n                    return new Error(message || '요청 처리 중 오류가 발생했습니다.');\n            }\n        }\n        return error;\n    }\n}\nconst authService = new AuthService();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (authService);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NlcnZpY2VzL2F1dGhTZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBCO0FBRTFCLE1BQU1DLFVBQVVDLHVCQUErQjtBQUUvQyxnQkFBZ0I7QUFDaEIsTUFBTUcsTUFBTUwsb0RBQVksQ0FBQztJQUN2Qk8sU0FBU047SUFDVE8sU0FBUztJQUNUQyxTQUFTO1FBQ1AsZ0JBQWdCO1FBQ2hCLFVBQVU7SUFDWjtJQUNBQyxpQkFBaUI7QUFDbkI7QUFFQSxTQUFTO0FBQ1QsTUFBTUMsZUFBZTtJQUNuQkMsWUFBWTtJQUNaQyxXQUFXO0lBQ1hDLFVBQVU7SUFDVkMsZUFBZTtJQUNmQyxtQkFBbUI7UUFBQztRQUFLO1FBQUs7UUFBSztRQUFLO1FBQUs7S0FBSTtJQUNqREMsaUJBQWlCO1FBQUM7UUFBZ0I7UUFBYTtRQUFhO1FBQWU7S0FBYztBQUMzRjtBQUVBLFlBQVk7QUFDWixNQUFNQyxzQkFBc0IsQ0FBQ0M7SUFDM0IsSUFBSSxDQUFDQSxlQUFlLE9BQU9BLGdCQUFnQixVQUFVO1FBQ25ELE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUUsR0FBR0g7SUFFNUIsSUFBSSxDQUFDRSxPQUFPRSxRQUFRO1FBQ2xCLE1BQU0sSUFBSUgsTUFBTTtJQUNsQjtJQUVBLElBQUksQ0FBQ0UsVUFBVTtRQUNiLE1BQU0sSUFBSUYsTUFBTTtJQUNsQjtJQUVBLElBQUksT0FBT0MsVUFBVSxZQUFZLE9BQU9DLGFBQWEsVUFBVTtRQUM3RCxNQUFNLElBQUlGLE1BQU07SUFDbEI7SUFFQSxPQUFPO1FBQ0xDLE9BQU9BLE1BQU1FLElBQUk7UUFDakJELFVBQVVBO0lBQ1o7QUFDRjtBQUVBLGFBQWE7QUFDYixNQUFNRSxnQkFBZ0IsQ0FBQ0M7SUFDckIsTUFBTUMsUUFBUWYsYUFBYUUsU0FBUyxHQUNsQ2MsS0FBS0MsR0FBRyxDQUFDakIsYUFBYUksYUFBYSxFQUFFVSxjQUNwQyxLQUFJ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QUN2QyxNQUFNeUIsVUFBVW5CLE1BQU1tQixXQUFXNUIsTUFBTTRCLE9BQU87WUFFOUMsT0FBUXhCO2dCQUNOLEtBQUs7b0JBQ0gsT0FBTyxJQUFJaEIsTUFBTXdDLFdBQVc7Z0JBQzlCLEtBQUs7b0JBQ0gsT0FBTyxJQUFJeEMsTUFBTXdDLFdBQVc7Z0JBQzlCLEtBQUs7b0JBQ0gsT0FBTyxJQUFJeEMsTUFBTXdDLFdBQVc7Z0JBQzlCLEtBQUs7b0JBQ0gsT0FBTyxJQUFJeEMsTUFBTXdDLFdBQVc7Z0JBQzlCLEtBQUs7b0JBQ0gsT0FBTyxJQUFJeEMsTUFBTXdDLFdBQVc7Z0JBQzlCLEtBQUs7b0JBQ0gsT0FBTyxJQUFJeEMsTUFBTXdDLFdBQVc7Z0JBQzlCLEtBQUs7b0JBQ0gsT0FBTyxJQUFJeEMsTUFBTXdDLFdBQVc7Z0JBQzlCO29CQUNFLE9BQU8sSUFBSXhDLE1BQU13QyxXQUFXO1lBQ2hDO1FBQ0Y7UUFFQSxPQUFPNUI7SUFDVDtBQUNGO0FBRUEsTUFBTStDLGNBQWMsSUFBSTVCO0FBQ3hCLGlFQUFlNEIsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvc2VydmljZXMvYXV0aFNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuY29uc3QgQVBJX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkw7XG5cbi8vIGF4aW9zIOyduOyKpO2EtOyKpCDsg53shLFcbmNvbnN0IGFwaSA9IGF4aW9zLmNyZWF0ZSh7XG4gIGJhc2VVUkw6IEFQSV9VUkwsXG4gIHRpbWVvdXQ6IDMwMDAwLFxuICBoZWFkZXJzOiB7XG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH0sXG4gIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxufSk7XG5cbi8vIOyerOyLnOuPhCDshKTsoJVcbmNvbnN0IFJFVFJZX0NPTkZJRyA9IHtcbiAgbWF4UmV0cmllczogMyxcbiAgYmFzZURlbGF5OiAxMDAwLFxuICBtYXhEZWxheTogNTAwMCxcbiAgYmFja29mZkZhY3RvcjogMixcbiAgcmV0cnlhYmxlU3RhdHVzZXM6IFs0MDgsIDQyOSwgNTAwLCA1MDIsIDUwMywgNTA0XSxcbiAgcmV0cnlhYmxlRXJyb3JzOiBbJ0VDT05OQUJPUlRFRCcsICdFVElNRURPVVQnLCAnRU5PVEZPVU5EJywgJ0VORVRVTlJFQUNIJywgJ0VSUl9ORVRXT1JLJ11cbn07XG5cbi8vIOycoO2aqOyEsSDqsoDspp0g7ZWo7IiYXG5jb25zdCB2YWxpZGF0ZUNyZWRlbnRpYWxzID0gKGNyZWRlbnRpYWxzKSA9PiB7XG4gIGlmICghY3JlZGVudGlhbHMgfHwgdHlwZW9mIGNyZWRlbnRpYWxzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcign7J247KadIOygleuztOqwgCDsmKzrsJTrpbTsp4Ag7JWK7Iq164uI64ukLicpO1xuICB9XG5cbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IGNyZWRlbnRpYWxzO1xuXG4gIGlmICghZW1haWw/LnRyaW0oKSkge1xuICAgIHRocm93IG5ldyBFcnJvcign7J2066mU7J287J2EIOyeheugpe2VtOyjvOyEuOyalC4nKTtcbiAgfVxuXG4gIGlmICghcGFzc3dvcmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+u5hOuwgOuyiO2YuOulvCDsnoXroKXtlbTso7zshLjsmpQuJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGVtYWlsICE9PSAnc3RyaW5nJyB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfsnoXroKXqsJLsnZgg7ZiV7Iud7J20IOyYrOuwlOultOyngCDslYrsirXri4jri6QuJyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGVtYWlsOiBlbWFpbC50cmltKCksXG4gICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gIH07XG59O1xuXG4vLyDsnqzsi5zrj4Qg65Sc66CI7J20IOqzhOyCsFxuY29uc3QgZ2V0UmV0cnlEZWxheSA9IChyZXRyeUNvdW50KSA9PiB7XG4gIGNvbnN0IGRlbGF5ID0gUkVUUllfQ09ORklHLmJhc2VEZWxheSAqIFxuICAgIE1hdGgucG93KFJFVFJZX0NPTkZJRy5iYWNrb2ZmRmFjdG9yLCByZXRyeUNvdW50KSAqXG4gICAgKDEgKyBNYXRoLnJhbmRvbSgpICogMC4xKTtcbiAgcmV0dXJuIE1hdGgubWluKGRlbGF5LCBSRVRSWV9DT05GSUcubWF4RGVsYXkpO1xufTtcblxuLy8g7J6s7Iuc64+EIOqwgOuKpe2VnCDsl5Drn6zsnbjsp4Ag7YyQ64uoXG5jb25zdCBpc1JldHJ5YWJsZUVycm9yID0gKGVycm9yKSA9PiB7XG4gIGlmIChlcnJvci5jb2RlICYmIFJFVFJZX0NPTkZJRy5yZXRyeWFibGVFcnJvcnMuaW5jbHVkZXMoZXJyb3IuY29kZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gIWVycm9yLnJlc3BvbnNlIHx8IFJFVFJZX0NPTkZJRy5yZXRyeWFibGVTdGF0dXNlcy5pbmNsdWRlcyhlcnJvci5yZXNwb25zZS5zdGF0dXMpO1xufTtcblxuLy8g7JqU7LKtIOyduO2EsOyFie2EsFxuYXBpLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShcbiAgY29uZmlnID0+IHtcbiAgICAvLyDsmpTssq0g642w7J207YSwIOqygOymnVxuICAgIGlmICghY29uZmlnLmRhdGEgfHwgdHlwZW9mIGNvbmZpZy5kYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgY29uZmlnLmRhdGEgPSB7fTtcbiAgICB9XG5cbiAgICAvLyDshKTsoJXrkJwg642w7J207YSw6rCAIOusuOyekOyXtOydtOuptCDtjIzsi7Eg7Iuc64+EXG4gICAgaWYgKHR5cGVvZiBjb25maWcuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbmZpZy5kYXRhID0gSlNPTi5wYXJzZShjb25maWcuZGF0YSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25maWcuZGF0YSA9IHt9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOyduOymnSDthqDtgbAg7ISk7KCVXG4gICAgY29uc3QgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSB8fCAne30nKTtcbiAgICBpZiAodXNlcj8udG9rZW4pIHtcbiAgICAgIGNvbmZpZy5oZWFkZXJzWyd4LWF1dGgtdG9rZW4nXSA9IHVzZXIudG9rZW47XG4gICAgICBpZiAodXNlci5zZXNzaW9uSWQpIHtcbiAgICAgICAgY29uZmlnLmhlYWRlcnNbJ3gtc2Vzc2lvbi1pZCddID0gdXNlci5zZXNzaW9uSWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfSxcbiAgZXJyb3IgPT4gUHJvbWlzZS5yZWplY3QoZXJyb3IpXG4pO1xuXG5jbGFzcyBBdXRoU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICB9XG5cbiAgLyoqXG4gICAqIOuhnOq3uOyduCBBUEkg7Zi47LacXG4gICAqIOyDge2DnCDqtIDrpqzripQgQXV0aENvbnRleHTsl5DshJwg7LKY66asXG4gICAqL1xuICBhc3luYyBsb2dpbihjcmVkZW50aWFscykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7QVBJX1VSTH0vYXBpL2F1dGgvbG9naW5gLCBjcmVkZW50aWFscyk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5kYXRhPy5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGE/LnRva2VuKSB7XG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLnVzZXIuX2lkLFxuICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLmRhdGEudXNlci5uYW1lLFxuICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5kYXRhLnVzZXIuZW1haWwsXG4gICAgICAgICAgcHJvZmlsZUltYWdlOiByZXNwb25zZS5kYXRhLnVzZXIucHJvZmlsZUltYWdlLFxuICAgICAgICAgIHRva2VuOiByZXNwb25zZS5kYXRhLnRva2VuLFxuICAgICAgICAgIHNlc3Npb25JZDogcmVzcG9uc2UuZGF0YS5zZXNzaW9uSWRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdXNlckRhdGE7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5kYXRhPy5tZXNzYWdlIHx8ICfroZzqt7jsnbjsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfsnbTrqZTsnbwg7KO87IaM6rCAIOyXhuqxsOuCmCDruYTrsIDrsojtmLjqsIAg7YuA66C47Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign64SI66y0IOunjuydgCDroZzqt7jsnbgg7Iuc64+E6rCAIOyeiOyXiOyKteuLiOuLpC4g7J6g7IucIO2bhCDri6Tsi5wg7Iuc64+E7ZW07KO87IS47JqULicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7ISc67KE7JmAIO2GteyLoO2VoCDsiJgg7JeG7Iq164uI64ukLiDsnqDsi5wg7ZuEIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8ICfroZzqt7jsnbgg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJztcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIOuhnOq3uOyVhOybgyBBUEkg7Zi47LacXG4gICAqIOyDge2DnCDqtIDrpqzsmYAg66as64uk7J2066CJ7IWY7J2AIEF1dGhDb250ZXh07JeQ7IScIOyymOumrFxuICAgKi9cbiAgYXN5bmMgbG9nb3V0KHRva2VuLCBzZXNzaW9uSWQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIGF3YWl0IGFwaS5wb3N0KCcvYXBpL2F1dGgvbG9nb3V0JywgbnVsbCwge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICd4LWF1dGgtdG9rZW4nOiB0b2tlbixcbiAgICAgICAgICAgICd4LXNlc3Npb24taWQnOiBzZXNzaW9uSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyDroZzqt7jslYTsm4MgQVBJIOyLpO2MqO2VtOuPhCDqs4Tsho0g7KeE7ZaJIChiZXN0IGVmZm9ydClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog7ZqM7JuQ6rCA7J6FIEFQSSDtmLjstpxcbiAgICog7IOB7YOcIOq0gOumrOuKlCBBdXRoQ29udGV4dOyXkOyEnCDsspjrpqxcbiAgICovXG4gIGFzeW5jIHJlZ2lzdGVyKHVzZXJEYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnBvc3QoJy9hcGkvYXV0aC9yZWdpc3RlcicsIHVzZXJEYXRhKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5kYXRhPy5tZXNzYWdlIHx8ICftmozsm5DqsIDsnoXsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyB0aGlzLl9oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG4gIFxuICAvKipcbiAgICog7ZSE66Gc7ZWEIOyXheuNsOydtO2KuCBBUEkg7Zi47LacXG4gICAqIOyDge2DnCDsl4XrjbDsnbTtirjripQgQXV0aENvbnRleHTsl5DshJwg7LKY66asXG4gICAqL1xuICBhc3luYyB1cGRhdGVQcm9maWxlKGRhdGEsIHRva2VuLCBzZXNzaW9uSWQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yduOymnSDsoJXrs7TqsIAg7JeG7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnB1dChcbiAgICAgICAgYCR7QVBJX1VSTH0vYXBpL3VzZXJzL3Byb2ZpbGVgLFxuICAgICAgICBkYXRhLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICd4LWF1dGgtdG9rZW4nOiB0b2tlbixcbiAgICAgICAgICAgICd4LXNlc3Npb24taWQnOiBzZXNzaW9uSWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5kYXRhPy5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnVzZXI7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5kYXRhPy5tZXNzYWdlIHx8ICftlITroZztlYQg7JeF642w7J207Yq47JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7J247Kad7J20IOunjOujjOuQmOyXiOyKteuLiOuLpC4g64uk7IucIOuhnOq3uOyduO2VtOyjvOyEuOyalC4nKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDruYTrsIDrsojtmLgg67OA6rK9IEFQSSDtmLjstpxcbiAgICovXG4gIGFzeW5jIGNoYW5nZVBhc3N3b3JkKGN1cnJlbnRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIHRva2VuLCBzZXNzaW9uSWQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yduOymnSDsoJXrs7TqsIAg7JeG7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnB1dChcbiAgICAgICAgYCR7QVBJX1VSTH0vYXBpL3VzZXJzL3Byb2ZpbGVgLFxuICAgICAgICB7XG4gICAgICAgICAgY3VycmVudFBhc3N3b3JkLFxuICAgICAgICAgIG5ld1Bhc3N3b3JkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ3gtYXV0aC10b2tlbic6IHRva2VuLFxuICAgICAgICAgICAgJ3gtc2Vzc2lvbi1pZCc6IHNlc3Npb25JZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5kYXRhPy5tZXNzYWdlIHx8ICfruYTrsIDrsojtmLgg67OA6rK97JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhPy5tZXNzYWdlPy5pbmNsdWRlcygn67mE67CA67KI7Zi46rCAIOydvOy5mO2VmOyngCDslYrsirXri4jri6QnKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign7ZiE7J6sIOu5hOuwgOuyiO2YuOqwgCDsnbzsuZjtlZjsp4Ag7JWK7Iq164uI64ukLicpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7J247Kad7J20IOunjOujjOuQmOyXiOyKteuLiOuLpC4g64uk7IucIOuhnOq3uOyduO2VtOyjvOyEuOyalC4nKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfSAgXG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIGdldEN1cnJlbnRVc2Vy64qUIOuNlCDsnbTsg4Eg7IKs7Jqp7ZWY7KeAIOyViuyKteuLiOuLpC5cbiAgICogdXNlQXV0aCDtm4XsnYQg7IKs7Jqp7ZWY7JesIOyCrOyaqeyekCDsoJXrs7Tsl5Ag7KCR6re87ZWY7IS47JqULlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyDinYwgQmFkXG4gICAqIGNvbnN0IHVzZXIgPSBhdXRoU2VydmljZS5nZXRDdXJyZW50VXNlcigpO1xuICAgKlxuICAgKiAvLyDinIUgR29vZFxuICAgKiBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgICovXG4gIGdldEN1cnJlbnRVc2VyKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyU3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTtcbiAgICAgIGlmICghdXNlclN0cikgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZSh1c2VyU3RyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHZlcmlmeVRva2Vu7J2AIEF1dGhDb250ZXh066GcIOydtOuPmeuQmOyXiOyKteuLiOuLpC5cbiAgICogdXNlQXV0aCDtm4XsnZggdmVyaWZ5VG9rZW7snYQg7IKs7Jqp7ZWY7IS47JqULlxuICAgKi9cbiAgYXN5bmMgdmVyaWZ5VG9rZW4oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIG1ldGhvZCBoYXMgYmVlbiBtb3ZlZCB0byBBdXRoQ29udGV4dC4gVXNlIHVzZUF1dGgoKS52ZXJpZnlUb2tlbigpIGluc3RlYWQuJyk7XG4gIH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgcmVmcmVzaFRva2Vu7J2AIEF1dGhDb250ZXh066GcIOydtOuPmeuQmOyXiOyKteuLiOuLpC5cbiAgICogdXNlQXV0aCDtm4XsnZggcmVmcmVzaFRva2Vu7J2EIOyCrOyaqe2VmOyEuOyalC5cbiAgICovXG4gIGFzeW5jIHJlZnJlc2hUb2tlbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGhhcyBiZWVuIG1vdmVkIHRvIEF1dGhDb250ZXh0LiBVc2UgdXNlQXV0aCgpLnJlZnJlc2hUb2tlbigpIGluc3RlYWQuJyk7XG4gIH1cblxuICBhc3luYyBjaGVja1NlcnZlckNvbm5lY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIO2BtOudvOydtOyWuO2KuOyXkOyEnOunjCDsi6TtlonrkJjrj4TroZ0g7ZmV7J24XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBBUElfVVJM7J20IOyXhuycvOuptCDsl7DqsrAg7Iuk7Yyo66GcIOyymOumrFxuICAgICAgaWYgKCFBUElfVVJMKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIFVSTOydtCDshKTsoJXrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZXQoJy9hcGkvaGVhbHRoJywge1xuICAgICAgICB0aW1lb3V0OiAzMDAwLCAvLyDtg4DsnoTslYTsm4PsnYQgM+y0iOuhnCDri6jstpVcbiAgICAgICAgdmFsaWRhdGVTdGF0dXM6IChzdGF0dXMpID0+IHN0YXR1cyA8IDUwMCAvLyA1eHgg7JeQ65+s66eMIOyLpOygnCDsl5Drn6zroZwg7LKY66asXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE/LnN0YXR1cyA9PT0gJ29rJyB8fCByZXNwb25zZS5zdGF0dXMgPT09IDIwMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8g64Sk7Yq47JuM7YGsIOyXkOufrOuCmCDtg4DsnoTslYTsm4PsnYAg642UIOq1rOyytOyggeyduCDrqZTsi5zsp4Ag7KCc6rO1XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VDT05OQUJPUlRFRCcgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndGltZW91dCcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7ISc67KEIOydkeuLtSDsi5zqsITsnbQg7LSI6rO865CY7JeI7Iq164uI64ukLicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VSUl9ORVRXT1JLJyB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdOZXR3b3JrIEVycm9yJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfrhKTtirjsm4ztgawg7Jew6rKw7J2EIO2ZleyduO2VtOyjvOyEuOyalC4nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvci5pc05ldHdvcmtFcnJvcikgcmV0dXJuIGVycm9yO1xuICAgIFxuICAgIGlmIChheGlvcy5pc0F4aW9zRXJyb3IoZXJyb3IpKSB7XG4gICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ+yEnOuyhOyZgCDthrXsi6DtlaAg7IiYIOyXhuyKteuLiOuLpC4g64Sk7Yq47JuM7YGsIOyXsOqysOydhCDtmZXsnbjtlbTso7zshLjsmpQuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgc3RhdHVzLCBkYXRhIH0gPSBlcnJvci5yZXNwb25zZTtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkYXRhPy5tZXNzYWdlIHx8IGVycm9yLm1lc3NhZ2U7XG5cbiAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgNDAwOlxuICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IobWVzc2FnZSB8fCAn7J6F66ClIOygleuztOulvCDtmZXsnbjtlbTso7zshLjsmpQuJyk7XG4gICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IobWVzc2FnZSB8fCAn7J247Kad7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcbiAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihtZXNzYWdlIHx8ICfsoJHqt7wg6raM7ZWc7J20IOyXhuyKteuLiOuLpC4nKTtcbiAgICAgICAgY2FzZSA0MDQ6XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihtZXNzYWdlIHx8ICfsmpTssq3tlZwg66as7IaM7Iqk66W8IOywvuydhCDsiJgg7JeG7Iq164uI64ukLicpO1xuICAgICAgICBjYXNlIDQwOTpcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKG1lc3NhZ2UgfHwgJ+ydtOuvuCDqsIDsnoXrkJwg7J2066mU7J287J6F64uI64ukLicpO1xuICAgICAgICBjYXNlIDQyOTpcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKG1lc3NhZ2UgfHwgJ+uEiOustCDrp47snYAg7JqU7LKt7J20IOuwnOyDne2WiOyKteuLiOuLpC4g7J6g7IucIO2bhCDri6Tsi5wg7Iuc64+E7ZW07KO87IS47JqULicpO1xuICAgICAgICBjYXNlIDUwMDpcbiAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKG1lc3NhZ2UgfHwgJ+yEnOuyhCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiDsnqDsi5wg7ZuEIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuJyk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihtZXNzYWdlIHx8ICfsmpTssq0g7LKY66asIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBlcnJvcjtcbiAgfVxufVxuXG5jb25zdCBhdXRoU2VydmljZSA9IG5ldyBBdXRoU2VydmljZSgpO1xuZXhwb3J0IGRlZmF1bHQgYXV0aFNlcnZpY2U7Il0sIm5hbWVzIjpbImF4aW9zIiwiQVBJX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiYXBpIiwiY3JlYXRlIiwiYmFzZVVSTCIsInRpbWVvdXQiLCJoZWFkZXJzIiwid2l0aENyZWRlbnRpYWxzIiwiUkVUUllfQ09ORklHIiwibWF4UmV0cmllcyIsImJhc2VEZWxheSIsIm1heERlbGF5IiwiYmFja29mZkZhY3RvciIsInJldHJ5YWJsZVN0YXR1c2VzIiwicmV0cnlhYmxlRXJyb3JzIiwidmFsaWRhdGVDcmVkZW50aWFscyIsImNyZWRlbnRpYWxzIiwiRXJyb3IiLCJlbWFpbCIsInBhc3N3b3JkIiwidHJpbSIsImdldFJldHJ5RGVsYXkiLCJyZXRyeUNvdW50IiwiZGVsYXkiLCJNYXRoIiwicG93IiwicmFuZG9tIiwibWluIiwiaXNSZXRyeWFibGVFcnJvciIsImVycm9yIiwiY29kZSIsImluY2x1ZGVzIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJpbnRlcmNlcHRvcnMiLCJyZXF1ZXN0IiwidXNlIiwiY29uZmlnIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInVzZXIiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidG9rZW4iLCJzZXNzaW9uSWQiLCJQcm9taXNlIiwicmVqZWN0IiwiQXV0aFNlcnZpY2UiLCJsb2dpbiIsInBvc3QiLCJzdWNjZXNzIiwidXNlckRhdGEiLCJpZCIsIl9pZCIsIm5hbWUiLCJwcm9maWxlSW1hZ2UiLCJtZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwibG9nb3V0IiwicmVnaXN0ZXIiLCJfaGFuZGxlRXJyb3IiLCJ1cGRhdGVQcm9maWxlIiwicHV0IiwiY2hhbmdlUGFzc3dvcmQiLCJjdXJyZW50UGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImdldEN1cnJlbnRVc2VyIiwidXNlclN0ciIsInZlcmlmeVRva2VuIiwicmVmcmVzaFRva2VuIiwiY2hlY2tTZXJ2ZXJDb25uZWN0aW9uIiwiZ2V0IiwidmFsaWRhdGVTdGF0dXMiLCJpc05ldHdvcmtFcnJvciIsImlzQXhpb3NFcnJvciIsImF1dGhTZXJ2aWNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./services/authService.js\n");

/***/ }),

/***/ "(pages-dir-node)/./services/axios.js":
/*!***************************!*\
  !*** ./services/axios.js ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// frontend/services/axios.js\n\nconst API_BASE_URL = \"http://localhost:5001\";\n// 재시도 설정\nconst RETRY_CONFIG = {\n    maxRetries: 3,\n    initialDelayMs: 1000,\n    maxDelayMs: 5000,\n    backoffFactor: 2,\n    retryableStatuses: [\n        408,\n        429,\n        500,\n        502,\n        503,\n        504\n    ],\n    retryableErrors: [\n        'ECONNABORTED',\n        'ETIMEDOUT',\n        'ENOTFOUND',\n        'ENETUNREACH',\n        'ERR_NETWORK'\n    ]\n};\n// 기본 설정으로 axios 인스턴스 생성\nconst axiosInstance = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n    baseURL: API_BASE_URL || 'http://localhost:5000',\n    timeout: 30000,\n    withCredentials: true,\n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n    }\n});\n// 재시도 딜레이 계산 함수 \nconst getRetryDelay = (retryCount)=>{\n    // 지수 백오프와 약간의 무작위성 추가\n    const delay = RETRY_CONFIG.initialDelayMs * Math.pow(RETRY_CONFIG.backoffFactor, retryCount) * (1 + Math.random() * 0.1); // 지터 추가\n    return Math.min(delay, RETRY_CONFIG.maxDelayMs);\n};\n// 재시도 가능한 에러인지 판단하는 함수\nconst isRetryableError = (error)=>{\n    if (!error) return false;\n    // 네트워크 에러 코드 확인\n    if (error.code && RETRY_CONFIG.retryableErrors.includes(error.code)) {\n        return true;\n    }\n    // HTTP 상태 코드 확인\n    if (error.response?.status && RETRY_CONFIG.retryableStatuses.includes(error.response.status)) {\n        return true;\n    }\n    // 응답이 없는 경우 (네트워크 에러)\n    if (!error.response && error.request) {\n        return true;\n    }\n    return false;\n};\n// 요청 취소 토큰 저장소\nconst pendingRequests = new Map();\n// 이전 요청 취소 함수\nconst cancelPendingRequests = (config)=>{\n    const requestKey = `${config.method}:${config.url}`;\n    const previousRequest = pendingRequests.get(requestKey);\n    if (previousRequest) {\n        previousRequest.cancel('Request canceled due to duplicate request');\n        pendingRequests.delete(requestKey);\n    }\n};\n// 요청 인터셉터\naxiosInstance.interceptors.request.use((config)=>{\n    // 요청 데이터 검증\n    if (config.method !== 'get' && !config.data) {\n        config.data = {};\n    }\n    // localStorage에서 직접 사용자 정보 읽기\n    const userStr = localStorage.getItem('user');\n    if (userStr) {\n        const user = JSON.parse(userStr);\n        if (user?.token) {\n            config.headers['x-auth-token'] = user.token;\n            if (user.sessionId) {\n                config.headers['x-session-id'] = user.sessionId;\n            }\n        }\n    }\n    return config;\n}, (error)=>Promise.reject(error));\n// 응답 인터셉터\naxiosInstance.interceptors.response.use((response)=>{\n    // 성공한 요청 제거\n    const requestKey = `${response.config.method}:${response.config.url}`;\n    pendingRequests.delete(requestKey);\n    return response;\n}, async (error)=>{\n    const config = error.config || {};\n    config.retryCount = config.retryCount || 0;\n    // 요청이 취소된 경우\n    if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isCancel(error)) {\n        return Promise.reject(error);\n    }\n    // 401 에러 (인증 만료) - localStorage 자동 삭제 및 로그아웃 처리\n    if (error.response?.status === 401) {\n        // localStorage에서 사용자 정보 삭제\n        if (false) {}\n        // 401 에러는 재시도하지 않고 즉시 반환\n        const authError = new Error('인증이 만료되었습니다. 다시 로그인해주세요.');\n        authError.status = 401;\n        authError.code = 'AUTH_EXPIRED';\n        authError.config = config;\n        authError.originalError = error;\n        throw authError;\n    }\n    // 재시도 가능한 에러이고 최대 재시도 횟수에 도달하지 않은 경우\n    if (isRetryableError(error) && config.retryCount < RETRY_CONFIG.maxRetries) {\n        config.retryCount++;\n        const delay = getRetryDelay(config.retryCount);\n        try {\n            // 딜레이 후 재시도\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n            return await axiosInstance(config);\n        } catch (retryError) {\n            return Promise.reject(retryError);\n        }\n    }\n    // 에러 유형별 처리\n    if (!error.response) {\n        // 네트워크 오류\n        const customError = new Error();\n        customError.message = [\n            '서버와 통신할 수 없습니다.',\n            '네트워크 연결을 확인하고 잠시 후 다시 시도해주세요.',\n            error.code ? `(Error: ${error.code})` : ''\n        ].filter(Boolean).join(' ');\n        customError.isNetworkError = true;\n        customError.originalError = error;\n        customError.status = 0;\n        customError.code = error.code || 'NETWORK_ERROR';\n        customError.config = config;\n        customError.retry = async ()=>{\n            try {\n                return await axiosInstance(config);\n            } catch (retryError) {\n                throw retryError;\n            }\n        };\n        throw customError;\n    }\n    // HTTP 상태 코드별 처리\n    const status = error.response.status;\n    const errorData = error.response.data;\n    let errorMessage;\n    switch(status){\n        case 400:\n            errorMessage = errorData?.message || '잘못된 요청입니다.';\n            break;\n        case 401:\n            errorMessage = '인증이 필요하거나 만료되었습니다.';\n            break;\n        case 403:\n            errorMessage = errorData?.message || '접근 권한이 없습니다.';\n            break;\n        case 404:\n            errorMessage = errorData?.message || '요청한 리소스를 찾을 수 없습니다.';\n            break;\n        case 408:\n            errorMessage = '요청 시간이 초과되었습니다.';\n            break;\n        case 429:\n            errorMessage = '너무 많은 요청이 발생했습니다. 잠시 후 다시 시도해주세요.';\n            break;\n        case 500:\n            errorMessage = '서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.';\n            break;\n        case 502:\n        case 503:\n        case 504:\n            errorMessage = '서버가 일시적으로 응답할 수 없습니다. 잠시 후 다시 시도해주세요.';\n            break;\n        default:\n            errorMessage = errorData?.message || '예기치 않은 오류가 발생했습니다.';\n    }\n    // 에러 객체 생성 및 메타데이터 추가\n    const enhancedError = new Error(errorMessage);\n    enhancedError.status = status;\n    enhancedError.code = errorData?.code;\n    enhancedError.data = errorData;\n    enhancedError.config = config;\n    enhancedError.originalError = error;\n    enhancedError.retry = async ()=>{\n        try {\n            return await axiosInstance(config);\n        } catch (retryError) {\n            throw retryError;\n        }\n    };\n    throw enhancedError;\n});\n// 인스턴스 내보내기\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (axiosInstance);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBZ0IsSUFBSWQsTUFBTWE7SUFDaENDLGNBQWMvQyxNQUFNLEdBQUdBO0lBQ3ZCK0MsY0FBY2xELElBQUksR0FBR2dELFdBQVdoRDtJQUNoQ2tELGNBQWNoQyxJQUFJLEdBQUc4QjtJQUNyQkUsY0FBYzFDLE1BQU0sR0FBR0E7SUFDdkIwQyxjQUFjYixhQUFhLEdBQUd0QztJQUM5Qm1ELGNBQWNILEtBQUssR0FBRztRQUNwQixJQUFJO1lBQ0YsT0FBTyxNQUFNOUQsY0FBY3VCO1FBQzdCLEVBQUUsT0FBT2dDLFlBQVk7WUFDbkIsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTVU7QUFDUjtBQUdGLFlBQVk7QUFDWixpRUFBZWpFLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL3NlcnZpY2VzL2F4aW9zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGZyb250ZW5kL3NlcnZpY2VzL2F4aW9zLmpzXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5jb25zdCBBUElfQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMO1xuXG4vLyDsnqzsi5zrj4Qg7ISk7KCVXG5jb25zdCBSRVRSWV9DT05GSUcgPSB7XG4gIG1heFJldHJpZXM6IDMsXG4gIGluaXRpYWxEZWxheU1zOiAxMDAwLFxuICBtYXhEZWxheU1zOiA1MDAwLFxuICBiYWNrb2ZmRmFjdG9yOiAyLFxuICByZXRyeWFibGVTdGF0dXNlczogWzQwOCwgNDI5LCA1MDAsIDUwMiwgNTAzLCA1MDRdLFxuICByZXRyeWFibGVFcnJvcnM6IFsnRUNPTk5BQk9SVEVEJywgJ0VUSU1FRE9VVCcsICdFTk9URk9VTkQnLCAnRU5FVFVOUkVBQ0gnLCAnRVJSX05FVFdPUksnXVxufTtcblxuLy8g6riw67O4IOyEpOygleycvOuhnCBheGlvcyDsnbjsiqTthLTsiqQg7IOd7ISxXG5jb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHtcbiAgYmFzZVVSTDogQVBJX0JBU0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjUwMDAnLFxuICB0aW1lb3V0OiAzMDAwMCxcbiAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICBoZWFkZXJzOiB7XG4gICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG4vLyDsnqzsi5zrj4Qg65Sc66CI7J20IOqzhOyCsCDtlajsiJggXG5jb25zdCBnZXRSZXRyeURlbGF5ID0gKHJldHJ5Q291bnQpID0+IHtcbiAgLy8g7KeA7IiYIOuwseyYpO2UhOyZgCDslb3qsITsnZgg66y07J6R7JyE7ISxIOy2lOqwgFxuICBjb25zdCBkZWxheSA9IFJFVFJZX0NPTkZJRy5pbml0aWFsRGVsYXlNcyAqIFxuICAgIE1hdGgucG93KFJFVFJZX0NPTkZJRy5iYWNrb2ZmRmFjdG9yLCByZXRyeUNvdW50KSAqXG4gICAgKDEgKyBNYXRoLnJhbmRvbSgpICogMC4xKTsgLy8g7KeA7YSwIOy2lOqwgFxuICByZXR1cm4gTWF0aC5taW4oZGVsYXksIFJFVFJZX0NPTkZJRy5tYXhEZWxheU1zKTtcbn07XG5cbi8vIOyerOyLnOuPhCDqsIDriqXtlZwg7JeQ65+s7J247KeAIO2MkOuLqO2VmOuKlCDtlajsiJhcbmNvbnN0IGlzUmV0cnlhYmxlRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgaWYgKCFlcnJvcikgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8g64Sk7Yq47JuM7YGsIOyXkOufrCDsvZTrk5wg7ZmV7J24XG4gIGlmIChlcnJvci5jb2RlICYmIFJFVFJZX0NPTkZJRy5yZXRyeWFibGVFcnJvcnMuaW5jbHVkZXMoZXJyb3IuY29kZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgLy8gSFRUUCDsg4Htg5wg7L2U65OcIO2ZleyduFxuICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyAmJiBSRVRSWV9DT05GSUcucmV0cnlhYmxlU3RhdHVzZXMuaW5jbHVkZXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICAvLyDsnZHri7XsnbQg7JeG64qUIOqyveyasCAo64Sk7Yq47JuM7YGsIOyXkOufrClcbiAgaWYgKCFlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8vIOyalOyyrSDst6jshowg7Yag7YGwIOyggOyepeyGjFxuY29uc3QgcGVuZGluZ1JlcXVlc3RzID0gbmV3IE1hcCgpO1xuXG4vLyDsnbTsoIQg7JqU7LKtIOy3qOyGjCDtlajsiJhcbmNvbnN0IGNhbmNlbFBlbmRpbmdSZXF1ZXN0cyA9IChjb25maWcpID0+IHtcbiAgY29uc3QgcmVxdWVzdEtleSA9IGAke2NvbmZpZy5tZXRob2R9OiR7Y29uZmlnLnVybH1gO1xuICBjb25zdCBwcmV2aW91c1JlcXVlc3QgPSBwZW5kaW5nUmVxdWVzdHMuZ2V0KHJlcXVlc3RLZXkpO1xuICBcbiAgaWYgKHByZXZpb3VzUmVxdWVzdCkge1xuICAgIHByZXZpb3VzUmVxdWVzdC5jYW5jZWwoJ1JlcXVlc3QgY2FuY2VsZWQgZHVlIHRvIGR1cGxpY2F0ZSByZXF1ZXN0Jyk7XG4gICAgcGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShyZXF1ZXN0S2V5KTtcbiAgfVxufTtcblxuLy8g7JqU7LKtIOyduO2EsOyFie2EsFxuYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoXG4gIChjb25maWcpID0+IHtcbiAgICAvLyDsmpTssq0g642w7J207YSwIOqygOymnVxuICAgIGlmIChjb25maWcubWV0aG9kICE9PSAnZ2V0JyAmJiAhY29uZmlnLmRhdGEpIHtcbiAgICAgIGNvbmZpZy5kYXRhID0ge307XG4gICAgfVxuXG4gICAgLy8gbG9jYWxTdG9yYWdl7JeQ7IScIOyngeygkSDsgqzsmqnsnpAg7KCV67O0IOydveq4sFxuICAgIGNvbnN0IHVzZXJTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpO1xuICAgIGlmICh1c2VyU3RyKSB7XG4gICAgICBjb25zdCB1c2VyID0gSlNPTi5wYXJzZSh1c2VyU3RyKTtcbiAgICAgIGlmICh1c2VyPy50b2tlbikge1xuICAgICAgICBjb25maWcuaGVhZGVyc1sneC1hdXRoLXRva2VuJ10gPSB1c2VyLnRva2VuO1xuICAgICAgICBpZiAodXNlci5zZXNzaW9uSWQpIHtcbiAgICAgICAgICBjb25maWcuaGVhZGVyc1sneC1zZXNzaW9uLWlkJ10gPSB1c2VyLnNlc3Npb25JZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb25maWc7XG4gIH0sXG4gIChlcnJvcikgPT4gUHJvbWlzZS5yZWplY3QoZXJyb3IpXG4pO1xuXG4vLyDsnZHri7Ug7J247YSw7IWJ7YSwXG5heGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoXG4gIChyZXNwb25zZSkgPT4ge1xuICAgIC8vIOyEseqzte2VnCDsmpTssq0g7KCc6rGwXG4gICAgY29uc3QgcmVxdWVzdEtleSA9IGAke3Jlc3BvbnNlLmNvbmZpZy5tZXRob2R9OiR7cmVzcG9uc2UuY29uZmlnLnVybH1gO1xuICAgIHBlbmRpbmdSZXF1ZXN0cy5kZWxldGUocmVxdWVzdEtleSk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LFxuICBhc3luYyAoZXJyb3IpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBlcnJvci5jb25maWcgfHwge307XG4gICAgY29uZmlnLnJldHJ5Q291bnQgPSBjb25maWcucmV0cnlDb3VudCB8fCAwO1xuXG4gICAgLy8g7JqU7LKt7J20IOy3qOyGjOuQnCDqsr3smrBcbiAgICBpZiAoYXhpb3MuaXNDYW5jZWwoZXJyb3IpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIC8vIDQwMSDsl5Drn6wgKOyduOymnSDrp4zro4wpIC0gbG9jYWxTdG9yYWdlIOyekOuPmSDsgq3soJwg67CPIOuhnOq3uOyVhOybgyDsspjrpqxcbiAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICBcbiAgICAgIC8vIGxvY2FsU3RvcmFnZeyXkOyEnCDsgqzsmqnsnpAg7KCV67O0IOyCreygnFxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsYXN0VG9rZW5WZXJpZmljYXRpb24nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOuhnOq3uOyduCDtjpjsnbTsp4DroZwg66as64uk7J2066CJ7Yq4ICjtmITsnqwg7Y6Y7J207KeA6rCAIOuhnOq3uOyduCDtjpjsnbTsp4DqsIAg7JWE64uMIOqyveyasOyXkOunjClcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy8nICYmIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy9sb2dpbicpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyA0MDEg7JeQ65+s64qUIOyerOyLnOuPhO2VmOyngCDslYrqs6Ag7KaJ7IucIOuwmO2ZmFxuICAgICAgY29uc3QgYXV0aEVycm9yID0gbmV3IEVycm9yKCfsnbjspp3snbQg66eM66OM65CY7JeI7Iq164uI64ukLiDri6Tsi5wg66Gc6re47J247ZW07KO87IS47JqULicpO1xuICAgICAgYXV0aEVycm9yLnN0YXR1cyA9IDQwMTtcbiAgICAgIGF1dGhFcnJvci5jb2RlID0gJ0FVVEhfRVhQSVJFRCc7XG4gICAgICBhdXRoRXJyb3IuY29uZmlnID0gY29uZmlnO1xuICAgICAgYXV0aEVycm9yLm9yaWdpbmFsRXJyb3IgPSBlcnJvcjtcbiAgICAgIHRocm93IGF1dGhFcnJvcjtcbiAgICB9XG5cbiAgICAvLyDsnqzsi5zrj4Qg6rCA64ql7ZWcIOyXkOufrOydtOqzoCDstZzrjIAg7J6s7Iuc64+EIO2an+yImOyXkCDrj4Tri6ztlZjsp4Ag7JWK7J2AIOqyveyasFxuICAgIGlmIChpc1JldHJ5YWJsZUVycm9yKGVycm9yKSAmJiBjb25maWcucmV0cnlDb3VudCA8IFJFVFJZX0NPTkZJRy5tYXhSZXRyaWVzKSB7XG4gICAgICBjb25maWcucmV0cnlDb3VudCsrO1xuICAgICAgY29uc3QgZGVsYXkgPSBnZXRSZXRyeURlbGF5KGNvbmZpZy5yZXRyeUNvdW50KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g65Sc66CI7J20IO2bhCDsnqzsi5zrj4RcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICAgIHJldHVybiBhd2FpdCBheGlvc0luc3RhbmNlKGNvbmZpZyk7XG4gICAgICB9IGNhdGNoIChyZXRyeUVycm9yKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXRyeUVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDsl5Drn6wg7Jyg7ZiV67OEIOyymOumrFxuICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgIC8vIOuEpO2KuOybjO2BrCDsmKTrpZhcbiAgICAgIGNvbnN0IGN1c3RvbUVycm9yID0gbmV3IEVycm9yKCk7XG4gICAgICBjdXN0b21FcnJvci5tZXNzYWdlID0gW1xuICAgICAgICAn7ISc67KE7JmAIO2GteyLoO2VoCDsiJgg7JeG7Iq164uI64ukLicsXG4gICAgICAgICfrhKTtirjsm4ztgawg7Jew6rKw7J2EIO2ZleyduO2VmOqzoCDsnqDsi5wg7ZuEIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuJyxcbiAgICAgICAgZXJyb3IuY29kZSA/IGAoRXJyb3I6ICR7ZXJyb3IuY29kZX0pYCA6ICcnXG4gICAgICBdLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJyk7XG4gICAgICBcbiAgICAgIGN1c3RvbUVycm9yLmlzTmV0d29ya0Vycm9yID0gdHJ1ZTtcbiAgICAgIGN1c3RvbUVycm9yLm9yaWdpbmFsRXJyb3IgPSBlcnJvcjtcbiAgICAgIGN1c3RvbUVycm9yLnN0YXR1cyA9IDA7XG4gICAgICBjdXN0b21FcnJvci5jb2RlID0gZXJyb3IuY29kZSB8fCAnTkVUV09SS19FUlJPUic7XG4gICAgICBjdXN0b21FcnJvci5jb25maWcgPSBjb25maWc7XG4gICAgICBcbiAgICAgIGN1c3RvbUVycm9yLnJldHJ5ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBheGlvc0luc3RhbmNlKGNvbmZpZyk7XG4gICAgICAgIH0gY2F0Y2ggKHJldHJ5RXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyByZXRyeUVycm9yO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICB0aHJvdyBjdXN0b21FcnJvcjtcbiAgICB9XG5cbiAgICAvLyBIVFRQIOyDge2DnCDsvZTrk5zrs4Qg7LKY66asXG4gICAgY29uc3Qgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzO1xuICAgIGNvbnN0IGVycm9yRGF0YSA9IGVycm9yLnJlc3BvbnNlLmRhdGE7XG5cbiAgICBsZXQgZXJyb3JNZXNzYWdlO1xuXG4gICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgIGNhc2UgNDAwOlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGE/Lm1lc3NhZ2UgfHwgJ+yemOuqu+uQnCDsmpTssq3snoXri4jri6QuJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgNDAxOlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSAn7J247Kad7J20IO2VhOyalO2VmOqxsOuCmCDrp4zro4zrkJjsl4jsirXri4jri6QuJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgNDAzOlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGE/Lm1lc3NhZ2UgfHwgJ+ygkeq3vCDqtoztlZzsnbQg7JeG7Iq164uI64ukLic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDQwNDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhPy5tZXNzYWdlIHx8ICfsmpTssq3tlZwg66as7IaM7Iqk66W8IOywvuydhCDsiJgg7JeG7Iq164uI64ukLic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDQwODpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+yalOyyrSDsi5zqsITsnbQg7LSI6rO865CY7JeI7Iq164uI64ukLic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDQyOTpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+uEiOustCDrp47snYAg7JqU7LKt7J20IOuwnOyDne2WiOyKteuLiOuLpC4g7J6g7IucIO2bhCDri6Tsi5wg7Iuc64+E7ZW07KO87IS47JqULic7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDUwMDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+yEnOuyhCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiDsnqDsi5wg7ZuEIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuJztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgNTAyOlxuICAgICAgY2FzZSA1MDM6XG4gICAgICBjYXNlIDUwNDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ+yEnOuyhOqwgCDsnbzsi5zsoIHsnLzroZwg7J2R64u17ZWgIOyImCDsl4bsirXri4jri6QuIOyeoOyLnCDtm4Qg64uk7IucIOyLnOuPhO2VtOyjvOyEuOyalC4nO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JEYXRhPy5tZXNzYWdlIHx8ICfsmIjquLDsuZgg7JWK7J2AIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJztcbiAgICB9XG5cbiAgICAvLyDsl5Drn6wg6rCd7LK0IOyDneyEsSDrsI8g66mU7YOA642w7J207YSwIOy2lOqwgFxuICAgIGNvbnN0IGVuaGFuY2VkRXJyb3IgPSBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICBlbmhhbmNlZEVycm9yLnN0YXR1cyA9IHN0YXR1cztcbiAgICBlbmhhbmNlZEVycm9yLmNvZGUgPSBlcnJvckRhdGE/LmNvZGU7XG4gICAgZW5oYW5jZWRFcnJvci5kYXRhID0gZXJyb3JEYXRhO1xuICAgIGVuaGFuY2VkRXJyb3IuY29uZmlnID0gY29uZmlnO1xuICAgIGVuaGFuY2VkRXJyb3Iub3JpZ2luYWxFcnJvciA9IGVycm9yO1xuICAgIGVuaGFuY2VkRXJyb3IucmV0cnkgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgYXhpb3NJbnN0YW5jZShjb25maWcpO1xuICAgICAgfSBjYXRjaCAocmV0cnlFcnJvcikge1xuICAgICAgICB0aHJvdyByZXRyeUVycm9yO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aHJvdyBlbmhhbmNlZEVycm9yO1xuICB9XG4pO1xuXG4vLyDsnbjsiqTthLTsiqQg64K067O064K06riwXG5leHBvcnQgZGVmYXVsdCBheGlvc0luc3RhbmNlOyJdLCJuYW1lcyI6WyJheGlvcyIsIkFQSV9CQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiUkVUUllfQ09ORklHIiwibWF4UmV0cmllcyIsImluaXRpYWxEZWxheU1zIiwibWF4RGVsYXlNcyIsImJhY2tvZmZGYWN0b3IiLCJyZXRyeWFibGVTdGF0dXNlcyIsInJldHJ5YWJsZUVycm9ycyIsImF4aW9zSW5zdGFuY2UiLCJjcmVhdGUiLCJiYXNlVVJMIiwidGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsImhlYWRlcnMiLCJnZXRSZXRyeURlbGF5IiwicmV0cnlDb3VudCIsImRlbGF5IiwiTWF0aCIsInBvdyIsInJhbmRvbSIsIm1pbiIsImlzUmV0cnlhYmxlRXJyb3IiLCJlcnJvciIsImNvZGUiLCJpbmNsdWRlcyIsInJlc3BvbnNlIiwic3RhdHVzIiwicmVxdWVzdCIsInBlbmRpbmdSZXF1ZXN0cyIsIk1hcCIsImNhbmNlbFBlbmRpbmdSZXF1ZXN0cyIsImNvbmZpZyIsInJlcXVlc3RLZXkiLCJtZXRob2QiLCJ1cmwiLCJwcmV2aW91c1JlcXVlc3QiLCJnZXQiLCJjYW5jZWwiLCJkZWxldGUiLCJpbnRlcmNlcHRvcnMiLCJ1c2UiLCJkYXRhIiwidXNlclN0ciIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ1c2VyIiwiSlNPTiIsInBhcnNlIiwidG9rZW4iLCJzZXNzaW9uSWQiLCJQcm9taXNlIiwicmVqZWN0IiwiaXNDYW5jZWwiLCJyZW1vdmVJdGVtIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsImhyZWYiLCJhdXRoRXJyb3IiLCJFcnJvciIsIm9yaWdpbmFsRXJyb3IiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInJldHJ5RXJyb3IiLCJjdXN0b21FcnJvciIsIm1lc3NhZ2UiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsImlzTmV0d29ya0Vycm9yIiwicmV0cnkiLCJlcnJvckRhdGEiLCJlcnJvck1lc3NhZ2UiLCJlbmhhbmNlZEVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./services/axios.js\n");

/***/ }),

/***/ "(pages-dir-node)/./services/fileService.js":
/*!*********************************!*\
  !*** ./services/fileService.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./axios */ \"(pages-dir-node)/./services/axios.js\");\n/* harmony import */ var _components_Toast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/Toast */ \"(pages-dir-node)/./components/Toast.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__, _axios__WEBPACK_IMPORTED_MODULE_1__, _components_Toast__WEBPACK_IMPORTED_MODULE_2__]);\n([axios__WEBPACK_IMPORTED_MODULE_0__, _axios__WEBPACK_IMPORTED_MODULE_1__, _components_Toast__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nclass FileService {\n    constructor(){\n        this.baseUrl = \"http://localhost:5001\";\n        this.uploadLimit = 50 * 1024 * 1024; // 50MB\n        this.retryAttempts = 3;\n        this.retryDelay = 1000;\n        this.activeUploads = new Map();\n        this.allowedTypes = {\n            image: {\n                extensions: [\n                    '.jpg',\n                    '.jpeg',\n                    '.png',\n                    '.gif',\n                    '.webp'\n                ],\n                mimeTypes: [\n                    'image/jpeg',\n                    'image/png',\n                    'image/gif',\n                    'image/webp'\n                ],\n                maxSize: 10 * 1024 * 1024,\n                name: '이미지'\n            },\n            document: {\n                extensions: [\n                    '.pdf'\n                ],\n                mimeTypes: [\n                    'application/pdf'\n                ],\n                maxSize: 20 * 1024 * 1024,\n                name: 'PDF 문서'\n            }\n        };\n    }\n    async validateFile(file) {\n        if (!file) {\n            const message = '파일이 선택되지 않았습니다.';\n            _components_Toast__WEBPACK_IMPORTED_MODULE_2__.Toast.error(message);\n            return {\n                success: false,\n                message\n            };\n        }\n        if (file.size > this.uploadLimit) {\n            const message = `파일 크기는 ${this.formatFileSize(this.uploadLimit)}를 초과할 수 없습니다.`;\n            _components_Toast__WEBPACK_IMPORTED_MODULE_2__.Toast.error(message);\n            return {\n                success: false,\n                message\n            };\n        }\n        let isAllowedType = false;\n        let maxTypeSize = 0;\n        let typeConfig = null;\n        for (const config of Object.values(this.allowedTypes)){\n            if (config.mimeTypes.includes(file.type)) {\n                isAllowedType = true;\n                maxTypeSize = config.maxSize;\n                typeConfig = config;\n                break;\n            }\n        }\n        if (!isAllowedType) {\n            const message = '지원하지 않는 파일 형식입니다.';\n            _components_Toast__WEBPACK_IMPORTED_MODULE_2__.Toast.error(message);\n            return {\n                success: false,\n                message\n            };\n        }\n        if (file.size > maxTypeSize) {\n            const message = `${typeConfig.name} 파일은 ${this.formatFileSize(maxTypeSize)}를 초과할 수 없습니다.`;\n            _components_Toast__WEBPACK_IMPORTED_MODULE_2__.Toast.error(message);\n            return {\n                success: false,\n                message\n            };\n        }\n        const ext = this.getFileExtension(file.name);\n        if (!typeConfig.extensions.includes(ext.toLowerCase())) {\n            const message = '파일 확장자가 올바르지 않습니다.';\n            _components_Toast__WEBPACK_IMPORTED_MODULE_2__.Toast.error(message);\n            return {\n                success: false,\n                message\n            };\n        }\n        return {\n            success: true\n        };\n    }\n    async uploadFile(file, onProgress, token, sessionId) {\n        const validationResult = await this.validateFile(file);\n        if (!validationResult.success) {\n            return validationResult;\n        }\n        try {\n            const formData = new FormData();\n            formData.append('file', file);\n            const source = axios__WEBPACK_IMPORTED_MODULE_0__.CancelToken.source();\n            this.activeUploads.set(file.name, source);\n            const uploadUrl = this.baseUrl ? `${this.baseUrl}/api/files/upload` : '/api/files/upload';\n            // token과 sessionId는 axios 인터셉터에서 자동으로 추가되므로\n            // 여기서는 명시적으로 전달하지 않아도 됩니다\n            const response = await _axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].post(uploadUrl, formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                },\n                cancelToken: source.token,\n                withCredentials: true,\n                onUploadProgress: (progressEvent)=>{\n                    if (onProgress) {\n                        const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n                        onProgress(percentCompleted);\n                    }\n                }\n            });\n            this.activeUploads.delete(file.name);\n            if (!response.data || !response.data.success) {\n                return {\n                    success: false,\n                    message: response.data?.message || '파일 업로드에 실패했습니다.'\n                };\n            }\n            const fileData = response.data.file;\n            return {\n                success: true,\n                data: {\n                    ...response.data,\n                    file: {\n                        ...fileData,\n                        url: this.getFileUrl(fileData.filename, true)\n                    }\n                }\n            };\n        } catch (error) {\n            this.activeUploads.delete(file.name);\n            if ((0,axios__WEBPACK_IMPORTED_MODULE_0__.isCancel)(error)) {\n                return {\n                    success: false,\n                    message: '업로드가 취소되었습니다.'\n                };\n            }\n            if (error.response?.status === 401) {\n                throw new Error('Authentication expired. Please login again.');\n            }\n            return this.handleUploadError(error);\n        }\n    }\n    async downloadFile(filename, originalname, token, sessionId) {\n        try {\n            // 파일 존재 여부 먼저 확인\n            const downloadUrl = this.getFileUrl(filename, false);\n            // axios 인터셉터가 자동으로 인증 헤더를 추가합니다\n            const checkResponse = await _axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].head(downloadUrl, {\n                validateStatus: (status)=>status < 500,\n                withCredentials: true\n            });\n            if (checkResponse.status === 404) {\n                return {\n                    success: false,\n                    message: '파일을 찾을 수 없습니다.'\n                };\n            }\n            if (checkResponse.status === 403) {\n                return {\n                    success: false,\n                    message: '파일에 접근할 권한이 없습니다.'\n                };\n            }\n            if (checkResponse.status !== 200) {\n                return {\n                    success: false,\n                    message: '파일 다운로드 준비 중 오류가 발생했습니다.'\n                };\n            }\n            // axios 인터셉터가 자동으로 인증 헤더를 추가합니다\n            const response = await (0,_axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n                method: 'GET',\n                url: downloadUrl,\n                responseType: 'blob',\n                timeout: 30000,\n                withCredentials: true\n            });\n            const contentType = response.headers['content-type'];\n            const contentDisposition = response.headers['content-disposition'];\n            let finalFilename = originalname;\n            if (contentDisposition) {\n                const filenameMatch = contentDisposition.match(/filename\\*=UTF-8''([^;]+)|filename=\"([^\"]+)\"|filename=([^;]+)/);\n                if (filenameMatch) {\n                    finalFilename = decodeURIComponent(filenameMatch[1] || filenameMatch[2] || filenameMatch[3]);\n                }\n            }\n            const blob = new Blob([\n                response.data\n            ], {\n                type: contentType || 'application/octet-stream'\n            });\n            const blobUrl = window.URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = blobUrl;\n            link.download = finalFilename;\n            link.style.display = 'none';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            setTimeout(()=>{\n                window.URL.revokeObjectURL(blobUrl);\n            }, 100);\n            return {\n                success: true\n            };\n        } catch (error) {\n            if (error.response?.status === 401) {\n                throw new Error('Authentication expired. Please login again.');\n            }\n            return this.handleDownloadError(error);\n        }\n    }\n    getFileUrl(filename, forPreview = false) {\n        if (!filename) return '';\n        const baseUrl = \"http://localhost:5001\" || 0;\n        const endpoint = forPreview ? 'view' : 'download';\n        return `${baseUrl}/api/files/${endpoint}/${filename}`;\n    }\n    getPreviewUrl(file, token, sessionId, withAuth = true) {\n        if (!file?.filename) return '';\n        const baseUrl = `${\"http://localhost:5001\"}/api/files/view/${file.filename}`;\n        if (!withAuth) return baseUrl;\n        if (!token || !sessionId) return baseUrl;\n        // URL 객체 생성 전 프로토콜 확인\n        const url = new URL(baseUrl);\n        url.searchParams.append('token', encodeURIComponent(token));\n        url.searchParams.append('sessionId', encodeURIComponent(sessionId));\n        return url.toString();\n    }\n    getFileType(filename) {\n        if (!filename) return 'unknown';\n        const ext = this.getFileExtension(filename).toLowerCase();\n        for (const [type, config] of Object.entries(this.allowedTypes)){\n            if (config.extensions.includes(ext)) {\n                return type;\n            }\n        }\n        return 'unknown';\n    }\n    getFileExtension(filename) {\n        if (!filename) return '';\n        const parts = filename.split('.');\n        return parts.length > 1 ? `.${parts.pop().toLowerCase()}` : '';\n    }\n    formatFileSize(bytes) {\n        if (!bytes || bytes === 0) return '0 B';\n        const units = [\n            'B',\n            'KB',\n            'MB',\n            'GB',\n            'TB'\n        ];\n        const i = Math.floor(Math.log(bytes) / Math.log(1024));\n        return `${parseFloat((bytes / Math.pow(1024, i)).toFixed(2))} ${units[i]}`;\n    }\n    getHeaders(token, sessionId) {\n        if (!token || !sessionId) {\n            return {\n                'Accept': 'application/json, */*'\n            };\n        }\n        return {\n            'x-auth-token': token,\n            'x-session-id': sessionId,\n            'Accept': 'application/json, */*'\n        };\n    }\n    handleUploadError(error) {\n        console.error('Upload error:', error);\n        if (error.code === 'ECONNABORTED') {\n            return {\n                success: false,\n                message: '파일 업로드 시간이 초과되었습니다.'\n            };\n        }\n        if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(error)) {\n            const status = error.response?.status;\n            const message = error.response?.data?.message;\n            switch(status){\n                case 400:\n                    return {\n                        success: false,\n                        message: message || '잘못된 요청입니다.'\n                    };\n                case 401:\n                    return {\n                        success: false,\n                        message: '인증이 필요합니다.'\n                    };\n                case 413:\n                    return {\n                        success: false,\n                        message: '파일이 너무 큽니다.'\n                    };\n                case 415:\n                    return {\n                        success: false,\n                        message: '지원하지 않는 파일 형식입니다.'\n                    };\n                case 500:\n                    return {\n                        success: false,\n                        message: '서버 오류가 발생했습니다.'\n                    };\n                default:\n                    return {\n                        success: false,\n                        message: message || '파일 업로드에 실패했습니다.'\n                    };\n            }\n        }\n        return {\n            success: false,\n            message: error.message || '알 수 없는 오류가 발생했습니다.',\n            error\n        };\n    }\n    handleDownloadError(error) {\n        console.error('Download error:', error);\n        if (error.code === 'ECONNABORTED') {\n            return {\n                success: false,\n                message: '파일 다운로드 시간이 초과되었습니다.'\n            };\n        }\n        if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(error)) {\n            const status = error.response?.status;\n            const message = error.response?.data?.message;\n            switch(status){\n                case 404:\n                    return {\n                        success: false,\n                        message: '파일을 찾을 수 없습니다.'\n                    };\n                case 403:\n                    return {\n                        success: false,\n                        message: '파일에 접근할 권한이 없습니다.'\n                    };\n                case 400:\n                    return {\n                        success: false,\n                        message: message || '잘못된 요청입니다.'\n                    };\n                case 500:\n                    return {\n                        success: false,\n                        message: '서버 오류가 발생했습니다.'\n                    };\n                default:\n                    return {\n                        success: false,\n                        message: message || '파일 다운로드에 실패했습니다.'\n                    };\n            }\n        }\n        return {\n            success: false,\n            message: error.message || '알 수 없는 오류가 발생했습니다.',\n            error\n        };\n    }\n    cancelUpload(filename) {\n        const source = this.activeUploads.get(filename);\n        if (source) {\n            source.cancel('Upload canceled by user');\n            this.activeUploads.delete(filename);\n            return {\n                success: true,\n                message: '업로드가 취소되었습니다.'\n            };\n        }\n        return {\n            success: false,\n            message: '취소할 업로드를 찾을 수 없습니다.'\n        };\n    }\n    cancelAllUploads() {\n        let canceledCount = 0;\n        for (const [filename, source] of this.activeUploads){\n            source.cancel('All uploads canceled');\n            this.activeUploads.delete(filename);\n            canceledCount++;\n        }\n        return {\n            success: true,\n            message: `${canceledCount}개의 업로드가 취소되었습니다.`,\n            canceledCount\n        };\n    }\n    getErrorMessage(status) {\n        switch(status){\n            case 400:\n                return '잘못된 요청입니다.';\n            case 401:\n                return '인증이 필요합니다.';\n            case 403:\n                return '파일에 접근할 권한이 없습니다.';\n            case 404:\n                return '파일을 찾을 수 없습니다.';\n            case 413:\n                return '파일이 너무 큽니다.';\n            case 415:\n                return '지원하지 않는 파일 형식입니다.';\n            case 500:\n                return '서버 오류가 발생했습니다.';\n            case 503:\n                return '서비스를 일시적으로 사용할 수 없습니다.';\n            default:\n                return '알 수 없는 오류가 발생했습니다.';\n        }\n    }\n    isRetryableError(error) {\n        if (!error.response) {\n            return true; // 네트워크 오류는 재시도 가능\n        }\n        const status = error.response.status;\n        return [\n            408,\n            429,\n            500,\n            502,\n            503,\n            504\n        ].includes(status);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new FileService());\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NlcnZpY2VzL2ZpbGVTZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBcUQ7QUFDakI7QUFDUTtBQUU1QyxNQUFNSztJQUNKLGFBQWM7UUFDWixJQUFJLENBQUNDLE9BQU8sR0FBR0MsdUJBQStCO1FBQzlDLElBQUksQ0FBQ0csV0FBVyxHQUFHLEtBQUssT0FBTyxNQUFNLE9BQU87UUFDNUMsSUFBSSxDQUFDQyxhQUFhLEdBQUc7UUFDckIsSUFBSSxDQUFDQyxVQUFVLEdBQUc7UUFDbEIsSUFBSSxDQUFDQyxhQUFhLEdBQUcsSUFBSUM7UUFFekIsSUFBSSxDQUFDQyxZQUFZLEdBQUc7WUFDbEJDLE9BQU87Z0JBQ0xDLFlBQVk7b0JBQUM7b0JBQVE7b0JBQVM7b0JBQVE7b0JBQVE7aUJBQVE7Z0JBQ3REQyxXQUFXO29CQUFDO29CQUFjO29CQUFhO29CQUFhO2lCQUFhO2dCQUNqRUMsU0FBUyxLQUFLLE9BQU87Z0JBQ3JCQyxNQUFNO1lBQ1I7WUFDQUMsVUFBVTtnQkFDUkosWUFBWTtvQkFBQztpQkFBTztnQkFDcEJDLFdBQVc7b0JBQUM7aUJBQWtCO2dCQUM5QkMsU0FBUyxLQUFLLE9BQU87Z0JBQ3JCQyxNQUFNO1lBQ1I7UUFDRjtJQUNGO0lBRUEsTUFBTUUsYUFBYUMsSUFBSSxFQUFFO1FBQ3ZCLElBQUksQ0FBQ0EsTUFBTTtZQUNULE1BQU1DLFVBQVU7WUFDaEJwQixvREFBS0EsQ0FBQ3FCLEtBQUssQ0FBQ0Q7WUFDWixPQUFPO2dCQUFFRSxTQUFTO2dCQUFPRjtZQUFRO1FBQ25DO1FBRUEsSUFBSUQsS0FBS0ksSUFBSSxHQUFHLElBQUksQ0FBQ2pCLFdBQVcsRUFBRTtZQUNoQyxNQUFNYyxVQUFVLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQ0ksY0FBYyxDQUFDLElBQUksQ0FBQ2xCLFdBQVcsRUFBRSxhQUFhLENBQUM7WUFDOUVOLG9EQUFLQSxDQUFDcUIsS0FBSyxDQUFDRDtZQUNaLE9BQU87Z0JBQUVFLFNB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T0FBTyxNQUFNLGtCQUFrQjtRQUNqQztRQUVBLE1BQU1rQixTQUFTNUMsTUFBTTBCLFFBQVEsQ0FBQ2tCLE1BQU07UUFDcEMsT0FBTztZQUFDO1lBQUs7WUFBSztZQUFLO1lBQUs7WUFBSztTQUFJLENBQUNsQyxRQUFRLENBQUNrQztJQUNqRDtBQUNGO0FBRUEsaUVBQWUsSUFBSWhFLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL3NlcnZpY2VzL2ZpbGVTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcywgeyBpc0NhbmNlbCwgQ2FuY2VsVG9rZW4gfSBmcm9tICdheGlvcyc7XG5pbXBvcnQgYXhpb3NJbnN0YW5jZSBmcm9tICcuL2F4aW9zJztcbmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9Ub2FzdCc7XG5cbmNsYXNzIEZpbGVTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTDtcbiAgICB0aGlzLnVwbG9hZExpbWl0ID0gNTAgKiAxMDI0ICogMTAyNDsgLy8gNTBNQlxuICAgIHRoaXMucmV0cnlBdHRlbXB0cyA9IDM7XG4gICAgdGhpcy5yZXRyeURlbGF5ID0gMTAwMDtcbiAgICB0aGlzLmFjdGl2ZVVwbG9hZHMgPSBuZXcgTWFwKCk7XG5cbiAgICB0aGlzLmFsbG93ZWRUeXBlcyA9IHtcbiAgICAgIGltYWdlOiB7XG4gICAgICAgIGV4dGVuc2lvbnM6IFsnLmpwZycsICcuanBlZycsICcucG5nJywgJy5naWYnLCAnLndlYnAnXSxcbiAgICAgICAgbWltZVR5cGVzOiBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL2dpZicsICdpbWFnZS93ZWJwJ10sXG4gICAgICAgIG1heFNpemU6IDEwICogMTAyNCAqIDEwMjQsXG4gICAgICAgIG5hbWU6ICfsnbTrr7jsp4AnXG4gICAgICB9LFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgZXh0ZW5zaW9uczogWycucGRmJ10sXG4gICAgICAgIG1pbWVUeXBlczogWydhcHBsaWNhdGlvbi9wZGYnXSxcbiAgICAgICAgbWF4U2l6ZTogMjAgKiAxMDI0ICogMTAyNCxcbiAgICAgICAgbmFtZTogJ1BERiDrrLjshJwnXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHZhbGlkYXRlRmlsZShmaWxlKSB7XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJ+2MjOydvOydtCDshKDtg53rkJjsp4Ag7JWK7JWY7Iq164uI64ukLic7XG4gICAgICBUb2FzdC5lcnJvcihtZXNzYWdlKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlIH07XG4gICAgfVxuXG4gICAgaWYgKGZpbGUuc2l6ZSA+IHRoaXMudXBsb2FkTGltaXQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBg7YyM7J28IO2BrOq4sOuKlCAke3RoaXMuZm9ybWF0RmlsZVNpemUodGhpcy51cGxvYWRMaW1pdCl966W8IOy0iOqzvO2VoCDsiJgg7JeG7Iq164uI64ukLmA7XG4gICAgICBUb2FzdC5lcnJvcihtZXNzYWdlKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlIH07XG4gICAgfVxuXG4gICAgbGV0IGlzQWxsb3dlZFR5cGUgPSBmYWxzZTtcbiAgICBsZXQgbWF4VHlwZVNpemUgPSAwO1xuICAgIGxldCB0eXBlQ29uZmlnID0gbnVsbDtcblxuICAgIGZvciAoY29uc3QgY29uZmlnIG9mIE9iamVjdC52YWx1ZXModGhpcy5hbGxvd2VkVHlwZXMpKSB7XG4gICAgICBpZiAoY29uZmlnLm1pbWVUeXBlcy5pbmNsdWRlcyhmaWxlLnR5cGUpKSB7XG4gICAgICAgIGlzQWxsb3dlZFR5cGUgPSB0cnVlO1xuICAgICAgICBtYXhUeXBlU2l6ZSA9IGNvbmZpZy5tYXhTaXplO1xuICAgICAgICB0eXBlQ29uZmlnID0gY29uZmlnO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWlzQWxsb3dlZFR5cGUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSAn7KeA7JuQ7ZWY7KeAIOyViuuKlCDtjIzsnbwg7ZiV7Iud7J6F64uI64ukLic7XG4gICAgICBUb2FzdC5lcnJvcihtZXNzYWdlKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlIH07XG4gICAgfVxuXG4gICAgaWYgKGZpbGUuc2l6ZSA+IG1heFR5cGVTaXplKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYCR7dHlwZUNvbmZpZy5uYW1lfSDtjIzsnbzsnYAgJHt0aGlzLmZvcm1hdEZpbGVTaXplKG1heFR5cGVTaXplKX3rpbwg7LSI6rO87ZWgIOyImCDsl4bsirXri4jri6QuYDtcbiAgICAgIFRvYXN0LmVycm9yKG1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICBjb25zdCBleHQgPSB0aGlzLmdldEZpbGVFeHRlbnNpb24oZmlsZS5uYW1lKTtcbiAgICBpZiAoIXR5cGVDb25maWcuZXh0ZW5zaW9ucy5pbmNsdWRlcyhleHQudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSAn7YyM7J28IO2ZleyepeyekOqwgCDsmKzrsJTrpbTsp4Ag7JWK7Iq164uI64ukLic7XG4gICAgICBUb2FzdC5lcnJvcihtZXNzYWdlKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9XG5cbiAgYXN5bmMgdXBsb2FkRmlsZShmaWxlLCBvblByb2dyZXNzLCB0b2tlbiwgc2Vzc2lvbklkKSB7XG4gICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHRoaXMudmFsaWRhdGVGaWxlKGZpbGUpO1xuICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuXG4gICAgICBjb25zdCBzb3VyY2UgPSBDYW5jZWxUb2tlbi5zb3VyY2UoKTtcbiAgICAgIHRoaXMuYWN0aXZlVXBsb2Fkcy5zZXQoZmlsZS5uYW1lLCBzb3VyY2UpO1xuXG4gICAgICBjb25zdCB1cGxvYWRVcmwgPSB0aGlzLmJhc2VVcmwgP1xuICAgICAgICBgJHt0aGlzLmJhc2VVcmx9L2FwaS9maWxlcy91cGxvYWRgIDpcbiAgICAgICAgJy9hcGkvZmlsZXMvdXBsb2FkJztcblxuICAgICAgLy8gdG9rZW7qs7wgc2Vzc2lvbklk64qUIGF4aW9zIOyduO2EsOyFie2EsOyXkOyEnCDsnpDrj5nsnLzroZwg7LaU6rCA65CY66+A66GcXG4gICAgICAvLyDsl6zquLDshJzripQg66qF7Iuc7KCB7Jy866GcIOyghOuLrO2VmOyngCDslYrslYTrj4Qg65Cp64uI64ukXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zSW5zdGFuY2UucG9zdCh1cGxvYWRVcmwsIGZvcm1EYXRhLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnXG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbFRva2VuOiBzb3VyY2UudG9rZW4sXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgb25VcGxvYWRQcm9ncmVzczogKHByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc3QgcGVyY2VudENvbXBsZXRlZCA9IE1hdGgucm91bmQoXG4gICAgICAgICAgICAgIChwcm9ncmVzc0V2ZW50LmxvYWRlZCAqIDEwMCkgLyBwcm9ncmVzc0V2ZW50LnRvdGFsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgb25Qcm9ncmVzcyhwZXJjZW50Q29tcGxldGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmFjdGl2ZVVwbG9hZHMuZGVsZXRlKGZpbGUubmFtZSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2UuZGF0YSB8fCAhcmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YT8ubWVzc2FnZSB8fCAn7YyM7J28IOyXheuhnOuTnOyXkCDsi6TtjKjtlojsirXri4jri6QuJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZmlsZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIGZpbGU6IHtcbiAgICAgICAgICAgIC4uLmZpbGVEYXRhLFxuICAgICAgICAgICAgdXJsOiB0aGlzLmdldEZpbGVVcmwoZmlsZURhdGEuZmlsZW5hbWUsIHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuYWN0aXZlVXBsb2Fkcy5kZWxldGUoZmlsZS5uYW1lKTtcblxuICAgICAgaWYgKGlzQ2FuY2VsKGVycm9yKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICfsl4XroZzrk5zqsIAg7Leo7IaM65CY7JeI7Iq164uI64ukLidcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGV4cGlyZWQuIFBsZWFzZSBsb2dpbiBhZ2Fpbi4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlVXBsb2FkRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuICBhc3luYyBkb3dubG9hZEZpbGUoZmlsZW5hbWUsIG9yaWdpbmFsbmFtZSwgdG9rZW4sIHNlc3Npb25JZCkge1xuICAgIHRyeSB7XG4gICAgICAvLyDtjIzsnbwg7KG07J6sIOyXrOu2gCDrqLzsoIAg7ZmV7J24XG4gICAgICBjb25zdCBkb3dubG9hZFVybCA9IHRoaXMuZ2V0RmlsZVVybChmaWxlbmFtZSwgZmFsc2UpO1xuICAgICAgLy8gYXhpb3Mg7J247YSw7IWJ7YSw6rCAIOyekOuPmeycvOuhnCDsnbjspp0g7Zek642U66W8IOy2lOqwgO2VqeuLiOuLpFxuICAgICAgY29uc3QgY2hlY2tSZXNwb25zZSA9IGF3YWl0IGF4aW9zSW5zdGFuY2UuaGVhZChkb3dubG9hZFVybCwge1xuICAgICAgICB2YWxpZGF0ZVN0YXR1czogc3RhdHVzID0+IHN0YXR1cyA8IDUwMCxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKGNoZWNrUmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAn7YyM7J287J2EIOywvuydhCDsiJgg7JeG7Iq164uI64ukLidcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoZWNrUmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAn7YyM7J287JeQIOygkeq3vO2VoCDqtoztlZzsnbQg7JeG7Iq164uI64ukLidcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoZWNrUmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAn7YyM7J28IOuLpOyatOuhnOuTnCDspIDruYQg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBheGlvcyDsnbjthLDshYnthLDqsIAg7J6Q64+Z7Jy866GcIOyduOymnSDtl6TrjZTrpbwg7LaU6rCA7ZWp64uI64ukXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zSW5zdGFuY2Uoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6IGRvd25sb2FkVXJsLFxuICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJyxcbiAgICAgICAgdGltZW91dDogMzAwMDAsXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ107XG4gICAgICBjb25zdCBjb250ZW50RGlzcG9zaXRpb24gPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LWRpc3Bvc2l0aW9uJ107XG4gICAgICBsZXQgZmluYWxGaWxlbmFtZSA9IG9yaWdpbmFsbmFtZTtcblxuICAgICAgaWYgKGNvbnRlbnREaXNwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBmaWxlbmFtZU1hdGNoID0gY29udGVudERpc3Bvc2l0aW9uLm1hdGNoKFxuICAgICAgICAgIC9maWxlbmFtZVxcKj1VVEYtOCcnKFteO10rKXxmaWxlbmFtZT1cIihbXlwiXSspXCJ8ZmlsZW5hbWU9KFteO10rKS9cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGZpbGVuYW1lTWF0Y2gpIHtcbiAgICAgICAgICBmaW5hbEZpbGVuYW1lID0gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgZmlsZW5hbWVNYXRjaFsxXSB8fCBmaWxlbmFtZU1hdGNoWzJdIHx8IGZpbGVuYW1lTWF0Y2hbM11cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVzcG9uc2UuZGF0YV0sIHtcbiAgICAgICAgdHlwZTogY29udGVudFR5cGUgfHwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBibG9iVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgbGluay5ocmVmID0gYmxvYlVybDtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBmaW5hbEZpbGVuYW1lO1xuICAgICAgbGluay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgIGxpbmsuY2xpY2soKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChibG9iVXJsKTtcbiAgICAgIH0sIDEwMCk7XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gZXhwaXJlZC4gUGxlYXNlIGxvZ2luIGFnYWluLicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVEb3dubG9hZEVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBnZXRGaWxlVXJsKGZpbGVuYW1lLCBmb3JQcmV2aWV3ID0gZmFsc2UpIHtcbiAgICBpZiAoIWZpbGVuYW1lKSByZXR1cm4gJyc7XG5cbiAgICBjb25zdCBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnJztcbiAgICBjb25zdCBlbmRwb2ludCA9IGZvclByZXZpZXcgPyAndmlldycgOiAnZG93bmxvYWQnO1xuICAgIHJldHVybiBgJHtiYXNlVXJsfS9hcGkvZmlsZXMvJHtlbmRwb2ludH0vJHtmaWxlbmFtZX1gO1xuICB9XG5cbiAgZ2V0UHJldmlld1VybChmaWxlLCB0b2tlbiwgc2Vzc2lvbklkLCB3aXRoQXV0aCA9IHRydWUpIHtcbiAgICBpZiAoIWZpbGU/LmZpbGVuYW1lKSByZXR1cm4gJyc7XG5cbiAgICBjb25zdCBiYXNlVXJsID0gYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTH0vYXBpL2ZpbGVzL3ZpZXcvJHtmaWxlLmZpbGVuYW1lfWA7XG5cbiAgICBpZiAoIXdpdGhBdXRoKSByZXR1cm4gYmFzZVVybDtcblxuICAgIGlmICghdG9rZW4gfHwgIXNlc3Npb25JZCkgcmV0dXJuIGJhc2VVcmw7XG5cbiAgICAvLyBVUkwg6rCd7LK0IOyDneyEsSDsoIQg7ZSE66Gc7Yag7L2cIO2ZleyduFxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYmFzZVVybCk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ3Rva2VuJywgZW5jb2RlVVJJQ29tcG9uZW50KHRva2VuKSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ3Nlc3Npb25JZCcsIGVuY29kZVVSSUNvbXBvbmVudChzZXNzaW9uSWQpKTtcblxuICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgfVxuXG4gIGdldEZpbGVUeXBlKGZpbGVuYW1lKSB7XG4gICAgaWYgKCFmaWxlbmFtZSkgcmV0dXJuICd1bmtub3duJztcbiAgICBjb25zdCBleHQgPSB0aGlzLmdldEZpbGVFeHRlbnNpb24oZmlsZW5hbWUpLnRvTG93ZXJDYXNlKCk7XG4gICAgZm9yIChjb25zdCBbdHlwZSwgY29uZmlnXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmFsbG93ZWRUeXBlcykpIHtcbiAgICAgIGlmIChjb25maWcuZXh0ZW5zaW9ucy5pbmNsdWRlcyhleHQpKSB7XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgZ2V0RmlsZUV4dGVuc2lvbihmaWxlbmFtZSkge1xuICAgIGlmICghZmlsZW5hbWUpIHJldHVybiAnJztcbiAgICBjb25zdCBwYXJ0cyA9IGZpbGVuYW1lLnNwbGl0KCcuJyk7XG4gICAgcmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgPyBgLiR7cGFydHMucG9wKCkudG9Mb3dlckNhc2UoKX1gIDogJyc7XG4gIH1cblxuICBmb3JtYXRGaWxlU2l6ZShieXRlcykge1xuICAgIGlmICghYnl0ZXMgfHwgYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJztcbiAgICBjb25zdCB1bml0cyA9IFsnQicsICdLQicsICdNQicsICdHQicsICdUQiddO1xuICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKDEwMjQpKTtcbiAgICByZXR1cm4gYCR7cGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdygxMDI0LCBpKSkudG9GaXhlZCgyKSl9ICR7dW5pdHNbaV19YDtcbiAgfVxuXG4gIGdldEhlYWRlcnModG9rZW4sIHNlc3Npb25JZCkge1xuICAgIGlmICghdG9rZW4gfHwgIXNlc3Npb25JZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCAqLyonXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ3gtYXV0aC10b2tlbic6IHRva2VuLFxuICAgICAgJ3gtc2Vzc2lvbi1pZCc6IHNlc3Npb25JZCxcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgKi8qJ1xuICAgIH07XG4gIH1cblxuICBoYW5kbGVVcGxvYWRFcnJvcihlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VwbG9hZCBlcnJvcjonLCBlcnJvcik7XG5cbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VDT05OQUJPUlRFRCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAn7YyM7J28IOyXheuhnOuTnCDsi5zqsITsnbQg7LSI6rO865CY7JeI7Iq164uI64ukLidcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGF4aW9zLmlzQXhpb3NFcnJvcihlcnJvcikpIHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlPy5zdGF0dXM7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2U7XG5cbiAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgNDAwOlxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UgfHwgJ+yemOuqu+uQnCDsmpTssq3snoXri4jri6QuJ1xuICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICfsnbjspp3snbQg7ZWE7JqU7ZWp64uI64ukLidcbiAgICAgICAgICB9O1xuICAgICAgICBjYXNlIDQxMzpcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiAn7YyM7J287J20IOuEiOustCDtgb3ri4jri6QuJ1xuICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNDE1OlxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICfsp4Dsm5DtlZjsp4Ag7JWK64qUIO2MjOydvCDtmJXsi53snoXri4jri6QuJ1xuICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTAwOlxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICfshJzrsoQg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nXG4gICAgICAgICAgfTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlIHx8ICftjIzsnbwg7JeF66Gc65Oc7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nXG4gICAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8ICfslYwg7IiYIOyXhuuKlCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLicsXG4gICAgICBlcnJvclxuICAgIH07XG4gIH1cblxuICBoYW5kbGVEb3dubG9hZEVycm9yKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRG93bmxvYWQgZXJyb3I6JywgZXJyb3IpO1xuXG4gICAgaWYgKGVycm9yLmNvZGUgPT09ICdFQ09OTkFCT1JURUQnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ+2MjOydvCDri6TsmrTroZzrk5wg7Iuc6rCE7J20IOy0iOqzvOuQmOyXiOyKteuLiOuLpC4nfTtcbiAgICB9XG5cbiAgICBpZiAoYXhpb3MuaXNBeGlvc0Vycm9yKGVycm9yKSkge1xuICAgICAgY29uc3Qgc3RhdHVzID0gZXJyb3IucmVzcG9uc2U/LnN0YXR1cztcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZTtcblxuICAgICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgICAgY2FzZSA0MDQ6XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ+2MjOydvOydhCDssL7snYQg7IiYIOyXhuyKteuLiOuLpC4nXG4gICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ+2MjOydvOyXkCDsoJHqt7ztlaAg6raM7ZWc7J20IOyXhuyKteuLiOuLpC4nXG4gICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0MDA6XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSB8fCAn7J6Y66q765CcIOyalOyyreyeheuLiOuLpC4nXG4gICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ+yEnOuyhCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLidcbiAgICAgICAgICB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UgfHwgJ+2MjOydvCDri6TsmrTroZzrk5zsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLidcbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ+yVjCDsiJgg7JeG64qUIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QuJyxcbiAgICAgIGVycm9yXG4gICAgfTtcbiAgfVxuXG4gIGNhbmNlbFVwbG9hZChmaWxlbmFtZSkge1xuICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuYWN0aXZlVXBsb2Fkcy5nZXQoZmlsZW5hbWUpO1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIHNvdXJjZS5jYW5jZWwoJ1VwbG9hZCBjYW5jZWxlZCBieSB1c2VyJyk7XG4gICAgICB0aGlzLmFjdGl2ZVVwbG9hZHMuZGVsZXRlKGZpbGVuYW1lKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICfsl4XroZzrk5zqsIAg7Leo7IaM65CY7JeI7Iq164uI64ukLidcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICfst6jshoztlaAg7JeF66Gc65Oc66W8IOywvuydhCDsiJgg7JeG7Iq164uI64ukLidcbiAgICB9O1xuICB9XG5cbiAgY2FuY2VsQWxsVXBsb2FkcygpIHtcbiAgICBsZXQgY2FuY2VsZWRDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBbZmlsZW5hbWUsIHNvdXJjZV0gb2YgdGhpcy5hY3RpdmVVcGxvYWRzKSB7XG4gICAgICBzb3VyY2UuY2FuY2VsKCdBbGwgdXBsb2FkcyBjYW5jZWxlZCcpO1xuICAgICAgdGhpcy5hY3RpdmVVcGxvYWRzLmRlbGV0ZShmaWxlbmFtZSk7XG4gICAgICBjYW5jZWxlZENvdW50Kys7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogYCR7Y2FuY2VsZWRDb3VudH3qsJzsnZgg7JeF66Gc65Oc6rCAIOy3qOyGjOuQmOyXiOyKteuLiOuLpC5gLFxuICAgICAgY2FuY2VsZWRDb3VudFxuICAgIH07XG4gIH1cblxuICBnZXRFcnJvck1lc3NhZ2Uoc3RhdHVzKSB7XG4gICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgIGNhc2UgNDAwOlxuICAgICAgICByZXR1cm4gJ+yemOuqu+uQnCDsmpTssq3snoXri4jri6QuJztcbiAgICAgIGNhc2UgNDAxOlxuICAgICAgICByZXR1cm4gJ+yduOymneydtCDtlYTsmpTtlanri4jri6QuJztcbiAgICAgIGNhc2UgNDAzOlxuICAgICAgICByZXR1cm4gJ+2MjOydvOyXkCDsoJHqt7ztlaAg6raM7ZWc7J20IOyXhuyKteuLiOuLpC4nO1xuICAgICAgY2FzZSA0MDQ6XG4gICAgICAgIHJldHVybiAn7YyM7J287J2EIOywvuydhCDsiJgg7JeG7Iq164uI64ukLic7XG4gICAgICBjYXNlIDQxMzpcbiAgICAgICAgcmV0dXJuICftjIzsnbzsnbQg64SI66y0IO2BveuLiOuLpC4nO1xuICAgICAgY2FzZSA0MTU6XG4gICAgICAgIHJldHVybiAn7KeA7JuQ7ZWY7KeAIOyViuuKlCDtjIzsnbwg7ZiV7Iud7J6F64uI64ukLic7XG4gICAgICBjYXNlIDUwMDpcbiAgICAgICAgcmV0dXJuICfshJzrsoQg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nO1xuICAgICAgY2FzZSA1MDM6XG4gICAgICAgIHJldHVybiAn7ISc67mE7Iqk66W8IOydvOyLnOyggeycvOuhnCDsgqzsmqntlaAg7IiYIOyXhuyKteuLiOuLpC4nO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICfslYwg7IiYIOyXhuuKlCDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukLic7XG4gICAgfVxuICB9XG5cbiAgaXNSZXRyeWFibGVFcnJvcihlcnJvcikge1xuICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyDrhKTtirjsm4ztgawg7Jik66WY64qUIOyerOyLnOuPhCDqsIDriqVcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0dXMgPSBlcnJvci5yZXNwb25zZS5zdGF0dXM7XG4gICAgcmV0dXJuIFs0MDgsIDQyOSwgNTAwLCA1MDIsIDUwMywgNTA0XS5pbmNsdWRlcyhzdGF0dXMpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBGaWxlU2VydmljZSgpOyJdLCJuYW1lcyI6WyJheGlvcyIsImlzQ2FuY2VsIiwiQ2FuY2VsVG9rZW4iLCJheGlvc0luc3RhbmNlIiwiVG9hc3QiLCJGaWxlU2VydmljZSIsImJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInVwbG9hZExpbWl0IiwicmV0cnlBdHRlbXB0cyIsInJldHJ5RGVsYXkiLCJhY3RpdmVVcGxvYWRzIiwiTWFwIiwiYWxsb3dlZFR5cGVzIiwiaW1hZ2UiLCJleHRlbnNpb25zIiwibWltZVR5cGVzIiwibWF4U2l6ZSIsIm5hbWUiLCJkb2N1bWVudCIsInZhbGlkYXRlRmlsZSIsImZpbGUiLCJtZXNzYWdlIiwiZXJyb3IiLCJzdWNjZXNzIiwic2l6ZSIsImZvcm1hdEZpbGVTaXplIiwiaXNBbGxvd2VkVHlwZSIsIm1heFR5cGVTaXplIiwidHlwZUNvbmZpZyIsImNvbmZpZyIsIk9iamVjdCIsInZhbHVlcyIsImluY2x1ZGVzIiwidHlwZSIsImV4dCIsImdldEZpbGVFeHRlbnNpb24iLCJ0b0xvd2VyQ2FzZSIsInVwbG9hZEZpbGUiLCJvblByb2dyZXNzIiwidG9rZW4iLCJzZXNzaW9uSWQiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInNvdXJjZSIsInNldCIsInVwbG9hZFVybCIsInJlc3BvbnNlIiwicG9zdCIsImhlYWRlcnMiLCJjYW5jZWxUb2tlbiIsIndpdGhDcmVkZW50aWFscyIsIm9uVXBsb2FkUHJvZ3Jlc3MiLCJwcm9ncmVzc0V2ZW50IiwicGVyY2VudENvbXBsZXRlZCIsIk1hdGgiLCJyb3VuZCIsImxvYWRlZCIsInRvdGFsIiwiZGVsZXRlIiwiZGF0YSIsImZpbGVEYXRhIiwidXJsIiwiZ2V0RmlsZVVybCIsImZpbGVuYW1lIiwic3RhdHVzIiwiRXJyb3IiLCJoYW5kbGVVcGxvYWRFcnJvciIsImRvd25sb2FkRmlsZSIsIm9yaWdpbmFsbmFtZSIsImRvd25sb2FkVXJsIiwiY2hlY2tSZXNwb25zZSIsImhlYWQiLCJ2YWxpZGF0ZVN0YXR1cyIsIm1ldGhvZCIsInJlc3BvbnNlVHlwZSIsInRpbWVvdXQiLCJjb250ZW50VHlwZSIsImNvbnRlbnREaXNwb3NpdGlvbiIsImZpbmFsRmlsZW5hbWUiLCJmaWxlbmFtZU1hdGNoIiwibWF0Y2giLCJkZWNvZGVVUklDb21wb25lbnQiLCJibG9iIiwiQmxvYiIsImJsb2JVcmwiLCJ3aW5kb3ciLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJsaW5rIiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsInN0eWxlIiwiZGlzcGxheSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJzZXRUaW1lb3V0IiwicmV2b2tlT2JqZWN0VVJMIiwiaGFuZGxlRG93bmxvYWRFcnJvciIsImZvclByZXZpZXciLCJlbmRwb2ludCIsImdldFByZXZpZXdVcmwiLCJ3aXRoQXV0aCIsInNlYXJjaFBhcmFtcyIsImVuY29kZVVSSUNvbXBvbmVudCIsInRvU3RyaW5nIiwiZ2V0RmlsZVR5cGUiLCJlbnRyaWVzIiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInBvcCIsImJ5dGVzIiwidW5pdHMiLCJpIiwiZmxvb3IiLCJsb2ciLCJwYXJzZUZsb2F0IiwicG93IiwidG9GaXhlZCIsImdldEhlYWRlcnMiLCJjb25zb2xlIiwiY29kZSIsImlzQXhpb3NFcnJvciIsImNhbmNlbFVwbG9hZCIsImdldCIsImNhbmNlbCIsImNhbmNlbEFsbFVwbG9hZHMiLCJjYW5jZWxlZENvdW50IiwiZ2V0RXJyb3JNZXNzYWdlIiwiaXNSZXRyeWFibGVFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./services/fileService.js\n");

/***/ }),

/***/ "(pages-dir-node)/./services/socket.js":
/*!****************************!*\
  !*** ./services/socket.js ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_0__]);\nsocket_io_client__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst CLEANUP_REASONS = {\n    DISCONNECT: 'disconnect',\n    MANUAL: 'manual',\n    RECONNECT: 'reconnect'\n};\nclass SocketService {\n    constructor(){\n        this.socket = null;\n        this.heartbeatInterval = null;\n        this.messageHandlers = new Map();\n        this.messageQueue = [];\n        this.reconnectAttempts = 0;\n        this.maxReconnectAttempts = 5;\n        this.isReconnecting = false;\n        this.connectionPromise = null;\n        this.retryDelay = 3000;\n        this.reactionHandlers = new Set();\n        this.connected = false;\n    }\n    async connect(options = {}) {\n        if (this.connectionPromise) {\n            return this.connectionPromise;\n        }\n        if (this.socket?.connected) {\n            return Promise.resolve(this.socket);\n        }\n        this.connectionPromise = new Promise((resolve, reject)=>{\n            try {\n                if (this.socket) {\n                    this.cleanup(CLEANUP_REASONS.RECONNECT);\n                }\n                const socketUrl = \"http://localhost:5002\";\n                this.socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(socketUrl, {\n                    ...options,\n                    transports: [\n                        'websocket',\n                        'polling'\n                    ],\n                    reconnection: true,\n                    reconnectionAttempts: this.maxReconnectAttempts,\n                    reconnectionDelay: this.retryDelay,\n                    reconnectionDelayMax: 5000,\n                    timeout: 20000,\n                    forceNew: true\n                });\n                this.setupEventHandlers(resolve, reject);\n            } catch (error) {\n                this.connectionPromise = null;\n                reject(error);\n            }\n        }).finally(()=>{\n            this.connectionPromise = null;\n        });\n        return this.connectionPromise;\n    }\n    setupEventHandlers(resolve, reject) {\n        const connectionTimeout = setTimeout(()=>{\n            if (!this.socket?.connected) {\n                reject(new Error('Connection timeout'));\n            }\n        }, 30000);\n        this.socket.on('connect', ()=>{\n            this.connected = true;\n            this.reconnectAttempts = 0;\n            this.isReconnecting = false;\n            clearTimeout(connectionTimeout);\n            this.startHeartbeat();\n            resolve(this.socket);\n        });\n        this.socket.on('disconnect', (reason)=>{\n            this.connected = false;\n            this.cleanup(CLEANUP_REASONS.DISCONNECT);\n        });\n        this.socket.on('connect_error', (error)=>{\n            console.log('Socket connection error:', error.message);\n            if (error.message === 'Invalid session') {\n                reject(error);\n                return;\n            }\n            if (error.message === 'websocket error') {\n                this.reconnectAttempts++;\n            }\n            if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n                clearTimeout(connectionTimeout);\n                reject(error);\n            }\n        });\n        // duplicate_login 이벤트 수신\n        // type: 'new_login_attempt' - 새로 로그인한 디바이스\n        // type: 'existing_session' - 기존 세션이 있던 디바이스 (다른 곳에서 로그인함)\n        this.socket.on('duplicate_login', (data)=>{\n        // TODO: 향후 중복 로그인 처리 필요 시 AuthContext에서 구현\n        });\n        this.socket.on('error', (error)=>{\n            this.handleSocketError(error);\n        });\n        this.socket.on('reconnect', (attemptNumber)=>{\n            this.connected = true;\n            this.reconnectAttempts = 0;\n            this.isReconnecting = false;\n            this.processMessageQueue();\n        });\n        this.socket.on('reconnect_failed', ()=>{\n            this.cleanup(CLEANUP_REASONS.MANUAL);\n            reject(new Error('Reconnection failed'));\n        });\n        this.socket.on('messageReaction', (data)=>{\n            this.reactionHandlers.forEach((handler)=>handler(data));\n        });\n    }\n    cleanup(reason = CLEANUP_REASONS.MANUAL) {\n        if (reason === CLEANUP_REASONS.DISCONNECT && this.isReconnecting) {\n            return;\n        }\n        if (this.heartbeatInterval) {\n            clearInterval(this.heartbeatInterval);\n            this.heartbeatInterval = null;\n        }\n        if (reason !== CLEANUP_REASONS.RECONNECT) {\n            this.reactionHandlers.clear();\n        }\n        if (reason !== CLEANUP_REASONS.RECONNECT) {\n            this.messageQueue = [];\n        }\n        if (reason === CLEANUP_REASONS.MANUAL && this.socket) {\n            this.socket.disconnect();\n            this.socket = null;\n        }\n        if (reason === CLEANUP_REASONS.MANUAL) {\n            this.reconnectAttempts = 0;\n            this.isReconnecting = false;\n            this.connectionPromise = null;\n            this.connected = false;\n        }\n    }\n    disconnect() {\n        this.cleanup(CLEANUP_REASONS.MANUAL);\n        if (this.socket) {\n            this.socket.disconnect();\n            this.socket = null;\n        }\n    }\n    handleConnectionError(error) {\n        this.reconnectAttempts++;\n        if (error.message.includes('auth')) {\n            return;\n        }\n        if (error.message.includes('websocket error')) {\n            if (this.socket) {\n                this.socket.io.opts.transports = [\n                    'polling',\n                    'websocket'\n                ];\n            }\n        }\n        if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n            this.cleanup(CLEANUP_REASONS.MANUAL);\n            this.isReconnecting = false;\n        }\n    }\n    handleSocketError(error) {\n        if (error.type === 'TransportError') {\n            this.reconnect();\n        }\n    }\n    startHeartbeat() {\n        if (this.heartbeatInterval) {\n            clearInterval(this.heartbeatInterval);\n        }\n        this.heartbeatInterval = setInterval(()=>{\n            if (this.socket?.connected) {\n                this.socket.emit('ping', null, (error)=>{\n                    if (error) {\n                        this.cleanup(CLEANUP_REASONS.MANUAL);\n                    }\n                });\n            } else {\n                this.cleanup(CLEANUP_REASONS.MANUAL);\n            }\n        }, 25000);\n    }\n    getSocket() {\n        return this.socket;\n    }\n    queueMessage(event, data) {\n        const message = {\n            event,\n            data,\n            timestamp: Date.now()\n        };\n        this.messageQueue.push(message);\n    }\n    processMessageQueue() {\n        const now = Date.now();\n        const validMessages = this.messageQueue.filter((msg)=>now - msg.timestamp < 300000);\n        while(validMessages.length > 0){\n            const message = validMessages.shift();\n            try {\n                this.socket.emit(message.event, message.data);\n            } catch (error) {\n            // Silent error handling\n            }\n        }\n        this.messageQueue = validMessages;\n    }\n    async emit(event, data) {\n        try {\n            if (!this.socket?.connected) {\n                await this.connect();\n            }\n            return new Promise((resolve, reject)=>{\n                if (!this.socket?.connected) {\n                    reject(new Error('Socket is not connected'));\n                    return;\n                }\n                const timeout = setTimeout(()=>{\n                    reject(new Error('Socket event timeout'));\n                }, 10000);\n                this.socket.emit(event, data, (response)=>{\n                    clearTimeout(timeout);\n                    if (response?.error) {\n                        reject(response.error);\n                    } else {\n                        resolve(response);\n                    }\n                });\n            });\n        } catch (error) {\n            this.queueMessage(event, data);\n            throw error;\n        }\n    }\n    on(event, callback) {\n        if (!this.socket) {\n            this.messageHandlers.set(event, callback);\n            return;\n        }\n        this.socket.on(event, callback);\n    }\n    off(event, callback) {\n        if (!this.socket) {\n            this.messageHandlers.delete(event);\n            return;\n        }\n        this.socket.off(event, callback);\n    }\n    async reconnect() {\n        if (this.isReconnecting) return;\n        this.isReconnecting = true;\n        this.cleanup(CLEANUP_REASONS.RECONNECT);\n        if (this.socket) {\n            this.socket.disconnect();\n            this.socket = null;\n        }\n        try {\n            await new Promise((resolve)=>setTimeout(resolve, this.retryDelay));\n            await this.connect();\n        } catch (error) {\n            this.isReconnecting = false;\n            throw error;\n        }\n    }\n    isConnected() {\n        return this.connected && this.socket?.connected;\n    }\n    getConnectionQuality() {\n        if (!this.socket?.connected) return 'disconnected';\n        if (this.isReconnecting) return 'reconnecting';\n        if (this.socket.conn?.transport?.name === 'polling') return 'poor';\n        return 'good';\n    }\n    async addReaction(messageId, reaction, user) {\n        try {\n            if (!user) {\n                throw new Error('Authentication required');\n            }\n            await this.emit('messageReaction', {\n                messageId,\n                reaction,\n                add: true\n            });\n        } catch (error) {\n            throw error;\n        }\n    }\n    async removeReaction(messageId, reaction, user) {\n        try {\n            if (!user) {\n                throw new Error('Authentication required');\n            }\n            await this.emit('messageReaction', {\n                messageId,\n                reaction,\n                add: false\n            });\n        } catch (error) {\n            throw error;\n        }\n    }\n    onReactionUpdate(handler) {\n        if (typeof handler !== 'function') {\n            throw new Error('Handler must be a function');\n        }\n        this.reactionHandlers.add(handler);\n        return ()=>this.reactionHandlers.delete(handler);\n    }\n    async toggleReaction(messageId, reaction, user) {\n        try {\n            if (!user) {\n                throw new Error('Authentication required');\n            }\n            await this.emit('messageReaction', {\n                messageId,\n                reaction,\n                toggle: true\n            });\n        } catch (error) {\n            throw error;\n        }\n    }\n}\nconst socketService = new SocketService();\nif (false) {}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (socketService);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NlcnZpY2VzL3NvY2tldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzQztBQUV0QyxNQUFNQyxrQkFBa0I7SUFDdEJDLFlBQVk7SUFDWkMsUUFBUTtJQUNSQyxXQUFXO0FBQ2I7QUFFQSxNQUFNQztJQUNKLGFBQWM7UUFDWixJQUFJLENBQUNDLE1BQU0sR0FBRztRQUNkLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUc7UUFDekIsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSUM7UUFDM0IsSUFBSSxDQUFDQyxZQUFZLEdBQUcsRUFBRTtRQUN0QixJQUFJLENBQUNDLGlCQUFpQixHQUFHO1FBQ3pCLElBQUksQ0FBQ0Msb0JBQW9CLEdBQUc7UUFDNUIsSUFBSSxDQUFDQyxjQUFjLEdBQUc7UUFDdEIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRztRQUN6QixJQUFJLENBQUNDLFVBQVUsR0FBRztRQUNsQixJQUFJLENBQUNDLGdCQUFnQixHQUFHLElBQUlDO1FBQzVCLElBQUksQ0FBQ0MsU0FBUyxHQUFHO0lBQ25CO0lBRUEsTUFBTUMsUUFBUUMsVUFBVSxDQUFDLENBQUMsRUFBRTtRQUMxQixJQUFJLElBQUksQ0FBQ04saUJBQWlCLEVBQUU7WUFDMUIsT0FBTyxJQUFJLENBQUNBLGlCQUFpQjtRQUMvQjtRQUVBLElBQUksSUFBSSxDQUFDUixNQUFNLEVBQUVZLFdBQVc7WUFDMUIsT0FBT0csUUFBUUMsT0FBTyxDQUFDLElBQUksQ0FBQ2hCLE1BQU07UUFDcEM7UUFFQSxJQUFJLENBQUNRLGlCQUFpQixHQUFHLElBQUlPLFFBQVEsQ0FBQ0MsU0FBU0M7WUFDN0MsSUFBSTtnQkFDRixJQUFJLElBQUksQ0FBQ2pCLE1BQU0sRUFBRTtvQkFDZixJQUFJLENBQUNrQixPQUFPLENBQUN2QixnQkFBZ0JHLFNBQVM7Z0JBQ3hDO2dCQUVBLE1BQU1xQixZQUFZQyx1QkFBa0M7Z0JBRXBELElBQUksQ0FBQ3BCLE1BQU0sR0FBR04sb0RBQUVBLENBQUN5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QU0sSUFBSSxDQUFDdUIsSUFBSSxDQUFDLG1CQUFtQjtnQkFDakN3QjtnQkFDQUM7Z0JBQ0FNLFFBQVE7WUFDVjtRQUNGLEVBQUUsT0FBTzFELE9BQU87WUFDZCxNQUFNQTtRQUNSO0lBQ0Y7QUFDRjtBQUVBLE1BQU0yRCxnQkFBZ0IsSUFBSTNGO0FBRTFCLElBQUksS0FBNkIsRUFBRSxFQVVsQztBQUVELGlFQUFlMkYsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2p1bnNlb3BhcmsvRGVza3RvcC9rdGItQm9vdGNhbXBDaGF0L2FwcHMvZnJvbnRlbmQvc2VydmljZXMvc29ja2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlvIH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5cbmNvbnN0IENMRUFOVVBfUkVBU09OUyA9IHtcbiAgRElTQ09OTkVDVDogJ2Rpc2Nvbm5lY3QnLFxuICBNQU5VQUw6ICdtYW51YWwnLFxuICBSRUNPTk5FQ1Q6ICdyZWNvbm5lY3QnXG59O1xuXG5jbGFzcyBTb2NrZXRTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zb2NrZXQgPSBudWxsO1xuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwgPSBudWxsO1xuICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMubWVzc2FnZVF1ZXVlID0gW107XG4gICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gICAgdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cyA9IDU7XG4gICAgdGhpcy5pc1JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgIHRoaXMuY29ubmVjdGlvblByb21pc2UgPSBudWxsO1xuICAgIHRoaXMucmV0cnlEZWxheSA9IDMwMDA7XG4gICAgdGhpcy5yZWFjdGlvbkhhbmRsZXJzID0gbmV3IFNldCgpO1xuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBhc3luYyBjb25uZWN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25Qcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uUHJvbWlzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zb2NrZXQ/LmNvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnNvY2tldCk7XG4gICAgfVxuXG4gICAgdGhpcy5jb25uZWN0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xuICAgICAgICAgIHRoaXMuY2xlYW51cChDTEVBTlVQX1JFQVNPTlMuUkVDT05ORUNUKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNvY2tldFVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NPQ0tFVF9VUkw7XG5cbiAgICAgICAgdGhpcy5zb2NrZXQgPSBpbyhzb2NrZXRVcmwsIHtcbiAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXSxcbiAgICAgICAgICByZWNvbm5lY3Rpb246IHRydWUsXG4gICAgICAgICAgcmVjb25uZWN0aW9uQXR0ZW1wdHM6IHRoaXMubWF4UmVjb25uZWN0QXR0ZW1wdHMsXG4gICAgICAgICAgcmVjb25uZWN0aW9uRGVsYXk6IHRoaXMucmV0cnlEZWxheSxcbiAgICAgICAgICByZWNvbm5lY3Rpb25EZWxheU1heDogNTAwMCxcbiAgICAgICAgICB0aW1lb3V0OiAyMDAwMCxcbiAgICAgICAgICBmb3JjZU5ldzogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNldHVwRXZlbnRIYW5kbGVycyhyZXNvbHZlLCByZWplY3QpO1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Qcm9taXNlID0gbnVsbDtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgIHRoaXMuY29ubmVjdGlvblByb21pc2UgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvblByb21pc2U7XG4gIH1cblxuICBzZXR1cEV2ZW50SGFuZGxlcnMocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY29uc3QgY29ubmVjdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5zb2NrZXQ/LmNvbm5lY3RlZCkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdDb25uZWN0aW9uIHRpbWVvdXQnKSk7XG4gICAgICB9XG4gICAgfSwgMzAwMDApO1xuXG4gICAgdGhpcy5zb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzID0gMDtcbiAgICAgIHRoaXMuaXNSZWNvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgIGNsZWFyVGltZW91dChjb25uZWN0aW9uVGltZW91dCk7XG4gICAgICB0aGlzLnN0YXJ0SGVhcnRiZWF0KCk7XG4gICAgICByZXNvbHZlKHRoaXMuc29ja2V0KTtcbiAgICB9KTtcblxuICAgIHRoaXMuc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKHJlYXNvbikgPT4ge1xuICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2xlYW51cChDTEVBTlVQX1JFQVNPTlMuRElTQ09OTkVDVCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNvY2tldC5vbignY29ubmVjdF9lcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1NvY2tldCBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIHNlc3Npb24nKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlID09PSAnd2Vic29ja2V0IGVycm9yJykge1xuICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKys7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnJlY29ubmVjdEF0dGVtcHRzID49IHRoaXMubWF4UmVjb25uZWN0QXR0ZW1wdHMpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3Rpb25UaW1lb3V0KTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGR1cGxpY2F0ZV9sb2dpbiDsnbTrsqTtirgg7IiY7IugXG4gICAgLy8gdHlwZTogJ25ld19sb2dpbl9hdHRlbXB0JyAtIOyDiOuhnCDroZzqt7jsnbjtlZwg65SU67CU7J207IqkXG4gICAgLy8gdHlwZTogJ2V4aXN0aW5nX3Nlc3Npb24nIC0g6riw7KG0IOyEuOyFmOydtCDsnojrjZgg65SU67CU7J207IqkICjri6Trpbgg6rOz7JeQ7IScIOuhnOq3uOyduO2VqClcbiAgICB0aGlzLnNvY2tldC5vbignZHVwbGljYXRlX2xvZ2luJywgKGRhdGEpID0+IHtcbiAgICAgIC8vIFRPRE86IO2Wpe2bhCDspJHrs7Ug66Gc6re47J24IOyymOumrCDtlYTsmpQg7IucIEF1dGhDb250ZXh07JeQ7IScIOq1rO2YhFxuICAgIH0pO1xuXG4gICAgdGhpcy5zb2NrZXQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZVNvY2tldEVycm9yKGVycm9yKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc29ja2V0Lm9uKCdyZWNvbm5lY3QnLCAoYXR0ZW1wdE51bWJlcikgPT4ge1xuICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gICAgICB0aGlzLmlzUmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnByb2Nlc3NNZXNzYWdlUXVldWUoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc29ja2V0Lm9uKCdyZWNvbm5lY3RfZmFpbGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhbnVwKENMRUFOVVBfUkVBU09OUy5NQU5VQUwpO1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVjb25uZWN0aW9uIGZhaWxlZCcpKTtcbiAgICB9KTtcblxuICAgIHRoaXMuc29ja2V0Lm9uKCdtZXNzYWdlUmVhY3Rpb24nLCAoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5yZWFjdGlvbkhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKGRhdGEpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsZWFudXAocmVhc29uID0gQ0xFQU5VUF9SRUFTT05TLk1BTlVBTCkge1xuICAgIGlmIChyZWFzb24gPT09IENMRUFOVVBfUkVBU09OUy5ESVNDT05ORUNUICYmIHRoaXMuaXNSZWNvbm5lY3RpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oZWFydGJlYXRJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdEludGVydmFsKTtcbiAgICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChyZWFzb24gIT09IENMRUFOVVBfUkVBU09OUy5SRUNPTk5FQ1QpIHtcbiAgICAgIHRoaXMucmVhY3Rpb25IYW5kbGVycy5jbGVhcigpO1xuICAgIH1cblxuICAgIGlmIChyZWFzb24gIT09IENMRUFOVVBfUkVBU09OUy5SRUNPTk5FQ1QpIHtcbiAgICAgIHRoaXMubWVzc2FnZVF1ZXVlID0gW107XG4gICAgfVxuXG4gICAgaWYgKHJlYXNvbiA9PT0gQ0xFQU5VUF9SRUFTT05TLk1BTlVBTCAmJiB0aGlzLnNvY2tldCkge1xuICAgICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5zb2NrZXQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChyZWFzb24gPT09IENMRUFOVVBfUkVBU09OUy5NQU5VQUwpIHtcbiAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xuICAgICAgdGhpcy5pc1JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5jb25uZWN0aW9uUHJvbWlzZSA9IG51bGw7XG4gICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5jbGVhbnVwKENMRUFOVVBfUkVBU09OUy5NQU5VQUwpO1xuICAgIGlmICh0aGlzLnNvY2tldCkge1xuICAgICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5zb2NrZXQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUNvbm5lY3Rpb25FcnJvcihlcnJvcikge1xuICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMrKztcblxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdhdXRoJykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnd2Vic29ja2V0IGVycm9yJykpIHtcbiAgICAgIGlmICh0aGlzLnNvY2tldCkge1xuICAgICAgICB0aGlzLnNvY2tldC5pby5vcHRzLnRyYW5zcG9ydHMgPSBbJ3BvbGxpbmcnLCAnd2Vic29ja2V0J107XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPj0gdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cykge1xuICAgICAgdGhpcy5jbGVhbnVwKENMRUFOVVBfUkVBU09OUy5NQU5VQUwpO1xuICAgICAgdGhpcy5pc1JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNvY2tldEVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLnR5cGUgPT09ICdUcmFuc3BvcnRFcnJvcicpIHtcbiAgICAgIHRoaXMucmVjb25uZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgc3RhcnRIZWFydGJlYXQoKSB7XG4gICAgaWYgKHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRJbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLnNvY2tldD8uY29ubmVjdGVkKSB7XG4gICAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ3BpbmcnLCBudWxsLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cChDTEVBTlVQX1JFQVNPTlMuTUFOVUFMKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwKENMRUFOVVBfUkVBU09OUy5NQU5VQUwpO1xuICAgICAgfVxuICAgIH0sIDI1MDAwKTtcbiAgfVxuXG4gIGdldFNvY2tldCgpIHtcbiAgICByZXR1cm4gdGhpcy5zb2NrZXQ7XG4gIH1cblxuICBxdWV1ZU1lc3NhZ2UoZXZlbnQsIGRhdGEpIHtcbiAgICBjb25zdCBtZXNzYWdlID0geyBldmVudCwgZGF0YSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH07XG4gICAgdGhpcy5tZXNzYWdlUXVldWUucHVzaChtZXNzYWdlKTtcbiAgfVxuXG4gIHByb2Nlc3NNZXNzYWdlUXVldWUoKSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB2YWxpZE1lc3NhZ2VzID0gdGhpcy5tZXNzYWdlUXVldWUuZmlsdGVyKG1zZyA9PiBub3cgLSBtc2cudGltZXN0YW1wIDwgMzAwMDAwKTtcblxuICAgIHdoaWxlICh2YWxpZE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZE1lc3NhZ2VzLnNoaWZ0KCk7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnNvY2tldC5lbWl0KG1lc3NhZ2UuZXZlbnQsIG1lc3NhZ2UuZGF0YSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBTaWxlbnQgZXJyb3IgaGFuZGxpbmdcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1lc3NhZ2VRdWV1ZSA9IHZhbGlkTWVzc2FnZXM7XG4gIH1cblxuICBhc3luYyBlbWl0KGV2ZW50LCBkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5zb2NrZXQ/LmNvbm5lY3RlZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3QoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNvY2tldD8uY29ubmVjdGVkKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQnKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1NvY2tldCBldmVudCB0aW1lb3V0JykpO1xuICAgICAgICB9LCAxMDAwMCk7XG5cbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChldmVudCwgZGF0YSwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIGlmIChyZXNwb25zZT8uZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChyZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5xdWV1ZU1lc3NhZ2UoZXZlbnQsIGRhdGEpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgb24oZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldCkge1xuICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMuc2V0KGV2ZW50LCBjYWxsYmFjayk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zb2NrZXQub24oZXZlbnQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9mZihldmVudCwgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuc29ja2V0KSB7XG4gICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5kZWxldGUoZXZlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc29ja2V0Lm9mZihldmVudCwgY2FsbGJhY2spO1xuICB9XG5cbiAgYXN5bmMgcmVjb25uZWN0KCkge1xuICAgIGlmICh0aGlzLmlzUmVjb25uZWN0aW5nKSByZXR1cm47XG5cbiAgICB0aGlzLmlzUmVjb25uZWN0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmNsZWFudXAoQ0xFQU5VUF9SRUFTT05TLlJFQ09OTkVDVCk7XG5cbiAgICBpZiAodGhpcy5zb2NrZXQpIHtcbiAgICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMuc29ja2V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHRoaXMucmV0cnlEZWxheSkpO1xuICAgICAgYXdhaXQgdGhpcy5jb25uZWN0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaXNSZWNvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3RlZCAmJiB0aGlzLnNvY2tldD8uY29ubmVjdGVkO1xuICB9XG5cbiAgZ2V0Q29ubmVjdGlvblF1YWxpdHkoKSB7XG4gICAgaWYgKCF0aGlzLnNvY2tldD8uY29ubmVjdGVkKSByZXR1cm4gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgaWYgKHRoaXMuaXNSZWNvbm5lY3RpbmcpIHJldHVybiAncmVjb25uZWN0aW5nJztcbiAgICBpZiAodGhpcy5zb2NrZXQuY29ubj8udHJhbnNwb3J0Py5uYW1lID09PSAncG9sbGluZycpIHJldHVybiAncG9vcic7XG4gICAgcmV0dXJuICdnb29kJztcbiAgfVxuXG4gIGFzeW5jIGFkZFJlYWN0aW9uKG1lc3NhZ2VJZCwgcmVhY3Rpb24sIHVzZXIpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5lbWl0KCdtZXNzYWdlUmVhY3Rpb24nLCB7XG4gICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgcmVhY3Rpb24sXG4gICAgICAgIGFkZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbW92ZVJlYWN0aW9uKG1lc3NhZ2VJZCwgcmVhY3Rpb24sIHVzZXIpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5lbWl0KCdtZXNzYWdlUmVhY3Rpb24nLCB7XG4gICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgcmVhY3Rpb24sXG4gICAgICAgIGFkZDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBvblJlYWN0aW9uVXBkYXRlKGhhbmRsZXIpIHtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICB9XG4gICAgdGhpcy5yZWFjdGlvbkhhbmRsZXJzLmFkZChoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gdGhpcy5yZWFjdGlvbkhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVJlYWN0aW9uKG1lc3NhZ2VJZCwgcmVhY3Rpb24sIHVzZXIpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5lbWl0KCdtZXNzYWdlUmVhY3Rpb24nLCB7XG4gICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgcmVhY3Rpb24sXG4gICAgICAgIHRvZ2dsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBzb2NrZXRTZXJ2aWNlID0gbmV3IFNvY2tldFNlcnZpY2UoKTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7XG4gICAgaWYgKCFzb2NrZXRTZXJ2aWNlLmlzQ29ubmVjdGVkKCkgJiYgIXNvY2tldFNlcnZpY2UuaXNSZWNvbm5lY3RpbmcpIHtcbiAgICAgIHNvY2tldFNlcnZpY2UuY29ubmVjdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7XG4gICAgc29ja2V0U2VydmljZS5kaXNjb25uZWN0KCk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzb2NrZXRTZXJ2aWNlO1xuIl0sIm5hbWVzIjpbImlvIiwiQ0xFQU5VUF9SRUFTT05TIiwiRElTQ09OTkVDVCIsIk1BTlVBTCIsIlJFQ09OTkVDVCIsIlNvY2tldFNlcnZpY2UiLCJzb2NrZXQiLCJoZWFydGJlYXRJbnRlcnZhbCIsIm1lc3NhZ2VIYW5kbGVycyIsIk1hcCIsIm1lc3NhZ2VRdWV1ZSIsInJlY29ubmVjdEF0dGVtcHRzIiwibWF4UmVjb25uZWN0QXR0ZW1wdHMiLCJpc1JlY29ubmVjdGluZyIsImNvbm5lY3Rpb25Qcm9taXNlIiwicmV0cnlEZWxheSIsInJlYWN0aW9uSGFuZGxlcnMiLCJTZXQiLCJjb25uZWN0ZWQiLCJjb25uZWN0Iiwib3B0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2xlYW51cCIsInNvY2tldFVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TT0NLRVRfVVJMIiwidHJhbnNwb3J0cyIsInJlY29ubmVjdGlvbiIsInJlY29ubmVjdGlvbkF0dGVtcHRzIiwicmVjb25uZWN0aW9uRGVsYXkiLCJyZWNvbm5lY3Rpb25EZWxheU1heCIsInRpbWVvdXQiLCJmb3JjZU5ldyIsInNldHVwRXZlbnRIYW5kbGVycyIsImVycm9yIiwiZmluYWxseSIsImNvbm5lY3Rpb25UaW1lb3V0Iiwic2V0VGltZW91dCIsIkVycm9yIiwib24iLCJjbGVhclRpbWVvdXQiLCJzdGFydEhlYXJ0YmVhdCIsInJlYXNvbiIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwiZGF0YSIsImhhbmRsZVNvY2tldEVycm9yIiwiYXR0ZW1wdE51bWJlciIsInByb2Nlc3NNZXNzYWdlUXVldWUiLCJmb3JFYWNoIiwiaGFuZGxlciIsImNsZWFySW50ZXJ2YWwiLCJjbGVhciIsImRpc2Nvbm5lY3QiLCJoYW5kbGVDb25uZWN0aW9uRXJyb3IiLCJpbmNsdWRlcyIsIm9wdHMiLCJ0eXBlIiwicmVjb25uZWN0Iiwic2V0SW50ZXJ2YWwiLCJlbWl0IiwiZ2V0U29ja2V0IiwicXVldWVNZXNzYWdlIiwiZXZlbnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicHVzaCIsInZhbGlkTWVzc2FnZXMiLCJmaWx0ZXIiLCJtc2ciLCJsZW5ndGgiLCJzaGlmdCIsInJlc3BvbnNlIiwiY2FsbGJhY2siLCJzZXQiLCJvZmYiLCJkZWxldGUiLCJpc0Nvbm5lY3RlZCIsImdldENvbm5lY3Rpb25RdWFsaXR5IiwiY29ubiIsInRyYW5zcG9ydCIsIm5hbWUiLCJhZGRSZWFjdGlvbiIsIm1lc3NhZ2VJZCIsInJlYWN0aW9uIiwidXNlciIsImFkZCIsInJlbW92ZVJlYWN0aW9uIiwib25SZWFjdGlvblVwZGF0ZSIsInRvZ2dsZVJlYWN0aW9uIiwidG9nZ2xlIiwic29ja2V0U2VydmljZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./services/socket.js\n");

/***/ }),

/***/ "(pages-dir-node)/./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "(pages-dir-node)/./utils/colorUtils.js":
/*!*****************************!*\
  !*** ./utils/colorUtils.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateColorFromEmail: () => (/* binding */ generateColorFromEmail),\n/* harmony export */   getConsistentAvatarStyles: () => (/* binding */ getConsistentAvatarStyles),\n/* harmony export */   getContrastTextColor: () => (/* binding */ getContrastTextColor)\n/* harmony export */ });\n// utils/colorUtils.js\n// 전역 색상 캐시 맵\nconst globalColorCache = new Map();\n// 사용자 색상 팔레트 (Vapor UI 색상 토큰 기반)\nconst USER_COLORS = [\n    '#d54049',\n    '#ca4676',\n    '#b148cb',\n    '#805ceb',\n    '#3174dc',\n    '#0d8298',\n    '#058765',\n    '#4c850e',\n    '#a26c01',\n    '#cd4d0a',\n    '#f26394',\n    '#9a83f8' // violet-400\n];\n// 이메일로부터 고유한 색상 생성\nconst generateColorFromEmail = (email)=>{\n    if (!email) return '#3174dc'; // default blue-500\n    // 캐시된 색상이 있는지 확인\n    if (globalColorCache.has(email)) {\n        return globalColorCache.get(email);\n    }\n    // 해시 생성\n    let hash = 0;\n    for(let i = 0; i < email.length; i++){\n        hash = (hash << 5) - hash + email.charCodeAt(i);\n        hash = hash & hash;\n    }\n    // 색상 선택\n    const color = USER_COLORS[Math.abs(hash) % USER_COLORS.length];\n    globalColorCache.set(email, color);\n    return color;\n};\n// 배경색에 따른 텍스트 색상 계산\nconst getContrastTextColor = (backgroundColor)=>{\n    if (!backgroundColor) return '#000000';\n    // RGB 변환\n    const r = parseInt(backgroundColor.slice(1, 3), 16);\n    const g = parseInt(backgroundColor.slice(3, 5), 16);\n    const b = parseInt(backgroundColor.slice(5, 7), 16);\n    // YIQ 명도 계산\n    const yiq = (r * 299 + g * 587 + b * 114) / 1000;\n    return yiq >= 128 ? '#000000' : '#FFFFFF';\n};\n// 이메일에 대한 일관된 아바타 스타일 반환\nconst getConsistentAvatarStyles = (email)=>{\n    if (!email) return {};\n    const backgroundColor = generateColorFromEmail(email);\n    const color = getContrastTextColor(backgroundColor);\n    return {\n        backgroundColor,\n        color\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3V0aWxzL2NvbG9yVXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsc0JBQXNCO0FBRXRCLGFBQWE7QUFDYixNQUFNQSxtQkFBbUIsSUFBSUM7QUFFN0IsaUNBQWlDO0FBQ2pDLE1BQU1DLGNBQWM7SUFDbEI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLFVBQVcsYUFBYTtDQUN6QjtBQUVELG1CQUFtQjtBQUNaLE1BQU1DLHlCQUF5QixDQUFDQztJQUNyQyxJQUFJLENBQUNBLE9BQU8sT0FBTyxXQUFXLG1CQUFtQjtJQUVqRCxpQkFBaUI7SUFDakIsSUFBSUosaUJBQWlCSyxHQUFHLENBQUNELFFBQVE7UUFDL0IsT0FBT0osaUJBQWlCTSxHQUFHLENBQUNGO0lBQzlCO0lBRUEsUUFBUTtJQUNSLElBQUlHLE9BQU87SUFDWCxJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUosTUFBTUssTUFBTSxFQUFFRCxJQUFLO1FBQ3JDRCxPQUFPLENBQUVBLFFBQVEsS0FBS0EsT0FBUUgsTUFBTU0sVUFBVSxDQUFDRjtRQUMvQ0QsT0FBT0EsT0FBT0E7SUFDaEI7SUFFQSxRQUFRO0lBQ1IsTUFBTUksUUFBUVQsV0FBVyxDQUFDVSxLQUFLQyxHQUFHLENBQUNOLFFBQVFMLFlBQVlPLE1BQU0sQ0FBQztJQUM5RFQsaUJBQWlCYyxHQUFHLENBQUNWLE9BQU9PO0lBRTVCLE9BQU9BO0FBQ1QsRUFBRTtBQUVGLG9CQUFvQjtBQUNiLE1BQU1JLHVCQUF1QixDQUFDQztJQUNuQyxJQUFJLENBQUNBLGlCQUFpQixPQUFPO0lBRTdCLFNBQVM7SUFDVCxNQUFNQyxJQUFJQyxTQUFTRixnQkFBZ0JHLEtBQUssQ0FBQyxHQUFHLElBQUk7SUFDaEQsTUFBTUMsSUFBSUYsU0FBU0YsZ0JBQWdCRyxLQUFLLENBQUMsR0FBRyxJQUFJO0lBQ2hELE1BQU1FLElBQUlILFNBQVNGLGdCQUFnQkcsS0FBSyxDQUFDLEdBQUcsSUFBSTtJQUVoRCxZQUFZO0lBQ1osTUFBTUcsTUFBTSxDQUFDLElBQUssTUFBUUYsSUFBSSxNQUFRQyxJQUFJLEdBQUcsSUFBSztJQUNsRCxPQUFPQyxPQUFPLE1BQU0sWUFBWTtBQUNsQyxFQUFFO0FBRUYseUJBQXlCO0FBQ2xCLE1BQU1DLDRCQUE0QixDQUFDbkI7SUFDeEMsSUFBSSxDQUFDQSxPQUFPLE9BQU8sQ0FBQztJQUNwQixNQUFNWSxrQkFBa0JiLHVCQUF1QkM7SUFDL0MsTUFBTU8sUUFBUUkscUJBQXFCQztJQUNuQyxPQUFPO1FBQUVBO1FBQWlCTDtJQUFNO0FBQ2xDLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdW5zZW9wYXJrL0Rlc2t0b3Ava3RiLUJvb3RjYW1wQ2hhdC9hcHBzL2Zyb250ZW5kL3V0aWxzL2NvbG9yVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdXRpbHMvY29sb3JVdGlscy5qc1xuXG4vLyDsoITsl60g7IOJ7IOBIOy6kOyLnCDrp7VcbmNvbnN0IGdsb2JhbENvbG9yQ2FjaGUgPSBuZXcgTWFwKCk7XG5cbi8vIOyCrOyaqeyekCDsg4nsg4Eg7YyU66CI7Yq4IChWYXBvciBVSSDsg4nsg4Eg7Yag7YGwIOq4sOuwmClcbmNvbnN0IFVTRVJfQ09MT1JTID0gW1xuICAnI2Q1NDA0OScsIC8vIHJlZC01MDBcbiAgJyNjYTQ2NzYnLCAvLyBwaW5rLTUwMFxuICAnI2IxNDhjYicsIC8vIGdyYXBlLTUwMFxuICAnIzgwNWNlYicsIC8vIHZpb2xldC01MDBcbiAgJyMzMTc0ZGMnLCAvLyBibHVlLTUwMFxuICAnIzBkODI5OCcsIC8vIGN5YW4tNTAwXG4gICcjMDU4NzY1JywgLy8gZ3JlZW4tNTAwXG4gICcjNGM4NTBlJywgLy8gbGltZS01MDBcbiAgJyNhMjZjMDEnLCAvLyB5ZWxsb3ctNTAwXG4gICcjY2Q0ZDBhJywgLy8gb3JhbmdlLTUwMFxuICAnI2YyNjM5NCcsIC8vIHBpbmstNDAwXG4gICcjOWE4M2Y4JyAgLy8gdmlvbGV0LTQwMFxuXTtcblxuLy8g7J2066mU7J2866Gc67aA7YSwIOqzoOycoO2VnCDsg4nsg4Eg7IOd7ISxXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVDb2xvckZyb21FbWFpbCA9IChlbWFpbCkgPT4ge1xuICBpZiAoIWVtYWlsKSByZXR1cm4gJyMzMTc0ZGMnOyAvLyBkZWZhdWx0IGJsdWUtNTAwXG5cbiAgLy8g7LqQ7Iuc65CcIOyDieyDgeydtCDsnojripTsp4Ag7ZmV7J24XG4gIGlmIChnbG9iYWxDb2xvckNhY2hlLmhhcyhlbWFpbCkpIHtcbiAgICByZXR1cm4gZ2xvYmFsQ29sb3JDYWNoZS5nZXQoZW1haWwpO1xuICB9XG5cbiAgLy8g7ZW07IucIOyDneyEsVxuICBsZXQgaGFzaCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZW1haWwubGVuZ3RoOyBpKyspIHtcbiAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBlbWFpbC5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggPSBoYXNoICYgaGFzaDtcbiAgfVxuXG4gIC8vIOyDieyDgSDshKDtg51cbiAgY29uc3QgY29sb3IgPSBVU0VSX0NPTE9SU1tNYXRoLmFicyhoYXNoKSAlIFVTRVJfQ09MT1JTLmxlbmd0aF07XG4gIGdsb2JhbENvbG9yQ2FjaGUuc2V0KGVtYWlsLCBjb2xvcik7XG4gIFxuICByZXR1cm4gY29sb3I7XG59O1xuXG4vLyDrsLDqsr3sg4nsl5Ag65Sw66W4IO2FjeyKpO2KuCDsg4nsg4Eg6rOE7IKwXG5leHBvcnQgY29uc3QgZ2V0Q29udHJhc3RUZXh0Q29sb3IgPSAoYmFja2dyb3VuZENvbG9yKSA9PiB7XG4gIGlmICghYmFja2dyb3VuZENvbG9yKSByZXR1cm4gJyMwMDAwMDAnO1xuICBcbiAgLy8gUkdCIOuzgO2ZmFxuICBjb25zdCByID0gcGFyc2VJbnQoYmFja2dyb3VuZENvbG9yLnNsaWNlKDEsIDMpLCAxNik7XG4gIGNvbnN0IGcgPSBwYXJzZUludChiYWNrZ3JvdW5kQ29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgY29uc3QgYiA9IHBhcnNlSW50KGJhY2tncm91bmRDb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICBcbiAgLy8gWUlRIOuqheuPhCDqs4TsgrBcbiAgY29uc3QgeWlxID0gKChyICogMjk5KSArIChnICogNTg3KSArIChiICogMTE0KSkgLyAxMDAwO1xuICByZXR1cm4geWlxID49IDEyOCA/ICcjMDAwMDAwJyA6ICcjRkZGRkZGJztcbn07XG5cbi8vIOydtOuplOydvOyXkCDrjIDtlZwg7J286rSA65CcIOyVhOuwlO2DgCDsiqTtg4Dsnbwg67CY7ZmYXG5leHBvcnQgY29uc3QgZ2V0Q29uc2lzdGVudEF2YXRhclN0eWxlcyA9IChlbWFpbCkgPT4ge1xuICBpZiAoIWVtYWlsKSByZXR1cm4ge307XG4gIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IGdlbmVyYXRlQ29sb3JGcm9tRW1haWwoZW1haWwpO1xuICBjb25zdCBjb2xvciA9IGdldENvbnRyYXN0VGV4dENvbG9yKGJhY2tncm91bmRDb2xvcik7XG4gIHJldHVybiB7IGJhY2tncm91bmRDb2xvciwgY29sb3IgfTtcbn07Il0sIm5hbWVzIjpbImdsb2JhbENvbG9yQ2FjaGUiLCJNYXAiLCJVU0VSX0NPTE9SUyIsImdlbmVyYXRlQ29sb3JGcm9tRW1haWwiLCJlbWFpbCIsImhhcyIsImdldCIsImhhc2giLCJpIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImNvbG9yIiwiTWF0aCIsImFicyIsInNldCIsImdldENvbnRyYXN0VGV4dENvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiciIsInBhcnNlSW50Iiwic2xpY2UiLCJnIiwiYiIsInlpcSIsImdldENvbnNpc3RlbnRBdmF0YXJTdHlsZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./utils/colorUtils.js\n");

/***/ }),

/***/ "../../../shared/lib/no-fallback-error.external":
/*!*********************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external.js" ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external.js");

/***/ }),

/***/ "@base-ui-components/react":
/*!********************************************!*\
  !*** external "@base-ui-components/react" ***!
  \********************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react");;

/***/ }),

/***/ "@base-ui-components/react/avatar":
/*!***************************************************!*\
  !*** external "@base-ui-components/react/avatar" ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/avatar");;

/***/ }),

/***/ "@base-ui-components/react/checkbox":
/*!*****************************************************!*\
  !*** external "@base-ui-components/react/checkbox" ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/checkbox");;

/***/ }),

/***/ "@base-ui-components/react/dialog":
/*!***************************************************!*\
  !*** external "@base-ui-components/react/dialog" ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/dialog");;

/***/ }),

/***/ "@base-ui-components/react/field":
/*!**************************************************!*\
  !*** external "@base-ui-components/react/field" ***!
  \**************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/field");;

/***/ }),

/***/ "@base-ui-components/react/popover":
/*!****************************************************!*\
  !*** external "@base-ui-components/react/popover" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/popover");;

/***/ }),

/***/ "@base-ui-components/react/toast":
/*!**************************************************!*\
  !*** external "@base-ui-components/react/toast" ***!
  \**************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/toast");;

/***/ }),

/***/ "@base-ui-components/react/tooltip":
/*!****************************************************!*\
  !*** external "@base-ui-components/react/tooltip" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/tooltip");;

/***/ }),

/***/ "@base-ui-components/react/use-render":
/*!*******************************************************!*\
  !*** external "@base-ui-components/react/use-render" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/react/use-render");;

/***/ }),

/***/ "@base-ui-components/utils/empty":
/*!**************************************************!*\
  !*** external "@base-ui-components/utils/empty" ***!
  \**************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/utils/empty");;

/***/ }),

/***/ "@base-ui-components/utils/useAnimationFrame":
/*!**************************************************************!*\
  !*** external "@base-ui-components/utils/useAnimationFrame" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/utils/useAnimationFrame");;

/***/ }),

/***/ "@base-ui-components/utils/useControlled":
/*!**********************************************************!*\
  !*** external "@base-ui-components/utils/useControlled" ***!
  \**********************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/utils/useControlled");;

/***/ }),

/***/ "@base-ui-components/utils/useEventCallback":
/*!*************************************************************!*\
  !*** external "@base-ui-components/utils/useEventCallback" ***!
  \*************************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/utils/useEventCallback");;

/***/ }),

/***/ "@base-ui-components/utils/useIsoLayoutEffect":
/*!***************************************************************!*\
  !*** external "@base-ui-components/utils/useIsoLayoutEffect" ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/utils/useIsoLayoutEffect");;

/***/ }),

/***/ "@base-ui-components/utils/useLatestRef":
/*!*********************************************************!*\
  !*** external "@base-ui-components/utils/useLatestRef" ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@base-ui-components/utils/useLatestRef");;

/***/ }),

/***/ "@emoji-mart/react":
/*!************************************!*\
  !*** external "@emoji-mart/react" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@emoji-mart/react");

/***/ }),

/***/ "@vanilla-extract/css-utils":
/*!*********************************************!*\
  !*** external "@vanilla-extract/css-utils" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@vanilla-extract/css-utils");

/***/ }),

/***/ "@vanilla-extract/dynamic":
/*!*******************************************!*\
  !*** external "@vanilla-extract/dynamic" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@vanilla-extract/dynamic");

/***/ }),

/***/ "@vanilla-extract/recipes/createRuntimeFn":
/*!***********************************************************!*\
  !*** external "@vanilla-extract/recipes/createRuntimeFn" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@vanilla-extract/recipes/createRuntimeFn");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = import("axios");;

/***/ }),

/***/ "clsx":
/*!***********************!*\
  !*** external "clsx" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = import("clsx");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "rainbow-sprinkles/createRuntimeFn":
/*!****************************************************!*\
  !*** external "rainbow-sprinkles/createRuntimeFn" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("rainbow-sprinkles/createRuntimeFn");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react-toastify":
/*!*********************************!*\
  !*** external "react-toastify" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-toastify");;

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc","vendor-chunks/@vapor-ui","vendor-chunks/react-toastify","vendor-chunks/@emoji-mart"], () => (__webpack_exec__("(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat%2F%5Broom%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fchat%2F%5Broom%5D.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();